!function(t){function __webpack_require__(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}var a={};__webpack_require__.m=t,__webpack_require__.c=a,__webpack_require__.d=function(t,a,e){__webpack_require__.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},__webpack_require__.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,a){if(1&a&&(t=__webpack_require__(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(__webpack_require__.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var i in t)__webpack_require__.d(e,i,function(a){return t[a]}.bind(null,i));return e},__webpack_require__.n=function(t){var a=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(a,"a",a),a},__webpack_require__.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=2)}({"./node_modules/@babel/runtime/helpers/assertThisInitialized.js":function(t){t.exports=function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(t){t.exports=function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}},"./node_modules/@babel/runtime/helpers/createClass.js":function(t){function _defineProperties(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function _createClass(t,a,e){return a&&_defineProperties(t.prototype,a),e&&_defineProperties(t,e),t}},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(t){t.exports=function _defineProperty(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}},"./node_modules/@babel/runtime/helpers/getPrototypeOf.js":function(t){function _getPrototypeOf(a){return t.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(a)}t.exports=_getPrototypeOf},"./node_modules/@babel/runtime/helpers/inherits.js":function(t,a,e){var i=e("./node_modules/@babel/runtime/helpers/setPrototypeOf.js");t.exports=function _inherits(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),a&&i(t,a)}},"./node_modules/@babel/runtime/helpers/objectSpread.js":function(t,a,e){var i=e("./node_modules/@babel/runtime/helpers/defineProperty.js");t.exports=function _objectSpread(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{},s=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.forEach(function(a){i(t,a,e[a])})}return t}},"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":function(t,a,e){var i=e("./node_modules/@babel/runtime/helpers/typeof.js"),s=e("./node_modules/@babel/runtime/helpers/assertThisInitialized.js");t.exports=function _possibleConstructorReturn(t,a){return!a||"object"!==i(a)&&"function"!==typeof a?s(t):a}},"./node_modules/@babel/runtime/helpers/setPrototypeOf.js":function(t){function _setPrototypeOf(a,e){return t.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,a){return t.__proto__=a,t},_setPrototypeOf(a,e)}t.exports=_setPrototypeOf},"./node_modules/@babel/runtime/helpers/typeof.js":function(t){function _typeof2(t){return(_typeof2="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function _typeof2(t){return typeof t}:function _typeof2(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(a){return"function"===typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?t.exports=_typeof=function _typeof(t){return _typeof2(t)}:t.exports=_typeof=function _typeof(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)},_typeof(a)}t.exports=_typeof},"./node_modules/whatwg-fetch/fetch.js":function(t,a,e){"use strict";function normalizeName(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function normalizeValue(t){return"string"!==typeof t&&(t=String(t)),t}function iteratorFor(t){var a={next:function(){var a=t.shift();return{done:void 0===a,value:a}}};return i.iterable&&(a[Symbol.iterator]=function(){return a}),a}function Headers(t){this.map={},t instanceof Headers?t.forEach(function(t,a){this.append(a,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(a){this.append(a,t[a])},this)}function consumed(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function fileReaderReady(t){return new Promise(function(a,e){t.onload=function(){a(t.result)},t.onerror=function(){e(t.error)}})}function readBlobAsArrayBuffer(t){var a=new FileReader,e=fileReaderReady(a);return a.readAsArrayBuffer(t),e}function bufferClone(t){if(t.slice)return t.slice(0);var a=new Uint8Array(t.byteLength);return a.set(new Uint8Array(t)),a.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:i.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():i.arrayBuffer&&i.blob&&function isDataView(t){return t&&DataView.prototype.isPrototypeOf(t)}(t)?(this._bodyArrayBuffer=bufferClone(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||r(t))?this._bodyArrayBuffer=bufferClone(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var t=consumed(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var t=consumed(this);if(t)return t;if(this._bodyBlob)return function readBlobAsText(t){var a=new FileReader,e=fileReaderReady(a);return a.readAsText(t),e}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function readArrayBufferAsText(t){for(var a=new Uint8Array(t),e=new Array(a.length),i=0;i<a.length;i++)e[i]=String.fromCharCode(a[i]);return e.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}function Request(t,a){var e=(a=a||{}).body;if(t instanceof Request){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,a.headers||(this.headers=new Headers(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,e||null==t._bodyInit||(e=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=a.credentials||this.credentials||"same-origin",!a.headers&&this.headers||(this.headers=new Headers(a.headers)),this.method=function normalizeMethod(t){var a=t.toUpperCase();return n.indexOf(a)>-1?a:t}(a.method||this.method||"GET"),this.mode=a.mode||this.mode||null,this.signal=a.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&e)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e)}function decode(t){var a=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),i=e.shift().replace(/\+/g," "),s=e.join("=").replace(/\+/g," ");a.append(decodeURIComponent(i),decodeURIComponent(s))}}),a}function Response(t,a){a||(a={}),this.type="default",this.status=void 0===a.status?200:a.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in a?a.statusText:"OK",this.headers=new Headers(a.headers),this.url=a.url||"",this._initBody(t)}function fetch(t,a){return new Promise(function(e,s){function abortXhr(){n.abort()}var r=new Request(t,a);if(r.signal&&r.signal.aborted)return s(new h("Aborted","AbortError"));var n=new XMLHttpRequest;n.onload=function(){var t={status:n.status,statusText:n.statusText,headers:function parseHeaders(t){var a=new Headers;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),i=e.shift().trim();if(i){var s=e.join(":").trim();a.append(i,s)}}),a}(n.getAllResponseHeaders()||"")};t.url="responseURL"in n?n.responseURL:t.headers.get("X-Request-URL");var a="response"in n?n.response:n.responseText;e(new Response(a,t))},n.onerror=function(){s(new TypeError("Network request failed"))},n.ontimeout=function(){s(new TypeError("Network request failed"))},n.onabort=function(){s(new h("Aborted","AbortError"))},n.open(r.method,r.url,!0),"include"===r.credentials?n.withCredentials=!0:"omit"===r.credentials&&(n.withCredentials=!1),"responseType"in n&&i.blob&&(n.responseType="blob"),r.headers.forEach(function(t,a){n.setRequestHeader(a,t)}),r.signal&&(r.signal.addEventListener("abort",abortXhr),n.onreadystatechange=function(){4===n.readyState&&r.signal.removeEventListener("abort",abortXhr)}),n.send("undefined"===typeof r._bodyInit?null:r._bodyInit)})}e.d(a,"a",function(){return fetch});var i={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(i.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(t){return t&&s.indexOf(Object.prototype.toString.call(t))>-1};Headers.prototype.append=function(t,a){t=normalizeName(t),a=normalizeValue(a);var e=this.map[t];this.map[t]=e?e+", "+a:a},Headers.prototype.delete=function(t){delete this.map[normalizeName(t)]},Headers.prototype.get=function(t){return t=normalizeName(t),this.has(t)?this.map[t]:null},Headers.prototype.has=function(t){return this.map.hasOwnProperty(normalizeName(t))},Headers.prototype.set=function(t,a){this.map[normalizeName(t)]=normalizeValue(a)},Headers.prototype.forEach=function(t,a){for(var e in this.map)this.map.hasOwnProperty(e)&&t.call(a,this.map[e],e,this)},Headers.prototype.keys=function(){var t=[];return this.forEach(function(a,e){t.push(e)}),iteratorFor(t)},Headers.prototype.values=function(){var t=[];return this.forEach(function(a){t.push(a)}),iteratorFor(t)},Headers.prototype.entries=function(){var t=[];return this.forEach(function(a,e){t.push([e,a])}),iteratorFor(t)},i.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var n=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var t=new Response(null,{status:0,statusText:""});return t.type="error",t};var o=[301,302,303,307,308];Response.redirect=function(t,a){if(-1===o.indexOf(a))throw new RangeError("Invalid status code");return new Response(null,{status:a,headers:{location:t}})};var h=self.DOMException;try{new h}catch(c){(h=function(t,a){this.message=t,this.name=a;var e=Error(t);this.stack=e.stack}).prototype=Object.create(Error.prototype),h.prototype.constructor=h}fetch.polyfill=!0,self.fetch||(self.fetch=fetch,self.Headers=Headers,self.Request=Request,self.Response=Response)},"./src/scripts/ChartTypes/AreaChart.js":function(t,a,e){"use strict";e.d(a,"a",function(){return g});var i=e("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=e.n(i),r=e("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),n=e.n(r),o=e("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=e.n(o),c=e("./node_modules/@babel/runtime/helpers/inherits.js"),l=e.n(c),d=e("./src/scripts/ChartTypes/LineChart.js"),p=e("./src/scripts/Libs/LibCanvas.js"),u=e("./src/scripts/ChartTypes/Types/Point.js"),g=function(t){function AreaChart(t,a,e){var i;return s()(this,AreaChart),(i=n()(this,h()(AreaChart).call(this,t,a,e))).isFill=!0,i.calculateDelta=function(){var t=i.showData[1].date-i.showData[2].date,a=i.techChart.connector.getCurrentTime()/1e3-i.showData[1].date,e=null,s=null;return a<t?(s=100*a/t,e=(i.chartData.spacing*s/100).toFixed(0)):e=i.chartData.spacing,e},i.drawCurrentShowData=function(t){if(i.showData[0].isCurrentData){var a=t[i.chartData.typeData],e=i.showData[0].x,s=i.getCoordinateY(parseFloat(a),i.h,i.chartData.scaleParams.minB,i.chartData.scaleParams.deltaY);i.chartData.options.Chart.autoScale&&(parseFloat(s)-i.chartData.marginTop<0||parseFloat(s)+i.chartData.marginBottom>i.h)&&(i.chartData.scaleParams=i.getScaleParams(i.selectedData,i.h,i.chartData.precission),i.resizeShowDataValuesY(i.showData,i.h,i.chartData.scaleParams),i.chartData.options.Chart.scaleSeriesOnly||i.resizeShowDataByTrendIndicators(),i.draw(i.showData,i.h),i.valueAxis=i.getValueAxis(i.chartData.scaleParams.minB,i.chartData.scaleParams.maxB,5,i.w,i.h,i.chartData.options.Chart.scalesFontSize,i.chartData.precission),i.clearGrid(),i.drawValueAxis(i.valueAxis),i.drawOscillatorChartsAxis(),i.drawTimeAxis(i.timeAxis),i.drawChartBorder()),i.curX&&i.curY&&(i.clearInfo(),i.drawActiveDrawingObjects(),i.drawCrosshair(i.canvasInfoContext,null,i.techChart.configuration.modules.headerButtons.createPipsButton)),i.showData[0]=new u.a(a,i.showData[0].date,e,s),i.showData[0].isCurrentData=!0;var r=[];r.push([i.showData[0].x,i.showData[0].y]),i.showData[1]?(r.push([i.showData[1].x,i.showData[1].y]),r.push([i.showData[1].x,i.h])):(r.push([i.showData[0].x,i.showData[0].y]),r.push([i.showData[0].x,i.h])),r.push([i.showData[0].x,i.h]);var n=i.canvasRateNormalContext;if(i.isFill){var o=n.createLinearGradient(0,i.h/7,0,i.h);o.addColorStop(0,i.chartData.colors.AreaChart.colorStop),o.addColorStop(1,i.chartData.colors.AreaChart.colorStopEnd),p.a.drawPolygon(null,n,r,o,null,null,null,null,.5)}p.a.drawPolygon(null,n,r,null,i.chartData.colors.AreaChart.colorLine,!1,i.chartData.options.AreaChart.widthLine,r.length-2)}},i.draw=function(t,a){if(i.chartData.drawingObjects.length)for(var e=0;e<i.chartData.drawingObjects.length;e++)"active"===i.chartData.drawingObjects[e].state&&p.a.clearRect(null,i.canvasDrawingActiveContext,0,0,i.canvasDrawingActive.width,i.canvasDrawingActive.height),i.redrawActiveDrawingObjects(!0);if(i.drawChart(t,a)){for(var s=[],r=t[0].isCurrentData?1:0,n=0;n<t.length;n++){if(isNaN(parseFloat(t[n].x))||isNaN(parseFloat(t[n].y)))return;t[n].isCurrentData||s.push([t[n].x,t[n].y])}s.push([t[t.length-1].x,i.h]),t[r]?s.push([t[r].x,i.h]):s.push([t[0].x,i.h]);var o=i.canvasDataNormalContext;if(i.isFill){var h=o.createLinearGradient(0,i.h/7,0,i.h);h.addColorStop(0,i.chartData.colors.AreaChart.colorStop),h.addColorStop(1,i.chartData.colors.AreaChart.colorStopEnd),p.a.drawPolygon(null,o,s,h,null,null,null,null,.5)}p.a.drawPolygon(null,o,s,null,i.chartData.colors.AreaChart.colorLine,!1,i.chartData.options.AreaChart.widthLine,s.length-2)}},i}return l()(AreaChart,t),AreaChart}(d.a)},"./src/scripts/ChartTypes/BarChart.js":function(t,a,e){"use strict";function Bar(t,a,e,i,s,r,n,o,h){this.low=t,this.high=a,this.open=e,this.close=i,this.date=s,this.x=r,this.y=n,this.scale=o,this.line,this.body,this.crossPosition={x:"0.0",y:"0.0"},this.isCurrentData,this.lineWidth=2,this.useCanvas=h}var i=e("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=e.n(i),r=e("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),n=e.n(r),o=e("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=e.n(o),c=e("./node_modules/@babel/runtime/helpers/inherits.js"),l=e.n(c),d=e("./src/scripts/preBuild/Chart.js"),p=e("./src/scripts/Libs/LibCanvas.js");Bar.prototype.show=function(t,a,e,i){if(t||!this.useCanvas){var s,r,n=e.BarChart.candleBool,o=e.BarChart.candleBear,h=parseFloat(this.high),c=parseFloat(this.low),l=parseFloat(this.open),d=parseFloat(this.close),u=parseFloat(this.x),g=parseFloat(this.y),D=u,f=g,w=g-Math.abs(c-h)/this.scale,y=a,v=t.getContext("2d");r=l>d?o:n;var m=this.lineWidth,b=p.a.getPosition(D,m);p.a.drawLine(null,v,b,Math.round(f),b,Math.round(w),e.Chart.backgroundColor,[],m),p.a.drawLine(null,v,b,Math.round(f),b,Math.round(w),r,[],m),D=Math.round(b),s=Math.round(D-parseFloat(y)/2),f=g-Math.abs(c-l)/this.scale;var x=p.a.getPosition(f,m);i.needOpen||(p.a.drawLine(null,v,D,x,s,x,e.Chart.backgroundColor,[],m),p.a.drawLine(null,v,D,x,s,x,r,[],m)),s=Math.round(D+parseFloat(y)/2),x=p.a.getPosition(g-Math.abs(c-d)/this.scale,m),p.a.drawLine(null,v,D,x,s,x,e.Chart.backgroundColor,[],m),p.a.drawLine(null,v,D,x,s,x,r,[],m)}},e.d(a,"a",function(){return u});var u=function(t){function BarChart(t,a,e){var i;return s()(this,BarChart),(i=n()(this,h()(BarChart).call(this,t,a,e))).getFractalItemY=function(t,a){return"low"===a?i.toYPixels(t.fractalLow):"high"===a?i.toYPixels(t.fractalHigh):void 0},i.drawCrosshair=function(t,a,e){var s=i.drawCrosshairChart(t);if(s){var r=i.chartData.colors.Chart.colorCrossHair,n=i.curX,o=(i.curY,i.chartData.candleWidth),h=parseFloat(s.high),c=parseFloat(s.low),l=parseFloat(s.open),d=parseFloat(s.close),u=s.lineWidth+2,g=p.a.getPosition(parseFloat(s.x),s.lineWidth),D=p.a.getPosition(parseFloat(s.y),s.lineWidth),f=p.a.getPosition(parseFloat(g),u),w=p.a.getPosition(parseFloat(D),u),y=f,v=p.a.getPosition(p.a.getPosition(w-(h-c)/s.scale,s.lineWidth),u);n<i.w-8&&(i.canvasInfoContext.save(),i.canvasInfoContext.beginPath(),i.canvasInfoContext.rect(0,0,i.w-8,i.h),i.canvasInfoContext.closePath(),i.canvasInfoContext.clip(),p.a.drawLine(null,t,f,w,y,v,r,[],u),y=p.a.getPosition(f-parseFloat(o)/2,u),v=w=p.a.getPosition(w-Math.abs(c-l)/s.scale,u),i.chartData.options.BarChart.needOpen||p.a.drawLine(null,t,f+1,w,y,v,r,[],u),f=p.a.getPosition(parseFloat(s.x),u),w=p.a.getPosition(parseFloat(s.y),u),y=p.a.getPosition(f+parseFloat(o)/2,u),v=w=p.a.getPosition(w-Math.abs(c-d)/s.scale,u),p.a.drawLine(null,t,f,w,y,v,r,[],u),s.show(t.canvas,i.chartData.candleWidth,i.chartData.colors,i.chartData.options.BarChart),s.show(t.canvas,i.chartData.candleWidth,i.chartData.colors,i.chartData.options.BarChart),e&&i.chartData.isPipsShow&&i.chartData.currentValue&&i.drawPips(t),i.canvasInfoContext.restore())}},i.getElementIndexByPositionX=function(t,a){if(t.length){var e=0,s=.5*i.chartData.candleWidth;if(a>=t[0].x-s)e=0;else if(t[t.length-2]&&a<t[t.length-2].x-s)e=t.length-1;else for(var r=0;r<t.length;r++)if(t[r+1]&&a<t[r].x-s&&a>=t[r+1].x-s){a=t[r+1].x,e=r+1;break}return e}},i.isPositionValid=function(){return parseFloat(i.showData[0].x)<i.w-i.chartData.rightPadding+i.chartData.spacing},i.resizeShowDataValuesY=function(t,a,e){for(var s=0;s<t.length;s++)i.resizeShowItemValuesY(t[s],a,e)},i.resizeShowItemValuesY=function(t,a,e){var s=i.getCoordinateY(t.low,a,e.minB,e.deltaY);t.y=s,t.scale=e.deltaY},i.getNumberOfDataToRight=function(t,a,e,i){return parseInt((a-e-t)/i)},i.moveElementsX=function(t,a){for(var e=0;e<t.length;e++){var s=parseFloat(t[e].x)-a;t[e-1]&&parseFloat(t[e-1].x)-s<i.chartData.spacing&&(s=parseFloat(t[e-1].x)-i.chartData.spacing),t[e].x=s.toFixed(1)}},i.moveElementsY=function(t,a){for(var e=0;e<t.length;e++){var i=parseFloat(t[e].y)-a;t[e].y=i.toFixed(1)}},i.needsElementToRight=function(t,a,e,i){return parseFloat(t[0].x)+i<a-e},i.needsElementToLeft=function(t,a){return parseFloat(t[t.length-1].x)>a},i.drawCurrentShowData=function(t,a){var e=t[i.chartData.typeData],s=parseFloat(e),r=parseFloat(i.showData[0].low),n=parseFloat(i.showData[0].high);r>s?i.showData[0].low=e:n<s&&(i.showData[0].high=e),a&&(i.showData[0].open=a[i.chartData.typeData].open,i.showData[0].close=a[i.chartData.typeData].close,i.showData[0].low=a[i.chartData.typeData].low,i.showData[0].high=a[i.chartData.typeData].high);var o=i.getCoordinateY(i.showData[0].low,i.h,i.chartData.scaleParams.minB,i.chartData.scaleParams.deltaY),h=i.getCoordinateY(i.showData[0].high,i.h,i.chartData.scaleParams.minB,i.chartData.scaleParams.deltaY);i.chartData.options.Chart.autoScale&&(parseFloat(h)-i.chartData.marginTop<0||parseFloat(o)+i.chartData.marginBottom>i.h)&&(i.chartData.scaleParams=i.getScaleParams(i.selectedData,i.h,i.chartData.precission),i.resizeShowDataValuesY(i.showData,i.h,i.chartData.scaleParams),i.chartData.options.Chart.scaleSeriesOnly||i.resizeShowDataByTrendIndicators(),i.draw(i.showData,i.h),i.valueAxis=i.getValueAxis(i.chartData.scaleParams.minB,i.chartData.scaleParams.maxB,5,i.w,i.h,i.chartData.options.Chart.scalesFontSize,i.chartData.precission),i.clearGrid(),i.drawValueAxis(i.valueAxis),i.drawOscillatorChartsAxis(),i.drawTimeAxis(i.timeAxis),i.drawChartBorder()),i.showData[0]=new Bar(i.showData[0].low,i.showData[0].high,i.showData[0].open,e,i.showData[0].date,i.showData[0].x,o,i.chartData.scaleParams.deltaY,!0),i.showData[0].isCurrentData=!0;var c=i.canvasRatePixelatedContext.canvas;i.canvasRatePixelatedContext.save(),i.canvasRatePixelatedContext.beginPath(),i.canvasRatePixelatedContext.rect(0,0,i.w-8,i.h),i.canvasRatePixelatedContext.closePath(),i.canvasRatePixelatedContext.clip(),i.showData[0].show(c,i.chartData.candleWidth,i.chartData.colors,i.chartData.options),i.canvasRatePixelatedContext.restore(),i.curX&&i.curY&&(i.clearInfo(),i.drawActiveDrawingObjects(),i.drawCrosshair(i.canvasInfoContext,null,i.techChart.configuration.modules.headerButtons.createPipsButton))},i.getCoordinateX=function(t,a,e,i,s){if(t=parseFloat(t),a=parseFloat(a),e=parseFloat(e),i=parseFloat(i),!(isNaN(t)||isNaN(a)||isNaN(e)||isNaN(i))){var r=parseFloat(t-a-i*e);return r=r>0?r:0,(r-=s).toFixed(1)}},i.processDataToShow=function(t,a,e,s,r,n,o,h){o=void 0===o?0:o,o=i.chartData.techChart.isFullScreen?1.6*o:.5*o,i.chartData.scaleParams=h||i.getScaleParams(t,r,n);for(var c=[],l=0;l<t.length;l++){var p=t[l];n||(n=d.a.countDigits(p.high));var u=i.getCoordinateX(s,a,e,l,o);if(u<=0)break;var g=i.getCoordinateY(p.low,r,i.chartData.scaleParams.minB,i.chartData.scaleParams.deltaY),D=new Bar(parseFloat(p.low).toFixed(n),parseFloat(p.high).toFixed(n),parseFloat(p.open).toFixed(n),parseFloat(p.close).toFixed(n),parseFloat(p.date),u,g,i.chartData.scaleParams.deltaY,i.useCanvas);p.isCurrentData&&(D.isCurrentData=!0),c.push(D)}return c},i.createShowDataItem=function(t,a){var e=new Bar(parseFloat(t.low).toFixed(a),parseFloat(t.high).toFixed(a),parseFloat(t.open).toFixed(a),parseFloat(t.close).toFixed(a),t.date,"0.0","0.0",1,i.useCanvas);return t.isCurrentData&&(e.isCurrentData=!0),e},i.setChartElementsSize=function(t){var a=i.getChartElementsSize();a.candleWidth&&(t.candleWidth=a.candleWidth),t.spacing=1.5*t.candleWidth},i.getMaxValue=function(t){for(var a=0,e=0;e<t.length;e++){var i=parseFloat(t[e].high);a<i&&(a=i)}return a},i.getMinValue=function(t){for(var a=Number.MAX_VALUE,e=0;e<t.length;e++){var i=parseFloat(t[e].low);a>i&&(a=i)}return a},i.deleteRedundantElements=function(t,a,e,i){for(var s=t.length-1;s>=0;s--)parseFloat(t[s].x)>e-i?t.length>1?t.splice(s,1):t[s].x=e-i:parseFloat(t[s].x)<=0&&t.length>1&&t.splice(s,1)},i.draw=function(t,a){if(i.chartData.drawingObjects.length)for(var e=0;e<i.chartData.drawingObjects.length;e++)"active"===i.chartData.drawingObjects[e].state&&p.a.clearRect(null,i.canvasDrawingActiveContext,0,0,i.canvasDrawingActive.width,i.canvasDrawingActive.height),i.redrawActiveDrawingObjects(!0);if(i.drawChart(t,a))for(var s=i.canvasDataPixelatedContext.canvas,r=0;r<t.length;r++)t[r].isCurrentData||t[r].show(s,i.chartData.candleWidth,i.chartData.colors,i.chartData.options.BarChart)},i}return l()(BarChart,t),BarChart}(d.a)},"./src/scripts/ChartTypes/CandleChart.js":function(t,a,e){"use strict";function Candle(t,a,e,i,s,r,n,o,h){this.low=t,this.high=a,this.open=e,this.close=i,this.date=s,this.x=r,this.y=n,this.scale=o,this.line,this.body,this.crossPosition={x:"0.0",y:"0.0"},this.isCurrentData,this.width,this.useCanvas=h}var i=e("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=e.n(i),r=e("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),n=e.n(r),o=e("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=e.n(o),c=e("./node_modules/@babel/runtime/helpers/inherits.js"),l=e.n(c),d=e("./src/scripts/preBuild/Chart.js"),p=e("./src/scripts/Libs/LibCanvas.js");Candle.prototype.show=function(t,a,e,i){if(t||!this.useCanvas){var s,r,n,o,h=t.getContext("2d"),c=parseFloat(this.high),l=parseFloat(this.low),d=parseFloat(this.open),u=parseFloat(this.close),g=parseFloat(this.y),D=parseFloat(this.y)-(c-l)/this.scale,f=Math.abs(d-u)/this.scale,w=f>0?f:1,y=parseFloat(this.y)+parseFloat(l-Math.max(d,u))/this.scale,v=e.CandleChart.candleBool,m=e.CandleChart.candleBear,b=e.CandleChart.candleLineBool,x=e.CandleChart.candleLineBear,C=e.CandleChart.candleBoolBorder,P=e.CandleChart.candleBearBorder;d>u?(r=m,n=x,o=P):(r=v,n=b,o=C);var T=i.widthWickLine;s=p.a.getPosition(parseFloat(this.x),T);var S=Math.round(g),O=Math.round(D);this.posWick={x:s,y1:S,y2:O,width:T},i.needWick&&p.a.drawLine(null,h,s,S,s,O,n,[],T);var L,F,B,A,k,j=a,M=2*i.widthBorderLine,E=i.widthBorderLine;j=2*((s=p.a.getPosition(parseFloat(this.x),j))-Math.round(s-j/2)),L=Math.round(y),F=Math.round(y+w),B=Math.round(y+E),A=Math.round(y+w-E),k=j-M,i.needBorder?(p.a.drawLine(null,h,s,L,s,F,o,[],j),p.a.drawLine(null,h,s,B,s,A,e.Chart.backgroundColor,[],k),p.a.drawLine(null,h,s,B,s,A,r,[],k)):(p.a.drawLine(null,h,s,L,s,F,e.Chart.backgroundColor,[],j),p.a.drawLine(null,h,s,L,s,F,r,[],j)),this.posCandle={x:s,y1:L,y2:F,width:j},this.posBorderCandle={x:s,y1:B,y2:A,width:k}}},e.d(a,"a",function(){return u});var u=function(t){function CandleChart(t,a,e){var i;return s()(this,CandleChart),(i=n()(this,h()(CandleChart).call(this,t,a,e))).constructor.name||(i.constructor.name="CandleChart"),i.getFractalItemY=function(t,a){return"low"===a?i.toYPixels(t.fractalLow):"high"===a?i.toYPixels(t.fractalHigh):void 0},i.drawCrosshair=function(t,a,e){var s=i.drawCrosshairChart(t);if(s&&i.isShowCrosshair&&(!i.chartData.editDrawingObject||!i.chartData.editDrawingObject.isFocused)&&(!i.chartData.activeDrawingObject||!i.chartData.activeDrawingObject.isFocused)){var r=i.chartData.colors.Chart.crosshair,n=(Math.round(i.chartData.candleWidth),parseFloat(s.low),parseFloat(s.open)),o=parseFloat(s.close),h=(parseFloat(s.x),parseFloat(s.y),"transparent");if(i.chartData.options[i.constructor.name].widthBorderLine,i.curX<i.w-8){var c;if(i.canvasInfoContext.save(),i.canvasInfoContext.beginPath(),i.canvasInfoContext.rect(0,0,i.w-8,i.h),i.canvasInfoContext.closePath(),i.canvasInfoContext.clip(),h=n>o?i.chartData.colors[i.constructor.name].candleBear:i.chartData.colors[i.constructor.name].candleBool,s.posWick&&s.posWick.x)c=s.posWick.x;else{if(!s.posCandle||!s.posCandle.x)return;c=s.posCandle.x}var l=s.posWick.y1,d=s.posWick.y2,u=s.posWick.width;i.chartData.options[i.constructor.name].needWick&&p.a.drawLine(null,t,c,l,c,d,r,[],u),c=s.posCandle.x;var g=s.posCandle.y1,D=s.posCandle.y2,f=s.posCandle.width;p.a.drawLine(null,t,c,g,c,D,r,[],f),c=s.posBorderCandle.x;var w=s.posBorderCandle.y1,y=s.posBorderCandle.y2,v=s.posBorderCandle.width;p.a.drawLine(null,t,c,w,c,y,i.chartData.colors.Chart.backgroundColor,[],v),p.a.drawLine(null,t,c,w,c,y,h,[],v),e&&i.chartData.isPipsShow&&i.chartData.currentValue&&i.drawPips(t),i.canvasInfoContext.restore()}}},i.getElementIndexByPositionX=function(t,a){if(0!==t.length){var e=0,s=.5*i.chartData.candleWidth;if(a>=t[0].x-s)e=0;else if(t[t.length-2]&&a<t[t.length-2].x-s)e=t.length-1;else for(var r=0;r<t.length;r++)if(t[r+1]&&a<t[r].x-s&&a>=t[r+1].x-s){e=r+1;break}return e}},i.isPositionValid=function(){return parseFloat(i.showData[0].x)<i.w-i.chartData.rightPadding+i.chartData.spacing},i.resizeShowDataValuesY=function(t,a,e){for(var s=0;s<t.length;s++)i.resizeShowItemValuesY(t[s],a,e)},i.resizeShowItemValuesY=function(t,a,e){var s=i.getCoordinateY(t.low,a,e.minB,e.deltaY);t.y=s,t.scale=e.deltaY},i.getNumberOfDataToRight=function(t,a,e,i){return parseInt((a-e-t)/i)},i.moveElementsX=function(t,a){for(var e=0;e<t.length;e++){var s=parseFloat(t[e].x)-a;t[e-1]&&parseFloat(t[e-1].x)-s<i.chartData.spacing&&(s=parseFloat(t[e-1].x)-i.chartData.spacing),t[e].x=s.toFixed(1)}},i.moveElementsY=function(t,a){for(var e=0;e<t.length;e++){var i=parseFloat(t[e].y)-a;t[e].y=i.toFixed(1)}},i.needsElementToRight=function(t,a,e,i){return parseFloat(t[0].x)+i<a-e},i.needsElementToLeft=function(t,a){return parseFloat(t[t.length-1].x)>a},i.drawCurrentShowData=function(t,a){var e=t[i.chartData.typeData],s=parseFloat(e),r=parseFloat(i.showData[0].low),n=parseFloat(i.showData[0].high);r>s?i.showData[0].low=e:n<s&&(i.showData[0].high=e),a&&(i.showData[0].open=a[i.chartData.typeData].open,i.showData[0].close=a[i.chartData.typeData].close,i.showData[0].low=a[i.chartData.typeData].low,i.showData[0].high=a[i.chartData.typeData].high);var o=i.getCoordinateY(i.showData[0].low,i.h,i.chartData.scaleParams.minB,i.chartData.scaleParams.deltaY),h=i.getCoordinateY(i.showData[0].high,i.h,i.chartData.scaleParams.minB,i.chartData.scaleParams.deltaY);i.chartData.options.Chart.autoScale&&(parseFloat(h)-i.chartData.marginTop<0||parseFloat(o)+i.chartData.marginBottom>i.h)&&(i.chartData.scaleParams=i.getScaleParams(i.selectedData,i.h,i.chartData.precission),i.resizeShowDataValuesY(i.showData,i.h,i.chartData.scaleParams),i.chartData.options.Chart.scaleSeriesOnly||i.resizeShowDataByTrendIndicators(),i.draw(i.showData,i.h),i.valueAxis=i.getValueAxis(i.chartData.scaleParams.minB,i.chartData.scaleParams.maxB,5,i.w,i.h,i.chartData.options.Chart.scalesFontSize,i.chartData.precission),i.clearGrid(),i.drawValueAxis(i.valueAxis),i.drawOscillatorChartsAxis(),i.drawTimeAxis(i.timeAxis),i.drawChartBorder()),i.showData[0].close=e,i.showData[0].y=o,i.showData[0].isCurrentData=!0;var c=i.canvasRatePixelatedContext.canvas;i.canvasRatePixelatedContext.save(),i.canvasRatePixelatedContext.beginPath(),i.canvasRatePixelatedContext.rect(0,0,i.w-8,i.h),i.canvasRatePixelatedContext.closePath(),i.canvasRatePixelatedContext.clip();var l=i.showData[1]?i.showData[1].close:i.showData[0].open;i.showData[0].show(c,i.chartData.candleWidth,i.chartData.colors,i.chartData.options[i.constructor.name],l),i.canvasRatePixelatedContext.restore(),i.curX&&i.curY&&(i.clearInfo(),i.drawActiveDrawingObjects(),i.drawCrosshair(i.canvasInfoContext,null,i.techChart.configuration.modules.headerButtons.createPipsButton))},i.getCoordinateX=function(t,a,e,i,s){if(t=parseFloat(t),a=parseFloat(a),e=parseFloat(e),i=parseFloat(i),!(isNaN(t)||isNaN(a)||isNaN(e)||isNaN(i))){var r=parseFloat(t-a-i*e);return r=r>0?r:0,(r-=s).toFixed(1)}},i.processDataToShow=function(t,a,e,s,r,n,o,h){o=void 0===o?0:o,o=i.chartData.techChart.isFullScreen?1.6*o:.5*o,i.chartData.scaleParams=h||i.getScaleParams(t,r,n);for(var c=[],l=0;l<t.length;l++){var p=t[l];n||(n=d.a.countDigits(p.high));var u=i.getCoordinateX(s,a,e,l,o);if(u<=0)break;var g=i.getCoordinateY(p.low,r,i.chartData.scaleParams.minB,i.chartData.scaleParams.deltaY),D=new Candle(parseFloat(p.low).toFixed(n),parseFloat(p.high).toFixed(n),parseFloat(p.open).toFixed(n),parseFloat(p.close).toFixed(n),parseFloat(p.date),u,g,i.chartData.scaleParams.deltaY,i.useCanvas);p.isCurrentData&&(D.isCurrentData=!0),c.push(D)}return c},i.createShowDataItem=function(t,a){var e=new Candle(parseFloat(t.low).toFixed(a),parseFloat(t.high).toFixed(a),parseFloat(t.open).toFixed(a),parseFloat(t.close).toFixed(a),t.date,"0.0","0.0",1,i.useCanvas);return t.isCurrentData&&(e.isCurrentData=!0),e},i.setChartElementsSize=function(t){var a=i.getChartElementsSize();a.candleWidth&&(t.candleWidth=a.candleWidth),t.spacing=1.5*t.candleWidth},i.getMaxValue=function(t){for(var a=Number.MIN_VALUE,e=0;e<t.length;e++){var i=parseFloat(t[e].high);a<i&&(a=i)}return a},i.getMinValue=function(t){for(var a=Number.MAX_VALUE,e=0;e<t.length;e++){var i=parseFloat(t[e].low);a>i&&(a=i)}return a},i.deleteRedundantElements=function(t,a,e,i){for(var s=t.length-1;s>=0;s--)parseFloat(t[s].x)>e-i?t.length>1?t.splice(s,1):t[s].x=e-i:parseFloat(t[s].x)<=0&&t.length>1&&t.splice(s,1)},i.draw=function(t,a){if(i.chartData.drawingObjects.length)for(var e=0;e<i.chartData.drawingObjects.length;e++)"active"===i.chartData.drawingObjects[e].state&&p.a.clearRect(null,i.canvasDrawingActiveContext,0,0,i.canvasDrawingActive.width,i.canvasDrawingActive.height),i.redrawActiveDrawingObjects(!0);if(i.drawChart(t,a))for(var s=i.canvasDataPixelatedContext.canvas,r=0;r<t.length;r++)t[r].isCurrentData||t[r].show(s,i.chartData.candleWidth,i.chartData.colors,i.chartData.options[i.constructor.name])},i}return l()(CandleChart,t),CandleChart}(d.a)},"./src/scripts/ChartTypes/HollowCandleChart.js":function(t,a,e){"use strict";function HollowCandle(t,a,e,i,s,r,n,o,h){this.low=t,this.high=a,this.open=e,this.close=i,this.date=s,this.x=r,this.y=n,this.scale=o,this.line,this.body,this.crossPosition={x:"0.0",y:"0.0"},this.isCurrentData,this.width,this.useCanvas=h,this.hollowCandlePriceLine}var i=e("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=e.n(i),r=e("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),n=e.n(r),o=e("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=e.n(o),c=e("./node_modules/@babel/runtime/helpers/inherits.js"),l=e.n(c),d=e("./src/scripts/preBuild/Chart.js"),p=e("./src/scripts/Libs/LibCanvas.js");HollowCandle.prototype.show=function(t,a,e,i,s){if(t||!this.useCanvas){var r,n,o,h,c=e.HollowChart.candleBool,l=e.HollowChart.candleBear,d=e.HollowChart.candleLineBool,u=e.HollowChart.candleLineBear,g=e.HollowChart.candleBoolBorder,D=e.HollowChart.candleBearBorder,f=parseFloat(this.high),w=parseFloat(this.low),y=parseFloat(this.open),v=parseFloat(this.close),m=parseFloat(this.y),b=parseFloat(this.y)-(f-w)/this.scale,x=Math.abs(y-v)/this.scale,C=x>0?x:1,P=parseFloat(this.y)+parseFloat(w-Math.max(y,v))/this.scale,T=t.getContext("2d");v>=s&&v>=y?(n="transparent",o=d,h=c):v<s&&v>=y?(n="transparent",o=u,h=l):v>=s&&v<y?(n=c,o=d,h=i.needBorder?g:n):v<s&&v<y&&(n=l,o=u,h=i.needBorder?D:n);var S=a;r=p.a.getPosition(parseFloat(this.x),S);var O=Math.round(r-S/2),L=p.a.getPosition(parseFloat(r-S/2),1),F=p.a.getPosition(parseFloat(r+S/2),1),B=p.a.getPosition(P,1),A=p.a.getPosition(P+C,1);C=Math.round(C),i.needBorder&&"transparent"!==n?(p.a.drawLine(null,T,r,Math.round(B),r,Math.round(A),n,[],S),p.a.drawLine(null,T,L,B,L,A,h,[],1),p.a.drawLine(null,T,L,A,F,A,h,[],1),p.a.drawLine(null,T,F,B,F,A,h,[],1),p.a.drawLine(null,T,L,B,F,B,h,[],1),this.hollowCandlePriceLine=n):"transparent"===n?(p.a.drawLine(null,T,L,B,L,A,h,[],1),p.a.drawLine(null,T,L,A,F,A,h,[],1),p.a.drawLine(null,T,F,B,F,A,h,[],1),p.a.drawLine(null,T,L,B,F,B,h,[],1),this.hollowCandlePriceLine=h):(p.a.drawLine(null,T,r,Math.round(B),r,Math.round(A),n,[],S),this.hollowCandlePriceLine=n),this.posCandle={x:O,y1:B,y2:A,width:S,height:C};var k=i.widthWickLine;if(i.needWick){r=p.a.getPosition(parseFloat(this.x),k);var j=Math.round(m),M=Math.round(b);p.a.drawLine(null,T,r,j,r,A,o,[],k),p.a.drawLine(null,T,r,B,r,M,o,[],k),this.posWick={x:r,y1:j,y2:M,width:k}}}};var u=e("./src/scripts/ChartTypes/CandleChart.js");e.d(a,"a",function(){return g});var g=function(t){function HollowChart(t,a,e){var i;return s()(this,HollowChart),(i=n()(this,h()(HollowChart).call(this,t,a,e))).drawCrosshair=function(t,a,e){var s=i.drawCrosshairChart(t);if(s.posWick&&s){var r=i.chartData.colors.Chart.crosshair,n=Math.round(i.chartData.candleWidth),o=parseFloat(s.low),h=parseFloat(s.open),c=parseFloat(s.close),l=parseFloat(s.x),d=parseFloat(s.y);if(i.chartData.options[i.constructor.name].widthBorderLine,i.curX<i.w-8){i.canvasInfoContext.save(),i.canvasInfoContext.beginPath(),i.canvasInfoContext.rect(0,0,i.w-8,i.h),i.canvasInfoContext.closePath(),i.canvasInfoContext.clip();var u=Math.round(l-parseFloat(n/2)),g=Math.round(d+parseFloat(o-Math.max(h,c))/s.scale);u=p.a.getPosition(u,2),g=p.a.getPosition(g,2);var D=i.chartData.options[i.constructor.name].widthBorderLine;h>c?i.chartData.colors[i.constructor.name].candleBear:i.chartData.colors[i.constructor.name].candleBool;var f=s.posWick.x,w=s.posWick.y1,y=s.posWick.y2,v=s.posWick.width;i.chartData.options[i.constructor.name].needWick&&p.a.drawLine(null,t,f,w,f,y,r,[],v);var m=s.posCandle.x,b=s.posCandle.y1,x=s.posCandle.width,C=s.posCandle.height;p.a.drawRectangle(null,t,m,b,x,C,"transparent",r,D),e&&i.chartData.isPipsShow&&i.chartData.currentValue&&i.drawPips(t),i.canvasInfoContext.restore()}}},i.processDataToShow=function(t,a,e,s,r,n,o,h){o=void 0===o?0:o,o=i.chartData.techChart.isFullScreen?1.6*o:.5*o,i.chartData.scaleParams=h||i.getScaleParams(t,r,n);for(var c=[],l=0;l<t.length;l++){var p=t[l];n||(n=d.a.countDigits(p.high));var u=i.getCoordinateX(s,a,e,l,o);if(u<=0)break;var g=i.getCoordinateY(p.low,r,i.chartData.scaleParams.minB,i.chartData.scaleParams.deltaY),D=new HollowCandle(parseFloat(p.low).toFixed(n),parseFloat(p.high).toFixed(n),parseFloat(p.open).toFixed(n),parseFloat(p.close).toFixed(n),parseFloat(p.date),u,g,i.chartData.scaleParams.deltaY,i.useCanvas);p.isCurrentData&&(D.isCurrentData=!0),c.push(D)}return c},i.draw=function(t,a){if(i.chartData.drawingObjects.length)for(var e=0;e<i.chartData.drawingObjects.length;e++)"active"===i.chartData.drawingObjects[e].state&&p.a.clearRect(null,i.canvasDrawingActiveContext,0,0,i.canvasDrawingActive.width,i.canvasDrawingActive.height),i.redrawActiveDrawingObjects(!0);if(i.drawChart(t,a))for(var s=i.canvasDataPixelatedContext.canvas,r=t.length,n=0;n<r;n++)if(t[n].isCurrentData&&i.chartData.isExpired||!t[n].isCurrentData){var o=t[n].close;if(n===r-1&&(o=i.getPrevClose(t[n])),n===r-1){var h=i.getIndexByDate(i.chartData.data,t[r-1].date);h>-1&&h<i.chartData.data.length-1&&(o=i.chartData.data[h+1].close)}else o=t[n+1].close;t[n].show(s,i.chartData.candleWidth,i.chartData.colors,i.chartData.options.HollowChart,o)}},i.getPrevClose=function(t){var a=t.close,e=i.chartData.data[i.techChart.configuration.typeData],s=t.date,r=d.a.binaryIndexOfCandleByTime(s,e);return e[r+1]&&(a=e[r+1].close),a},i.createShowDataItem=function(t,a){var e=new HollowCandle(parseFloat(t.low).toFixed(a),parseFloat(t.high).toFixed(a),parseFloat(t.open).toFixed(a),parseFloat(t.close).toFixed(a),t.date,"0.0","0.0",1,i.useCanvas);return t.isCurrentData&&(e.isCurrentData=!0),e},i}return l()(HollowChart,t),HollowChart}(u.a)},"./src/scripts/ChartTypes/LineChart.js":function(t,a,e){"use strict";e.d(a,"a",function(){return y});var i=e("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=e.n(i),r=e("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),n=e.n(r),o=e("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=e.n(o),c=e("./node_modules/@babel/runtime/helpers/inherits.js"),l=e.n(c),d=e("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),p=e.n(d),u=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),g=e.n(u),D=e("./src/scripts/preBuild/Chart.js"),f=e("./src/scripts/Libs/LibCanvas.js"),w=e("./src/scripts/ChartTypes/Types/Point.js"),y=function(t){function LineChart(t,a,e){var i;return s()(this,LineChart),i=n()(this,h()(LineChart).call(this,t,a,e)),g()(p()(p()(i)),"draw",function(){i.draw()}),i.getFractalItemY=function(t){for(var a=0,e=i.selectedData,s=0;s<e.length;s++)if(e[s].date===t.T){var r=parseFloat(e[s].high),n=parseFloat(e[s].low);parseFloat(e[s].open),parseFloat(e[s].close),a=parseFloat(((r+n)/2).toFixed(i.chartData.precission));break}return i.toYPixels(a)},i.isPositionValid=function(){return parseFloat(i.showData[0].x)<i.w-i.chartData.rightPadding+i.chartData.spacing},i.resizeShowDataValuesY=function(t,a,e){for(var s=0;s<t.length;s++)i.resizeShowItemValuesY(t[s],a,e)},i.resizeShowItemValuesY=function(t,a,e){var s=i.getCoordinateY(t.value,a,e.minB,e.deltaY);t.y=s,t.scale=e.deltaY},i.getNumberOfDataToRight=function(t,a,e,i){return Math.ceil((a-e-t)/i)},i.moveElementsX=function(t,a,e,i){for(var s,r=t.length-1;r>=0;r--)(s=parseFloat(t[r].x)-a)<0&&(s=0),s>e-i&&(s=e-i),t[r].x=s.toFixed(1)},i.moveElementsY=function(t,a){for(var e=0;e<t.length;e++){var i=parseFloat(t[e].y)-a;t[e].y=i.toFixed(1)}},i.needsElementToRight=function(t,a,e){return parseFloat(t[0].x)<a-e},i.needsElementToLeft=function(t){return parseFloat(t[t.length-1].x)>0},i.getCoordinateX=function(t,a,e,i,s){if(t=parseFloat(t),a=parseFloat(a),e=parseFloat(e),i=parseFloat(i),!(isNaN(t)||isNaN(a)||isNaN(e)||isNaN(i))){var r=parseFloat(t-a-i*e);return r=r>0?r:0,(r-=s).toFixed(1)}},i.setChartElementsSize=function(t){var a=i.getChartElementsSize();a.lineSpacing&&(t.spacing=a.lineSpacing)},i.getMinValue=function(t,a){if(t&&0!==t.length)return void 0===t[0].high&&void 0===t[0].low?i.getMinShowDataValue(t,a):i.getMinSelectedDataValue(t,a)},i.getMaxValue=function(t,a){if(t&&0!==t.length)return void 0===t[0].high&&void 0===t[0].low?i.getMaxShowDataValue(t,a):i.getMaxSelectedDataValue(t,a)},i.getMaxShowDataValue=function(t){for(var a=0,e=0;e<t.length;e++){var i=parseFloat(t[e].value);a<i&&(a=i)}return a},i.getMaxSelectedDataValue=function(t){for(var a=0,e=0;e<t.length;e++){var i=parseFloat(t[e].high),s=(parseFloat(t[e].low),parseFloat(i));a<s&&(a=s)}return a},i.getMinShowDataValue=function(t){for(var a=Number.MAX_VALUE,e=0;e<t.length;e++){var i=parseFloat(t[e].value);a>i&&(a=i)}return a},i.getMinSelectedDataValue=function(t){for(var a=Number.MAX_VALUE,e=0;e<t.length;e++){parseFloat(t[e].high);var i=parseFloat(t[e].low),s=parseFloat(i);a>s&&(a=s)}return a},i.createShowDataItem=function(t,e){var s=a.options.LineChart.priceSource,r=i.getValueFromTypePrice(t,s,e),n=new w.a(r,t.date,"0.0","0.0",t);return t.isCurrentData&&(n.isCurrentData=!0),n},i.processDataToShow=function(t,e,s,r,n,o,h,c){h=void 0===h?0:h,h=i.chartData.techChart.isFullScreen?1.6*h:.5*h,i.chartData.scaleParams=c||i.getScaleParams(t,n,o);for(var l=[],d=i.chartData.chart.constructor.name,p=a.options[d].priceSource,u=0;u<t.length;u++){var g=t[u],D=i.getValueFromTypePrice(g,p,o),f=i.getCoordinateX(r,e,s,u,h),w=i.getCoordinateY(parseFloat(D),n,i.chartData.scaleParams.minB,i.chartData.scaleParams.deltaY),y=i.createShowDataItem(g,o);if(y.x=f,y.y=w,g.isCurrentData&&(y.isCurrentData=!0),l.push(y),f<=0)break}return l},i.getValueFromTypePrice=function(t,a,e){var i;switch(a){case"Open":i=parseFloat(t.open).toFixed(e);break;case"High":i=parseFloat(t.high).toFixed(e);break;case"Low":i=parseFloat(t.low).toFixed(e);break;case"Close":i=parseFloat(t.close).toFixed(e);break;case"(H+L)/2":i=((parseFloat(t.high)+parseFloat(t.low))/2).toFixed(e);break;case"(H+L+C)/3":i=((parseFloat(t.high)+parseFloat(t.low)+parseFloat(t.close))/3).toFixed(e);break;case"(O+H+L+C)/4":i=((parseFloat(t.open)+parseFloat(t.high)+parseFloat(t.low)+parseFloat(t.close))/4).toFixed(e);break;default:return((parseFloat(t.high)+parseFloat(t.low))/2).toFixed(e)}return i},i.drawLastBarPrice=function(t){if(t){var a,e,s=i.chartData.chart.constructor.name;a=i.parent.querySelector(".tch-rate-value"),e=i.chartData.colors[s].priceLine;var r=i.toYPixels(t.value);r>0&&r<i.h?i.drawPrice(parseFloat(t.value).toFixed(i.chartData.precission),r,"tch-price-bear",!0,e):a.parentNode.style.display="none"}},i.drawCrosshair=function(t,a,e){i.drawCrosshairChart(t)&&e&&i.chartData.isPipsShow&&i.chartData.currentValue&&i.drawPips(t)},i.calculateDelta=function(){var t=i.showData[1].date-i.showData[2].date,a=i.techChart.connector.getCurrentTime()/1e3-i.showData[1].date,e=null,s=null;return a<t?(s=100*a/t,e=(i.chartData.spacing*s/100).toFixed(0)):e=i.chartData.spacing,e},i.drawCurrentShowData=function(t){if(i.showData[0].isCurrentData){var a=i.showData[0].x,e=i.getCoordinateY(parseFloat(t[i.chartData.typeData]),i.h,i.chartData.scaleParams.minB,i.chartData.scaleParams.deltaY);i.chartData.options.Chart.autoScale&&(parseFloat(e)-i.chartData.marginTop<0||parseFloat(e)+i.chartData.marginBottom>i.h)&&(i.chartData.scaleParams=i.getScaleParams(i.selectedData,i.h,i.chartData.precission),i.resizeShowDataValuesY(i.showData,i.h,i.chartData.scaleParams),i.chartData.options.Chart.scaleSeriesOnly||i.resizeShowDataByTrendIndicators(),i.draw(i.showData,i.h),i.valueAxis=i.getValueAxis(i.chartData.scaleParams.minB,i.chartData.scaleParams.maxB,5,i.w,i.h,i.chartData.options.Chart.scalesFontSize,i.chartData.precission),i.clearGrid(),i.drawValueAxis(i.valueAxis),i.drawOscillatorChartsAxis(),i.drawTimeAxis(i.timeAxis),i.drawChartBorder()),i.curX&&i.curY&&(i.clearInfo(),i.drawActiveDrawingObjects(),i.drawCrosshair(i.canvasInfoContext,null,i.techChart.configuration.modules.headerButtons.createPipsButton)),i.showData[0]=new w.a(t[i.chartData.typeData],i.showData[0].date,a,e),i.showData[0].isCurrentData=!0;var s=[];"Step"===i.chartData.options.LineChart.typeLine?(s.push([i.showData[0].x,i.showData[0].y]),i.showData[1]?(s.push([i.showData[1].x,i.showData[0].y]),s.push([i.showData[1].x,i.showData[1].y]),s.push([i.showData[1].x,i.h])):(s.push([i.showData[0].x,i.showData[0].y]),s.push([i.showData[0].x,i.showData[0].y]),s.push([i.showData[0].x,i.h])),s.push([i.showData[0].x,i.h])):(s.push([i.showData[0].x,i.showData[0].y]),i.showData[1]?(s.push([i.showData[1].x,i.showData[1].y]),s.push([i.showData[1].x,i.h])):(s.push([i.showData[0].x,i.showData[0].y]),s.push([i.showData[0].x,i.h])),s.push([i.showData[0].x,i.h]));var r=i.canvasRateNormalContext,n=i.chartData.colors.LineChart.colorLine,o=i.chartData.options.LineChart.widthLine;if("WithMarkers"===i.chartData.options.LineChart.typeLine){var h=parseFloat(o)+2.5/parseFloat(o);f.a.drawCircle(null,r,i.showData[0].x,i.showData[0].y,h,null,n,n,1)}f.a.drawPolygon(null,r,s,null,n,!1,o,s.length-2)}},i.draw=function(t,a){if(i.chartData.drawingObjects.length)for(var e=0;e<i.chartData.drawingObjects.length;e++)"active"===i.chartData.drawingObjects[e].state&&f.a.clearRect(null,i.canvasDrawingActiveContext,0,0,i.canvasDrawingActive.width,i.canvasDrawingActive.height),i.redrawActiveDrawingObjects(!0);if(i.drawChart(t,a)){for(var s=[],r=t[0].isCurrentData?1:0,n=i.canvasDataNormalContext,o=i.chartData.colors.LineChart.colorLine,h=i.chartData.options.LineChart.widthLine,c=parseFloat(h)+2.5/parseFloat(h),l=0;l<t.length;l++){if(isNaN(parseFloat(t[l].x))||isNaN(parseFloat(t[l].y)))return;t[l-1]||(t[l-1]=t[l]),t[l].isCurrentData||("Step"===i.chartData.options.LineChart.typeLine?(s.push([t[l].x,t[l-1].y]),s.push([t[l].x,t[l].y])):s.push([t[l].x,t[l].y]),"WithMarkers"===i.chartData.options.LineChart.typeLine&&f.a.drawCircle(null,n,t[l].x,t[l].y,c,null,o,o,1))}s.push([t[t.length-1].x,i.h]),t[r]?s.push([t[r].x,i.h]):s.push([t[0].x,i.h]),f.a.drawPolygon(null,n,s,null,o,!1,h,s.length-2)}},i.deleteRedundantElements=function(t,a,e,s,r){for(var n=t.length-1;n>=0;n--)t[n+1]&&(a>0&&parseFloat(t[n].x)<=parseFloat(t[n+1].x)?t.splice(n+1,1):a<0&&parseFloat(t[n].x)<=parseFloat(t[n+1].x)&&t.splice(n,1));i.fixFirstAndLastElementsX(t,e,s,r)},i.fixFirstAndLastElementsX=function(t,a,e,s){var r;i.showData[0]&&i.showData[1]&&parseFloat(i.showData[0].x)-parseFloat(i.showData[1].x)<s&&((r=parseFloat(i.showData[1].x)+s)>a-e&&(r=a-e),i.showData[0].x=r.toFixed(1)),i.showData[i.showData.length-1]&&i.showData[i.showData.length-2]&&parseFloat(i.showData[i.showData.length-1].x)-parseFloat(i.showData[i.showData.length-2].x)<s&&((r=parseFloat(i.showData[i.showData.length-2].x)-s)<0&&(r=0),i.showData[i.showData.length-1].x=r.toFixed(1))},i}return l()(LineChart,t),LineChart}(D.a)},"./src/scripts/ChartTypes/Types/Point.js":function(t,a,e){"use strict";function Point(t,a,e,i,s){this.value=t,this.date=a,this.x=e,this.y=i,s&&(this.low=s.low,this.high=s.high,this.open=s.open,this.close=s.close)}e.d(a,"a",function(){return Point})},"./src/scripts/Config/Languages/languages.js":function(t,a){"use strict";a.a={ru:{"1-minute":"1 минута","5-minutes":"5 минут","15-minutes":"15 минут","30-minutes":"30 минут","1-hour":"1 час","4-hours":"4 часа","8-hours":"8 часов","1-day":"1 день","1-week":"1 неделя","1-month":"1 месяц","1m":"1мин","5m":"5мин","15m":"15мин","30m":"30мин","1h":"1ч","4h":"4ч","8h":"8ч","1D":"1д","1W":"1н","1M":"1мес","link-symbol-to":"Применить инструмент на всех графиках","link-interval-to":"Применить интервал на всех графиках","link-crosshair-on":"Синхронное перекрестье на всех графиках","track-time-on":"Отслеживать время на всех графиках","color-bars-based":"Цвет основан на предыдущей цене закрытия",borders:"Обводка свечи",border:"Обводка",wick:"Фитиль","price-line":"Линия цены",scale:"Шкала",scales:"Шкалы","override-min":"Минимальное изменение цены","price-source":"Источник цены",line:"Линия",fill:"Цвет заполнения",type:"Тип","hlc-bars":"HLC - бары","up-color":"Растущий цвет","down-color":"Падающий цвет",default:"По умолчанию","default-tch":"Стандарт",ok:"Применить",cancel:"Отмена",closeBtn:"Закрыть",style:"Стиль",inputs:"Данные",period:"Период",K:"K",D:"D",KLine:"KLine",DLine:"DLine",ADX:"ADX",DIM:"DIM",DIP:"DIP",fastLength:"Быстрая линия",slowLength:"Запаздывающая линия",signalLength:"Сигнальная линия",histogram:"Гистограмма",signal:"Сигнал",U:"Верхняя линия",M:"Средняя линия",L:"Нижняя линия",cloud:"Облако",smallPeriod:"Минимальный период",middlePeriod:"Средний период",largePeriod:"Максимальный период",TenkanSen:"разворотная линия ",KijunSen:"основная линия ",ChinkouSpan:"запаздывающая линия ",SenkouSpanA:"опережающая линия А ",SenkouSpanB:"опережающая линия Б ",A:"A ",B:"B ",lenght:"Ширина",percent:"Процент",avarage:"Среднее",startAf:"Начальное значение",stepAf:"Шаг",maxAf:"Количество переходов",multi:"Шаг",lineUp:"Линия вверх",lineDown:"Линия вниз",background:"Заливка",timezone:"Часовой пояс",right:"Правая",left:"Левая","auto-scale":"Автоматический масштаб",percentage:"Проценты","log-scale":"Логарифмическая шкала","scale-series":"Игнорировать шкалу индикаторов","lock-scale":"Зафиксировать шкалу","track-time":"Отслеживать время","top-margin":"Отступ сверху","bottom-margin":"Отступ снизу","right-margin":"Отступ справа","left-axis":"Левая шкала","right-axis":"Правая шкала",countdown:"Отображать обратный отсчет","symbol-last":"Маркер последнего значения инструмента","indicator-last":"Маркер последнего значения индикатора","symbol-labels":"Отображать инструмент на шкале","indicator-labels":"Отображать имя индикатора на шкале","precise-labels":"Выравнивать ценовые отметки",label:"Метка",notecolor:"Цвет метки","vert-grid-lines":"Верт. линии сетки","horz-grid-lines":"Гор. линии сетки","scales-text":"Текст на шкалах","scales-lines":"Линии шкал",watermark:"Водяной знак",crosshair:"Перекрестие","navigation-buttons":"Навигационные кнопки","symbol-description":"Описание инструмента","ohlc-values":"Значениe ОТКР-МАКС-МИН-ЗАКР","indicator-titles":"Названия индикаторов","indicator-arguments":"Параметры индикатора","indicator-values":"Значения индикатора","visible-onmouse":"Отображать при наведении курсора","always-visible":"Отображать всегда","always-invisible":"Никогда не отоброжать",themes:"Темы",blue:"Голубая",black:"Черная",grey:"Серая",indicators:"Индикаторы","type-indicator":"Введите название индикатора","bears-power":"Сила быков","bulls-power":"Сила медведей",stochastic:"Стохастический осциллятор","simple-moving":"Скользящее среднее","exponential-moving":"Экспоненциальная скользящая средняя","bollinger-bands":"Полосы Боллинджера","williams-fractal":"Фрактал Вильямса","ichimoku-cloud":"Ишимоку Кинко Хайо","double-exponential":"Двойная скользящая средняя","parabolic-sar":"Параболический индикатор SAR","standard-deviation":"Стандартное отклонение",envelope:"Огибающая  (Envelope)","williams-%r":"Процент Вильямса",atr:"Средний истинный диапазон",rsi:"Индекс относительной силы",adx:"Индикатор среднего направленного движения","awesome-oscillator":"Осциллятор Билла Вильямса","acceleration/deceleration":"Ускорение/Замедление","keltner-channels":"Канал Кельтнера","donchian-channel":"Канал Дончиана",macd:"Схождение расхождение скользящих средних","zoom-in":"Увеличить масштаб","zoom-out":"Уменьшить масштаб",lock:"Зафиксировать все отрисованные объекты",clear:"Удалить все отрисованные объекты",save:"Сохранить",restore:"Восстановить","stay-in-drawing":"Оставаться в режиме рисования","show-hide":"Скрыть все отрисованные объекты","magnet-mode":"Магнит","roulette-mode":"Рулетка",more:"Другое","vertical-line":"Вертикальная линия","horizontal-line":"Горизонтальная линия","trend-line":"Трендовая линия","trend-angle":"Угол тренда","horizontal-ray":"Горизонтальный луч",arrow:"Стрелка",ray:"Луч","parallel-channel":"Канал","disjoint-angle":"Расходящийся угол","flat-top/bottom":"Плоский верх/низ",dot:"Точка",cross:"Перекрестие",brush:"Кисть",rectangle:"Прямоугольник","rotated-rectangle":"Вращ. прямоугольник",ellipse:"Эллипс",triangle:"Треугольник",polyline:"Ломаная линия",curve:"Кривая","double-curve":"Двойная кривая",arc:"Дуга",text:"Текст","anchored-text":"Текст на экране",note:"Заметка","anchored-note":"Заметка на экране","arrow-mark":"Стрелка","arrow-mark-left":"Стрелка влево","arrow-mark-right":"Стрелка вправо","arrow-mark-up":"Стрелка вверх","arrow-mark-down":"Стрелка вниз",flag:"Флаг",flagcolor:"Цвет флага",all:"Все",commodity:"Товары",currency:"Валюта",index:"Индексы",stock:"Акции",crypto:"Крипто","no-financial":"Подходящих финансовых инструментов не найдено","indicator-not-found":"Нет индикаторов, соответствующим критериям поиска",candle:"Японские свечи",area:"Область",bar:"Бары",hollow:"Пустые свечи",bid:"Bid",ask:"Ask",mid:"Mid",open:"ОТКР.",high:"МАКС.",low:"МИН.",close:"ЗАКР.",value:"Значение",delete:"Удалить",params:"Свойства",coordinates:"Координаты",visibility:"Видимость",normal:"Обычная",dash:"Пунктир",point:"Точка",points:"Точка","show-price":"Отображать цену","show-price-range":"Отображать цену",price:"Цена",barNumber:"Бар №","show-text":"Отображать текст","show-time":"Отображать время","text-color":"Цвет текста","text-alignment":"Выравнивание текста","left-end":"Левый край","right-end":"Правый край","show-bars":"Отображать диапазон в барах","show-bars-range":"Отображать диапазон в барах","show-date":"Отображать временной диапазон","show-date-time-range":"Отображать временной диапазон","show-distance":"Отображать растояние","show-angle":"Отображать угол","always-show-stats":"Всегда отображать текст",middle:"Центр",signals:"Сигналы",simple:"Простая","with-markers":"Точки",step:"Ступени","custom-color":"Настройка цвета","buy-time":"Buy Time(RU)","purchase-time":"Время покупки",optionResult:"РЕЗУЛЬТАТ:","bars-roulete":" баров, ","day-roulete":" д, ","hour-roulete":" ч, ","minute-roulete":" м ","open-prise-source":"ОТКР.","high-prise-source":"МАКС.","low-prise-source":"МИН.","close-prise-source":"ЗАКР.","hl2-prise-source":"(М+М)/2","hlc3-prise-source":"(М+М+З)/3","ohlc4-prise-source":"(О+М+М+З)/4"},en:{"1-minute":"1 minute","5-minutes":"5 minutes","15-minutes":"15 minutes","30-minutes":"30 minutes","1-hour":"1 hour","4-hours":"4 hours","8-hours":"8 hours","1-day":"1 day","1-week":"1 week","1-month":"1 month","1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","8h":"8h","1D":"1D","1W":"1W","1M":"1M","link-symbol-to":"Link symbol to all charts","link-interval-to":"Link interval to all charts","link-crosshair-on":"Sync crosshair on all charts","track-time-on":"Track time on all charts","color-bars-based":"Color bars based on previous close",borders:"Border",border:"Border",wick:"Wick","price-line":"Price Line",scale:"Scale",scales:"Scales","override-min":"Override Min Tick","price-source":"Price Source",price:"Price",barNumber:"Bar #",line:"Line",fill:"Fill",type:"Type","hlc-bars":"HLC Bars","up-color":"Up Color","down-color":"Down Color",default:"Defaults","default-tch":"Defaults",ok:"Ok",cancel:"Cancel",closeBtn:"Close",style:"Style",inputs:"Inputs",period:"Period",K:"K",D:"D",KLine:"KLine",DLine:"DLine",ADX:"ADX",DIM:"DIM",DIP:"DIP",fastLength:"fastLength",slowLength:"slowLength",signalLength:"signalLength",histogram:"histogram",signal:"signal",U:"U",M:"M",L:"L",cloud:"cloud",smallPeriod:"smallPeriod",middlePeriod:"middlePeriod",largePeriod:"largePeriod",TenkanSen:"TenkanSen",KijunSen:"KijunSen",ChinkouSpan:"ChinkouSpan",SenkouSpanA:"SenkouSpanA",SenkouSpanB:"SenkouSpanB",A:"A",B:"B",lenght:"lenght",percent:"percent",avarage:"average",startAf:"startAf",stepAf:"stepAf",maxAf:"maxAf",multi:"multi",lineUp:"lineUp",lineDown:"lineDown",background:"Background",timezone:"Timezone",right:"Right",left:"Left","auto-scale":"Auto Scale",percentage:"Percentage","log-scale":"Log Scale","scale-series":"Scale Series Only","lock-scale":"Lock scale","track-time":"Track time","top-margin":"Top Margin","bottom-margin":"Bottom Margin","right-margin":"Right Margin","left-axis":"Left Axis","right-axis":"Right Axis",countdown:"Countdown","symbol-last":"Symbol Last Value","indicator-last":"Indicator Last Value","symbol-labels":"Symbol Labels","indicator-labels":"Indicator Labels","precise-labels":"Precise Labels",label:"Label",notecolor:"Note color","vert-grid-lines":"Vert Grid Lines","horz-grid-lines":"Horz Grid Lines","scales-text":"Scales Text","scales-lines":"Scales Lines",watermark:"Watermark",crosshair:"Crosshair","navigation-buttons":"Navigation Buttons","symbol-description":"Symbol Description","ohlc-values":"OHLC Values","indicator-titles":"Indicator Titles","indicator-arguments":"Indicator Arguments","indicator-values":"Indicator Values","visible-on mouse":"Visible on Mouse Over","always-visible":"Always Visible","always-invisible":"Always Invisible",themes:"Themes",blue:"Blue",black:"Black",grey:"Gray",indicators:"Indicators","type-indicator":"Type indicator name","bears-power":"Bears power","bulls-power":"Bulls power ",stochastic:"Stochastic","simple-moving":"Simple Moving Average","exponential-moving":"Exponential Moving Average","bollinger-bands":"Bollinger Bands","williams-fractal":"Williams Fractal","ichimoku-cloud":"Ichimoku Cloud","double-exponential":"Double Exponential Moving Average","parabolic-sar":"Parabolic Sar","standard-deviation":"Standard Deviation",envelope:"Envelope","williams-%r":"Williams %R",atr:"ATR",rsi:"RSI",adx:"ADX","awesome-oscillator":"Awesome Oscillator","acceleration/deceleration":"Acceleration/Deceleration","keltner-channels":"Keltner channel","donchian-channel":"Donchian channel",macd:"MACD","zoom-in":"Zoom In","zoom-out":"Zoom Out",lock:"Lock All Drawing Tools",clear:"Remove All Drawing Tools",save:"Save",restore:"Restore","stay-in-drawing":"Stay in Drawing Mode","show-hide":"Hide All Drawing Tools","magnet-mode":"Magnet Mode","roulette-mode":"Roulette Mode",more:"More","vertical-line":"Vertical Line","horizontal-line":"Horizontal Line","trend-line":"Trend Line","trend-angle":"Trend Angle","horizontal-ray":"Horizontal Ray",arrow:"Arrow",ray:"Ray","parallel-channel":"Parallel Channel","disjoint-angle":"Disjoint Angle","flat-top/bottom":"Flat Top/Bottom",dot:"Dot",cross:"Cross",brush:"Brush",rectangle:"Rectangle","rotated-rectangle":"Rotated Rectangle",ellipse:"Ellipse",triangle:"Triangle",polyline:"Polyline",curve:"Curve","double-curve":"Double Curve",arc:"Arc",text:"Text","anchored-text":"Anchored Text","arrow-mark":"Arrow Mark","arrow-mark-left":"Arrow Mark Left","arrow-mark-right":"Arrow Mark Right","arrow-mark-up":"Arrow Mark Up","arrow-mark-down":"Arrow Mark Down",flag:"Flag",flagcolor:"FlagColor",note:"Note","anchored-note":"AnchoredNote",all:"All",commodity:"Commodities",currency:"Currency",index:"Indices",stock:"Stocks",crypto:"Crypto","no-financial":"No financial instrument matched your criteria","indicator-not-found":"No indicators matched your criteria",candle:"Candles",area:"Area",bar:"Bars",hollow:"Hollow Candles",bid:"Bid",ask:"Ask",mid:"Mid",open:"Open",high:"High",low:"Low",close:"Close",value:"Value",delete:"Delete",params:"  Parameters",coordinates:"Coordinates",visibility:"Visibility",normal:"Normal",dash:"Dash",point:"Points",points:"Points","show-price":"Show Price","show-price-range":"Show Price Range","show-text":"Show Text","show-time":"Show Time Range","text-color":"Stats Text Color","text-alignment":"Text Alignment","left-end":"Left End","right-end":"Right End","show-bars":"Show Bars Range","show-bars-range":"Show Bars Range","show-date":"Show Date Range","show-date-time-range":"Show date time range","show-distance":"Show Distance","show-angle":"Show Angle","always-show-stats":"Always Show Stats",middle:"Middle",signals:"Signals",simple:"Simple","with-markers":"With Markers",step:"Step","custom-color":"Custom color",optionResult:"RESULT:","buy-time":"Buy Time","purchase-time":"Purchase Time","bars-roulete":" bars, ","day-roulete":" d, ","hour-roulete":" h, ","minute-roulete":" m ","open-prise-source":"Open","high-prise-source":"Hight","low-prise-source":"Low","close-prise-source":"Close","hl2-prise-source":"(H+L)/2","hlc3-prise-source":"(H+L+C)/3","ohlc4-prise-source":"(O+H+L+C)/4"},es:{"1-minute":"1 minuto","5-minutes":"5 minutos","15-minutes":"15 minutos","30-minutes":"30 minutos","1-hour":"1 hora","4-hours":"4 horas","8-hours":"8 horas","1-day":"1 día","1-week":"1 semana","1-month":"1 mes","1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1h","4h":"4h","8h":"8h","1D":"1d","1W":"1sem","1M":"1mes","link-symbol-to":"Simbolo del enlace a todos los graficos","link-interval-to":"Intervalo de enlace para todos los graficos","link-crosshair-on":"Sincronizar la cruz en todos los graficos","track-time-on":"Seguimiento del tiempo en todos los graficos","color-bars-based":"Barras de color basadas en el anterior cierre",borders:"Borde",border:"Borde",wick:"Mecha de la vela","price-line":"Línea de precios",scale:"Escala",scales:"Escalas","override-min":"Anule la marca de un minuto","price-source":"Fuente del precio",line:"Linea",fill:"Llenar",type:"Tipo","hlc-bars":"Barras HLC","up-color":"Color arriba","down-color":"Color abajo",default:"Por defecto","default-tch":"Por defecto",ok:"Ok",cancel:"Cancelar",style:"Estilo",inputs:"Entrada",K:"K",D:"D",KLine:"Linea K",DLine:"Linea D",ADX:"ADX",DIM:"DI-",DIP:"DI+",fastLength:"Longuitud Rapida",slowLength:"Longuitud Lenta",signalLength:"Allanamiento de la Señal",histogram:"Histograma",signal:"Señal",U:"Superior",M:"Medio",L:"Inferior",cloud:"Nube",smallPeriod:"Periodo Pequeño",middlePeriod:"Periodo Medio",largePeriod:"Periodo Grande",TenkanSen:"TenkanSen",KijunSen:"KijunSen",ChinkouSpan:"ChinkouSpan",SenkouSpanA:"SenkouSpanA",SenkouSpanB:"SenkouSpanB",A:"A",B:"B",lenght:"Longuitud",percent:"Por ciento",avarage:"Promedio",startAf:"Comienzo",stepAf:"Paso",maxAf:"Max",multi:"Multi",lineUp:"Linea hacia arriba",lineDown:"Linea hacia abajo",period:"Periodo",background:"Fondo",timezone:"Zona Horaria",right:"Derecha",left:"Izquierda","auto-scale":"Escala automática",percentage:"Porcentaje","log-scale":"Escala Logaritmica","scale-series":"Serie de la escala sólo","lock-scale":"Bloquear la Escala","track-time":"Tiempo de Seguimiento","top-margin":"Margen Superior","bottom-margin":"Margen Inferior","right-margin":"Margen Derecho","left-axis":"Eje Izquierdo","right-axis":"Eje Derecho",countdown:"Cuenta Regresiva","symbol-last":"Simbolo del Ultimo Valor","indicator-last":"Indicador del Ultimo Valor","symbol-labels":"Etiquetas de Simbolo","indicator-labels":"Etiquetas del Indicador","precise-labels":"Etiquetas Precisas",label:"Etiqueta","vert-grid-lines":"Línea de la rejilla vertical","horz-grid-lines":"Línea de la rejilla horizontal","scales-text":"Texto de escalas","scales-lines":"Líneas de escalas",watermark:"Filigrana",crosshair:"Cruz","navigation-buttons":"Botones de Navegacion","symbol-description":"Descripcion del Simbolo","ohlc-values":"Valores de OHLC","indicator-titles":"Títulos del indicador","indicator-arguments":"Indicador de Argumentos","indicator-values":"Valores del indicador","visible-on mouse":"Visibilidad del mouse sobre","always-visible":"Siempre Visible","always-invisible":"Siempre Invicible",themes:"Temas",blue:"Azul",black:"Negro",grey:"Gris",indicators:"Indicadores","type-indicator":"Nombre del tipo de indicador","bears-power":"Energía de osos","bulls-power":"Energía de toros",stochastic:"Estocastico","simple-moving":"Promedio del Movimiento Simple","exponential-moving":"Valor medio en momiento exponencial","bollinger-bands":"Grupos de Bollinger","williams-fractal":"Wiliams Fractal","ichimoku-cloud":"Ichimoku Cloud","double-exponential":"Promedio del moviemto doble exponencial","parabolic-sar":"Parabolico de SAR","standard-deviation":"Desviacion Estandar",envelope:"Sobre (Envelope)","williams-%r":"Variedad del porcentaje de Williams",atr:"ATR",rsi:"RSI",adx:"ADX","awesome-oscillator":"Increible oscilador","acceleration/deceleration":"Aceleración/desaceleracion","keltner-channels":"Canal de Keltner","donchian-channel":"Canal de Donchian",macd:"MACD","zoom-in":"Aumentar el zoom","zoom-out":"Disminuir el zoom",lock:"Fijar todas herramientas del dibujo",clear:"Eliminar todas las herramientas del dibujo",save:"Guardar",restore:"Restaurar","stay-in-drawing":"Quedarse en modo dibujo","show-hide":"Ocultar todas las herramientas de dibujo","magnet-mode":"Modo Iman","roulette-mode":"Modo Ruleta",more:"Mas","vertical-line":"Línea Vertical","horizontal-line":"Línea Horizontal","trend-line":"Línea de tendecnia","trend-angle":"Angulo de tendencia","horizontal-ray":"Haz horizontal",arrow:"Flecha",ray:"Haz","parallel-channel":"Canal paralelo","disjoint-angle":"Angulo divergente","flat-top/bottom":"Plano Superior/inferior",dot:"Punto",cross:"Cruzado",brush:"Cepillo",rectangle:"Rectangulo","rotated-rectangle":"Rectangulo Girado",ellipse:"Elipse",triangle:"Triangulo",polyline:"Polilinea",curve:"Curva","double-curve":"Double Curve -es",arc:"Arco",text:"Texto","anchored-text":"Texto Anclado","arrow-mark":"Marca de Flecha","arrow-mark-left":"Marca de flecha izquierda","arrow-mark-right":"Marca de flecha derecha","arrow-mark-up":"Marca de flecha arriba","arrow-mark-down":"Marca de flecha abajo",flagcolor:"Color de la bandera",flag:"Bandera",note:"Nota","anchored-note":"Nota anclada",all:"Todo",commodity:"Mercancia",currency:"Moneda",index:"Indice",stock:"Stock",crypto:"Crypto","no-financial":"Ningun Instrumento Financiero coincide con su criterio","indicator-not-found":"Ningun indicador emparejo con sus criterios",candle:"Velas Japonesas",area:"Area",bar:"Barras",hollow:"Velas vacias",bid:"Oferta",ask:"Preguntar",mid:"Media",open:"Abierto",high:"Alto",low:"Bajo",close:"Cerrado",value:"Valor",delete:"Eliminar",params:"Parametros",coordinates:"Coordenadas",visibility:"Vsibilidad",normal:"Normal",dash:"Guion",point:"Puntos",points:"Puntos","show-price":"Mostrar el Precio","show-price-range":"Mostrar el Rango de Precio","show-text":"Mostrar el Texto","show-time":"Mostrar el Intervalo de Tiempo","text-color":"Color del Texto De Estadistica","text-alignment":"Alineacion del Texto","left-end":"Final Izquiero","right-end":"Final Derecho","show-bars":"Mostrar la Variedad de Barras","show-bars-range":"Mostrar la Variedad de Barras","show-date":"Mostrar el Rango de Fechas","show-date-time-range":"Muestre el Rango del Tiempo Fecha","show-distance":"Mostrar Distancia","show-angle":"Mostrar Angulo","always-show-stats":"Mostrar Siempre Estadisticas",middle:"Media",signals:"Señales",simple:"Simple","with-markers":"Con Marcadores",step:"Paso","custom-color":"Color personalizado","buy-time":"Buy Time(ES)","purchase-time":"PURCHASE\nTIME (ES)",optionResult:"Result","bars-roulete":" bars, ","day-roulete":" d, ","hour-roulete":" h, ","minute-roulete":" m "},ar:{"1-minute":"1 دقيقة","5-minutes":"5 دقائق","15-minutes":"15 دقائق","30-minutes":"30 دقيقة","1-hour":"1 ساعة","4-hours":"4 ساعات","8-hours":"8 ساعات","1-day":"1 يوم","1-week":"1 اسبوع","1-month":"1 شهر","1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","8h":"8h","1D":"1D","1W":"1W","1M":"1M","link-symbol-to":"رابط الرمز لجميع البيانات","link-interval-to":"رابط فاصل لجميع البيانات","link-crosshair-on":"رابط تقاطع لجميع البيانات","track-time-on":"المسار الزمني لجميع البيانات","color-bars-based":"لون القضبان إستنادا على الإغلاق السابق",borders:"السكتة الدماغية",border:"السكتة الدماغية",wick:"فتيلة","price-line":"خط السعر",scale:"سلم",scales:"النطاقات","override-min":"تجاوز الحد الأدنى للقراد","price-source":"مصدر السعر",line:"خط",fill:"ملء",type:"نوع","hlc-bars":"قضبان HLC","up-color":"اللون أعلاه","down-color":"اللون أسفله",default:"افتراضيا","default-tch":"افتراضيا",ok:"حسنا",cancel:"إلغاء",style:"أسلوب",inputs:"مساهمات",K:"ك",D:"د",KLine:"الخط ك",DLine:"الخط د",ADX:"ADX",DIM:"DI-",DIP:"DI+",fastLength:"طول سريع",slowLength:"طول بطئ",signalLength:"إشارة التمهيد",histogram:"الرسم البياني",signal:"إشارة",U:"الأعلى",M:"الأوسط",L:"ضعيف",cloud:"سحابة",smallPeriod:"مدة قصيرة",middlePeriod:"مدة متوسطة",largePeriod:"مدة طويلة",TenkanSen:"TenkanSen",KijunSen:"KijunSen",ChinkouSpan:"ChinkouSpan",SenkouSpanA:"SenkouSpanA",SenkouSpanB:"SenkouSpanB",A:"أ",B:"ب",lenght:"الطول",percent:"نسبه مئويه",avarage:"متوسط",startAf:"بدء",stepAf:"خطوة",maxAf:"ماكس",multi:"متعدد",lineUp:"خط للأعلى",lineDown:"خط للسفل",period:"فترة",background:"خلفية",timezone:"منطقة زمنية",right:"يمين",left:"يسار","auto-scale":"السلم التلقائي",percentage:"النسبة المئوية","log-scale":"تسجيل الجدول","scale-series":"تجاهل مقياس المؤشر","lock-scale":"إغلاق الجدول","track-time":"مسار زمني","top-margin":"الهامش العلوي","bottom-margin":"الهامش السفلي","right-margin":"الهامش الأيمن","left-axis":"المحور الأيسر","right-axis":"المحور الأيمن",countdown:"العد التنازلي","symbol-last":"رمز اخر قيمة","indicator-last":"مؤشراخر قيمة","symbol-labels":"رمز العلامات","indicator-labels":"مؤشر العلامات","precise-labels":"علامات دقيقة",label:"علامة","vert-grid-lines":"الخط العمودي للشبكة","horz-grid-lines":"الخط الأفقي للشبكة","scales-text":"النص على المقاييس","scales-lines":"مقياس الخطوط",watermark:"العلامة المائية",crosshair:"التقاطع","navigation-buttons":"أزرار التنقل","symbol-description":"رمز الوصف","ohlc-values":"قيم OHLC","indicator-titles":"أسماء المؤشرات","indicator-arguments":"حجج المؤشرات","indicator-values":"معنى المؤشر","visible-on mouse":"مرئية على الماوس ","always-visible":"مرئية دائما","always-invisible":"دائما غير مرئية",themes:"المواضيع",blue:"سماوي",black:"أسود",grey:"رمادي",indicators:"مؤشرات","type-indicator":"أدخل اسم المؤشر","bears-power":"قوة الدببة","bulls-power":"قوة الثيران",stochastic:"العشوائية","simple-moving":"متوسط متحرك بسيط","exponential-moving":"المتوسط المتحرك الأسي","bollinger-bands":"خطوط بولينجر","williams-fractal":"كسورية ويليامز","ichimoku-cloud":"إيشيموكو كلاود","double-exponential":"المتوسط المتحرك المزدوج","parabolic-sar":"مؤشر مكافئ SAR","standard-deviation":"الانحراف المعياري",envelope:"ظرف","williams-%r":"نسبة ويليامز",atr:"ATR",rsi:"RSI",adx:"ADX","awesome-oscillator":"المذبذب العجيب","acceleration/deceleration":"التسارع / التباطؤ","keltner-channels":"قنوات كيلتنر","donchian-channel":"قناة دونشيان",macd:"MACD","zoom-in":"تكبير","zoom-out":"تصغير",lock:"إصلاح كل الأشياء المقدمة",clear:"مسح كل الأشياء المرسومة",save:"حفظ",restore:"إعادة ","stay-in-drawing":"البقاء في وضع الرسم","show-hide":"إخفاء جميع الأشياءالمقدمة","magnet-mode":"مغناطيس","roulette-mode":"روليت",more:"أكثر","vertical-line":"خط عمودي","horizontal-line":"خط أفقي","trend-line":"اتجاه الخط","trend-angle":"زاوية الاتجاه","horizontal-ray":"شعاع أفقي",arrow:"سهم",ray:"شعاع ","parallel-channel":"قناة","disjoint-angle":"زاوية متباينة","flat-top/bottom":"شقة أعلى / أسفل",dot:"نقطة",cross:"تقاطع",brush:"فرشاة",rectangle:"مستطيل","rotated-rectangle":"مستطيل مستدير",ellipse:"قطعة ناقصة",triangle:"مثلث",polyline:"خط متقطع",curve:"منحنى","double-curve":"Double Curve -ar",arc:"قوس",text:"نص","anchored-text":"نص راسخ","arrow-mark":"سهم مارك","arrow-mark-left":"سهم موجه لليسار","arrow-mark-right":"سهم موجه لليمين","arrow-mark-up":"سهم موجه للأسفل","arrow-mark-down":"سهم موجه للأعلى",flagcolor:"لون العلم",flag:"علم",note:"ملحوظة","anchored-note":"ملاحظة راسخة",all:"الكل",commodity:"سلعة",currency:"عملة",index:"مؤشر",stock:"سهم",crypto:"مشفرة","no-financial":"لاتوجد أداة مالية مطابقة للمعايير الخاصة بك","indicator-not-found":"لا توجد مؤشرات تطابق معاييرك",candle:"الشمعات اليابانية",area:"منطقة",bar:"الحانات",hollow:"الشموع الفارغة",bid:"عرض",ask:"اسأل",mid:"متوسط",open:"فتح",high:"مرتفع",low:"منخفض",close:"غلق",value:"القيمة",delete:"حذف",params:"المعايير .إعدادات.خيارات",coordinates:"إحداثيات",visibility:"رؤية",normal:"عادي",dash:"اندفاع",point:"نقاط",points:"نقاط","show-price":"اظهار السعر","show-price-range":"هامش إظهار السعر","show-text":"إظهار النص","show-time":"هامش إظهار النص","text-color":"إحصائيات لون النص","text-alignment":"محاذاة النص","left-end":"نهاية اليسار","right-end":"النهاية اليمنى","show-bars":"هامش إظهار القضبان","show-bars-range":"هامش إظهار القضبان","show-date":"هامش إظهار التاريخ ","show-date-time-range":"هامش إظهار التاريخ الزمني","show-distance":"إظهار المسافة","show-angle":"إظهار الزاوية","always-show-stats":" إظهار الإحصاءات دائما ",middle:"المتوسط",signals:"الإشارات",simple:"بسيط","with-markers":"مع علامات",step:"خطوة","custom-color":"Custom color-ar","buy-time":"Buy Time(AR)","purchase-time":"Purchase Time(AR)","bars-roulete":" bars, ","day-roulete":" d, ","hour-roulete":" h, ","minute-roulete":" m "},default:{}}},"./src/scripts/Config/config.js":function(t,a){"use strict";a.a=function(){return{pair:{ID:23,Name:"EURUSD",FullName:"EUR/USD",Category:"Currency"},period:"1",timeMode:"local",chartType:"candle",state:"default",indicators:[],currentValue:{ask:"0.00000",bid:"0.00000",mid:"0.00000"},connectorOptions:{url:"//192.168.1.222/wss/api/quotation/",wsUrl:"//192.168.1.222/wss/Server.ashx",authData:{sid:null,sockUser:null,sockPassword:null,um_session:null},source:"integration",type:"widgets"},links:{quotationCountriesUrl:"//192.168.1.222/wss/quotation/getsettingsFromFile/quotation_countries?json",settingsUrl:"//192.168.1.222/wss/quotation/getsettings?tch=true",newsSourceUrl:"//192.168.1.222/adminapi/settings/getnewssource/",eventsSourceUrl:"//192.168.1.222/adminapi/settings/geteventssource/"},quotationCountries:!1,lang:"ru",isHeaderHidden:!1,isSidebarHidden:!1,isFullScreen:!1,isDataPanel:!1,isAutoRestore:!0,isMagnetMode:!1,isStayDrawingMode:!1,isShowDrawingObjects:!0,isDrawingObjectsLocked:!1,isPipsShow:!1,rowsid:[],defaultId:23,typeThemes:"default",isConfigpage:!1,typeData:"bid",tabsQuantity:5,timeframesForEvents:["Minute","Minute5","Minute15","Minute30","Hour"],timeframesForNews:["Minute","Minute5","Minute15","Minute30","Hour"],offsetChart:.2,defaultParams:{activeSpliter:0,activeChartIndex:0,cursorType:"arrow",setTimeoutforSave:750,paramsPanels:{isHeaderHidden:!1,isSidebarHidden:!0,isFullScreen:!0,isDataPanel:!0},version:"1.0"},modules:{isSideBarCreate:!0,isHeaderCreate:!0,headerButtons:{searchQuotationButton:!0,createTabButton:!0,fullScreenButton:!0,chartTypeButton:!0,periodsButton:!0,indicatorButton:!0,splitterButton:!0,createTypeDataButton:!0,typeDataButton:!0,settingsButton:!0,htmlTypeDataButton:!0,createPipsButton:!1,createFavouritesButton:!1},sideBarButtons:{cursorTypeButton:!0,drawingObjectsButton:!0,brushTypeButton:!0,zoomButton:!0,lockButton:!0,basketButton:!0,saveRestoreButtons:!0,stayDrawingModeButton:!0,hideDrowingObjectButton:!0,magnetModeButton:!0,rouleteButton:!0,textTypeButton:!0},chartElements:{hiddenDataPanel:!0,isDataPanelCreate:!0,isShowPriceLineOfLastBar:!0},isShowNews:!1,isShowEvents:!1,signals:!1,trading:!1},dropDown:{periods:["Minute","Minute5","Minute15","Minute30","Hour","Hour4","Hour8","Day","Week","Month"],chartTypes:["candle","area","line","bar","hollow"],typeDatas:["bid","ask","mid"],indicators:["Bears","Bulls","SO","ATR","RSI","WILLIAMSR","ADX","MACD","SMA","EMA","BB","Fractal","Ichimoku","Env","DEMA","Sar","STD","Keltner","Donchian","AO","AC"]},quotationName:" ",images:{},rightPadding:8,candleWidth:6,dataOffset:0,precission:5,marginTop:50,marginBottom:20,scaleParams:{},numb:500,fallBack:500,zoomView:1,drawingObjects:[],startY:0,defaultTopPositionDataWindowOnChart:46}}},"./src/scripts/Config/styles.js":function(t,a){"use strict";a.a={colors:{Chart:{backgroundColor:"#ffffff",vertGridLines:"#CCCCCC",horzGridLines:"#CCCCCC",scalesText:"#8C8C8C",colorScalesLines:"#8C8C8C",colorCrossHair:"#005C86",watermarkColor:"rgba(207,226,243,0.5)",labelCall:"rgba(27, 224, 106,1)",labelPut:"rgba(255,31,75,1)"},CandleChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#CD2F47",candleBool:"#8CC63F",candleLine:"#898989",activeCandle:"blue",crossTextRects:"#014EC2",crossText:"#FFFFFF",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},HollowChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#CD2F47",candleBool:"#8CC63F",candleLine:"#898989",activeCandle:"blue",crossTextRects:"#014EC2",crossText:"#FFFFFF",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},LineChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#CD2F47",candleBool:"#8CC63F",crossLine:"#014EC2",crossTextRects:"#014EC2",crossText:"#FFFFFF",colorLine:"#005C86",priceLine:"#EE8926"},AreaChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#CD2F47",candleBool:"#8CC63F",crossLine:"#014EC2",crossTextRects:"#014EC2",crossText:"#FFFFFF",colorLine:"#4BCEA9",colorStop:"#4BCEA9",colorStopEnd:"#ffffff",priceLine:"#EE8926"},BarChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#CD2F47",candleBool:"#8CC63F",candleLine:"#898989",crossLine:"#014EC2",activeCandle:"blue",chartBorder:"#8C8C8C",crossTextRects:"#014EC2",crossText:"#FFFFFF"}},options:{Chart:{autoScale:!0,scaleSeriesOnly:!0,needPriceLine:!0,widthPriceLine:1,typeTick:"Default",typeChart:"candle",typeVertGridLines:"normal",typeHorzGridLines:"normal",typeCrossHair:"points",widthCrossHair:1,scalesFontSize:10,symbolDescription:!0,ohlcValues:!0,indicatorTitles:!0,indicatorArguments:!0,indicatorValues:!0,typeThemes:"defaultThema",needPriceOscillators:!0},CandleChart:{needWick:!0,needBorder:!0,colorPrevious:!1,widthBorderLine:1,widthWickLine:1},HollowChart:{needWick:!0,needBorder:!0,colorPrevious:!1,widthBorderLine:1,widthWickLine:1},LineChart:{widthLine:1,priceSource:"Close",typeLine:"Simple"},AreaChart:{widthLine:1,priceSource:"Close"},BarChart:{needOpen:!1}},themes:{blackthema:{Chart:{backgroundColor:"#080808",vertGridLines:"#CCCCCC",horzGridLines:"#CCCCCC",scalesText:"#8C8C8C",colorScalesLines:"#8C8C8C",colorCrossHair:"#014EC2",watermarkColor:"rgba(207,226,243,0.5)"},CandleChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#66CC69",candleLine:"#898989",activeCandle:"blue",crossTextRects:"#014EC2",crossText:"#FFFFFF",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},HollowChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#008000",candleLine:"#898989",activeCandle:"blue",crossTextRects:"#014EC2",crossText:"#FFFFFF",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},LineChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#66CC69",crossLine:"#014EC2",crossTextRects:"#014EC2",crossText:"#FFFFFF",colorLine:"#3395d7",priceLine:"#EE8926"},AreaChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#66CC69",crossLine:"#014EC2",crossTextRects:"#014EC2",crossText:"#FFFFFF",colorLine:"#3395d7",colorStop:"#7ab1e7",colorStopEnd:"#ffffff",priceLine:"#EE8926"},BarChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#66CC69",candleLine:"#898989",crossLine:"#014EC2",activeCandle:"blue",chartBorder:"#8C8C8C",crossTextRects:"#014EC2",crossText:"#FFFFFF"}},bluethema:{Chart:{backgroundColor:"#acf7f7",vertGridLines:"#CCCCCC",horzGridLines:"#CCCCCC",scalesText:"#8C8C8C",colorScalesLines:"#8C8C8C",colorCrossHair:"#014EC2",watermarkColor:"rgba(207,226,243,0.5)"},CandleChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#0909ff",candleLine:"#898989",activeCandle:"blue",crossTextRects:"#014EC2",crossText:"#FFFFFF",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},HollowChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#008000",candleLine:"#898989",activeCandle:"blue",crossTextRects:"#014EC2",crossText:"#FFFFFF",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},LineChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#0909ff",crossLine:"#014EC2",crossTextRects:"#014EC2",crossText:"#FFFFFF",colorLine:"#3395d7",priceLine:"#EE8926"},AreaChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#0909ff",crossLine:"#014EC2",crossTextRects:"#014EC2",crossText:"#FFFFFF",colorLine:"#3395d7",colorStop:"#7ab1e7",colorStopEnd:"#ffffff",priceLine:"#EE8926"},BarChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#66CC69",candleLine:"#898989",crossLine:"#014EC2",activeCandle:"blue",chartBorder:"#8C8C8C",crossTextRects:"#014EC2",crossText:"#FFFFFF"}},greythema:{Chart:{backgroundColor:"#d8d8d8",vertGridLines:"#CCCCCC",horzGridLines:"#CCCCCC",scalesText:"#8C8C8C",colorScalesLines:"#8C8C8C",colorCrossHair:"#014EC2",watermarkColor:"rgba(207,226,243,0.5)"},CandleChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#66CC69",candleLine:"#898989",activeCandle:"blue",crossTextRects:"#014EC2",crossText:"#FFFFFF",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},HollowChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#008000",candleLine:"#898989",activeCandle:"blue",crossTextRects:"#014EC2",crossText:"#FFFFFF",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},LineChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#66CC69",crossLine:"#014EC2",crossTextRects:"#014EC2",crossText:"#FFFFFF",colorLine:"#3395d7",priceLine:"#EE8926"},AreaChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#66CC69",crossLine:"#014EC2",crossTextRects:"#014EC2",crossText:"#FFFFFF",colorLine:"#3395d7",colorStop:"#7ab1e7",colorStopEnd:"#ffffff",priceLine:"#EE8926"},BarChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#F54337",candleBool:"#66CC69",candleLine:"#898989",crossLine:"#014EC2",activeCandle:"blue",chartBorder:"#8C8C8C",crossTextRects:"#014EC2",crossText:"#FFFFFF"}},defaultthema:{Chart:{backgroundColor:"#ffffff",vertGridLines:"#CCCCCC",horzGridLines:"#CCCCCC",scalesText:"#8C8C8C",colorScalesLines:"#8C8C8C",colorCrossHair:"#005C86",watermarkColor:"rgba(207,226,243,0.5)"},CandleChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#CD2F47",candleBool:"#8CC63F",candleLine:"#898989",activeCandle:"blue",crossTextRects:"#014EC2",crossText:"#FFFFFF",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},HollowChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#CD2F47",candleBool:"#8CC63F",candleLine:"#898989",activeCandle:"blue",crossTextRects:"#014EC2",crossText:"#FFFFFF",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},LineChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#CD2F47",candleBool:"#8CC63F",crossLine:"#014EC2",crossTextRects:"#014EC2",crossText:"#FFFFFF",colorLine:"#005C86",priceLine:"#EE8926"},AreaChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#CD2F47",candleBool:"#8CC63F",crossLine:"#014EC2",crossTextRects:"#014EC2",crossText:"#FFFFFF",colorLine:"#4BCEA9",colorStop:"#4BCEA9",colorStopEnd:"#ffffff",priceLine:"#EE8926"},BarChart:{priceText:"#FFFFFF",axisText:"#484848",candleBear:"#CD2F47",candleBool:"#8CC63F",candleLine:"#898989",crossLine:"#014EC2",activeCandle:"blue",chartBorder:"#8C8C8C",crossTextRects:"#014EC2",crossText:"#FFFFFF"}}}}},"./src/scripts/Connector/ConnectorTest.js":function(t,a,e){"use strict";var i=e("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=e.n(i),r=e("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),n=e.n(r),o=e("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=e.n(o),c=e("./node_modules/@babel/runtime/helpers/inherits.js"),l=e.n(c),d=e("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),p=e.n(d),u=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),g=e.n(u),D=function Connector(t){var a=this;if(s()(this,Connector),g()(this,"init",function(){a.createWebSocketConn()}),g()(this,"createWebSocketConn",function(){}),g()(this,"close",function(){}),g()(this,"getNews",function(t){if(a.options.newsUrl){var e=a.options.newsUrl+"&from="+t.interval.from+"&to="+t.interval.to+"&count=100";a.getData(e,[t.listener],t)}}),g()(this,"getEvents",function(t){if(a.options.eventsUrl){var e=a.convertUnixToEventsAPIDate(t.interval.from),i=a.convertUnixToEventsAPIDate(t.interval.to),s="default"===t.lang?"ru":t.lang,r=a.options.eventsUrl+"?f=json&view=range&volatility=2&start="+e+"&end="+i+"&culture="+s+"&countrycode="+t.countries.join(",");a.getData(r,[t.listener],t)}}),g()(this,"convertUnixToEventsAPIDate",function(t){var a=new Date(1e3*t),e=a.getUTCFullYear().toString(),i=(a.getUTCMonth()+1).toString();i=i.length>1?i:"0"+i;var s=a.getUTCDate().toString();return e+""+i+(s.length>1?s:"0"+s)}),g()(this,"updateSubscription",function(){}),g()(this,"getData",function(t,a,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState&&200===i.status)for(var t=0;t<a.length;t++)a[t].onConnectorMessage(i,a[t],e)},i.open("GET",t,!0),i.send(null)}),g()(this,"parseSignals",function(t){for(var e=[],i=JSON.parse(t),s=0;s<i.length;s++){var r={id:i[s].resultuid,strength:i[s].quality,symbol:i[s].symbol,period:a.convertIntervalToPeriod(i[s].interval),pattern:i[s].pattern,patternEN:i[s].pattern,direction:i[s].direction,forecast:i[s].direction>0?"Buy":"Sell",isSgnlUpdated:!1,relevant:i[s].relevant,patternEndTime:parseInt(i[s].patternendtime,10),predictionPriceFrom:i[s].predictionpricefrom,predictionPriceTo:i[s].predictionpriceto,predictionTimeFrom:i[s].predictiontimefrom,predictionTimeTo:i[s].predictiontimeto,resistancex0:i[s].resistancex0,resistancex1:i[s].resistancex1,resistancey0:i[s].resistancey0,resistancey1:i[s].resistancey1,supportx0:i[s].supportx0,supportx1:i[s].supportx1,supporty0:i[s].supporty0,supporty1:i[s].supporty1,stoploss:i[s].stoploss,trend:i[s].trend,forecastPriceFrom:i[s].predictionpricefrom,forecastPriceTo:i[s].predictionpriceto,length:i[s].length,isVisible:!1};e.push(r)}return a.combineSignals(e)}),g()(this,"combineSignals",function(t){for(var a={},e=0;e<t.length;e++)a[t[e].symbol]||(a[t[e].symbol]={}),a[t[e].symbol][t[e].id]=t[e];return a}),g()(this,"convertIntervalToPeriod",function(t){switch(t){case 1:return"Minute";case 5:return"Minute5";case 15:return"Minute15";case 30:return"Minute30";case 60:return"Hour";case 240:return"Hour4";case 480:return"Hour8";case 1440:case"Day":return"Day";case"Week":return"Week";case"Month":return"Month";case"Minute":return"Minute";case"Minute5":return"Minute5";case"Minute15":return"Minute15";case"Minute30":return"Minute30";case"Hour":return"Hour";default:return"Minute"}}),g()(this,"getMiddlePrice",function(t,a,e){return((parseFloat(t)+parseFloat(a))/2).toFixed(e)}),g()(this,"getMiddleBar",function(t,e,i){var s={};return s.open=a.getMiddlePrice(t.open,e.open,i),s.close=a.getMiddlePrice(t.close,e.close,i),s.low=a.getMiddlePrice(t.low,e.low,i),s.high=a.getMiddlePrice(t.high,e.high,i),s.date=e.date,s}),g()(this,"getPrecission",function(t){for(var e=0;e<a.listeners.length;e++)if(a.listeners[e].pair===t)return a.listeners[e].precission;return 5}),g()(this,"getBars",function(){}),g()(this,"getAutoChartistSignals",function(){}),this.instance)return this.instance;this.instance=this,this.listeners=[],this.client=null,this.subscriptions=[],this.options=JSON.parse(JSON.stringify(t.connectorOptions)),this.options.pair=t.pair,this.options.platform=t.platform,this.deleteInstance=function(){a.instance=null},this.getInstance=function(){return a.instance?a.instance:new Connector},this.addListener=function(t){t.connector=a.instance,a.listeners.push(t)},this.normalizeDateTime=function(t){var a=t.toString().split(".")[0].length-1;return t*Math.pow(10,9-a)},this.getMock=function(){return a.getData=function(){},a}};e.d(a,"a",function(){return f});var f=function(t){function ConnectorTest(t){var a;return s()(this,ConnectorTest),a=n()(this,h()(ConnectorTest).call(this,t)),g()(p()(p()(a)),"getBarsMock",function(t,e){var i=1504267200,s={ask:{open:"1.0",low:"0.5",high:"2.0",close:"1.5"},bid:{open:"0.5",low:"0.2",high:"1.7",close:"1.5"}};s.mid=a.getMiddleBar(s.ask,s.bid,1);var r={ask:{close:"1.0",low:"0.5",high:"2.0",open:"1.5"},bid:{close:"0.5",low:"0.2",high:"1.7",open:"1.5"}};r.mid=a.getMiddleBar(s.ask,s.bid,1);for(var n={bid:[],ask:[],mid:[]},o=0;o<e;o++)o%2===0?(s.bid.date=i+o*t,s.ask.date=i+o*t,s.mid.date=i+o*t,n.ask.unshift(Object.assign({},s.ask)),n.bid.unshift(Object.assign({},s.bid)),n.mid.unshift(Object.assign({},s.mid))):(r.bid.date=i+o*t,r.ask.date=i+o*t,r.mid.date=i+o*t,n.ask.unshift(Object.assign({},r.ask)),n.bid.unshift(Object.assign({},r.bid)),n.mid.unshift(Object.assign({},r.mid)));return n}),a.createWebSocketConn=function(){a.client={},a.client.connected=!0,a.updateSubscription();for(var t=0;t<a.getInstance().listeners.length;t++)a.getInstance().listeners[t].onConnect()},a.getBars=function(){if(a.listeners)for(var t=0;t<a.listeners.length;t++){var e=a.getInstance().listeners[t],i={};i.bars=a.getBarsMock(60,500),i.precission="1";var s={callBack:a.listeners[t].getFirstDataComplete,fromServer:!0,numb:500};i.bars.bid[0].isCurrentData=!0,i.bars.ask[0].isCurrentData=!0,i.bars.mid[0].isCurrentData=!0,a.listeners[t].onConnectorMessage(i,a.listeners[t],s),e.waitFor=null}},a}return l()(ConnectorTest,t),ConnectorTest}(D)},"./src/scripts/Connector/ConnectorWidgets.js":function(t,a,e){"use strict";e.d(a,"a",function(){return d});var i=e("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=e.n(i),r=e("./node_modules/@babel/runtime/helpers/createClass.js"),n=e.n(r),o=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),h=e.n(o),c=e("./src/scripts/utils/utils.js"),l=e("./node_modules/whatwg-fetch/fetch.js"),d=function(){function ConnectorWidgets(t){var a=this;s()(this,ConnectorWidgets),h()(this,"init",function(t){a.listeners=[],a.client=null,a.subscriptions=[],a.options=Object(c.b)(t.connectorOptions),a.options.pair=t.pair,a.getConnectionSettings()}),h()(this,"addListener",function(t){a.listeners.push(t)}),h()(this,"getNews",function(t){if(a.options.newsUrl){var e="".concat(a.options.newsUrl,"&from=").concat(t.interval.from,"&to=").concat(t.interval.to,"&count=100");a.getData(e,[t.listener],t)}}),h()(this,"getEvents",function(t){if(a.options.eventsUrl){var e=a.convertUnixToEventsAPIDate(t.interval.from),i=a.convertUnixToEventsAPIDate(t.interval.to),s="".concat(a.options.eventsUrl,"?f=json&view=range&volatility=2&start=").concat(e,"&end=").concat(i,"&culture=").concat(t.lang,"&countrycode=").concat(t.countries.join(","));a.getData(s,[t.listener],t)}}),h()(this,"convertUnixToEventsAPIDate",function(t){var a=new Date(1e3*t),e=a.getUTCFullYear().toString(),i=(a.getUTCMonth()+1).toString();i=i.length>1?i:"0"+i;var s=a.getUTCDate().toString();return s=s.length>1?s:"0"+s,"".concat(e).concat(i).concat(s)}),h()(this,"getData",function(t,a,e){Object(l.a)(t).then(function(t){if(200===t.status)return t.json();var a=new Error(t.statusText);throw a.res=t,a}).then(function(t){for(var i=0;i<a.length;i++)a[i].onConnectorMessage(t,a[i],e)}).catch(function(t){console.warn(t.statusText)})}),h()(this,"parseSignals",function(t){var e=JSON.parse(t).map(function(t){return{id:t.resultuid,strength:t.quality,symbol:t.symbol,period:a.convertIntervalToPeriod(t.interval),pattern:t.pattern,patternEN:t.pattern,direction:t.direction,forecast:t.direction>0?"Buy":"Sell",isSgnlUpdated:!1,relevant:t.relevant,patternEndTime:parseInt(t.patternendtime,10),predictionPriceFrom:t.predictionpricefrom,predictionPriceTo:t.predictionpriceto,predictionTimeFrom:t.predictiontimefrom,predictionTimeTo:t.predictiontimeto,resistancex0:t.resistancex0,resistancex1:t.resistancex1,resistancey0:t.resistancey0,resistancey1:t.resistancey1,supportx0:t.supportx0,supportx1:t.supportx1,supporty0:t.supporty0,supporty1:t.supporty1,stoploss:t.stoploss,trend:t.trend,forecastPriceFrom:t.predictionpricefrom,forecastPriceTo:t.predictionpriceto,length:t.length,isVisible:!1}});return a.combineSignals(e)}),h()(this,"combineSignals",function(t){for(var a={},e=0;e<t.length;e++)a[t[e].symbol]||(a[t[e].symbol]={}),a[t[e].symbol][t[e].id]=t[e];return a}),h()(this,"convertIntervalToPeriod",function(t){switch(t){case 1:return"Minute";case 5:return"Minute5";case 15:return"Minute15";case 30:return"Minute30";case 60:return"Hour";case 240:return"Hour4";case 480:return"Hour8";case 1440:case"Day":return"Day";case"Week":return"Week";case"Month":return"Month";case"Minute":return"Minute";case"Minute5":return"Minute5";case"Minute15":return"Minute15";case"Minute30":return"Minute30";case"Hour":return"Hour";default:return"Minute"}}),h()(this,"getMiddlePrice",function(t,a,e){return((parseFloat(t)+parseFloat(a))/2).toFixed(e)}),h()(this,"createWebSocketConn",function(){var t=a.options.wsUrl+"?subscriber=true";a.client=new WebSocket(t),a.client.onmessage=function(t){if(a.listeners)for(var e=0;e<a.listeners.length;e++){var i=a.processRatesData(JSON.parse(t.data));a.listeners[e].onConnectorMessage(i,a.listeners[e])}},a.client.onopen=function(){a.client.connected=!0,a.updateSubscription();for(var t=0;t<a.listeners.length;t++)a.listeners[t].onConnect()},a.client.onclose=function(){}}),h()(this,"updateSubscription",function(){if(a.client){for(var t=[],e=0;e<a.listeners.length;e++){for(var i=!1,s=0;s<t.length;s++)if(t[s].id===a.listeners[e].id&&t[s].period===a.listeners[e].getServerPeriod()){i=!0;break}i||t.push({id:a.listeners[e].id,period:a.listeners[e].getServerPeriod()})}JSON.stringify(t.sort())!==JSON.stringify(a.subscriptions.sort())&&(a.subscriptions=t,a.subscribe(a.subscriptions))}}),h()(this,"getBars",function(t){if(a.client&&a.client.connected){var e="";switch(t.cmd){case"getFirstData":e="".concat(a.options.url).concat(t.pair.ID,"/").concat(t.period,"/").concat(t.numb,"/?withCurrentBar=true&param=full"),a.getBarsData(e,t.listener,t);break;case"getDataOnUpdate":e="".concat(a.options.wsUrl.replace("ws","http"),"?command=getfirstbar&id=").concat(t.pair.ID,"&period=").concat(t.period,"&param=full"),a.getBarsData(e,t.listener,t);break;case"getDataFromSeconds":e="".concat(a.options.url).concat(t.pair.ID,"/").concat(t.period,"/").concat(t.numb,"/").concat(t.startSeconds,"?param=full"),a.getBarsData(e,t.listener,t)}}}),h()(this,"processRatesData",function(t){var e=[],i=null;if(t.data){i=JSON.parse(t.data);for(var s=0;s<i.length;s++)e.push({security:i[s].Name,bidPrice:i[s].CurrentValue})}else if(t.updated){for(var r=[],n=!1,o=0;o<a.listeners.length;o++){var h=a.listeners[o];if(h.session&&"open"===h.session&&t.updated%h.getCurrentTimeStep()===0&&h.chart){for(var l=h.pair,d=h.period,p=0;p<r.length;p++){r[p].pair.ID===l.ID&&r[p].period===d&&h.chart&&(r[p].pair=l,r[p].period=d,r[p].callBacks.push({listener:h,callBack:h.chart.updateChart})),n=!0;break}n||r.push({pair:l,period:d,callBacks:[{listener:h,callBack:h.chart.updateChart}]})}}for(var u=0;u<r.length;u++)a.getDataOnUpdate(r[u]);r=null}var g={};if(t.module)if("rates"===t.module)for(var D=0;D<t.args.length;D++)e.push({security:t.args[D].Name,bid:t.args[D].Bid,ask:t.args[D].Ask});else if("bars"===t.module&&"update"===t.cmd){var f=Object(c.b)(t);f.args.bar&&(f.args.bar=a.processModuleBarItem(f.args.bar)),g={module:f.module,cmd:f.cmd,args:f.args}}else"signals"===t.module&&("list"===t.cmd?a.processSignalsList(t.args):a.processSignals(t.args));return{rates:e,mdata:Object.keys(g).length?g:void 0}}),h()(this,"processModuleBarItem",function(t,e){var i,s=e;if(!s)for(var r in s=0,t)t.hasOwnProperty(r)&&"time"!==r&&(i=t[r].replace(",",".").split(".")).length>1&&i[1].length>s&&(s=i[1].length);return{ask:{low:t.lowAsk,high:t.highAsk,open:t.openAsk,close:t.closeAsk,date:t.time},bid:{low:t.lowBid,high:t.highBid,open:t.openBid,close:t.closeBid,date:t.time},mid:{low:a.getMiddlePrice(t.lowBid,t.lowAsk,s),high:a.getMiddlePrice(t.highBid,t.highAsk,s),open:a.getMiddlePrice(t.openBid,t.openAsk,s),close:a.getMiddlePrice(t.closeBid,t.closeAsk,s),date:t.time}}}),h()(this,"getDataOnUpdate",function(t){var e="".concat(a.options.url).concat(t.pair.ID,"/").concat(t.period,"/1"),i=null;Object(l.a)(e).then(function(t){if(200===t.status)return i=t.headers.map,t.json();var a=new Error(t.statusText);throw a.res=t,a}).then(function(e){for(var s=a.processChartDataBars(JSON.parse(e),i),r=0;r<t.callBacks.length;r++){var n={pair:t.pair,period:t.period,callBack:t.callBacks[r].callBack};t.callBacks[r].listener.onConnectorMessage(s.bars[0],t.callBacks[r].listener,n)}}).catch(function(t){console.warn(t.statusText)})}),h()(this,"processChartDataBars",function(t,e){for(var i={ask:[],bid:[],mid:[]},s=e.precission,r=0;r<t.length;r++)t[r-1]&&t[r]&&t[r].T>=t[r-1].T||(i.ask.push({low:parseFloat(t[r].LA).toFixed(s),high:parseFloat(t[r].HA).toFixed(s),open:parseFloat(t[r].OA).toFixed(s),close:parseFloat(t[r].CA).toFixed(s),date:t[r].T}),i.bid.push({low:parseFloat(t[r].LB).toFixed(s),high:parseFloat(t[r].HB).toFixed(s),open:parseFloat(t[r].OB).toFixed(s),close:parseFloat(t[r].CB).toFixed(s),date:t[r].T}),i.mid.push({low:a.getMiddlePrice(t[r].LB,t[r].LA,s),high:a.getMiddlePrice(t[r].HB,t[r].HA,s),open:a.getMiddlePrice(t[r].OB,t[r].OA,s),close:a.getMiddlePrice(t[r].CB,t[r].CA,s),date:t[r].T}));return{bars:i,precission:s,quotation:e.quotation,session:e.session?e.session.toLowerCase():"open"}}),h()(this,"getBarsData",function(t,e,i){var s=null;Object(l.a)(t).then(function(t){if(200===t.status)return s=t.headers.map,t.json();var a=new Error(t.statusText);throw a.res=t,a}).then(function(t){var r=a.processChartDataBars(JSON.parse(t),s);"getFirstData"===i.cmd&&r.bars&&Object.keys(r.bars).length&&!e.hasNextData&&(r.bars.ask[0].isCurrentData=!0,r.bars.bid[0].isCurrentData=!0,r.bars.mid[0].isCurrentData=!0),e.onConnectorMessage(r,e,i)}).catch(function(t){console.warn(t.statusText)})}),h()(this,"getAutoChartistSignals",function(){a.client&&a.client.send(JSON.stringify({module:"signals",cmd:"",args:JSON.stringify(a.getNamesOfCurrencies())}))}),h()(this,"getAutoChartistSignalsList",function(){a.client&&a.client.send(JSON.stringify({module:"signals",cmd:"list"}))}),h()(this,"processSignals",function(t){if(a.client){var e=a.parseSignals(t);if(a.listeners)for(var i=0;i<a.listeners.length;i++){var s=e[a.listeners[i].pair.Name];s?a.listeners[i].onConnectorMessage(s,a.listeners[i]):a.listeners[i].chart&&(a.listeners[i].signalsData={},a.listeners[i].chart.updateSignals())}}}),h()(this,"processSignalsList",function(t){if(a.client){var e=JSON.parse(t);a.listeners&&(a.listeners[0].techChart.signalsList=e,a.listeners[0].techChart.updateSignalsDropdown(e))}}),h()(this,"getNamesOfCurrencies",function(){return a.listeners.map(function(t){return t.pair.Name})}),h()(this,"getConnectionSettings",function(){a.options.wsUrl=a.options.wsUrl.replace("https:","").replace("http:","").replace("wss:","").replace("ws:","");var t=a.options.wsUrl.split("?")[0]+"?command=getConnectingStr";Object(l.a)(t).then(function(t){if(200===t.status)return t.text();var a=new Error(t.statusText);throw a.res=t,a}).then(function(t){var e=window.location.protocol.replace("http","ws");a.options.wsUrl=e+a.options.wsUrl,a.options.wsUrl=a.options.wsUrl.replace(/\/\/informer./,"//".concat(t,".")),a.options.wsUrl=a.options.wsUrl.replace("bal/",""),a.createWebSocketConn()}).catch(function(t){console.warn(t.statusText)})}),h()(this,"subscribe",function(t){a.client.send(JSON.stringify({module:"binding",cmd:"update",args:t}))}),ConnectorWidgets.instance&&console.warn("Instantiation failed: use Connector.getInstance() instead of new."),this.listeners=[],this.client=null,this.subscriptions=[],this.options={},this.options.pair="",this.init(t)}return n()(ConnectorWidgets,null,[{key:"getInstance",value:function getInstance(t){return ConnectorWidgets.instance?(ConnectorWidgets.instance.init(t),ConnectorWidgets.instance):ConnectorWidgets.instance=new ConnectorWidgets(t)}},{key:"destroy",value:function destroy(){ConnectorWidgets.instance=null}}]),ConnectorWidgets}()},"./src/scripts/Drawing/Brush.js":function(t,a,e){"use strict";function Brush(t,a){arguments&&arguments.length&&n.a.apply(this,arguments),this.points=[a.points[0]],this.data=[a.data[0]],this.drawingStage={current:0,max:1},this.circles=[],this.color="#2c2d2d",this.tmpPoint=null,this.controlPoints=[],this.width=2,this.t=.5,this.radius=7,this.lineType="normal",this.extremePoints={},this.extremeData={},this.isFocused=function(t,a){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var e=!1;if(this.isObjectEdit=!1,this.isChanged=!1,this.isFocusedOnCircles(t,a)&&(e=!0,this.isChanged=!0),e||this.isPointInsideExtremePoints(t,a)&&this.isPointOnBrush(t,a)){for(var i=0;i<this.points.length;i++)this.points[i].active=!0;return this.circles[0].points[0].active=!0,this.circles[1].points[0].active=!0,this.isObjectEdit=!0,!0}for(i=0;i<this.points.length;i++)this.points[i].active=!0;return this.circles[0].points[0].active=!1,this.circles[1].points[0].active=!1,this.isObjectEdit=!1,!1},this.twoPointsDistance=function(t,a){return Math.sqrt(Math.pow(t.x-a.x,2)+Math.pow(t.y-a.y,2))},this.twoPointsVector=function(t,a){return[a.x-t.x,a.y-t.y]},this.calculateControlPoints=function(t,a,e){var i=this.twoPointsVector(t,e),s=this.twoPointsDistance(t,a),r=this.twoPointsDistance(a,e),n=s+r;return[{x:a.x-i[0]*this.t*s/n,y:a.y-i[1]*this.t*s/n},{x:a.x+i[0]*this.t*r/n,y:a.y+i[1]*this.t*r/n}]},this.updateControlPoints=function(){var t=this.points.slice();this.tmpPoint&&t.push(this.tmpPoint),this.controlPoints=[];for(var a=0;a<t.length-2;a+=1){var e=t[a]?t[a]:NaN,i=t[a+1]?t[a+1]:NaN,s=t[a+2]?t[a+2]:NaN;this.controlPoints=this.controlPoints.concat(this.calculateControlPoints(e,i,s))}},this.shiftTo=function(t,a,e,i,s){if(0!==a||0!==t){for(var r=0;r<this.points.length;r++)this.points[r].y-=a,this.points[r].x-=t,this.data[r].d-=i,this.data[r].v-=s;this.updateControlPoints(),this.circles[0].points[0]=this.points[0],this.circles[1].points[0]=this.points[this.points.length-1],this.extremePoints.bottom-=a,this.extremeData.bottom-=s,this.extremePoints.top-=a,this.extremeData.top-=s,this.extremePoints.left-=t,this.extremeData.left-=i,this.extremePoints.rigth-=t,this.extremeData.rigth-=i}},this.moveTo=function(t,a,e){if(!(this.drawingStage.current>1)){var i=this.points[this.points.length-1];Math.abs(i.x-t)>this.radius||Math.abs(i.y-e.y)>this.radius?(this.points.push({x:t,y:a}),this.data.push({d:e.dateSeconds,v:e.value}),this.tmpPoint=null):this.tmpPoint={x:t,y:a},this.updateControlPoints()}},this.updatePixels=function(){if(!this.isPressed){for(var t=0;t<this.points.length;t++)this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v);this.circles.length&&(this.circles[0].points[0]=this.points[0],this.circles[1].points[0]=this.points[this.points.length-1],this.restoreExtremePoints()),this.updateControlPoints()}},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var a=this.points.slice();if(this.tmpPoint&&a.push(this.tmpPoint),a.length<2)return!1;if(2===a.length)t.beginPath(),t.moveTo(a[0].x,a[0].y),t.lineTo(a[1].x,a[1].y),t.stroke();else{t.beginPath(),t.moveTo(a[0].x,a[0].y),t.quadraticCurveTo(this.controlPoints[0].x,this.controlPoints[0].y,a[1].x,a[1].y);for(var e=2;e<a.length-1;e+=1)t.bezierCurveTo(this.controlPoints[2*(e-1)-1].x,this.controlPoints[2*(e-1)-1].y,this.controlPoints[2*(e-1)].x,this.controlPoints[2*(e-1)].y,a[e].x,a[e].y);t.quadraticCurveTo(this.controlPoints[2*(e-1)-1].x,this.controlPoints[2*(e-1)-1].y,a[e].x,a[e].y),t.strokeStyle=this.color,t.lineWidth=this.width,t.setLineDash(this.getLineTypeArray(this.lineType,this.width)),t.stroke()}if("edit"===this.state||"active"===this.state)for(e=0;e<this.circles.length;e++)this.circles[e].points[0].active?this.circles[e].drawWithShadow(t,"red",this.color,.1):this.circles[e].drawWithShadow(t,"white",this.color,.1);return!0},this.findExtremePoints=function(){var t={x:parseInt(this.points[0].x),y:parseInt(this.points[0].y)},a=this.data[0];this.extremePoints={top:t.y,bottom:t.y,left:t.x,rigth:t.x},this.extremeData={top:a.v,bottom:a.v,left:a.d,rigth:a.d};for(var e=0;e<this.points.length;e++)this.extremePoints.bottom<this.points[e].y&&(this.extremePoints.bottom=this.points[e].y,this.extremeData.bottom=this.data[e].v),this.extremePoints.top>this.points[e].y&&(this.extremePoints.top=this.points[e].y,this.extremeData.top=this.data[e].v),this.extremePoints.left>this.points[e].x&&(this.extremePoints.left=this.points[e].x,this.extremeData.left=this.data[e].d),this.extremePoints.rigth<this.points[e].x&&(this.extremePoints.rigth=this.points[e].x,this.extremeData.rigth=this.data[e].d)},this.restoreExtremePoints=function(){this.extremePoints.bottom=this.chartData.chart.toYPixels(this.extremeData.bottom),this.extremePoints.top=this.chartData.chart.toYPixels(this.extremeData.top),this.extremePoints.left=this.chartData.chart.toXPixels(this.extremeData.left),this.extremePoints.rigth=this.chartData.chart.toXPixels(this.extremeData.rigth)},this.completeFigure=function(){if(!this.circles.length){if(this.drawingStage.current+=1,this.tmpPoint){this.points.push(this.tmpPoint);var t=this.chartData.chart.toXValue(this.tmpPoint.x),a=this.chartData.chart.toYValue(this.tmpPoint.y);this.data.push({d:t,v:a}),this.tmpPoint=null}if(1==this.points.length){var e={x:this.points[0].x,y:this.points[0].y},s={d:this.data[0].d,v:this.data[0].v};this.points.push(e),this.data.push(s)}this.findExtremePoints(),this.updateControlPoints(),this.circles.push(new i.a(this.chartData,{data:[this.data[0]],points:[this.points[0]]})),this.circles.push(new i.a(this.chartData,{data:[this.data[this.data.length-1]],points:[this.points[this.points.length-1]]}))}},this.getLineTypeArray=function(t,a){switch(t){case"normal":return[];case"dash":return[3*a,2*a];case"points":return[a,a];default:return[]}},this.isFocusedOnCircles=function(t,a){for(var e=0;e<this.circles.length;e++)if(r.a.isPointOnCircle(this.circles[e],{x:t,y:a}))return!0;return!1},this.isPointInsideExtremePoints=function(t,a){var e=this.extremePoints,i={x:[e.left-4,e.left-4,e.rigth+4,e.rigth+4],y:[e.bottom+4,e.top-4,e.top-4,e.bottom+4]};return!!r.a.isPointInPolygon(t,a,i)},this.isPointOnBrush=function(t,a){for(var e=this.points,i=1;i<this.points.length;i++)if(r.a.isPointOnLine({x1:e[i-1].x,x2:e[i].x,y1:e[i-1].y,y2:e[i].y},{x:t,y:a}))return!0;return!1},this.updateCustomPropsByObj=function(t,a){n.a.prototype.updateCustomPropsByObj.apply(this,arguments),t.extremeData=s.a.cloneObject(a.extremeData)},this.lineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.lineConvertToDTO();return this.updateCustomPropsByObj(t,this),t}}e.d(a,"a",function(){return Brush});var i=e("./src/scripts/Drawing/Circle.js"),s=e("./src/scripts/Drawing/DrawingObject.js"),r=e("./src/scripts/Drawing/LibDrawing.js"),n=e("./src/scripts/Drawing/Line.js");Brush.prototype=Object.create(n.a.prototype),Brush.prototype.constructor=Brush,Brush.convertFromDTO=function(t,a){var e=n.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e}},"./src/scripts/Drawing/Circle.js":function(t,a,e){"use strict";function Circle(){arguments&&arguments.length&&i.a.apply(this,arguments),this.radius=5,this.lineWidth=1,this.convertToDTO=function(){var t=i.a.prototype.convertToDTO.apply(this,arguments);return this.updateCustomPropsByObj(t,this),t},this.applyRestoredParams=function(t){i.a.prototype.applyRestoredParams.apply(this,arguments),this.updateCustomPropsByObj(this,t)}}e.d(a,"a",function(){return Circle});var i=e("./src/scripts/Drawing/DrawingObject.js"),s=e("./src/scripts/Libs/LibCanvas.js");Circle.prototype=Object.create(i.a.prototype),Circle.prototype.constructor=Circle,Circle.prototype.draw=function(t,a,e){s.a.drawCircle(null,t,this.points[0].x,this.points[0].y,this.radius,this.lineWidth,a,e)},Circle.prototype.drawShadow=function(t,a,e,i){s.a.drawCircle(null,t,this.points[0].x,this.points[0].y,this.radius+5,this.lineWidth,e,e,i)},Circle.prototype.drawWithShadow=function(t,a,e,i){this.drawShadow(t,a,e,i),this.draw(t,a,e)},Circle.convertFromDTO=function(t,a){var e=i.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},Circle.prototype.updateCustomPropsByObj=function(t,a){t.radius=a.radius,t.lineWidth=a.lineWidth}},"./src/scripts/Drawing/DrawingObject.js":function(t,a,e){"use strict";function DrawingObject(t,a){this.id=this.getNextId(),this.chartData=t,this.data=DrawingObject.cloneObject(a.data),this.points=DrawingObject.cloneObject(a.points),this.isObjectEdit=!1,this.drawingStage={current:1,max:0},this.periods=[]}e.d(a,"a",function(){return DrawingObject});var i=e("./src/scripts/Drawing/LibDrawing.js");DrawingObject.precission=7,DrawingObject.nextId=1,DrawingObject.prototype.getNextId=function(){return"tch-drw-"+DrawingObject.nextId++},DrawingObject.prototype.remove=function(){this.chartData.editDrawingObject&&this.chartData.editDrawingObject.id===this.id&&(this.chartData.editDrawingObject=null),this.chartData.activeDrawingObject&&this.chartData.activeDrawingObject.id===this.id&&(this.chartData.activeDrawingObject=null);var t=this.getIndex();t>-1&&this.chartData.drawingObjects.splice(t,1)},DrawingObject.prototype.getIndex=function(){for(var t=0;t<this.chartData.drawingObjects.length;t++)if(this.chartData.drawingObjects[t].id===this.id)return t;return-1},DrawingObject.prototype.shiftTo=function(){},DrawingObject.prototype.moveTo=function(){},DrawingObject.prototype.updateValues=function(){},DrawingObject.prototype.updatePixels=function(){for(var t=0;t<this.points.length;t++)this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v)},DrawingObject.prototype.updateYPixels=function(){},DrawingObject.prototype.updateXPixels=function(){},DrawingObject.prototype.fillSettingsPanel=function(){},DrawingObject.prototype.getFunctionName=function(t,a){var e=t,i=a.split("-");for(var s in i)i.hasOwnProperty(s)&&(e+=i[s][0].toUpperCase()+i[s].slice(1));return e},DrawingObject.prototype.removeStyleMenuElementByNames=function(t,a){for(var e=[],i=0;i<t.length;i++){e[e.length]=[];for(var s=0;s<t[i].length;s++)t[i][s].options&&-1===a.indexOf(t[i][s].options.name)&&e[e.length-1].push(t[i][s]);0===e[e.length-1].length&&e.pop()}return e},DrawingObject.prototype.applyRestoredParams=function(t){this.data=t.data,this.points=t.points,this.drawingStage=t.drawingStage,this.state=t.state,this.id=t.id},DrawingObject.prototype.convertToDTO=function(){var t={};return t.type=this.constructor.name,t.id=this.id,t.data=DrawingObject.cloneObject(this.data),t.points=DrawingObject.cloneObject(this.points),t.drawingStage=DrawingObject.cloneObject(this.drawingStage),t.state="normal",t},DrawingObject.convertFromDTO=function(t,a){a.type||(a.type=a.constructor.name);var e=i.a.createDrawingObjectByType(a.type,[t,a]);return e.applyRestoredParams(a),e},DrawingObject.prototype.updateByObject=function(t){var a=t.convertToDTO(),e=i.a.convertFromDTO(this.chartData,a);this.applyRestoredParams(e),this.chartData.chart&&this.updatePixels()},DrawingObject.prototype.draw=function(){},DrawingObject.prototype.isFocused=function(){},DrawingObject.cloneObject=function(t){return JSON.parse(JSON.stringify(t))}},"./src/scripts/Drawing/LibDrawing.js":function(t,a,e){"use strict";function Text(t){arguments&&arguments.length&&s.a.apply(this,arguments),this.chartData=t,this.color="rgba(101,101,101,1)",this.fontFamily="Arial",this.fontSize=40,this.textArea="Text",this.fill=!1,this.fillColor="rgba(255,0,0,1)",this.border=!1,this.borderColor="rgba(0,255,0,1)",this.bold="off",this.italic="off",this.textSpan=null,this.rect={},this.draw=function(){this.chartData&&this.chartData.chart&&(this.textSpan||(this.textSpan=document.createElement("span"),this.textSpan.setAttribute("id",this.id),this.textSpan.style.position="absolute",this.textSpan.style.display="block",this.textSpan.style.padding="3px",this.textSpan.style.whiteSpace="nowrap"),this.chartData.chart.drawingTextContainer&&!this.chartData.chart.drawingTextContainer.querySelector("span#"+this.id)&&this.chartData.chart.drawingTextContainer.appendChild(this.textSpan),this.applyTextParams())},this.isFocused=function(t,a){var e=parseFloat(this.points[0].x),i=parseFloat(this.points[0].y),s={x1:e,x2:e+this.rect.width,y1:i,y2:i+this.rect.height};return this.isObjectEdit=LibDrawing.isPointInRect(s,{x:t,y:a},5),this.isObjectEdit},this.shiftTo=function(t,a,e,i,s){if(0!==a||0!==t)for(var r=0;r<this.points.length;r++)this.points[r].y-=a,this.points[r].x-=t,this.data[r].d-=i,this.data[r].v-=s},this.removeDrawingObject=this.remove,this.remove=function(){this.removeDrawingObject(),this.chartData.chart.drawingTextContainer.removeChild(this.textSpan)},this.applyValue=function(t,a){this[a]=t,this.draw(),this.chartData.chart.updateDrawingObjectsOtherChart(this),this.chartData.chart.drawActiveDrawingObjectsOtherCharts(this.id)},this.getStyleRows=function(){return[this.getTextStyleRow(),this.getTextAreaRow(),this.getBackgroundRow(),this.getBorderRow()]},this.createLineSettingsPanel=function(t){this.createSettingsPanel(t),this.fillSettingsPanelFull(t),t.isSettingsPanelOpen=!0,this.addPanelLineSettingEvent(t),this.setCoordinateSettingsPanel(t)},this.setCoordinateSettingsPanel=function(t){var a=parseFloat(this.points[0].y),e=t.parentElement.getClientRects(),i=t.getClientRects();a+this.rect.height+i[0].height<e[0].height?t.style.top=a+this.rect.height+"px":t.style.top=a-i[0].height+"px",this.points[0].x+i[0].width<e[0].width?t.style.left=this.points[0].x+"px":t.style.left=this.points[0].x-i[0].width+"px"},this.fillSettingsPanelFull=function(t){t.innerHTML=this.htmlFullSettingsPanel(),t.removeAttribute("tch-line-type"),t.setAttribute("tch-text-type",this.constructor.name),this.fillLineStyle(t)},this.fillLineStyle=function(t){var a=t.querySelector(".tch-line-settings-style");a.innerHTML="";var e=this.getStyleRows();this.fillDivWithRows(a,e)},this.cancelPanelSettingLine=function(t,a){for(var e=this.getStylePropsNames(),i=0;i<e.length;i++){var s=a.querySelector("#tch-settingsStyle-input-"+e[i]).oldValue;void 0!==s&&(this[e[i]]=s)}this.draw(),this.chartData.chart.updateDrawingObjectsOtherChart(this),this.chartData.chart.drawActiveDrawingObjectsOtherCharts(this.id),a.classList.toggle("tch-hidden"),t.preventDefault(),t.stopPropagation()},this.updateCustomPropsByObj=function(t,a){t.periods=a.periods.slice(0);for(var e=this.getStylePropsNames(),i=0;i<e.length;i++)t[e[i]]=a[e[i]];this.draw()},this.convertToDTO=function(){var t=i.a.prototype.convertToDTO.apply(this,arguments);return this.updateCustomPropsByObj(t,this),t},this.applyRestoredParams=function(t){i.a.prototype.applyRestoredParams.apply(this,arguments),t.type||(t.type=t.constructor.name),this.updateCustomPropsByObj(this,t)}}function ArrowMark(t){arguments&&arguments.length&&(Text.apply(this,arguments),this.chartData=t,this.chartData.chart&&(this.circles=[],this.points=[{x:this.points[0].x,y:this.points[0].y,active:!0}],this.circles.push(new r.a(this.chartData,{data:[this.data[0]],points:[{x:this.points[0].x,y:this.points[0].y}]})),this.circles[0].radius=4),this.size=25,this.fontSize=20,this.textArea="",this.colorMark="rgba(38,176,197,1)",this.icon=null,this.centeringSvg={x:0,y:0},this.viewbox={x:0,y:0,width:300,height:300}),this.isFocused=function(t,a){if(this.isObjectEdit=!1,this.isObjectEdit=this.isFocusedCircle(t,a),!this.isObjectEdit){var e=this.getRect();this.isObjectEdit=LibDrawing.isPointInRect(e,{x:t,y:a},5)}return this.isObjectEdit},this.isFocusedCircle=function(t,a){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;for(var e=!1,i=0,s=0;s<this.circles.length;s++){if(i++,LibDrawing.isPointOnCircle(this.circles[s],{x:t,y:a})){this.circles[s].points[0].active=!0,this.points[s].active=!0,e=!0;break}this.circles[s].points[0].active=!1,this.points[s].active=!1}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;return!!e||void 0},this.textCreateTextSpan=this.draw,this.draw=function(t){this.createArrowMarkIcon(t),this.textCreateTextSpan()},this.updatePixels=function(){this.isPressed||(this.points[0].x=this.chartData.chart.toXPixels(this.data[0].d),this.points[0].y=this.chartData.chart.toYPixels(this.data[0].v),this.circles[0].points=[this.points[0]],this.circles[0].data=[this.data[0]])},this.shiftTo=function(t,a,e,i,s){0===a&&0===t||(this.points[0].y-=a,this.points[0].x-=t,this.data[0].d-=i,this.data[0].v-=s,this.circles[0].points=[this.points[0]],this.circles[0].data=[this.data[0]])},this.removeDrawingObject=i.a.prototype.remove,this.remove=function(){this.removeDrawingObject(),this.chartData.chart.drawingTextContainer.removeChild(this.textSpan),this.chartData.chart.drawingTextContainer.removeChild(this.icon)},this.getStyleRows=function(){return[this.getTextStyleRow(),this.getTextAreaRow(),this.getArrowMarkRow()]},this.convertToDTO=function(){var t=i.a.prototype.convertToDTO.apply(this,arguments);return t.circles=this.cloneCircles(this.circles),this.updateCustomPropsByObj(t,this),t},this.applyRestoredParams=function(t){i.a.prototype.applyRestoredParams.apply(this,arguments),t.type||(t.type=t.constructor.name),this.circles=this.restoreCircles(t),this.updateCustomPropsByObj(this,t)}}function ArrowMarkLeft(){arguments&&arguments.length&&(ArrowMark.apply(this,arguments),this.viewbox={x:0,y:50,width:300,height:300})}function ArrowMarkRight(){arguments&&arguments.length&&(ArrowMark.apply(this,arguments),this.viewbox={x:100,y:50,width:300,height:300},this.centeringSvg={x:-this.size,y:0}),this.applyTextPosition=function(){var t=this.getPoint();this.textSpan.style.left=t.x-this.size-this.rect.width+"px",this.textSpan.style.top=t.y-this.size/2+"px"},this.getRect=function(){var t=this.getPoint();return{x1:this.rect.width<=6?t.x-this.size:t.x-this.rect.width-this.size,y1:t.y-this.size/2,x2:t.x,y2:t.y+this.size/2}}}function ArrowMarkUp(){arguments&&arguments.length&&(ArrowMark.apply(this,arguments),this.viewbox={x:30,y:0,width:275,height:275},this.centeringSvg={x:-this.size/2,y:-this.size/2}),this.isFocused=function(t,a){if(this.isObjectEdit=!1,this.isObjectEdit=this.isFocusedCircle(t,a),!this.isObjectEdit){var e=this.getRectSvg(),i=this.getRectSpan();(LibDrawing.isPointInRect(e,{x:t,y:a},5)||LibDrawing.isPointInRect(i,{x:t,y:a},5))&&(this.isObjectEdit=!0)}return this.isObjectEdit},this.applyTextPosition=function(){var t=this.getPoint();this.textSpan.style.left=t.x-this.rect.width/2+"px",this.textSpan.style.top=t.y+this.size+"px"},this.getRectSvg=function(){var t=this.getPoint();return{x1:t.x-this.size/2,y1:t.y,x2:t.x+this.size/2,y2:t.y+this.size}},this.getRectSpan=function(){var t=this.getPoint();return{x1:t.x-this.rect.width/2,y1:t.y+this.size,x2:t.x+this.rect.width/2,y2:this.rect.height<=6?t.y+this.size:t.y+this.size+this.rect.height}}}function ArrowMarkDown(){arguments&&arguments.length&&(ArrowMark.apply(this,arguments),this.viewbox={x:25,y:70,width:250,height:250},this.centeringSvg={x:-this.size/2,y:this.size/2}),this.isFocused=function(t,a){if(this.isObjectEdit=!1,this.isObjectEdit=this.isFocusedCircle(t,a),!this.isObjectEdit){var e=this.getRectSvg(),i=this.getRectSpan();(LibDrawing.isPointInRect(e,{x:t,y:a},5)||LibDrawing.isPointInRect(i,{x:t,y:a},5))&&(this.isObjectEdit=!0)}return this.isObjectEdit},this.applyTextPosition=function(){var t=this.getPoint();this.textSpan.style.left=t.x-this.rect.width/2+"px",this.textSpan.style.top=t.y-2*this.size+"px"},this.getRectSvg=function(){var t=this.getPoint();return{x1:t.x-this.size/2,y1:t.y-this.size,x2:t.x+this.size/2,y2:t.y}},this.getRectSpan=function(){var t=this.getPoint();return{x1:t.x-this.rect.width/2,y1:this.rect.height<=6?t.y-this.size:t.y-this.size-this.rect.height,x2:t.x+this.rect.width/2,y2:t.y-this.size}}}function HorizontalLine(){arguments&&arguments.length&&(s.a.apply(this,arguments),this.chartData.chart?this.circles.push(new r.a(this.chartData,{data:[this.data[0]],points:[{x:this.chartData.chart.w/2,y:this.points[0].y}]})):this.circles.push(new r.a(this.chartData,{data:[this.data[0]],points:[{x:this.points[0].x,y:this.points[0].y}]})),this.showText=!1,this.showPrice=!1,this.textColor="#0000FF",this.textFamily="veranda",this.textSize="10",this.textAlignHorizontal="center",this.textAlignVertical="top",this.textArea="HelloWorld"),this.isFocused=function(t,a){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isChanged=!1,this.isObjectEdit=!1;var e=!1;if(LibDrawing.isPointOnCircle(this.circles[0],{x:t,y:a})&&(this.isChanged=!0,e=!0),e||LibDrawing.isPointOnLine({x1:this.points[0].x,x2:this.points[1].x,y1:this.points[0].y,y2:this.points[1].y},{x:t,y:a})&&(this.isObjectEdit=!0,e=!0),e){this.circles[0].points[0].active=!0;for(var i=0;i<this.points.length;i++)this.points[i].active=!0}else{this.circles[0].points[0].active=!1;for(var s=0;s<this.points.length;s++)this.points[s].active=!1}return e},this.updateValues=function(){},this.draw=function(t){this.points[0].x=0,this.points[1].x=this.chartData.chart.w;var a=o.a.getPosition(this.points[0].x,this.width),e=o.a.getPosition(this.points[1].x,this.width),i=o.a.getPosition(this.points[0].y,this.width),r=o.a.getPosition(this.points[1].y,this.width);return s.a.prototype.draw.apply(this,[t,a,e,i,r])},this.updatePixels=function(){this.points[0].y=this.chartData.chart.toYPixels(this.data[0].v),this.points[1].y=this.points[0].y,this.circles[0].points[0].y=this.points[0].y,this.circles[0].points[0].x=this.chartData.chart.w/2},this.shiftTo=function(t,a,e){if(0!==a){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].y=e.y,this.circles[0].points[0].y=e.y,this.circles[0].points[0].x=this.chartData.chart.w/2);this.data[0].v=e.value}},this.moveTo=function(t,a,e){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].y=e.y,this.circles[0].points[0].y=e.y,this.circles[0].points[0].x=this.chartData.chart.w/2);this.data[0].v=e.value},this.lineGetStyleRows=this.getStyleRows,this.getStyleRows=function(){var t=this.lineGetStyleRows(),a=[this.getShowPriceRow(),this.getShowTextRow(),this.getTextStyleRow(),this.getTextAlignRow(),this.getTextAreaRow()];return t.concat(a)},this.lineApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.lineApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.lineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,a){this.lineUpdateCustomPropsByObj(t,a),t.showText=a.showText,t.showPrice=a.showPrice,t.textColor=a.textColor,t.textFamily=a.textFamily,t.textSize=a.textSize,t.textAlignHorizontal=a.textAlignHorizontal,t.textAlignVertical=a.textAlignVertical,t.textArea=a.textArea},this.updateByObject=function(t){i.a.prototype.updateByObject.apply(this,arguments),this.circles[0].points[0]={x:this.chartData.chart.w/2,y:this.circles[0].points[0].y}}}function Arrow(){n.a.apply(this,arguments),this.color="#1E90FF",this.rightEndType="arrow"}function Ray(){n.a.apply(this,arguments),this.color="#008000",this.rightEnd=!0,this.leftEnd=!1}function HorizontalRay(){arguments&&arguments.length&&(HorizontalLine.apply(this,arguments),this.color="#FF1493",this.circles[0]=new r.a(this.chartData,{data:[this.data[0]],points:[this.points[0]]})),this.draw=function(t){this.points[1].x=this.chartData.chart.w;var a=o.a.getPosition(this.points[0].x,this.width),e=o.a.getPosition(this.points[1].x,this.width),i=o.a.getPosition(this.points[0].y,this.width),r=o.a.getPosition(this.points[1].y,this.width);return s.a.prototype.draw.apply(this,[t,a,e,i,r])},this.updatePixels=function(){this.points[0].y=this.chartData.chart.toYPixels(this.data[0].v),this.points[0].x=this.chartData.chart.toXPixels(this.data[0].d),this.points[1].y=this.points[0].y,this.circles[0].points[0].y=this.points[0].y,this.circles[0].points[0].x=this.points[0].x},this.shiftTo=function(t,a,e,i,s){if(0!==a||0!==t){for(var r=0;r<this.points.length;r++)this.points[r].active&&(this.points[r].y-=a,this.points[r].x-=t,this.data[r].d-=i,this.data[r].v-=s);this.circles[0].points[0].y=this.points[0].y,this.circles[0].points[0].x=this.points[0].x}},this.moveTo=function(t,a,e){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].x=e.x,this.points[i].y=e.y,this.data[i].d=e.dateSeconds,this.data[i].v=e.value);this.circles[0].points[0].y=this.points[0].y,this.circles[0].points[0].x=this.points[0].x},this.updateValues=function(){for(var t=0;t<this.points.length;t++)this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y)},this.updateByObject=function(t){i.a.prototype.updateByObject.apply(this,arguments)}}function TrendAngle(){arguments&&arguments.length&&(n.a.apply(this,arguments),this.rightEnd=!1,this.angleSpan=null,this.color="#0000FF",this.textColor="#0000FF",this.textFamily="veranda",this.textSize="10",this.textBold=!1,this.textItalic=!1,this.dx=0,this.dy=0),this.trendLineGetStyleRows=this.getStyleRows,this.getStyleRows=function(){var t=this.trendLineGetStyleRows();return(t=this.removeStyleMenuElementByNames(t,["rightEndType","leftEndType","showDateRange","showDistance","showAngle"])).splice(1,0,this.getTextStyleRow()),t},this.updatePixels=function(){this.isPressed||(this.dy=this.points[1].y-this.points[0].y,this.dx=this.points[1].x-this.points[0].x,this.points[0].x=this.chartData.chart.toXPixels(this.data[0].d),this.points[0].y=this.chartData.chart.toYPixels(this.data[0].v),this.points[1].x=this.points[0].x+this.dx,this.points[1].y=this.points[0].y+this.dy,this.data[1].d=this.chartData.chart.toXValue(this.points[1].x),this.data[1].v=this.chartData.chart.toYValue(this.points[1].y),this.circles[0].points=[this.points[0]],this.circles[0].data=[this.data[0]],this.circles[1].points=[this.points[1]],this.circles[1].data=[this.data[1]])},this.isFocused=function(t,a){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isChanged=!1,this.isObjectEdit=!1;var e,i=!1;for(e=0;e<this.circles.length;e++){if(LibDrawing.isPointOnCircle(this.circles[e],{x:t,y:a})){0===e&&(this.isObjectEdit=!0),i=!0,this.isChanged=!0;break}this.circles[e].points[0].active=!1}if(i){for(var s=0;s<this.points.length;s++)this.isObjectEdit?(this.points[s].active=!0,this.circles[s].points[0].active=!0):this.points[s].active=!1;return this.circles[e].points[0].active=!0,!0}var r=this.points[0].x,n=this.points[1].x,o=this.points[0].y,h=this.points[1].y;if(this.leftEnd&&(r=this.leftEndPoint.x,o=this.leftEndPoint.y),this.rightEnd&&(n=this.rightEndPoint.x,h=this.rightEndPoint.y),LibDrawing.isPointOnLine({x1:r,x2:n,y1:o,y2:h},{x:t,y:a})){for(var c=0;c<this.points.length;c++)this.points[c].active=!0,this.circles&&this.circles[c]&&(this.circles[c].points[0].active=!0);this.isObjectEdit=!0,i=!0}return i},this.moveTo=function(t,a,e){for(var i=0;i<this.points.length;i++)this.points[i].active&&0!==i&&(this.points[i].x=e.x,this.points[i].y=e.y,this.data[i].d=e.dateSeconds,this.data[i].v=e.value,this.dx=this.points[i].x-this.points[0].x,this.dy=this.points[i].y-this.points[0].y,this.circles[i].points=[this.points[i]],this.circles[i].data=[this.data[i]])},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return this.angleSpan.remove(),!1;this.angleSpan||this.createAngleBlock();var a,e=this.points[0].x,i=this.points[1].x,s=this.points[0].y,r=this.points[1].y,n=e,h=i,c=s,l=r,d=LibDrawing.findLineAngleDeg({x1:e,y1:s,x2:i,y2:r});a=!(Math.round(d)<0);var p=Math.round(d)+"°",u=d>=0?1:-1;if(Array.prototype.indexOf.call(this.chartData.chart.drawingTextContainer.children,this.angleSpan)<0&&this.chartData.chart.drawingTextContainer.appendChild(this.angleSpan),this.angleSpan.innerText=p,this.angleSpan.style.left=(parseFloat(n)+this.removalLength).toFixed(1)+"px",this.angleSpan.style.top=(parseFloat(c)-this.angleSpan.height/2+u*this.angleSpan.height/2).toFixed(1)+"px",this.angleSpan.style.color=this.textColor,this.leftEnd&&(this.leftEndPoint=this.getLeftEndPoint({x1:e,y1:s,x2:i,y2:r},this.chartData.chart.w,this.chartData.chart.h,d),n=this.leftEndPoint.x,c=this.leftEndPoint.y),this.rightEnd&&(this.rightEndPoint=this.getRightEndPoint({x1:e,y1:s,x2:i,y2:r},this.chartData.chart.w,this.chartData.chart.h,d),h=this.rightEndPoint.x,l=this.rightEndPoint.y),n=o.a.getPosition(n,this.width),c=o.a.getPosition(c,this.width),h=o.a.getPosition(h,this.width),l=o.a.getPosition(l,this.width),o.a.drawLine(null,t,n,c,h,l,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,1),o.a.drawLine(null,t,e,s,parseFloat(e)+this.removalLength,s,this.color,[2],1,1),o.a.drawArc(null,t,e,s,0,Math.round(d),this.removalLength,this.color,[3],1,1,a),"edit"!==this.state&&"active"!==this.state||o.a.drawLine(null,t,n,c,h,l,this.color,[],parseFloat(this.width)+10,.1),"edit"===this.state||"active"===this.state){for(var g=0;g<this.circles.length;g++)this.circles[g].points[0].active||this.circles[g].drawWithShadow(t,"white",this.color,.1);for(var D=0;D<this.circles.length;D++)this.circles[D].points[0].active&&this.circles[D].drawWithShadow(t,"red",this.color,.1)}return!0},this.remove=function(){this.angleSpan&&this.chartData.chart.drawingTextContainer.removeChild(this.angleSpan),n.a.prototype.remove.apply(this,arguments)},this.createAngleBlock=function(){var t=this.chartData.chart.parent.querySelector(".tch-drawing-text");this.angleSpan=document.createElement("span"),this.angleSpan.classList.toggle("tch-chart-angle-text",!0),this.angleSpan.innerText="0",t.appendChild(this.angleSpan),this.angleSpan.height=parseFloat(this.angleSpan.getBoundingClientRect().height)},this.trendLineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.trendLineConvertToDTO();return this.updateCustomPropsByObj(t,this),t},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,a){this.trendLineUpdateCustomPropsByObj(t,a),t.dx=a.dx,t.dy=a.dy,t.textColor=a.textColor,t.textFamily=a.textFamily,t.textSize=a.textSize,t.textBold=a.textBold,t.textItalic=a.textItalic}}function ParallelChannel(){arguments&&arguments.length&&n.a.apply(this,arguments),this.drawingStage={current:0,max:2},this.heightData={v:0,y:0},this.fill=!0,this.fillColor="#0000ff",this.opacity=.1,this.drawMiddle=!0,this.middleColor="#00ff00",this.middleWidth=1,this.middleType="dash",this.rightEnd=!1,this.leftEnd=!1,this.trendLineIsFocused=this.isFocused,this.isFocused=function(t,a){if(this.trendLineIsFocused(t,a))return!0;if(LibDrawing.isPointOnLine({x1:this.rightEndPoint.x,x2:this.leftEndPoint.x,y1:o.a.getPosition(parseFloat(this.rightEndPoint.y)-parseFloat(this.heightData.y),this.width),y2:o.a.getPosition(parseFloat(this.leftEndPoint.y)-parseFloat(this.heightData.y),this.width)},{x:t,y:a})){for(var e=0;e<this.points.length;e++)this.points[e].active=!0,this.circles&&this.circles[e]&&(this.circles[e].points[0].active=!0);return this.isObjectEdit=!0,!0}return!1},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var a,e,i,r,n,h,c=this.points[0].x,l=this.points[1].x,d=this.points[0].y,p=this.points[1].y;if(this.chartData.techChart.charts.length>1)for(var u=0;u<this.chartData.techChart.charts.length;u++)this.points[1].y>this.chartData.techChart.charts[u].canvasDrawingActive.clientHeight&&(this.points[1].y=0);var g=LibDrawing.findLineAngleDeg({x1:c,y1:d,x2:l,y2:p});if(n=this.getEndPoints(c,d,l,p,g),this.leftEndPoint=n.lep,this.rightEndPoint=n.rep,this.drawingStage.current>1){if(i=o.a.getPosition(parseFloat(d)-parseFloat(this.heightData.y),this.width),r=o.a.getPosition(parseFloat(p)-parseFloat(this.heightData.y),this.width),h=this.getEndPoints(c,i,l,r,g),this.fill){var D=[];D.push([n.lep.x,n.lep.y]),D.push([n.rep.x,n.rep.y]),D.push([h.rep.x,h.rep.y]),D.push([h.lep.x,h.lep.y]),o.a.drawPolygon(null,t,D,this.fillColor,!1,!0,0,4,this.opacity)}if(a=o.a.getPosition(n.lep.x,this.width),e=o.a.getPosition(n.rep.x,this.width),i=o.a.getPosition(n.lep.y,this.width),r=o.a.getPosition(n.rep.y,this.width),s.a.prototype.draw.apply(this,[t,a,e,i,r]),a=o.a.getPosition(h.lep.x,this.width),e=o.a.getPosition(h.rep.x,this.width),i=o.a.getPosition(h.lep.y,this.width),r=o.a.getPosition(h.rep.y,this.width),s.a.prototype.draw.apply(this,[t,a,e,i,r]),this.drawMiddle){i=parseFloat(d)-parseFloat(this.heightData.y)/2,r=parseFloat(p)-parseFloat(this.heightData.y)/2;var f=this.getEndPoints(c,i,l,r,g);a=o.a.getPosition(f.lep.x,this.width),e=o.a.getPosition(f.rep.x,this.width),i=o.a.getPosition(f.lep.y,this.width),r=o.a.getPosition(f.rep.y,this.width),o.a.drawLine(null,t,a,i,e,r,this.middleColor,this.getLineTypeArray(this.middleType,this.middleWidth),this.middleWidth,1)}}else a=o.a.getPosition(this.points[0].x,this.width),e=o.a.getPosition(this.points[1].x,this.width),i=o.a.getPosition(this.points[0].y,this.width),r=o.a.getPosition(this.points[1].y,this.width),s.a.prototype.draw.apply(this,[t,a,e,i,r]);return!0},this.updatePixels=function(){if(!this.isPressed){for(var t=0;t<this.points.length;t++)2!==t&&(this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]);if(this.heightData.y=this.heightData.v/this.chartData.scaleParams.deltaY,this.points[2]){var a=this.getMiddleData(this.data[0],this.data[1]),e=this.getMiddlePoint(this.points[0],this.points[1]);this.points[2].x=e.x,this.points[2].y=parseFloat(e.y)-parseFloat(this.heightData.y),this.data[2].d=a.d,this.data[2].v=a.v+this.heightData.v,this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]]}}},this.appendPoint=function(t,a){this.data.push(t),this.points.push(a),this.circles.push(new r.a(this.chartData,{data:[this.data[this.data.length-1]],points:[this.points[this.points.length-1]]}))},this.updateLastPoint=function(t,a){var e=this.data.length-1;e<2&&(this.data[e]=t,this.points[e]=a,this.circles[e].points=[this.points[e]]),this.completeFigure(t,a)},this.moveTo=function(t,a,e){for(var i,s,r=0;r<this.points.length;r++)this.points[r].active&&(this.points.length<3?(this.points[r].x=e.x,this.points[r].y=e.y,this.data[r].d=e.dateSeconds,this.data[r].v=e.value,this.circles[r].points=[this.points[r]],this.circles[r].data=[this.data[r]]):2===r?this.drawingStage.current<3?(this.points[r].x=this.points[1].x,this.points[r].y=e.y,this.data[r].d=this.data[1].d,this.data[r].v=e.value,this.heightData={v:e.value-this.data[1].v,y:this.points[1].y-e.y},this.circles[r].points=[this.points[r]],this.circles[r].data=[this.data[r]]):(i=this.getMiddleData(this.data[0],this.data[1]),s=this.getMiddlePoint(this.points[0],this.points[1]),this.points[r].x=s.x,this.points[r].y=e.y,this.data[r].d=i.d,this.data[r].v=e.value,this.heightData={v:e.value-i.v,y:s.y-e.y},this.circles[r].points=[this.points[r]],this.circles[r].data=[this.data[r]]):(this.points[r].x=e.x,this.points[r].y=e.y,this.data[r].d=e.dateSeconds,this.data[r].v=e.value,i=this.getMiddleData(this.data[0],this.data[1]),s=this.getMiddlePoint(this.points[0],this.points[1]),this.points[2].x=s.x,this.points[2].y=parseFloat(s.y)-parseFloat(this.heightData.y),this.data[2].d=i.d,this.data[2].v=i.v+this.heightData.v,this.circles[r].points=[this.points[r]],this.circles[r].data=[this.data[r]],this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]]))},this.getStyleRows=function(){var t=s.a.prototype.getStyleRows.apply(this,arguments),a=[this.getMiddleSettingsRow(),this.getBackgroundRow(),this.getRightEndRow(),this.getLeftEndRow()];return t.concat(a)},this.trendLineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.trendLineConvertToDTO();return this.updateCustomPropsByObj(t,this),t},this.trendLineApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.trendLineApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,a){this.trendLineUpdateCustomPropsByObj(t,a),t.heightData=i.a.cloneObject(a.heightData),t.fill=a.fill,t.fillColor=a.fillColor,t.opacity=a.opacity,t.drawMiddle=a.drawMiddle,t.middleColor=a.middleColor,t.middleWidth=a.middleWidth,t.middleType=a.middleType}}function DisjointAngle(){arguments&&arguments.length&&ParallelChannel.apply(this,arguments),this.color="#00ff00",this.fillColor="#00ff00",this.opacity=.3,this.textColor="#0000FF",this.textFamily="veranda",this.textSize="10",this.textBold=!1,this.textItalic=!1,this.isFocused=function(t,a){if(this.trendLineIsFocused(t,a))return!0;if(3===this.points.length&&LibDrawing.isPointOnLine({x1:this.points[2].x,x2:this.points[3].x,y1:this.points[2].y,y2:this.points[3].y},{x:t,y:a})){for(var e=0;e<this.points.length;e++)this.points[e].active=!0,this.circles&&this.circles[e]&&(this.circles[e].points[0].active=!0);return this.isObjectEdit=!0,!0}return!1},this.getStyleRows=function(){var t=s.a.prototype.getStyleRows.apply(this,arguments),a=[this.getTextStyleRow(),this.getBackgroundRow(),this.getLeftEndRow(),this.getRightEndRow(),this.getShowPriceRow(),this.getBackgroundRow()];return t.concat(a)},this.parallelChannelApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.parallelChannelApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.draw=function(t){if(this.chartData.techChart.charts.length>1)for(var a=0;a<this.chartData.techChart.charts.length;a++)this.points[1].y>this.chartData.techChart.charts[a].canvasDrawingActive.clientHeight&&(this.points[1].y=0,s.a.prototype.draw.apply(this,[t,this.points[0].x,this.points[1].x,this.points[0].y,this.points[1].y]));if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var e,i,r,n,h,c,l,d,p,u,g,D,f,w,y,v,m=this.points[0].x,b=this.points[1].x,x=this.points[0].y,C=this.points[1].y;if(y=LibDrawing.findLineAngleDeg({x1:m,y1:x,x2:b,y2:C}),f=this.getEndPoints(m,x,b,C,y),this.leftEndPoint=f.lep,this.rightEndPoint=f.rep,e=o.a.getPosition(f.lep.x,this.width),i=o.a.getPosition(f.rep.x,this.width),h=o.a.getPosition(f.lep.y,this.width),c=o.a.getPosition(f.rep.y,this.width),this.points.length<3)s.a.prototype.draw.apply(this,[t,e,i,h,c]);else if(3===this.points.length){var P=this.points[1].y-this.points[0].y,T=this.points[2].y-this.points[1].y;g=b,p=m,u=o.a.getPosition(parseFloat(this.points[0].y)+2*P+T,this.width),D=o.a.getPosition(parseFloat(this.points[1].y)+T,this.width),v=LibDrawing.findLineAngleDeg({x1:p,y1:u,x2:g,y2:D}),w=this.getEndPoints(p,u,g,D,v),r=o.a.getPosition(w.lep.x,this.width),n=o.a.getPosition(w.rep.x,this.width),l=o.a.getPosition(w.lep.y,this.width),d=o.a.getPosition(w.rep.y,this.width),this.fill&&this.fillFigure(t,e,h,i,c,r,l,n,d),s.a.prototype.draw.apply(this,[t,e,i,h,c]),s.a.prototype.draw.apply(this,[t,r,n,l,d])}else g=o.a.getPosition(this.points[2].x,this.width),p=o.a.getPosition(this.points[3].x,this.width),D=o.a.getPosition(this.points[2].y,this.width),u=o.a.getPosition(this.points[3].y,this.width),v=LibDrawing.findLineAngleDeg({x1:p,y1:u,x2:g,y2:D}),w=this.getEndPoints(p,u,g,D,v),r=o.a.getPosition(w.lep.x,this.width),n=o.a.getPosition(w.rep.x,this.width),l=o.a.getPosition(w.lep.y,this.width),d=o.a.getPosition(w.rep.y,this.width),this.fill&&this.fillFigure(t,e,h,i,c,r,l,n,d),s.a.prototype.draw.apply(this,[t,e,i,h,c]),s.a.prototype.draw.apply(this,[t,r,n,l,d]);return!0},this.updatePixels=function(){if(!this.isPressed)for(var t=0;t<this.points.length;t++)this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]},this.updateLastPoint=function(t,a){var e=this.data.length-1;e<2&&(this.data[e]=t,this.points[e]=a,this.circles[e].points=[this.points[e]]),this.completeFigure(t,a)},this.moveTo=function(t,a,e){for(var i,s,r,n,o=0;o<this.points.length;o++)this.points[o].active&&(this.points.length<3?(this.points[o].x=e.x,this.points[o].y=e.y,this.data[o].d=e.dateSeconds,this.data[o].v=e.value):2===o?(s=this.points[o].y,i=this.data[o].v,this.points[o].x=this.points[1].x,this.points[o].y=e.y,this.data[o].d=this.data[1].d,this.data[o].v=e.value,this.points.length>3&&(s-=this.points[o].y,i-=this.data[o].v,this.points[3].y-=s,this.data[3].v-=i,this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]])):(this.points[o].x=e.x,this.points[o].y=e.y,this.data[o].d=e.dateSeconds,this.data[o].v=e.value,0===o?(r=this.points[1].y-this.points[0].y,n=this.data[1].v-this.data[0].v,this.points[3].y=parseFloat(this.points[2].y)+r,this.points[3].x=this.points[0].x,this.data[3].v=parseFloat(this.data[2].v)+n,this.data[3].d=this.data[0].d,this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]]):1===o?(r=this.points[1].y-this.points[0].y,n=this.data[1].v-this.data[0].v,this.points[2].y=parseFloat(this.points[3].y)-r,this.points[2].x=this.points[1].x,this.data[2].v=parseFloat(this.data[3].v)-n,this.data[2].d=this.data[1].d,this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]]):3===o&&(r=this.points[3].y-this.points[2].y,n=this.data[3].v-this.data[2].v,this.points[0].y=parseFloat(this.points[1].y)-r,this.points[0].x=this.points[3].x,this.data[0].v=parseFloat(this.data[1].v)-n,this.data[0].d=this.data[3].d,this.circles[0].points=[this.points[0]],this.circles[0].data=[this.data[0]])),this.circles[o].points=[this.points[o]],this.circles[o].data=[this.data[o]])},this.completeFigure=function(){if(!(this.points.length<3)){var t=this.points[1].y-this.points[0].y,a=this.points[2].y-this.points[1].y,e=this.points[0].x,i=this.points[1].x,s=parseFloat(this.points[0].y)+2*t+a,n=parseFloat(this.points[1].y)+a;this.points[2].x=i,this.points[2].y=n,this.data[2].d=this.data[1].d,this.data[2].v=this.chartData.chart.toYValue(n),this.points.push({x:e,y:s}),this.data.push({d:this.data[0].d,v:this.chartData.chart.toYValue(s)}),this.circles[2].data=[this.data[2]],this.circles[2].points=[this.points[2]],this.circles.push(new r.a(this.chartData,{data:[this.data[3]],points:[this.points[3]]})),this.draw(this.chartData.chart.canvasDrawingContext)}},this.parallelChannelUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,a){this.parallelChannelUpdateCustomPropsByObj(t,a),t.textColor=a.textColor,t.textFamily=a.textFamily,t.textSize=a.textSize,t.textBold=a.textBold,t.textItalic=a.textItalic}}function FlatTopBottom(){arguments&&arguments.length&&DisjointAngle.apply(this,arguments),this.color="#800080",this.fillColor="#800080",this.opacity=.3,this.draw=function(t){if(this.chartData.techChart.charts.length>1)for(var a=0;a<this.chartData.techChart.charts.length;a++)this.points[1].y>this.chartData.techChart.charts[a].canvasDrawingActive.clientHeight&&(this.points[1].y=0,s.a.prototype.draw.apply(this,[t,this.points[0].x,this.points[1].x,this.points[0].y,this.points[1].y]));if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var e,i,r,n,h,c,l,d,p,u,g=this.points[0].x,D=this.points[1].x,f=this.points[0].y,w=this.points[1].y,y=LibDrawing.findLineAngleDeg({x1:g,y1:f,x2:D,y2:w});if(p=this.getEndPoints(g,f,D,w,y),this.leftEndPoint=p.lep,this.rightEndPoint=p.rep,e=o.a.getPosition(p.lep.x,this.width),i=o.a.getPosition(p.rep.x,this.width),h=o.a.getPosition(p.lep.y,this.width),c=o.a.getPosition(p.rep.y,this.width),this.points.length<3)s.a.prototype.draw.apply(this,[t,e,i,h,c]);else if(3===this.points.length){var v=this.points[2].y-this.points[1].y;r=o.a.getPosition(p.lep.x,this.width),n=o.a.getPosition(p.rep.x,this.width),l=d=o.a.getPosition(parseFloat(this.points[1].y)+v,this.width),r=(u=this.fixFlatLineEnds(r,n)).x2,n=u.x3,this.fill&&this.fillFigure(t,e,h,i,c,r,l,n,d),s.a.prototype.draw.apply(this,[t,e,i,h,c]),s.a.prototype.draw.apply(this,[t,r,n,l,d])}else r=o.a.getPosition(p.rep.x,this.width),n=e,l=o.a.getPosition(this.points[2].y,this.width),d=o.a.getPosition(this.points[3].y,this.width),r=(u=this.fixFlatLineEnds(r,n)).x2,n=u.x3,this.fill&&this.fillFigure(t,e,h,i,c,n,d,r,l),s.a.prototype.draw.apply(this,[t,e,i,h,c]),s.a.prototype.draw.apply(this,[t,r,n,l,d]);return!0},this.moveTo=function(t,a,e){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points.length<3?(this.points[i].x=e.x,this.points[i].y=e.y,this.data[i].d=e.dateSeconds,this.data[i].v=e.value):2===i?(this.points[i].x=this.points[1].x,this.points[i].y=e.y,this.data[i].d=this.data[1].d,this.data[i].v=e.value,this.points.length>3&&(this.points[3].y=this.points[i].y,this.data[3].v=this.data[i].v,this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]])):(this.points[i].x=e.x,this.data[i].d=e.dateSeconds,0===i?(this.points[i].y=e.y,this.data[i].v=e.value,this.points[3].y=this.points[2].y,this.points[3].x=this.points[0].x,this.data[3].v=this.data[2].v,this.data[3].d=this.data[2].d,this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]]):1===i?(this.points[i].y=e.y,this.data[i].v=e.value,this.points[2].x=this.points[1].x,this.data[2].d=this.data[1].d,this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]]):3===i&&(this.points[0].x=this.points[3].x,this.data[0].d=this.data[3].d,this.circles[0].points=[this.points[0]],this.circles[0].data=[this.data[0]])),this.circles[i].points=[this.points[i]],this.circles[i].data=[this.data[i]])},this.completeFigure=function(){if(!(this.points.length<3)){var t=this.points[2].y-this.points[1].y,a=this.points[0].x,e=this.points[1].x,i=parseFloat(this.points[1].y)+t,s=i;this.points[2].x=e,this.points[2].y=i,this.data[2].d=this.data[1].d,this.data[2].v=this.chartData.chart.toYValue(i),this.points.push({x:a,y:s}),this.data.push({d:this.data[0].d,v:this.data[2].v}),this.circles[2].data=[this.data[2]],this.circles[2].points=[this.points[2]],this.circles.push(new r.a(this.chartData,{data:[this.data[3]],points:[this.points[3]]})),this.draw(this.chartData.chart.canvasDrawingContext)}},this.disjointAngleUpdateByObject=this.updateByObject,this.updateByObject=function(t){this.disjointAngleUpdateByObject(t)}}function Polyline(){n.a.apply(this,arguments),this.color="#008000",this.fill=!0,this.fillColor="#e89a66",this.opacity=.3,this.rightEnd=!1,this.leftEnd=!1,this.drawingStage={current:0,max:100},this.isClosed=!1,this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;if(this.chartData.techChart.charts.length>1)for(var a=0;a<this.chartData.techChart.charts.length;a++)this.points[1].y>this.chartData.techChart.charts[a].canvasDrawingActive.clientHeight&&(this.points[1].y=0,s.a.prototype.draw.apply(this,[t,this.points[0].x,this.points[1].x,this.points[0].y,this.points[1].y]));if(this.isClosed){for(var e=[],i=0;i<this.points.length;i++)e.push([this.points[i].x,this.points[i].y]);this.fill?o.a.drawPolygon(null,t,e,this.fillColor,this.color,!0,this.width,e.length,this.opacity,this.getLineTypeArray(this.lineType,this.width)):o.a.drawPolygon(null,t,e,null,this.color,!0,this.width,e.length,this.opacity,this.getLineTypeArray(this.lineType,this.width))}else for(var r=0;r<this.points.length-1;r++){var n=this.points[r].x,h=this.points[r+1].x,c=this.points[r].y,l=this.points[r+1].y;n=o.a.getPosition(n,this.width),c=o.a.getPosition(c,this.width),h=o.a.getPosition(h,this.width),l=o.a.getPosition(l,this.width),o.a.drawLine(null,t,n,c,h,l,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,1),"edit"!==this.state&&"active"!==this.state||o.a.drawLine(null,t,n,c,h,l,this.color,[],parseFloat(this.width)+10,.1)}if("edit"===this.state||"active"===this.state){for(var d=0;d<this.circles.length;d++)this.circles[d].points[0].active||this.circles[d].drawWithShadow(t,"white",this.color,.1);for(d=0;d<this.circles.length;d++)this.circles[d].points[0].active&&this.circles[d].drawWithShadow(t,"red",this.color,.1)}return!0},this.getStyleRows=function(){var t=s.a.prototype.getStyleRows.apply(this,arguments),a=[this.getBackgroundRow()];return t.concat(a)},this.updateLastPoint=function(t,a){this.isClosed=this.checkClosed(t,a),this.isClosed&&(this.drawingStage.current=100,t=i.a.cloneObject(this.data[0]),a=i.a.cloneObject(this.points[0]));var e=this.data.length-1;this.data[e]=t,this.points[e]=a,this.circles[e].points[0]=this.points[e]},this.updateLastPointForBreak=function(){this.drawingStage.current=100;var t=i.a.cloneObject(this.data[0]),a=i.a.cloneObject(this.points[0]),e=this.data.length-1;this.data[e]=t,this.points[e]=a,this.circles[e].points[0]=this.points[e],this.isClosed=!0},this.isFocused=function(t,a){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isObjectEdit=!1,this.isChanged=!1;for(var e=!1,i=0,s=0;s<this.circles.length;s++){if(i++,LibDrawing.isPointOnCircle(this.circles[s],{x:t,y:a})){this.circles[s].points[0].active=!0,this.points[s].active=!0,e=!0,this.isChanged=!0;break}this.circles[s].points[0].active=!1,this.points[s].active=!1}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;if(this.circles[0].points[0].active&&this.isClosed&&(this.circles[this.circles.length-1].points[0].active=!0,this.points[this.circles.length-1].active=!0),e)return!0;for(var r=0;r<this.points.length-1;r++){var n=this.points[r].x,o=this.points[r+1].x,h=this.points[r].y,c=this.points[r+1].y;if(LibDrawing.isPointOnLine({x1:n,x2:o,y1:h,y2:c},{x:t,y:a})){for(var l=0;l<this.points.length;l++)this.points[l].active=!0,this.circles&&this.circles[l]&&(this.circles[l].points[0].active=!0);this.isObjectEdit=!0,e=!0}}return e},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,a){this.trendLineUpdateCustomPropsByObj(t,a),t.isClosed=a.isClosed,t.fill=a.fill,t.fillColor=a.fillColor}}function Curve(){arguments&&arguments.length&&n.a.apply(this,arguments),this.drawingStage={current:0,max:1},this.color="#0000FF",this.width=1,this.state="edit",this.height=50,this.t=.5,this.lineType="normal",this.name="curve",this.trendLineIsFocused=this.isFocused,this.isFocused=function(t,a){if(this.isChanged=!1,this.isFocusedOnCircles(t,a))return this.isChanged=!0,!0;if(this.drawingStage.current>0){var e=this.getPosition(),i={x:e.x0,y:e.y0},s={x:e.x2,y:e.y2},r={x:e.x1,y:e.y1},n=LibDrawing.getControlPoint(.5,i,s,r),o={x:[e.x0,n.x,e.x1],y:[e.y0,n.y,e.y1]};if(LibDrawing.isPointInPolygon(t,a,o)&&this.arePointsOnCurve(i,n,r,.1,t,a)){for(var h=0;h<this.points.length;h++)this.points[h].active=!0,this.circles&&this.circles[h]&&(this.circles[h].points[0].active=!0);return this.isObjectEdit=!0,!0}return!1}},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var a,e,i;e=o.a.getPosition(this.points[0].x,this.width),i=o.a.getPosition(this.points[1].x,this.width);var s={x:e,y:o.a.getPosition(this.points[0].y,this.width)},r={x:i,y:o.a.getPosition(this.points[1].y,this.width)};a=this.points.length<3?this.getPeekPoint():{x:this.points[2].x,y:this.points[2].y};var n=LibDrawing.getControlPoint(this.t,s,a,r);if(this.chartData.techChart.charts.length>1)for(var h=0;h<this.chartData.techChart.charts.length;h++)r.y>this.chartData.techChart.charts[h].canvasDrawingActive.clientHeight&&(r.y=0,o.a.drawQuadraticCurve(null,t,s,n,r,this.t,"transparent",this.color,this.width,1,this.getLineTypeArray(this.lineType,this.width)));if(o.a.drawQuadraticCurve(null,t,s,n,r,this.t,"transparent",this.color,this.width,1,this.getLineTypeArray(this.lineType,this.width)),"edit"===this.state||"active"===this.state){for(var c=0;c<this.circles.length;c++)this.circles[c].points[0].active||this.circles[c].drawWithShadow(t,"white",this.color,.1);for(c=0;c<this.circles.length;c++)this.circles[c].points[0].active&&this.circles[c].drawWithShadow(t,"red",this.color,.1)}},this.updateLastPoint=function(t,a){var e=this.data.length-1;this.data[e]=t,this.points[e]=a,this.circles[e].points[0]=this.points[e];var i=this.getPeekPoint();this.points[2]=i,this.data[2]={},this.data[2].d=this.chartData.chart.toXValue(this.points[2].x),this.data[2].v=this.chartData.chart.toYValue(this.points[2].y),this.circles.push(new r.a(this.chartData,{data:[this.data[2]],points:[this.points[2]]}))},this.lineGetStyleRows=this.getStyleRows,this.getStyleRows=function(){return n.a.prototype.getStyleRows.apply(this,arguments).concat([])}}function Triangle(){arguments&&arguments.length&&n.a.apply(this,arguments),this.color="#008000",this.drawingStage={current:0,max:2},this.heightData={v:0,y:0},this.fill=!0,this.fillColor="#0000ff",this.rightEnd=!1,this.leftEnd=!1,this.opacity=.1,this.trendLineIsFocused=this.isFocused,this.lineType="normal",this.isFocused=function(t,a){if(this.trendLineIsFocused(t,a))return!0;this.isChanged=!1;var e=this.getPosition(),i=LibDrawing.isPointOnLine({x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2},{x:t,y:a}),s=LibDrawing.isPointOnLine({x1:e.x0,x2:e.x2,y1:e.y0,y2:e.y2},{x:t,y:a});if(i||s){for(var r=0;r<this.points.length;r++)this.points[r].active=!0;return this.isObjectEdit=!0,this.isChanged=!0,!0}return!1},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var a=this.getPosition();if(this.drawingStage.current>1){a=this.getPosition();var e=[];if(e.push([a.x0,a.y0]),e.push([a.x1,a.y1]),e.push([a.x2,a.y2]),this.fill?o.a.drawPolygon(null,t,e,this.fillColor,this.color,!0,this.width,3,this.opacity,this.getLineTypeArray(this.lineType,this.width)):o.a.drawPolygon(null,t,e,null,this.color,!0,this.width,3,this.opacity,this.getLineTypeArray(this.lineType,this.width)),"edit"===this.state||"active"===this.state)for(var i=0;i<this.circles.length;i++){var r=this.circles[i].points[0].active?"red":"white";this.circles[i].drawWithShadow(t,r,this.color,.1)}}else{if(this.chartData.techChart.charts.length>1)for(var n=0;n<this.chartData.techChart.charts.length;n++)a.y1>this.chartData.techChart.charts[n].canvasDrawingActive.clientHeight&&(a.y1=0);s.a.prototype.draw.apply(this,[t,a.x0,a.x1,a.y0,a.y1])}return!0},this.getStyleRows=function(){var t=s.a.prototype.getStyleRows.apply(this,arguments),a=[this.getBackgroundRow()];return t.concat(a)},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,a){this.trendLineUpdateCustomPropsByObj(t,a),t.fill=a.fill,t.fillColor=a.fillColor},this.getPosition=function(){var t=o.a.getPosition(this.points[0].x,this.width),a=o.a.getPosition(this.points[1].x,this.width),e=o.a.getPosition(this.points[0].y,this.width),i=o.a.getPosition(this.points[1].y,this.width);if(this.points[2])var s=o.a.getPosition(this.points[2].x,this.width),r=o.a.getPosition(this.points[2].y,this.width);return{x0:t,x1:a,x2:s,y0:e,y1:i,y2:r}}}function RotatedRect(){arguments&&arguments.length&&n.a.apply(this,arguments),this.drawingStage={current:0,max:2},this.color="#5c126d",this.fill=!0,this.fillColor="#c842f4",this.opacity=.3,this.height=0,this.lineType="normal",this.width=6,this.isFocused=function(t,a){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isObjectEdit=!1,this.isChanged=!1;for(var e=!1,i=0,s=0;s<this.circles.length;s++){if(i++,LibDrawing.isPointOnCircle(this.circles[s],{x:t,y:a})){this.circles[s].points[0].active=!0,this.points[s].active=!0,e=!0,this.isChanged=!0;break}this.circles[s].points[0].active=!1,this.points[s].active=!1}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;if(e)return!0;if(this.drawingStage.current>2){var r=this.getPositions(),n=LibDrawing.isPointOnLine({x1:r.x2,y1:r.y2,x2:r.x3,y2:r.y3},{x:t,y:a}),o=LibDrawing.isPointOnLine({x1:r.x3,y1:r.y3,x2:r.x5,y2:r.y5},{x:t,y:a}),h=LibDrawing.isPointOnLine({x1:r.x5,y1:r.y5,x2:r.x4,y2:r.y4},{x:t,y:a}),c=LibDrawing.isPointOnLine({x1:r.x4,y1:r.y4,x2:r.x2,y2:r.y2},{x:t,y:a});if(n||o||h||c){for(var l=0;l<this.points.length;l++)this.points[l].active=!0,this.circles&&this.circles[l]&&(this.circles[l].points[0].active=!0);return this.isObjectEdit=!0,!0}return!1}},this.moveTo=function(t,a,e){for(var i=0;i<this.points.length;i++)if(this.points[i].active)if(this.points.length<3)this.points[i].x=e.x,this.points[i].y=e.y,this.data[i].d=e.dateSeconds,this.data[i].v=e.value,this.circles[i].points=[this.points[i]],this.circles[i].data=[this.data[i]];else if(2===i||3===i||4===i||5===i)this.movePoints(e);else{this.points[i].x=e.x,this.points[i].y=e.y,this.data[i].d=e.dateSeconds,this.data[i].v=e.value,this.circles[i].points=[this.points[i]],this.circles[i].data=[this.data[i]];var s={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},r=this.getTopLeftData(s,this.height,null,!0);this.points[2].x=r.x,this.points[2].y=r.y,this.data[2].d=this.chartData.chart.toXValue(this.points[2].x),this.data[2].v=this.chartData.chart.toYValue(this.points[2].y),this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]];var n=this.getTopRightData(s,this.height,null,!0);this.points[3].x=n.x,this.points[3].y=n.y,this.data[3].d=this.chartData.chart.toXValue(this.points[3].x),this.data[3].v=this.chartData.chart.toYValue(this.points[3].y),this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]];var o=this.getTopLeftData(s,this.height,null,!1);this.points[4].x=o.x,this.points[4].y=o.y,this.data[4].d=this.chartData.chart.toXValue(this.points[4].x),this.data[4].v=this.chartData.chart.toYValue(this.points[4].y),this.circles[4].points=[this.points[4]],this.circles[4].data=[this.data[4]];var h=this.getTopRightData(s,this.height,null,!1);this.points[5].x=h.x,this.points[5].y=h.y,this.data[5].d=this.chartData.chart.toXValue(this.points[5].x),this.data[5].v=this.chartData.chart.toYValue(this.points[5].y),this.circles[5].points=[this.points[5]],this.circles[5].data=[this.data[5]]}},this.updatePixels=function(){if(!this.isPressed)for(var t=0;t<this.points.length;t++)if(0===t||1===t)this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]];else if(this.points.length>2){var a={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},e={};if(2===t){e.x=this.chartData.chart.toXPixels(this.data[t].d),e.y=this.chartData.chart.toYPixels(this.data[t].v);var i=this.getTopLeftData(a,this.height,!1,!0);this.points[t].x=i.x,this.points[t].y=i.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}else if(3===t){e.x=this.chartData.chart.toXPixels(this.data[t].d),e.y=this.chartData.chart.toYPixels(this.data[t].v);var s=this.getTopRightData(a,this.height,!1,!0);this.points[t].x=s.x,this.points[t].y=s.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}else if(4===t){e.x=this.chartData.chart.toXPixels(this.data[t].d),e.y=this.chartData.chart.toYPixels(this.data[t].v);var r=this.getTopLeftData(a,this.height,!1,!1);this.points[t].x=r.x,this.points[t].y=r.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}else if(5===t){e.x=this.chartData.chart.toXPixels(this.data[t].d),e.y=this.chartData.chart.toYPixels(this.data[t].v);var n=this.getTopRightData(a,this.height,!1,!1);this.points[t].x=n.x,this.points[t].y=n.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}}},this.appendPoint=function(){this.points.push({x:parseFloat(this.points[0].x),y:parseFloat(this.points[0].y),active:!0}),this.data.push({d:this.data[0].d,v:this.data[0].v}),this.circles.push(new r.a(this.chartData,{data:[this.data[2]],points:[this.points[2]]})),this.points.push({x:parseFloat(this.points[1].x),y:parseFloat(this.points[1].y),active:!0}),this.data.push({d:this.data[1].d,v:this.data[1].v}),this.circles.push(new r.a(this.chartData,{data:[this.data[3]],points:[this.points[3]]})),this.points.push({x:parseFloat(this.points[0].x),y:parseFloat(this.points[0].y),active:!0}),this.data.push({d:this.data[0].d,v:this.data[0].v}),this.circles.push(new r.a(this.chartData,{data:[this.data[4]],points:[this.points[4]]})),this.points.push({x:parseFloat(this.points[1].x),y:parseFloat(this.points[1].y),active:!0}),this.data.push({d:this.data[1].d,v:this.data[1].v}),this.circles.push(new r.a(this.chartData,{data:[this.data[5]],points:[this.points[5]]}))},this.updateLastPoint=function(t,a){var e=this.data.length-1;e<2&&(this.data[e]=t,this.points[e]=a,this.circles[e].points=[this.points[e]])},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var a={};if(this.drawingStage.current<2){if(a=this.getPositions(),this.chartData.techChart.charts.length>1)for(var e=0;e<this.chartData.techChart.charts.length;e++)a.y1>this.chartData.techChart.charts[e].canvasDrawingActive.clientHeight&&(a.y1=0);o.a.drawLine(null,t,a.x0,a.y0,a.x1,a.y1,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity)}if(this.drawingStage.current>=2){if(a=this.getPositions(),this.fill){var i=[];i.push([a.x2,a.y2]),i.push([a.x3,a.y3]),i.push([a.x5,a.y5]),i.push([a.x4,a.y4]),o.a.drawPolygon(null,t,i,this.fillColor,!1,!0,0,4,this.opacity,null)}t.lineCap="round",o.a.drawLine(null,t,a.x4,a.y4,a.x2,a.y2,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity),o.a.drawLine(null,t,a.x2,a.y2,a.x3,a.y3,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity),o.a.drawLine(null,t,a.x3,a.y3,a.x5,a.y5,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity),o.a.drawLine(null,t,a.x5,a.y5,a.x4,a.y4,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity),t.lineCap="butt"}if("edit"===this.state||"active"===this.state){for(var s=0;s<this.circles.length;s++)this.circles[s].points[0].active||this.circles[s].drawWithShadow(t,"white",this.color,.1);for(var r=0;r<this.circles.length;r++)this.circles[r].points[0].active&&this.circles[r].drawWithShadow(t,"red",this.color,.1)}return!0},this.getStyleRows=function(){var t=s.a.prototype.getStyleRows.apply(this,arguments),a=[this.getBackgroundRow()];return t.concat(a)},this.trendLineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.trendLineConvertToDTO();return this.updateCustomPropsByObj(t,this),t},this.trendLineApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.trendLineApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,a){this.trendLineUpdateCustomPropsByObj(t,a),t.height=i.a.cloneObject(a.height),t.fill=a.fill,t.fillColor=a.fillColor,t.opacity=a.opacity,t.lineType=a.lineType,t.width=a.width}}function Arc(){arguments&&arguments.length&&n.a.apply(this,arguments),this.drawingStage={current:0,max:2},this.color="#ef680e",this.fill=!0,this.fillColor="#e89a66",this.width=1,this.opacity=.3,this.height=0,this.lineType="normal",this.isFocused=function(t,a){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isObjectEdit=!1,this.isChanged=!1;for(var e=!1,i=0,s=0;s<this.circles.length;s++){if(i++,LibDrawing.isPointOnCircle(this.circles[s],{x:t,y:a})){this.circles[s].points[0].active=!0,this.points[s].active=!0,this.opacity=.6,e=!0,this.isChanged=!0;break}this.circles[s].points[0].active=!1,this.points[s].active=!1,this.opacity=.3}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;if(e)return!0;if(this.drawingStage.current>2){var r=this.getPositions(),n=this.getPoints(),o=LibDrawing.getControlPoint(.5,n.p0,n.middlePoint,n.p2),h={x:[r.x0,n.p4.x,n.p5.x,r.x1],y:[r.y0,n.p4.y,n.p5.y,r.y1]};if(LibDrawing.isPointInPolygon(t,a,h)&&LibDrawing.arePointsOnBezier(n.p0,o,n.p2,.1,t,a)){for(var c=0;c<this.points.length;c++)this.points[c].active=!0,this.circles&&this.circles[c]&&(this.circles[c].points[0].active=!0),this.opacity=.6;this.isObjectEdit=!0,e=!0}return e}},this.moveTo=function(t,a,e){for(var i,s,r,n=0;n<this.points.length;n++)this.points[n].active&&(this.points.length<3?(this.points[n].x=e.x,this.points[n].y=e.y,this.data[n].d=e.dateSeconds,this.data[n].v=e.value,this.circles[n].points=[this.points[n]],this.circles[n].data=[this.data[n]]):2===n?(i={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},s={x:e.x,y:e.y},r=this.getTopData(i,!1,s),this.height=r.h,this.points[n].x=r.x,this.points[n].y=r.y,this.data[n].d=this.chartData.chart.toXValue(this.points[n].x),this.data[n].v=this.chartData.chart.toYValue(this.points[n].y),this.circles[n].points=[this.points[n]],this.circles[n].data=[this.data[n]]):(this.points[n].x=e.x,this.points[n].y=e.y,this.data[n].d=e.dateSeconds,this.data[n].v=e.value,this.circles[n].points=[this.points[n]],this.circles[n].data=[this.data[n]],i={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},s={x:e.x,y:e.y},r=this.getTopData(i,this.height),this.points[2].x=r.x,this.points[2].y=r.y,this.circles[2].points=[this.points[2]],this.data[2].d=this.chartData.chart.toXValue(this.points[2].x),this.data[2].v=this.chartData.chart.toYValue(this.points[2].y),this.circles[2].data=[this.data[2]]))},this.updatePixels=function(){if(!this.isPressed)for(var t=0;t<this.points.length;t++)if(2!==t)this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]];else if(this.points.length>2){var a={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},e={};e.x=this.chartData.chart.toXPixels(this.data[2].d),e.y=this.chartData.chart.toYPixels(this.data[2].v);var i=this.getTopData(a,!1,e);this.height=i.h,this.points[t].x=i.x,this.points[t].y=i.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}},this.appendPoint=function(t,a){var e={v:t.v-this.data[1].v,y:this.points[1].y-a.y},i=this.getMiddleData(this.data[0],this.data[1]),s=this.getMiddlePoint(this.points[0],this.points[1]),n=s.x,o=parseFloat(s.y)-parseFloat(e.y),h=i.d,c=parseFloat(i.v)+parseFloat(e.v);this.points.push({x:n,y:o,active:!0}),this.data.push({d:h,v:c}),this.circles.push(new r.a(this.chartData,{data:[this.data[2]],points:[this.points[2]]}))},this.updateLastPoint=function(t,a){var e=this.data.length-1;e<2&&(this.data[e]=t,this.points[e]=a,this.circles[e].points=[this.points[e]])},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;if(this.drawingStage.current<2){var a=this.getPositions();if(this.chartData.techChart.charts.length>1)for(var e=0;e<this.chartData.techChart.charts.length;e++)a.y1>this.chartData.techChart.charts[e].canvasDrawingActive.clientHeight&&(a.y1=0);o.a.drawLine(null,t,a.x0,a.y0,a.x1,a.y1,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity)}var i=this.getPoints(),s=LibDrawing.getControlPoint(.5,i.p0,i.middlePoint,i.p2);if(this.drawingStage.current>=2&&(this.fill?o.a.drawQuadraticCurve(null,t,i.p0,s,i.p2,.5,this.fillColor,this.color,this.width,this.opacity,this.getLineTypeArray(this.lineType,this.width)):o.a.drawQuadraticCurve(null,t,i.p0,s,i.p2,.5,"transparent",this.color,this.width,this.opacity,this.getLineTypeArray(this.lineType,this.width))),"edit"===this.state||"active"===this.state){for(var r=0;r<this.circles.length;r++)this.circles[r].points[0].active||this.circles[r].drawWithShadow(t,"white",this.color,.1);for(var n=0;n<this.circles.length;n++)this.circles[n].points[0].active&&this.circles[n].drawWithShadow(t,"red",this.color,.1)}return!0},this.getStyleRows=function(){var t=s.a.prototype.getStyleRows.apply(this,arguments),a=[this.getBackgroundRow()];return t.concat(a)},this.trendLineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.trendLineConvertToDTO();return this.updateCustomPropsByObj(t,this),t},this.trendLineApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.trendLineApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,a){this.trendLineUpdateCustomPropsByObj(t,a),t.color=a.color,t.fill=a.fill,t.fillColor=a.fillColor,t.width=a.width,t.opacity=a.opacity,t.height=i.a.cloneObject(a.height),t.lineType=a.lineType}}function Ellipse(){arguments&&arguments.length&&n.a.apply(this,arguments),this.drawingStage={current:0,max:2},this.color="#ef680e",this.fill=!0,this.fillColor="#e89a66",this.opacity=.3,this.height=0,this.lineType="normal",this.width=1,this.isFocused=function(t,a){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isChanged=!1,this.isObjectEdit=!1;for(var e=!1,i=0,s=0;s<this.circles.length;s++){if(i++,LibDrawing.isPointOnCircle(this.circles[s],{x:t,y:a})){this.circles[s].points[0].active=!0,this.points[s].active=!0,e=!0,this.isChanged=!0;break}this.circles[s].points[0].active=!1,this.points[s].active=!1}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;if(e)return!0;if(this.drawingStage.current>=2){var r=this.getPositions(),n={x1:r.x0,y1:r.y0,x2:r.x1,y2:r.y1},o=LibDrawing.findLineAngleDeg(n),h=-LibDrawing.degToRad(o),c={x:t,y:a},l={x:r.x0,y:r.y0},d={x:r.x1,y:r.y1},p=this.getMiddlePoint(l,d),u={h:p.x,k:p.y,rx:Math.sqrt((r.x1-r.x0)*(r.x1-r.x0)+(r.y1-r.y0)*(r.y1-r.y0))/2,ry:Math.sqrt((r.x3-r.x2)*(r.x3-r.x2)+(r.y3-r.y2)*(r.y3-r.y2))/2};if(LibDrawing.isPointOnEllipse(u,c,h,.1)){for(var g=0;g<this.points.length;g++)this.points[g].active=!0,this.circles&&this.circles[g]&&(this.circles[g].points[0].active=!0);this.isObjectEdit=!0,e=!0}return e}},this.moveTo=function(t,a,e){for(var i,s,r,n,o=0;o<this.points.length;o++)this.points[o].active&&(this.points.length<3?(this.points[o].x=e.x,this.points[o].y=e.y,this.data[o].d=e.dateSeconds,this.data[o].v=e.value,this.circles[o].points=[this.points[o]],this.circles[o].data=[this.data[o]]):2===o?(i={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},s={x:e.x,y:e.y},r=this.getTopData(i,!1,s,!0),this.height=r.h,this.points[o].x=r.x,this.points[o].y=r.y,this.data[o].d=this.chartData.chart.toXValue(this.points[o].x),this.data[o].v=this.chartData.chart.toYValue(this.points[o].y),this.circles[o].points=[this.points[o]],this.circles[o].data=[this.data[o]],n=this.getTopData(i,!1,s,!1),this.height=n.h,this.points[3].x=n.x,this.points[3].y=n.y,this.data[3].d=this.chartData.chart.toXValue(this.points[3].x),this.data[3].v=this.chartData.chart.toYValue(this.points[3].y),this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]],this.circles[3].points[0].active=!0,this.points[3].active=!0):3===o?(i={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},s={x:e.x,y:e.y},n=this.getTopData(i,!1,s,!1),this.height=n.h,this.points[o].x=n.x,this.points[o].y=n.y,this.data[o].d=this.chartData.chart.toXValue(this.points[o].x),this.data[o].v=this.chartData.chart.toYValue(this.points[o].y),this.circles[o].points=[this.points[o]],this.circles[o].data=[this.data[o]],r=this.getTopData(i,!1,s,!0),this.height=r.h,this.points[2].x=r.x,this.points[2].y=r.y,this.data[2].d=this.chartData.chart.toXValue(this.points[2].x),this.data[2].v=this.chartData.chart.toYValue(this.points[2].y),this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]],this.circles[2].points[0].active=!0,this.points[2].active=!0):(this.points[o].x=e.x,this.points[o].y=e.y,this.data[o].d=e.dateSeconds,this.data[o].v=e.value,this.circles[o].points=[this.points[o]],this.circles[o].data=[this.data[o]],i={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},s={x:e.x,y:e.y},r=this.getTopData(i,this.height,null,!0),this.points[2].x=r.x,this.points[2].y=r.y,this.data[2].d=this.chartData.chart.toXValue(this.points[2].x),this.data[2].v=this.chartData.chart.toYValue(this.points[2].y),this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]],n=this.getTopData(i,this.height,null,!1),this.points[3].x=n.x,this.points[3].y=n.y,this.data[3].d=this.chartData.chart.toXValue(this.points[3].x),this.data[3].v=this.chartData.chart.toYValue(this.points[3].y),this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]]))},this.updatePixels=function(){if(!this.isPressed)for(var t=0;t<this.points.length;t++)if(0===t||1===t)this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]];else if(this.points.length>2){var a={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},e={};if(2===t){e.x=this.chartData.chart.toXPixels(this.data[2].d),e.y=this.chartData.chart.toYPixels(this.data[2].v);var i=this.getTopData(a,!1,e);this.height=i.h,this.points[t].x=i.x,this.points[t].y=i.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}else{e.x=this.chartData.chart.toXPixels(this.data[3].d),e.y=this.chartData.chart.toYPixels(this.data[3].v);var s=this.getTopData(a,!1,e);this.height=s.h,this.points[t].x=s.x,this.points[t].y=s.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}}},this.appendPoint=function(t,a){var e={v:t.v-this.data[1].v,y:this.points[1].y-a.y},i=this.getMiddleData(this.data[0],this.data[1]),s=this.getMiddlePoint(this.points[0],this.points[1]),n=s.x,o=parseFloat(s.y)-parseFloat(e.y),h=i.d,c=parseFloat(i.v)+parseFloat(e.v);this.points.push({x:n,y:o,active:!0}),this.data.push({d:h,v:c}),this.circles.push(new r.a(this.chartData,{data:[this.data[2]],points:[this.points[2]]})),this.points.push({x:n,y:o,active:!0}),this.data.push({d:h,v:c}),this.circles.push(new r.a(this.chartData,{data:[this.data[3]],points:[this.points[3]]}))},this.updateLastPoint=function(t,a){var e=this.data.length-1;e<2&&(this.data[e]=t,this.points[e]=a,this.circles[e].points=[this.points[e]])},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var a=this.getPositions();if(this.drawingStage.current<2){if(this.chartData.techChart.charts.length>1)for(var e=0;e<this.chartData.techChart.charts.length;e++)a.y1>this.chartData.techChart.charts[e].canvasDrawingActive.clientHeight&&(a.y1=0);o.a.drawLine(null,t,a.x0,a.y0,a.x1,a.y1,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity)}if(this.drawingStage.current>=2){var i={x1:a.x0,y1:a.y0,x2:a.x1,y2:a.y1},s=LibDrawing.findLineAngleDeg(i),r={x:a.x0,y:a.y0},n={x:a.x1,y:a.y1},h=this.getMiddlePoint(r,n),c=h.x,l=h.y,d=Math.sqrt((a.x1-a.x0)*(a.x1-a.x0)+(a.y1-a.y0)*(a.y1-a.y0))/2,p=Math.sqrt((a.x3-a.x2)*(a.x3-a.x2)+(a.y3-a.y2)*(a.y3-a.y2))/2,u=-LibDrawing.degToRad(s),g=2*Math.PI;this.fill?o.a.drawEllipse(null,t,c,l,d,p,u,0,g,!1,this.fillColor,this.width,this.color,this.opacity,this.getLineTypeArray(this.lineType,this.width)):o.a.drawEllipse(null,t,c,l,d,p,u,0,g,!1,"transparent",this.width,this.color,this.opacity,this.getLineTypeArray(this.lineType,this.width))}if("edit"===this.state||"active"===this.state){for(var D=0;D<this.circles.length;D++)this.circles[D].points[0].active||this.circles[D].drawWithShadow(t,"white",this.color,.1);for(var f=0;f<this.circles.length;f++)this.circles[f].points[0].active&&this.circles[f].drawWithShadow(t,"red",this.color,.1)}return!0},this.getStyleRows=function(){var t=s.a.prototype.getStyleRows.apply(this,arguments),a=[this.getBackgroundRow()];return t.concat(a)},this.trendLineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.trendLineConvertToDTO();return this.updateCustomPropsByObj(t,this),t},this.trendLineApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.trendLineApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,a){this.trendLineUpdateCustomPropsByObj(t,a),t.height=i.a.cloneObject(a.height),t.fill=a.fill,t.fillColor=a.fillColor,t.opacity=a.opacity,t.lineType=a.lineType,t.width=a.width}}function Note(t){arguments&&arguments.length&&Text.apply(this,arguments),this.chartData=t,this.note=null,this.textSpanBackground=null,this.textSpanBackgroundHeight=20,this.textSpanBackgroundWidth=250,this.color="rgba(0,0,255,1)",this.fill=!0,this.fillColor="rgba(164,194,244,1)",this.label=!1,this.colorLabel="rgba(0,0,255,1)",this.size=30,this.fontSize=28,this.rect={},this.divText=null,this.pText=null,this.note=null,this.state="edit",this.draw=function(){if(this.chartData&&this.chartData.chart){if(this.divText=this.chartData.chart.drawingTextContainer.querySelector("#"+this.id),this.divText||(this.divText=document.createElement("div"),this.divText.classList.toggle("tch-divText",!0),this.divText.setAttribute("id",this.id),this.divText.style.width=this.textSpanBackgroundWidth+"px",this.chartData.chart.drawingTextContainer.appendChild(this.divText)),this.pText=this.chartData.chart.drawingTextContainer.querySelector("#"+this.id+"-note-text"),this.textSpanBackground=this.chartData.chart.drawingTextContainer.querySelector("#"+this.id+"-note-out"),this.note=this.chartData.chart.drawingTextContainer.querySelector("#"+this.id+"-note-simbol"),null===this.pText&&null===this.textSpanBackground&&null===this.note){this.pText=document.createElement("p"),this.pText.setAttribute("id",this.id+"-note-text"),this.pText.classList.toggle("tch-note-text",!0),this.divText.appendChild(this.pText),this.pText.style.borderColor=this.colorLabel,this.textSpanBackground=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.textSpanBackground.setAttribute("id",this.id+"-note-out"),this.textSpanBackground.classList.toggle("tch-note-out",!0);var t=document.createElementNS("http://www.w3.org/2000/svg","polyline");this.textSpanBackground.appendChild(t),this.textSpanBackground.setAttribute("viewBox","0 0 "+this.textSpanBackgroundWidth+" "+this.textSpanBackgroundHeight),this.textSpanBackground.setAttribute("heigth",this.textSpanBackgroundHeight+"px"),this.textSpanBackground.setAttribute("width",this.textSpanBackgroundWidth+"px"),this.textSpanBackground.style.display="block",this.divText.appendChild(this.textSpanBackground),this.note=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.note.setAttribute("id",this.id+"-note-simbol"),this.note.classList.toggle("tch-note-simbol",!0),this.note.setAttribute("viewBox","0 0 1024 1024"),this.note.setAttribute("heigth",this.size+"px"),this.note.setAttribute("width",this.size+"px"),this.note.style.display="block",this.divText.appendChild(this.note)}this.note.innerHTML=this.getPathString(this.colorLabel.replace(/ /g,"")),this.applyTextParams(),this.applyNoteParams(),"normal"!==this.state?(this.pText.classList.toggle("tch-hidden",!1),this.textSpanBackground.classList.toggle("tch-hidden",!1)):(this.pText.classList.toggle("tch-hidden",!0),this.textSpanBackground.classList.toggle("tch-hidden",!0)),this.applyPosition()}},this.isFocused=function(t,a){var e=parseFloat(this.points[0].x),i=parseFloat(this.points[0].y),s={x1:e-this.size/2,x2:e+this.size/2,y1:i,y2:i-this.size};return this.isObjectEdit=LibDrawing.isPointInRect(s,{x:t,y:a},5),this.isObjectEdit},this.removeDrawingObject=i.a.prototype.remove,this.remove=function(){this.removeDrawingObject(),this.chartData.chart.drawingTextContainer.removeChild(this.divText)},this.getStyleRows=function(){return[this.getTextStyleRow(),this.getTextAreaRow(),this.getBackgroundRow(),this.getLabelRow()]},this.applyValue=function(t,a){this[a]=t,this.draw(),this.chartData.chart.updateDrawingObjectsOtherChart(this),this.chartData.chart.drawActiveDrawingObjectsOtherCharts(this.id)},this.convertToDTO=function(){var t=i.a.prototype.convertToDTO.apply(this,arguments);return this.updateCustomPropsByObj(t,this),t}}function AnchoredNote(){arguments&&arguments.length&&Note.apply(this,arguments),this.updatePixels=function(){},this.convertToDTO=function(){var t=i.a.prototype.convertToDTO.apply(this,arguments);return this.updateCustomPropsByObj(t,this),t}}function AnchoredText(){arguments&&arguments.length&&Text.apply(this,arguments),this.updatePixels=function(){}}function Flag(t){this.chartData=t,arguments&&arguments.length&&(s.a.apply(this,arguments),this.circles.push(new r.a(this.chartData,{data:[this.data[0]],points:[this.points[0]]})),this.circles[0].radius=4),this.icon=null,this.size=30,this.flagColor="rgba(0, 255, 0, 1)",this.centring={x:1,y:0},this.price=this.data[0].v,this.barNumber=-1,this.applyRestoredParams=function(t){i.a.prototype.applyRestoredParams.apply(this,arguments),this.updateCustomPropsByObj(this,t)},this.draw=function(t){this.chartData&&this.chartData.chart&&(this.icon||(this.icon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.icon.setAttribute("id",this.id),this.createFlagIcon(this.icon)),this.chartData.chart.drawingTextContainer&&!this.chartData.chart.drawingTextContainer.querySelector("#"+this.id)&&this.chartData.chart.drawingTextContainer.appendChild(this.icon),this.applyFlagParams(),"edit"!==this.state&&"active"!==this.state||(this.circles[0].points[0].active?(this.circles[0].drawShadow(t,"white",this.flagColor,.1),this.circles[0].draw(t,"red","black")):(this.circles[0].drawShadow(t,"white",this.flagColor,.1),this.circles[0].draw(t,"white","black"))))},this.shiftTo=function(t,a,e,i,s){if(0!==a||0!==t){for(var r=0;r<this.points.length;r++)this.points[r].y-=a,this.points[r].x-=t,this.data[r].d-=i,this.data[r].v-=s;this.circles[0].points=[this.points[0]],this.circles[0].data=[this.data[0]]}},this.isFocused=function(t,a){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isChanged=!1,this.isObjectEdit=!1;var e=!1;return LibDrawing.isPointOnCircle(this.circles[0],{x:t,y:a})&&(this.isChanged=!0,e=!0),this.isPointOnFlag(t,a)&&(e=!0),e?(this.circles[0].points[0].active=!0,this.points[0].active=!0,this.isObjectEdit=!0):(this.circles[0].points[0].active=!1,this.points[0].active=!1),e},this.removeDrawingObject=this.remove,this.remove=function(){this.removeDrawingObject(),this.chartData.chart.drawingTextContainer.removeChild(this.icon)},this.getStyleRows=function(){return[[{className:"tch-ss-basic"},{text:this.chartData.techChart.translation.flagcolor,options:{line:this,id:"tch-settingsStyle-input-color",name:"flagColor",type:"colorpicker",value:this.color,onchange:this.changeValueInput}}]]},this.applyValueBase=this.applyValue,this.applyValue=function(t,a){if("flagColor"===a)for(var e=this.icon.querySelectorAll("rect"),i=0;i<e.length;i++)e[i].style.fill=t;if("barNumber"===a&&this.chartData.data[this.chartData.techChart.configuration.typeData][t]){var s=this.chartData.data[this.chartData.techChart.configuration.typeData][t].date;this.data[0].d=s,this.chartData.chart&&this.chartData.chart.canvasDrawingContext&&this.updatePixels()}if("price"===a){var r=t.replace(",",".");if(isNaN(r))return void(this.chartData.chart.parent.querySelector("#tch-settingsCoordinates-input-text").value=this.price);this.data[0].v=t,this.price=t,this.updatePixels()}this.applyValueBase(t,a)},this.updateCustomPropsByObj=function(t,a){t.flagColor=a.flagColor,t.periods=a.periods.slice(0),t.barNumber=a.barNumber,t.price=a.price;var e=this.data[0].v;this.price="string"===typeof e?e:e.toFixed(this.chartData.precission)},this.getCoordinatesRows=function(){return[[{className:"tch-ss-basic"},{text:this.chartData.techChart.translation.price,options:{line:this,className:"input-styled",id:"tch-settingsCoordinates-input-text",name:"price",type:"text",value:this.price,onchange:this.changeValueInput}},{text:this.chartData.techChart.translation.barNumber,options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-barNumber",name:"barNumber",type:"number",value:this.barNumber,oninput:this.changeValueInput}}]]},this.getStylePropsNames=function(){return["size","flagColor","price","barNumber"]},this.fillLineCoordinatesBase=this.fillLineCoordinates,this.fillLineCoordinates=function(t){this.barNumber=this.getBarNumber(),this.fillLineCoordinatesBase(t)}}function LibDrawing(){}var i=e("./src/scripts/Drawing/DrawingObject.js"),s=e("./src/scripts/Drawing/Line.js");Text.prototype=Object.create(s.a.prototype),Text.prototype.constructor=Text,Text.convertFromDTO=function(t,a){var e=i.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},Text.prototype.getStylePropsNames=function(){return["color","fontFamily","fontSize","textArea","fill","fillColor","border","borderColor","bold","borderColor","italic"]},Text.prototype.applyTextParams=function(){this.textSpan.textContent=this.textArea,this.textSpan.style.fontSize=this.fontSize+"px",this.textSpan.style.fontFamily=this.fontFamily,this.textSpan.style.color=this.color,this.textSpan.style.fontWeight="on"===this.bold?"bolder":"normal",this.textSpan.style.fontStyle="on"===this.italic?"italic":"normal",this.textSpan.style.background=this.fill?this.fillColor:"",this.textSpan.style.border=this.border?"2px solid "+this.borderColor:"none",this.textSpan.style.top=this.points[0].y+"px",this.textSpan.style.left=this.points[0].x+"px";var t=this.textSpan.getBoundingClientRect();this.rect.width=t.width,this.rect.height=t.height},Text.prototype.getTextAreaRow=function(){return[{className:"tch-ss-textAreaRow"},{text:this.chartData.techChart.translation.text,options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-textArea",labelClassName:"label-text-area",name:"textArea",type:"textarea",value:this.textArea,oninput:this.changeValueInput}}]},Text.prototype.getTextStyleRow=function(){return[{className:"tch-ss-basic"},{text:"",options:{line:this,id:"tch-settingsStyle-input-color",name:"color",type:"colorpicker",value:this.color,onchange:this.changeValueInput}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-fontFamily",name:"fontFamily",type:"select",value:this.fontFamily,options:[{value:"Verdana",text:"Verdana"},{value:"Courier New",text:"Courier New"},{value:"Times New Roman",text:"Times New Roman"},{value:"Arial",text:"Arial"}],onchange:this.changeValueSelect}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-fontSize",name:"fontSize",type:"select",value:this.fontSize,options:[{value:10,text:"10"},{value:11,text:"11"},{value:12,text:"12"},{value:14,text:"14"},{value:16,text:"16"},{value:20,text:"20"},{value:24,text:"24"},{value:28,text:"28"},{value:32,text:"32"},{value:40,text:"40"}],onchange:this.changeValueSelect}},{text:"",options:{line:this,id:"tch-settingsStyle-input-bold",name:"bold",type:"button",value:"B",buttonValue:this.bold,onclick:this.clickButton}},{text:"",options:{line:this,id:"tch-settingsStyle-input-italic",name:"italic",type:"button",value:"I",buttonValue:this.italic,onclick:this.clickButton}}]},Text.prototype.getBackgroundRow=function(){return[{className:"tch-ss-backgroundRow"},{text:this.chartData.techChart.translation.background,options:{line:this,id:"tch-settingsStyle-input-fillColor",forId:"tch-settingsStyle-input-fill",labelClassName:"label-fill",name:"fillColor",type:"colorpicker",value:this.fillColor,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-fill",afterLabelClassName:"after-label-fill",name:"fill",type:"checkbox",checked:this.fill,onchange:this.changeCheckboxInput}}]},Text.prototype.getBorderRow=function(){return[{className:"tch-ss-backgroundRow"},{text:this.chartData.techChart.translation.border,options:{line:this,id:"tch-settingsStyle-input-borderColor",forId:"tch-settingsStyle-input-border",labelClassName:"label-border",name:"borderColor",type:"colorpicker",value:this.borderColor,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-border",afterLabelClassName:"after-label-border",name:"border",type:"checkbox",checked:this.border,onchange:this.changeCheckboxInput}}]};var r=e("./src/scripts/Drawing/Circle.js");ArrowMark.prototype=Object.create(Text.prototype),ArrowMark.prototype.constructor=ArrowMark,ArrowMark.prototype.createArrowMarkIcon=function(t){this.chartData&&this.chartData.chart&&(this.chartData.chart.drawingTextContainer&&!this.chartData.chart.drawingTextContainer.querySelector("#"+this.id)&&(this.icon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.icon.setAttribute("id",this.id),this.icon.setAttribute("viewBox",this.viewbox.x+" "+this.viewbox.y+" "+this.viewbox.width+" "+this.viewbox.height),this.icon.setAttribute("heigth",this.size+"px"),this.icon.setAttribute("width",this.size+"px"),this.icon.style.position="absolute",this.icon.style.display="block",this.chartData.chart.drawingTextContainer.appendChild(this.icon)),this.icon&&(this.icon.innerHTML=this.getArrowMarkIcon(this.constructor.name),this.applyArrowMarkPosition(),this.drawCircle(t)))},ArrowMark.prototype.applyArrowMarkPosition=function(){var t=this.getPoint();this.icon.style.left=t.x+this.centeringSvg.x+"px",this.icon.style.top=t.y-this.size/2-this.centeringSvg.y+"px"},ArrowMark.prototype.applyTextParams=function(){this.textSpan.textContent=this.textArea,this.textSpan.style.fontSize=this.fontSize+"px",this.textSpan.style.fontFamily=this.fontFamily,this.textSpan.style.color=this.color,this.textSpan.style.fontWeight="on"===this.bold?"bolder":"normal",this.textSpan.style.fontStyle="on"===this.italic?"italic":"normal";var t=this.textSpan.getBoundingClientRect();this.rect.width=t.width,this.rect.height=t.height,this.applyTextPosition()},ArrowMark.prototype.applyTextPosition=function(){var t=this.getPoint();this.textSpan.style.left=t.x+this.size+"px",this.textSpan.style.top=t.y-this.size/2+"px"},ArrowMark.prototype.drawCircle=function(t){if("edit"===this.state||"active"===this.state){for(var a=0;a<this.circles.length;a++)this.circles[a].points[0].active||this.circles[a].draw(t,"white",this.color);for(a=0;a<this.circles.length;a++)this.circles[a].points[0].active&&this.circles[a].draw(t,"red",this.color)}},ArrowMark.prototype.getRect=function(){var t=this.getPoint();return{x1:t.x,y1:t.y-this.size/2,x2:this.rect.width<=6?t.x+this.size:t.x+this.rect.width+this.size,y2:t.y+this.size/2}},ArrowMark.prototype.getPoint=function(){return{x:parseFloat(this.points[0].x),y:parseFloat(this.points[0].y)}},ArrowMark.prototype.getStylePropsNames=function(){return["color","fontFamily","textArea","bold","italic","colorMark"]},ArrowMark.prototype.getArrowMarkRow=function(){return[{className:"tch-ss-arrowmarkRow"},{text:this.chartData.techChart.translation["arrow-mark"],options:{line:this,id:"tch-settingsStyle-input-colorMark",name:"colorMark",type:"colorpicker",value:this.colorLabel,onchange:this.changeValueInput}}]},ArrowMark.prototype.getTextStyleRow=function(){return[{className:"tch-ss-basic"},{text:this.chartData.techChart.translation["text-font"],options:{line:this,id:"tch-settingsStyle-input-color",name:"color",type:"colorpicker",value:this.color,onchange:this.changeValueInput}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-fontFamily",name:"fontFamily",type:"select",value:this.fontFamily,options:[{value:"Verdana",text:"Verdana"},{value:"Courier New",text:"Courier New"},{value:"Times New Roman",text:"Times New Roman"},{value:"Arial",text:"Arial"}],onchange:this.changeValueSelect}},{text:"",options:{line:this,id:"tch-settingsStyle-input-bold",name:"bold",type:"button",value:"B",buttonValue:this.bold,onclick:this.clickButton}},{text:"",options:{line:this,id:"tch-settingsStyle-input-italic",name:"italic",type:"button",value:"I",buttonValue:this.italic,onclick:this.clickButton}}]},ArrowMark.prototype.getArrowMarkIcon=function(t){var a=this.colorMark.replace(/ /g,"");switch(t){case"ArrowMarkLeft":return"<path d='M401.947,159.301c0-8.583-6.949-15.742-15.497-15.889l0,0H197.515c-7.021-1.589-12.309-7.886-12.309-15.369V78.976 c0-8.675-5.397-11.163-11.993-5.535L4.948,190.735c-6.598,5.634-6.598,14.847,0,20.479l168.262,117.29 c6.599,5.632,11.996,3.146,11.996-5.528v-49.067c0-8.673,7.097-15.771,15.771-15.771l185.201-0.276 c8.676-0.004,15.771-7.101,15.771-15.771L401.947,159.301z' fill="+a+"></path>";case"ArrowMarkRight":return"<path d='M397,190.734L228.738,73.444c-6.599-5.632-11.996-3.147-11.996,5.528v49.068c0,8.672-7.099,15.77-15.77,15.77 l-104.176,0.156H15.69v0.125C7.051,144.139,0.002,151.214,0,159.857l0.002,82.789c0,8.673,7.095,15.771,15.765,15.771 l183.426-0.275h1.834c8.647,0.028,15.717,7.107,15.717,15.765v49.067c0,8.675,5.397,11.163,11.993,5.535l168.265-117.294 C403.598,205.579,403.598,196.367,397,190.734z' fill="+a+"></path>";case"ArrowMarkUp":return"<path d='M298.055,147.199c0,2.787-1.267,9.271-13.036,9.271h-54.037v178.856c0.072,0.48,0.144,1.159,0.144,1.939 c0,3.177-1.207,6.106-3.416,8.269c-2.858,2.798-7.224,4.222-12.988,4.222h-83.056c-11.493,0-14.525-8.149-14.525-12.454V160.236 H67.606c-13.841,0-15.904-6.594-15.904-10.521c0-6.293,5.996-12.577,7.197-13.775c3.176-4.305,89.036-118.195,101.529-130.718 c4.558-4.534,9.131-5.339,12.163-5.209c7.293,0.3,12.268,5.915,12.808,6.56l104.838,126.674 C291.75,134.631,298.055,141.068,298.055,147.199z' fill="+a+"></path>";case"ArrowMarkDown":return"<path d='M157.355,309.63c-6.728,0-11.351-5.221-11.863-5.82L52.686,191.656 c-2.458-2.274-8.784-9.154-6.391-15.164c1.42-3.568,5.124-5.379,11.014-5.379h47.837V12.765 c-0.234-1.496-0.424-4.906,1.947-7.985C109.54,1.61,113.723,0,119.526,0h73.536c5.211,0,8.213,1.969,9.823,3.628 c3.008,3.1,3.057,6.853,3.04,7.577v156.58h43.85c2.703,0,10.943,0,13.467,6.103c2.622,6.369-3.742,13.391-5.76,15.387 c-2.812,3.818-78.823,104.648-89.886,115.722C163.768,308.814,159.917,309.63,157.355,309.63z' fill="+a+"></path>"}},ArrowMarkLeft.prototype=Object.create(ArrowMark.prototype),ArrowMarkLeft.prototype.constructor=ArrowMarkLeft,ArrowMarkLeft.convertFromDTO=function(t,a){var e=i.a.convertFromDTO(t,a);e.circles=e.restoreCircles(a);for(var s=0;s<e.circles.length;s++)e.circles[s].points[0]=e.points[s],e.circles[s].data[0]=e.data[s];return e.updateCustomPropsByObj(e,a),e},ArrowMarkRight.prototype=Object.create(ArrowMark.prototype),ArrowMarkRight.prototype.constructor=ArrowMarkRight,ArrowMarkRight.convertFromDTO=function(t,a){var e=i.a.convertFromDTO(t,a);e.circles=e.restoreCircles(a);for(var s=0;s<e.circles.length;s++)e.circles[s].points[0]=e.points[s],e.circles[s].data[0]=e.data[s];return e.updateCustomPropsByObj(e,a),e},ArrowMarkUp.prototype=Object.create(ArrowMark.prototype),ArrowMarkUp.prototype.constructor=ArrowMarkUp,ArrowMarkUp.convertFromDTO=function(t,a){var e=i.a.convertFromDTO(t,a);e.circles=e.restoreCircles(a);for(var s=0;s<e.circles.length;s++)e.circles[s].points[0]=e.points[s],e.circles[s].data[0]=e.data[s];return e.updateCustomPropsByObj(e,a),e},ArrowMarkDown.prototype=Object.create(ArrowMark.prototype),ArrowMarkDown.prototype.constructor=ArrowMarkDown,ArrowMarkDown.convertFromDTO=function(t,a){var e=i.a.convertFromDTO(t,a);e.circles=e.restoreCircles(a);for(var s=0;s<e.circles.length;s++)e.circles[s].points[0]=e.points[s],e.circles[s].data[0]=e.data[s];return e.updateCustomPropsByObj(e,a),e};var n=e("./src/scripts/Drawing/TrendLine.js"),o=e("./src/scripts/Libs/LibCanvas.js");HorizontalLine.prototype=Object.create(s.a.prototype),HorizontalLine.prototype.constructor=HorizontalLine,HorizontalLine.convertFromDTO=function(t,a){var e=s.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e};var h=e("./src/scripts/Drawing/VerticalLine.js");Arrow.prototype=Object.create(n.a.prototype),Arrow.prototype.constructor=Arrow,Arrow.convertFromDTO=function(t,a){var e=Line.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},Ray.prototype=Object.create(n.a.prototype),Ray.prototype.constructor=Ray,Ray.convertFromDTO=function(t,a){var e=s.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},HorizontalRay.prototype=Object.create(HorizontalLine.prototype),HorizontalRay.prototype.constructor=HorizontalRay,HorizontalRay.convertFromDTO=function(t,a){return HorizontalLine.convertFromDTO(t,a)},TrendAngle.prototype=Object.create(Ray.prototype),TrendAngle.prototype.constructor=TrendAngle,TrendAngle.prototype.removalLength=50,TrendAngle.convertFromDTO=function(t,a){var e=n.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},ParallelChannel.prototype=Object.create(n.a.prototype),ParallelChannel.prototype.constructor=ParallelChannel,ParallelChannel.convertFromDTO=function(t,a){var e=n.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},ParallelChannel.prototype.completeFigure=function(t,a){if(!(this.points.length<3)){this.heightData={v:t.v-this.data[1].v,y:this.points[1].y-a.y};var e=this.getMiddleData(this.data[0],this.data[1]),i=this.getMiddlePoint(this.points[0],this.points[1]);this.points[2].x=i.x,this.points[2].y=parseFloat(i.y)-parseFloat(this.heightData.y),this.data[2].d=e.d,this.data[2].v=parseFloat(e.v)+parseFloat(this.heightData.v),this.circles[2]&&(this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]])}},ParallelChannel.prototype.drawParallelogram=function(t,a,e,i){var s=[];s.push([a.x,a.y]),s.push([e.x,e.y]),s.push([parseFloat(e.x),parseFloat(e.y)-parseFloat(i)]),s.push([parseFloat(a.x),parseFloat(a.y)-parseFloat(i)]),o.a.drawPolygon(null,t,s,this.fillColor,!1,!0,0,4,this.opacity)},ParallelChannel.prototype.getMiddleData=function(t,a){var e={};return e.v=(parseFloat(t.v)+parseFloat(a.v))/2,e.d=parseInt((t.d+a.d)/2),e},ParallelChannel.prototype.getMiddlePoint=function(t,a){var e={};return e.x=(parseFloat(t.x)+parseFloat(a.x))/2,e.y=(parseFloat(t.y)+parseFloat(a.y))/2,e},ParallelChannel.prototype.getEndPoints=function(t,a,e,i,s){var r;return r=this.leftEnd?this.getLeftEndPoint({x1:t,y1:a,x2:e,y2:i},this.chartData.chart.w,this.chartData.chart.h,s):{x:t,y:a},{rep:this.rightEnd?this.getRightEndPoint({x1:t,y1:a,x2:e,y2:i},this.chartData.chart.w,this.chartData.chart.h,s):{x:e,y:i},lep:r}},DisjointAngle.prototype=Object.create(ParallelChannel.prototype),DisjointAngle.prototype.constructor=DisjointAngle,DisjointAngle.prototype.fillFigure=function(t,a,e,i,s,r,n,h,c){var l,d,p,u,g={x1:a,y1:e,x2:i,y2:s},D={x1:r,y1:n,x2:h,y2:c};a<i?(this.leftEnd?(l=LibDrawing.findPointOnLineByX(g,0),u=LibDrawing.findPointOnLineByX(D,0)):(l={x:a,y:e},u={x:r,y:n}),this.rightEnd?(d=LibDrawing.findPointOnLineByX(g,this.chartData.chart.w),p=LibDrawing.findPointOnLineByX(D,this.chartData.chart.w)):(d={x:i,y:s},p={x:h,y:c})):(this.leftEnd?(l=LibDrawing.findPointOnLineByX(g,this.chartData.chart.w),u=LibDrawing.findPointOnLineByX(D,this.chartData.chart.w)):(l={x:a,y:e},u={x:r,y:n}),this.rightEnd?(d=LibDrawing.findPointOnLineByX(g,0),p=LibDrawing.findPointOnLineByX(D,0)):(d={x:i,y:s},p={x:h,y:c}));var f=[];f.push([l.x,l.y]),f.push([u.x,u.y]),f.push([p.x,p.y]),f.push([d.x,d.y]),o.a.drawPolygon(null,t,f,this.fillColor,!1,!1,0,4,this.opacity)},DisjointAngle.convertFromDTO=function(t,a){var e=n.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},FlatTopBottom.prototype=Object.create(DisjointAngle.prototype),FlatTopBottom.prototype.constructor=FlatTopBottom,FlatTopBottom.prototype.fixFlatLineEnds=function(t,a){return this.leftEnd&&(a=a<t?0:this.chartData.chart.w),this.rightEnd&&(t=a<t?this.chartData.chart.w:0),{x2:t,x3:a}},FlatTopBottom.convertFromDTO=function(t,a){var e=n.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},Polyline.prototype=Object.create(n.a.prototype),Polyline.prototype.constructor=Polyline,Polyline.prototype.checkClosed=function(t,a){var e=!1;if(this.points.length>2){var i=Math.abs(this.points[0].x-a.x),s=Math.abs(this.points[0].y-a.y);e=i<20&&s<20}return e};var c=e("./src/scripts/Drawing/Rectangle.js");Curve.prototype=Object.create(n.a.prototype),Curve.prototype.constructor=Curve,Curve.prototype.getPeekPoint=function(){var t,a,e,i,s,r=((t=o.a.getPosition(this.points[0].x,this.width))+(a=o.a.getPosition(this.points[1].x,this.width)))/2,n=((e=o.a.getPosition(this.points[0].y,this.width))+(i=o.a.getPosition(this.points[1].y,this.width)))/2;s=LibDrawing.findLineAngleDeg({x1:t,y1:e,x2:a,y2:i});var h=LibDrawing.degToRad(s);return{x:r+Math.sin(h)*this.height,y:n+Math.cos(h)*this.height}},Curve.prototype.arePointsOnCurve=function(t,a,e,i,s,r){var n=!1,o=[],h=0;(i>=.9||i<=0)&&(i=.1);for(var c=0;c<1+i;c+=i)if(c>1&&(c=1),0===c?o.push(LibDrawing.getPeekOnCurve(c,t,a,e)):(h++,o.push(LibDrawing.getPeekOnCurve(c,t,a,e)),n=LibDrawing.isPointOnLine({x1:o[h-1].x,x2:o[h].x,y1:o[h-1].y,y2:o[h].y},{x:s,y:r})),n)return!0;return!1},Curve.prototype.getPosition=function(){var t=o.a.getPosition(this.points[0].x,this.width),a=o.a.getPosition(this.points[0].y,this.width),e=o.a.getPosition(this.points[1].x,this.width),i=o.a.getPosition(this.points[1].y,this.width);if(this.points[2])var s=o.a.getPosition(this.points[2].x,this.width),r=o.a.getPosition(this.points[2].y,this.width);return{x0:t,y0:a,x1:e,y1:i,x2:s,y2:r}},Curve.prototype.isFocusedOnCircles=function(t,a){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isObjectEdit=!1;for(var e=!1,i=0,s=0;s<this.circles.length;s++){if(i++,LibDrawing.isPointOnCircle(this.circles[s],{x:t,y:a})){this.circles[s].points[0].active=!0,this.points[s].active=!0,e=!0;break}this.circles[s].points[0].active=!1,this.points[s].active=!1}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;return!!e||e},Triangle.prototype=Object.create(n.a.prototype),Triangle.prototype.constructor=Triangle,RotatedRect.prototype=Object.create(n.a.prototype),RotatedRect.prototype.constructor=RotatedRect,RotatedRect.convertFromDTO=function(t,a){var e=n.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},RotatedRect.prototype.movePoints=function(t){var a={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},e={x:t.x,y:t.y},i=this.getTopLeftData(a,!1,e,!0);this.height=i.h,this.points[2].x=i.x,this.points[2].y=i.y,this.data[2].d=this.chartData.chart.toXValue(this.points[2].x),this.data[2].v=this.chartData.chart.toYValue(this.points[2].y),this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]];var s=this.getTopRightData(a,this.height,null,!0);this.points[3].x=s.x,this.points[3].y=s.y,this.data[3].d=this.chartData.chart.toXValue(this.points[3].x),this.data[3].v=this.chartData.chart.toYValue(this.points[3].y),this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]];var r=this.getTopLeftData(a,this.height,null,!1);this.points[4].x=r.x,this.points[4].y=r.y,this.data[4].d=this.chartData.chart.toXValue(this.points[4].x),this.data[4].v=this.chartData.chart.toYValue(this.points[4].y),this.circles[4].points=[this.points[4]],this.circles[4].data=[this.data[4]];var n=this.getTopRightData(a,this.height,null,!1);this.points[5].x=n.x,this.points[5].y=n.y,this.data[5].d=this.chartData.chart.toXValue(this.points[5].x),this.data[5].v=this.chartData.chart.toYValue(this.points[5].y),this.circles[5].points=[this.points[5]],this.circles[5].data=[this.data[5]],this.circles[2].points[0].active=!0,this.points[2].active=!0,this.circles[3].points[0].active=!0,this.points[3].active=!0,this.circles[4].points[0].active=!0,this.points[4].active=!0,this.circles[5].points[0].active=!0,this.points[5].active=!0},RotatedRect.prototype.getTopLeftData=function(t,a,e,i){var s=a||0===a?a:LibDrawing.distanceToLine(t,e),r={};r.x=parseFloat(this.points[0].x),r.y=parseFloat(this.points[0].y);var n=LibDrawing.findLineAngleDeg({x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y}),o=s*Math.cos(LibDrawing.degToRad(90-n)),h=s*Math.sin(LibDrawing.degToRad(90-n)),c={};return i?(c.x=r.x+o,c.y=r.y+h,c.h=s):(c.x=r.x-o,c.y=r.y-h,c.h=s),c},RotatedRect.prototype.getTopRightData=function(t,a,e,i){var s=a||0===a?a:LibDrawing.distanceToLine(t,e),r={};r.x=parseFloat(this.points[1].x),r.y=parseFloat(this.points[1].y);var n=LibDrawing.findLineAngleDeg({x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y}),o=s*Math.cos(LibDrawing.degToRad(90-n)),h=s*Math.sin(LibDrawing.degToRad(90-n)),c={};return i?(c.x=r.x+o,c.y=r.y+h,c.h=s):(c.x=r.x-o,c.y=r.y-h,c.h=s),c},RotatedRect.prototype.getPositions=function(){var t=o.a.getPosition(this.points[0].x,this.width),a=o.a.getPosition(this.points[0].y,this.width),e=o.a.getPosition(this.points[1].x,this.width),i=o.a.getPosition(this.points[1].y,this.width);if(this.points[2]&&this.points[3]&&this.points[4]&&this.points[5])var s=o.a.getPosition(this.points[2].x,this.width),r=o.a.getPosition(this.points[2].y,this.width),n=o.a.getPosition(this.points[3].x,this.width),h=o.a.getPosition(this.points[3].y,this.width),c=o.a.getPosition(this.points[4].x,this.width),l=o.a.getPosition(this.points[4].y,this.width),d=o.a.getPosition(this.points[5].x,this.width),p=o.a.getPosition(this.points[5].y,this.width);return{x0:t,x1:e,x2:s,x3:n,x4:c,x5:d,y0:a,y1:i,y2:r,y3:h,y4:l,y5:p}},Arc.prototype=Object.create(n.a.prototype),Arc.prototype.constructor=Arc,Arc.convertFromDTO=function(t,a){var e=n.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},Arc.prototype.getTopData=function(t,a,e){var i=a||0===a?a:LibDrawing.distanceToLine(t,e),s={};s.x=(parseFloat(t.x1)+parseFloat(t.x2))/2,s.y=(parseFloat(t.y1)+parseFloat(t.y2))/2;var r=LibDrawing.findLineAngleDeg({x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y}),n=i*Math.cos(LibDrawing.degToRad(90-r)),o=i*Math.sin(LibDrawing.degToRad(90-r)),h={};return h.x=s.x+n,h.y=s.y+o,h.h=i,h},Arc.prototype.getMiddleData=function(t,a){var e={};return e.v=(parseFloat(t.v)+parseFloat(a.v))/2,e.d=parseInt((t.d+a.d)/2),e},Arc.prototype.getMiddlePoint=function(t,a){var e={};return e.x=(parseFloat(t.x)+parseFloat(a.x))/2,e.y=(parseFloat(t.y)+parseFloat(a.y))/2,e},Arc.prototype.getPositions=function(){var t=o.a.getPosition(this.points[0].x,this.width),a=o.a.getPosition(this.points[0].y,this.width),e=o.a.getPosition(this.points[1].x,this.width),i=o.a.getPosition(this.points[1].y,this.width);if(this.points[2])var s=o.a.getPosition(this.points[2].x,this.width),r=o.a.getPosition(this.points[2].y,this.width);return{x0:t,y0:a,x1:e,y1:i,x2:s,y2:r}},Arc.prototype.getPoints=function(){var t=this.getPositions();return{p0:{x:t.x0,y:t.y0},middlePoint:{x:t.x2,y:t.y2},p2:{x:t.x1,y:t.y1},p4:{x:t.x2-(t.x1-t.x0)/2,y:t.y2-(t.y1-t.y0)/2},p5:{x:t.x2+(t.x1-t.x0)/2,y:t.y2+(t.y1-t.y0)/2}}};var l=e("./src/scripts/Drawing/Roulete.js");Ellipse.prototype=Object.create(n.a.prototype),Ellipse.prototype.constructor=Ellipse,Ellipse.convertFromDTO=function(t,a){var e=n.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},Ellipse.prototype.getTopData=function(t,a,e,i){var s=a||0===a?a:LibDrawing.distanceToLine(t,e),r={};r.x=(parseFloat(t.x1)+parseFloat(t.x2))/2,r.y=(parseFloat(t.y1)+parseFloat(t.y2))/2;var n=LibDrawing.findLineAngleDeg({x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y}),o=s*Math.cos(LibDrawing.degToRad(90-n)),h=s*Math.sin(LibDrawing.degToRad(90-n)),c={};return i?(c.x=r.x+o,c.y=r.y+h,c.h=s):(c.x=r.x-o,c.y=r.y-h,c.h=s),c},Ellipse.prototype.getMiddleData=function(t,a){var e={};return e.v=(parseFloat(t.v)+parseFloat(a.v))/2,e.d=parseInt((t.d+a.d)/2),e},Ellipse.prototype.getMiddlePoint=function(t,a){var e={};return e.x=(parseFloat(t.x)+parseFloat(a.x))/2,e.y=(parseFloat(t.y)+parseFloat(a.y))/2,e},Ellipse.prototype.getPositions=function(){var t=o.a.getPosition(this.points[0].x,this.width),a=o.a.getPosition(this.points[0].y,this.width),e=o.a.getPosition(this.points[1].x,this.width),i=o.a.getPosition(this.points[1].y,this.width);if(this.points[2]&&this.points[3])var s=o.a.getPosition(this.points[2].x,this.width),r=o.a.getPosition(this.points[2].y,this.width),n=o.a.getPosition(this.points[3].x,this.width),h=o.a.getPosition(this.points[3].y,this.width);return{x0:t,y0:a,x1:e,y1:i,x2:s,y2:r,x3:n,y3:h}},Ellipse.prototype.getPoints=function(){var t=this.getPositions();return{p0:{x:t.x0,y:t.y0},middlePoint1:{x:t.x2,y:t.y2},middlePoint2:{x:t.x3,y:t.y3},p2:{x:t.x1,y:t.y1},p4:{x:t.x2-(t.x1-t.x0)/2,y:t.y2-(t.y1-t.y0)/2},p5:{x:t.x2+(t.x1-t.x0)/2,y:t.y2+(t.y1-t.y0)/2}}},Note.prototype=Object.create(Text.prototype),Note.prototype.constructor=Note,Note.convertFromDTO=function(t,a){var e=i.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},Note.prototype.getPathString=function(t){return"<path d='M512 0c-176.732 0-320 143.268-320 320 0 320 320 704 320 704s320-384 320-704c0-176.732-143.27-320-320-320zM512 512c-106.040 0-192-85.96-192-192s85.96-192 192-192 192 85.96 192 192-85.96 192-192 192z' fill="+t+"></path>"},Note.prototype.applyPosition=function(){if(this.divText){var t=this.divText.getBoundingClientRect();this.divText.style.top=parseFloat(this.points[0].y)-t.height+"px",this.divText.style.left=parseFloat(this.points[0].x)-t.width/2+"px"}},Note.prototype.applyNoteParams=function(){this.note.style.color=this.colorLabel,this.textSpanBackground.style.fill=this.fill?this.fillColor:"",this.textSpanBackground.style.stroke=this.colorLabel;for(var t=[{x:0,y:0},{x:this.textSpanBackgroundWidth/2-10,y:0},{x:this.textSpanBackgroundWidth/2,y:this.textSpanBackgroundHeight},{x:this.textSpanBackgroundWidth/2+10,y:0},{x:this.textSpanBackgroundWidth,y:0}],a="",e=0;e<t.length;e++)a=a+(t[e].x+",")+t[e].y+" ";this.textSpanBackground.getElementsByTagName("polyline")[0].setAttribute("points",a)},Note.prototype.applyTextParams=function(){this.pText.textContent=this.textArea,this.pText.style.fontSize=this.fontSize+"px",this.pText.style.fontFamily=this.fontFamily,this.pText.style.color=this.color,this.pText.style.backgroundColor=this.fill?this.fillColor:"",this.pText.style.fontWeight="on"===this.bold?"bolder":"normal",this.pText.style.fontStyle="on"===this.italic?"italic":"normal"},Note.prototype.getStylePropsNames=function(){return["color","fontFamily","fontSize","textArea","fill","fillColor","label","colorLabel","bold","italic"]},Note.prototype.getLabelRow=function(){return[{className:"tch-ss-backgroundRow"},{text:this.chartData.techChart.translation.notecolor,options:{line:this,id:"tch-settingsStyle-input-colorLabel",forId:"tch-settingsStyle-input-label",labelClassName:"label-note",name:"colorLabel",type:"colorpicker",value:this.colorLabel,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-label",afterLabelClassName:"after-label-note",name:"label",type:"checkbox",checked:this.label,onchange:this.changeCheckboxInput}}]},AnchoredNote.prototype=Object.create(Note.prototype),AnchoredNote.prototype.constructor=AnchoredNote,AnchoredNote.convertFromDTO=function(t,a){var e=i.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e};var d=e("./src/scripts/Drawing/Brush.js");AnchoredText.prototype=Object.create(Text.prototype),AnchoredText.prototype.constructor=AnchoredText,AnchoredText.convertFromDTO=function(t,a){return Text.convertFromDTO(t,a)};var p=e("./src/scripts/preBuild/Chart.js");Flag.prototype=Object.create(s.a.prototype),Flag.prototype.constructor=Flag,Flag.prototype.isPointOnFlag=function(t,a){this.points[0].x=parseFloat(this.points[0].x),this.points[0].y=parseFloat(this.points[0].y);var e={x1:this.points[0].x,x2:this.points[0].x+this.size,y1:this.points[0].y-this.size,y2:this.points[0].y};return LibDrawing.isPointInRect(e,{x:t,y:a},5)},Flag.convertFromDTO=function(t,a){var e=i.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},Flag.prototype.createFlagIcon=function(t){t.setAttribute("viewBox","0 0 17 17"),t.innerHTML="<rect style='fill:"+this.flagColor+";stroke:#000000;stroke-width:0.3;' width='5.3' height='6' x='6.5' y='3' /><rect style='fill:"+this.flagColor+";stroke:#000000;stroke-width:0.3;'width='5.3'height='6'x='1.2'y='1.5' /><line style='stroke-width:0.8;stroke:#000000' x1='0.4' y1='1.4' x2='0.4' y2='15' ></line>",t.style.width=this.size+"px",t.style.width=this.size+"px",t.style.position="absolute",t.style.display="block",t.style.left=this.points[0].x-this.centring.x+"px",t.style.top=this.points[0].y-this.size+"px"},Flag.prototype.applyFlagParams=function(){this.icon.style.left=this.points[0].x-this.centring.x+"px",this.icon.style.top=this.points[0].y-this.size+"px",this.circles[0].points[0].x=this.points[0].x,this.circles[0].points[0].y=this.points[0].y,null===this.barNumber&&(this.barNumber=this.getBarNumber())},Flag.prototype.getBarNumber=function(){var t=p.a.binaryIndexOfCandleByTime(this.data[0].d,this.chartData.data[this.chartData.techChart.configuration.typeData]);return t>=0?t:0},e.d(a,"a",function(){return LibDrawing}),LibDrawing.isPointOnLine=function(t,a){var e={x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2};if(LibDrawing.isPointInRect(e,a,5)){var i=t.x1*t.y2-t.x2*t.y1,s=t.y1-t.y2,r=t.x2-t.x1;return Math.abs(s*a.x+r*a.y+i)/Math.sqrt(s*s+r*r)<5}return!1},LibDrawing.isPointInRect=function(t,a,e){var i=Math.min(t.x1,t.x2)-e,s=Math.max(t.x1,t.x2)+e,r=Math.min(t.y1,t.y2)-e,n=Math.max(t.y1,t.y2)+e;return a.x>=i&&a.x<=s&&a.y>=r&&a.y<=n},LibDrawing.isPointOnCircle=function(t,a){return Math.abs(t.points[0].x-a.x)<=t.radius&&Math.abs(t.points[0].y-a.y)<=t.radius},LibDrawing.isPointOnEllipse=function(t,a,e,i){var s=((a.x-t.h)*Math.cos(e)+(a.y-t.k)*Math.sin(e))*((a.x-t.h)*Math.cos(e)+(a.y-t.k)*Math.sin(e)),r=((a.x-t.h)*Math.sin(e)-(a.y-t.k)*Math.cos(e))*((a.x-t.h)*Math.sin(e)-(a.y-t.k)*Math.cos(e)),n=s/(t.rx*t.rx)+r/(t.ry*t.ry);return Math.abs(n-1)<=i},LibDrawing.isPointInPolygon=function(t,a,e){for(var i=!1,s=e.x,r=e.y,n=s.length,o=n-1,h=0;h<n;o=h++){var c=(s[o]-s[h])*(a-r[h])/(r[o]-r[h])+s[h];(r[h]<=a&&a<r[o]||r[o]<=a&&a<r[h])&&t>c&&(i=!i)}return i},LibDrawing.arePointsOnBezier=function(t,a,e,i,s,r){var n=!1,o=[],h=0;(i>.9||i<=0)&&(i=.1);for(var c=0;c<1+i;c+=i)if(c>1&&(c=1),0===c?(o.push(LibDrawing.getPeekOnCurve(c,t,a,e)),n=LibDrawing.isPointOnLine({x1:t.x,x2:e.x,y1:t.y,y2:e.y},{x:s,y:r})):(h++,o.push(LibDrawing.getPeekOnCurve(c,t,a,e)),n=LibDrawing.isPointOnLine({x1:o[h-1].x,x2:o[h].x,y1:o[h-1].y,y2:o[h].y},{x:s,y:r})),n)return!0;return!1},LibDrawing.getPeekOnCurve=function(t,a,e,i){var s={},r=(1-t)*(1-t),n=2*t*(1-t),o=t*t;return s.x=r*a.x+n*e.x+o*i.x,s.y=r*a.y+n*e.y+o*i.y,s},LibDrawing.getControlPoint=function(t,a,e,i){var s={},r=(1-t)*(1-t),n=2*t*(1-t),o=t*t;return s.x=(e.x-r*a.x-o*i.x)/n,s.y=(e.y-r*a.y-o*i.y)/n,s},LibDrawing.createDrawingObjectByType=function(t,a){switch(t){case"ArrowMarkLeft":return new ArrowMarkLeft(a[0],a[1]);case"ArrowMarkRight":return new ArrowMarkRight(a[0],a[1]);case"ArrowMarkUp":return new ArrowMarkUp(a[0],a[1]);case"ArrowMarkDown":return new ArrowMarkDown(a[0],a[1]);case"Circle":return new r.a(a[0],a[1]);case"TrendLine":return new n.a(a[0],a[1]);case"HorizontalLine":return new HorizontalLine(a[0],a[1]);case"VerticalLine":return new h.a(a[0],a[1]);case"Arrow":return new Arrow(a[0],a[1]);case"Ray":return new Ray(a[0],a[1]);case"HorizontalRay":return new HorizontalRay(a[0],a[1]);case"TrendAngle":return new TrendAngle(a[0],a[1]);case"ParallelChannel":return new ParallelChannel(a[0],a[1]);case"DisjointAngle":return new DisjointAngle(a[0],a[1]);case"FlatTopBottom":return new FlatTopBottom(a[0],a[1]);case"Polyline":return new Polyline(a[0],a[1]);case"Rectangle":return new c.a(a[0],a[1]);case"Curve":return new Curve(a[0],a[1]);case"Triangle":return new Triangle(a[0],a[1]);case"RotatedRect":return new RotatedRect(a[0],a[1]);case"Arc":return new Arc(a[0],a[1]);case"Roulete":return new l.a(a[0],a[1]);case"Ellipse":return new Ellipse(a[0],a[1]);case"Text":return new Text(a[0],a[1]);case"Note":return new Note(a[0],a[1]);case"AnchoredNote":return new AnchoredNote(a[0],a[1]);case"Brush":return new d.a(a[0],a[1]);case"AnchoredText":return new AnchoredText(a[0],a[1]);case"Flag":return new Flag(a[0],a[1]);default:return new i.a(a)}},LibDrawing.convertFromDTO=function(t,a){switch(a.type){case"ArrowMarkLeft":return ArrowMarkLeft.convertFromDTO(t,a);case"ArrowMarkRight":return ArrowMarkRight.convertFromDTO(t,a);case"ArrowMarkUp":return ArrowMarkUp.convertFromDTO(t,a);case"ArrowMarkDown":return ArrowMarkDown.convertFromDTO(t,a);case"Circle":return r.a.convertFromDTO(t,a);case"TrendLine":return n.a.convertFromDTO(t,a);case"HorizontalLine":return HorizontalLine.convertFromDTO(t,a);case"VerticalLine":return h.a.convertFromDTO(t,a);case"Arrow":return Arrow.convertFromDTO(t,a);case"Ray":return Ray.convertFromDTO(t,a);case"HorizontalRay":return HorizontalRay.convertFromDTO(t,a);case"TrendAngle":return TrendAngle.convertFromDTO(t,a);case"ParallelChannel":return ParallelChannel.convertFromDTO(t,a);case"DisjointAngle":return DisjointAngle.convertFromDTO(t,a);case"FlatTopBottom":return FlatTopBottom.convertFromDTO(t,a);case"Arc":return Arc.convertFromDTO(t,a);case"Ellipse":return Ellipse.convertFromDTO(t,a);case"RotatedRect":return RotatedRect.convertFromDTO(t,a);case"Text":return Text.convertFromDTO(t,a);case"Note":return Note.convertFromDTO(t,a);case"AnchoredNote":return AnchoredNote.convertFromDTO(t,a);case"Brush":return d.a.convertFromDTO(t,a);case"Flag":return Flag.convertFromDTO(t,a);default:return i.a.convertFromDTO(t,a)}},LibDrawing.distanceToLine=function(t,a){var e=t.x1*t.y2-t.x2*t.y1,i=t.y1-t.y2,s=t.x2-t.x1;return(i*a.x+s*a.y+e)/Math.sqrt(i*i+s*s)},LibDrawing.findPointOnLineByX=function(t,a){var e=parseFloat(t.x1),i=parseFloat(t.x2),s=parseFloat(t.y1),r=parseFloat(t.y2),n=i-e;return 0===n?{x:0,y:s}:{x:a,y:(r-s)*(a-e)/n+s}},LibDrawing.findPointOnLineByY=function(t,a){var e=parseFloat(t.x1),i=parseFloat(t.x2),s=parseFloat(t.y1),r=parseFloat(t.y2)-s;return 0===r?{x:e,y:0}:{x:(i-e)/r*(a-s)+e,y:a}},LibDrawing.findLineAngleDeg=function(t){var a=parseFloat(t.x1),e=parseFloat(t.x2),i=parseFloat(t.y1),s=-1*(parseFloat(t.y2)-i),r=e-a;if(0===s)return r<0?180:0;if(0===r&&s>0)return 90;if(0===r&&s<0)return-90;var n=s/r,o=LibDrawing.radToDeg(Math.atan(n));return r<0&&(o>0?o-=180:o+=180),o},LibDrawing.radToDeg=function(t){return 180*t/Math.PI},LibDrawing.degToRad=function(t){return t*Math.PI/180},LibDrawing.getTanDeg=function(t){var a=t*Math.PI/180;return Math.tan(a)}},"./src/scripts/Drawing/Line.js":function(t,a,e){"use strict";function Line(t){arguments&&arguments.length&&i.a.apply(this,arguments),this.chartData=t,this.color="#0000FF",this.isChanged=!1,this.circles=[],this.width=1,this.state="edit",this.periods=[],this.lineType="normal",this.fillSettingsPanel=function(t){t.innerHTML=this.htmlSettingsPanel(),this.addSettingsLineEvent(t)},this.convertToDTO=function(){var t=i.a.prototype.convertToDTO.apply(this,arguments);return t.circles=this.cloneCircles(this.circles),this.updateCustomPropsByObj(t,this),t},this.applyRestoredParams=function(t){i.a.prototype.applyRestoredParams.apply(this,arguments),t.type||(t.type=t.constructor.name),this.circles=this.restoreCircles(t),this.updateCustomPropsByObj(this,t)}}e.d(a,"a",function(){return Line});var i=e("./src/scripts/Drawing/DrawingObject.js"),s=e("./src/scripts/Libs/MoveLib.js"),r=e("./src/scripts/Drawing/LibDrawing.js"),n=e("./src/scripts/Libs/LibCanvas.js"),o=e("./src/scripts/Libs/ColorPicker.js");Line.prototype=Object.create(i.a.prototype),Line.prototype.constructor=Line,Line.prototype.addSettingsLineEvent=function(t){var a=t.querySelector(".tch-line-settings-panel"),e=a.querySelector(".tch-line-delete"),i=a.querySelector(".tch-line-params"),s=this;e.onclick=function(t){t.stopPropagation(),t.preventDefault(),s.chartData.chart.removeDrawingObjectsOtherCharts(s.chartData.editDrawingObject),s.chartData.chart.redrawDrawingObjectsOtherCharts(),s.chartData.editDrawingObject.remove(),s.chartData.chart.redrawDrawingObjects(),s.chartData.chart.redrawInfo(),s.chartData.techChart.autoSaveParams(),a.classList.toggle("tch-hidden",!0)},i.onclick=function(a){a.stopPropagation(),a.preventDefault(),s.createLineSettingsPanel(t)}},Line.prototype.addPanelLineSettingEvent=function(t){var a=t.querySelector(".tch-line-settings-panel-cancel"),e=t.querySelector(".tch-line-settings-panel-submit"),i=t.querySelector(".tch-line-settings-form"),s=t.querySelector(".tch-line-settings-panel-default"),r=this;a.onclick=function(a){r.cancelPanelSettingLine(a,t),r.state="normal",r.chartData.techChart.autoSaveParams()},e.onclick=function(t){r.submitLineSettings(t,i),r.state="normal",r.chartData.techChart.autoSaveParams()},s.onclick=function(a){r.setDefaultLineSettings(a,t),a.preventDefault(),a.stopPropagation(),r.state="normal",r.chartData.techChart.autoSaveParams()},r=this,t.oncloseall=function(){r.isSettingsPanelOpen=!1}},Line.prototype.setDefaultLineSettings=function(t){t.preventDefault(),t.stopPropagation()},Line.prototype.submitLineSettings=function(t,a){a.classList.toggle("tch-hidden",!0),t.preventDefault(),t.stopPropagation()},Line.prototype.cancelPanelSettingLine=function(t,a){var e=a.querySelector(".tch-line-settings-style"),i=a.querySelector(".tch-line-settings-coordinates"),s=a.querySelector(".tch-line-settings-visibility");e.classList.toggle("tch-hidden",!1),i.classList.toggle("tch-hidden",!0),s.classList.toggle("tch-hidden",!0),this.restoreOldSettingsLine(a.querySelector(".tch-line-settings-form")),this.updatePixels(),this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.chartData.chart.canvasDrawingContext),this.chartData.chart.updateDrawingObjectsOtherChart(this),this.chartData.chart.drawActiveDrawingObjectsOtherCharts(this.id),this.chartData.editDrawingObject=null,this.chartData.chart.redrawInfo(),a.classList.toggle("tch-hidden",!0),t.preventDefault(),t.stopPropagation()},Line.prototype.restoreOldSettingsLine=function(t){for(var a,e=t.querySelectorAll("input"),i=0;i<e.length;i++)void 0!==e[i].oldValue&&(a=e[i].oldValue,this[e[i].name]=a,delete e[i].oldValue,this.applyValue(a,e[i].name));for(var s=t.querySelectorAll("select"),r=0;r<s.length;r++)void 0!==s[r].oldValue&&(a=s[r].oldValue,this[s[r].name]=a,delete s[r].oldValue);var n=t.querySelectorAll(".tch-color-picker");for(i=0;i<n.length;i++){var o=n[i].getAttribute("name");o&&(a=n[i].style.backgroundColor,n[i].oldValue!==a&&(n[i].style.backgroundColor=n[i].oldValue,this[o]=n[i].oldValue,this.applyValue(n[i].oldValue,o),delete n[i].oldValue))}},Line.prototype.createLineSettingsPanel=function(t){this.createSettingsPanel(t),this.fillSettingsPanelFull(t);var a=t.querySelector(".tch-line-settings-style"),e=t.querySelector(".tch-line-settings-coordinates"),i=t.querySelector(".tch-line-settings-visibility"),s=t.querySelector(".tch-line-settings-panel-header li:first-child "),r=t.querySelector(".tch-line-settings-panel-header li:nth-child(2) "),n=t.querySelector(".tch-line-settings-panel-header li:last-child ");s.onclick=function(){a.classList.toggle("tch-hidden",!1),e.classList.toggle("tch-hidden",!0),i.classList.toggle("tch-hidden",!0),s.classList.toggle("tch-tab-selected",!0),r.classList.toggle("tch-tab-selected",!1),n.classList.toggle("tch-tab-selected",!1)},r.onclick=function(){a.classList.toggle("tch-hidden",!0),e.classList.toggle("tch-hidden",!1),i.classList.toggle("tch-hidden",!0),s.classList.toggle("tch-tab-selected",!1),r.classList.toggle("tch-tab-selected",!0),n.classList.toggle("tch-tab-selected",!1)},n.onclick=function(){a.classList.toggle("tch-hidden",!0),e.classList.toggle("tch-hidden",!0),i.classList.toggle("tch-hidden",!1),s.classList.toggle("tch-tab-selected",!1),r.classList.toggle("tch-tab-selected",!1),n.classList.toggle("tch-tab-selected",!0)},this.fillLineStyle(t),this.fillLineCoordinates(t),this.fillLineVisibility(t),this.addPanelLineSettingEvent(t)},Line.prototype.fillLineCoordinates=function(t){var a=t.querySelector(".tch-line-settings-coordinates");a.innerHTML="";var e=this.getCoordinatesRows();this.fillDivWithRows(a,e)},Line.prototype.fillLineVisibility=function(t){var a=t.querySelector(".tch-line-settings-visibility");a.innerHTML="";var e=this.getVisibilityRows();this.fillDivWithRows(a,e)},Line.prototype.getCoordinatesRows=function(){return[]},Line.prototype.getVisibilityRows=function(){for(var t=[{name:"1 Minute",value:"1"},{name:"5 Minutes",value:"5"},{name:"15 Minutes",value:"15"},{name:"30 Minutes",value:"30"},{name:"1 Hour",value:"60"},{name:"4 Hours",value:"Hour4"},{name:"8 Hours",value:"Hour8"},{name:"1 Day",value:"Day"},{name:"1 Week",value:"Week"},{name:"1 Month",value:"Month"}],a=[],e=0;e<t.length;e++)a.push([{text:t[e].name,options:{line:this,id:"tch-settingsStyle-input-visibility-"+t[e].name,name:"visibility",type:"checkbox",checked:-1===this.periods.indexOf(t[e].value),onchange:this.changeCheckboxInput}}]);return a},Line.prototype.getStyleRows=function(){return[[{className:"tch-ss-basic"},{text:this.chartData.techChart.translation.line,options:{line:this,id:"tch-settingsStyle-input-color",forId:"tch-settingsStyle-input-color",name:"color",type:"colorpicker",value:this.color,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-width",name:"width",type:"range",min:1,max:7,step:2,value:this.width,onchange:this.changeValueInput}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-lineType",name:"lineType",type:"select",value:this.lineType,options:[{value:"normal",text:this.chartData.techChart.translation.normal},{value:"dash",text:this.chartData.techChart.translation.dash},{value:"points",text:this.chartData.techChart.translation.point}],onchange:this.changeValueSelect}}]]},Line.prototype.getTextStyleRow=function(){return[{className:"tch-ss-textStyleRow"},{text:this.chartData.techChart.translation["text-color"],options:{line:this,id:"tch-settingsStyle-input-textColor",name:"textColor",type:"colorpicker",value:this.textColor,onchange:this.changeValueInput}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-textFamily",name:"textFamily",type:"select",value:this.textFamily,options:[{value:"veranda",text:"Veranda"},{value:"areal",text:"Areal"},{value:"timesNewRoman",text:"Times New Roman"}],onchange:this.changeValueSelect}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-textSize",name:"textSize",type:"select",value:this.textSize,options:[{value:"10",text:"10"},{value:"12",text:"12"},{value:"14",text:"14"}],onchange:this.changeValueSelect}},{text:"Bold",options:{line:this,id:"tch-settingsStyle-input-textBold",name:"textBold",type:"checkbox",checked:this.textBold,onchange:this.changeCheckboxInput}},{text:"Italic",options:{line:this,id:"tch-settingsStyle-input-textItalic",name:"textItalic",type:"checkbox",checked:this.textItalic,onchange:this.changeCheckboxInput}}]},Line.prototype.getTextAlignRow=function(){return[{className:"tch-ss-textAlignRow"},{text:this.chartData.techChart.translation["text-alignment"],options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-TextAlignHorizontal",name:"textAlignHorizontal",type:"select",value:this.textAlignHorizontal,options:[{value:"left",text:"Left"},{value:"center",text:"Center"},{value:"right",text:"Right"}],onchange:this.changeValueSelect}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-textAlignVertical",name:"textAlignVertical",type:"select",value:this.textAlignVertical,options:[{value:"top",text:"Top"},{value:"middle",text:"Middle"},{value:"bottom",text:"Bottom"}],onchange:this.changeValueSelect}}]},Line.prototype.getLeftEndRow=function(){return[{className:"tch-ss-leftEndRow"},{text:this.chartData.techChart.translation["left-end"],options:{line:this,id:"tch-settingsStyle-input-leftEnd",inputRowClassName:"tch-checkbox-input-row",labelRowClassName:"tch-checkbox-label-row",afterLabelRowClassName:"tch-checkbox-after-label-row",name:"leftEnd",type:"checkbox",checked:this.leftEnd,onchange:this.changeCheckboxInput}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-leftEndType",name:"leftEndType",type:"select",value:this.leftEndType,options:[{value:"normal",text:this.chartData.techChart.translation.normal},{value:"arrow",text:this.chartData.techChart.translation.arrow}],onchange:this.changeValueSelect}}]},Line.prototype.getRightEndRow=function(){return[{className:"tch-ss-rightEndRow"},{text:this.chartData.techChart.translation["right-end"],options:{line:this,id:"tch-settingsStyle-input-rightEnd",inputRowClassName:"tch-checkbox-input-row",labelRowClassName:"tch-checkbox-label-row",afterLabelRowClassName:"tch-checkbox-after-label-row",name:"rightEnd",type:"checkbox",checked:this.rightEnd,onchange:this.changeCheckboxInput}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-rightEndType",name:"rightEndType",type:"select",value:this.rightEndType,options:[{value:"normal",text:this.chartData.techChart.translation.normal},{value:"arrow",text:this.chartData.techChart.translation.arrow}],onchange:this.changeValueSelect}}]},Line.prototype.getBackgroundRow=function(){return[{className:"tch-ss-backgroundRow"},{text:this.chartData.techChart.translation.background,options:{line:this,id:"tch-settingsStyle-input-fillColor",forId:"tch-settingsStyle-input-fill",labelClassName:"label-fill",name:"fillColor",type:"colorpicker",value:this.fillColor,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-fill",afterLabelClassName:"after-label-fill",name:"fill",type:"checkbox",checked:this.fill,onchange:this.changeCheckboxInput}}]},Line.prototype.getShowDateRow=function(){return[{className:"tch-ss-showDateRow"},{text:this.chartData.techChart.translation["show-time"],options:{line:this,id:"tch-settingsStyle-input-showTime",name:"showTime",type:"checkbox",checked:this.showTime,onchange:this.changeCheckboxInput}}]},Line.prototype.getShowTextRow=function(){return[{className:"tch-ss-showTextRow"},{text:this.chartData.techChart.translation["show-text"],options:{line:this,id:"tch-settingsStyle-input-showText",name:"showText",type:"checkbox",checked:this.showText,onchange:this.changeCheckboxInput}}]},Line.prototype.getMiddleSettingsRow=function(){return[{className:"tch-ss-middleSettingsRow"},{text:this.chartData.techChart.translation.middle,options:{line:this,id:"tch-settingsStyle-input-middleColor",forId:"tch-settingsStyle-input-drawMiddle",labelClassName:"label-draw-middle",name:"middleColor",type:"colorpicker",value:this.middleColor,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-drawMiddle",afterLabelClassName:"after-label-draw-middle",name:"drawMiddle",type:"checkbox",checked:this.drawMiddle,onchange:this.changeCheckboxInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-middleWidth",name:"middleWidth",type:"range",min:1,max:7,step:2,value:this.middleWidth,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-middleType",name:"middleType",className:"input-styled",type:"select",value:this.middleType,options:[{value:"normal",text:this.chartData.techChart.translation.normal},{value:"dash",text:this.chartData.techChart.translation.dash},{value:"points",text:this.chartData.techChart.translation.point}],onchange:this.changeValueSelect}}]},Line.prototype.getTextAreaRow=function(){return[{className:"tch-ss-textAreaRow"},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-textArea",name:"textArea",type:"textarea",value:this.textArea,onchange:this.changeValueInput}}]},Line.prototype.getShowAngleRow=function(){return[{className:"tch-ss-showAngleRow"},{text:this.chartData.techChart.translation["show-angle"],options:{line:this,id:"tch-settingsStyle-input-showAngle",name:"showAngle",type:"checkbox",checked:this.showAngle,onchange:this.changeCheckboxInput}}]},Line.prototype.getStatsTextColorRow=function(){return[{className:"tch-ss-statsTextColorRow"},{text:this.chartData.techChart.translation["text-color"],options:{line:this,id:"tch-settingsStyle-input-statsTextColor",name:"statsTextColor",type:"colorpicker",value:this.statsTextColor,onchange:this.changeValueInput}}]},Line.prototype.getShowDateTimeRangeRow=function(){return[{className:"tch-ss-showDateTimeRang"},{text:this.chartData.techChart.translation["show-date-time-range"],options:{line:this,id:"tch-settingsStyle-input-showDateRange",name:"showDateRange",type:"checkbox",checked:this.showDateRange,onchange:this.changeCheckboxInput}}]},Line.prototype.getShowBarsRangeRow=function(){return[{className:"tch-ss-showBarsRangeRow"},{text:this.chartData.techChart.translation["show-bars-range"],options:{line:this,id:"tch-settingsStyle-input-showBarsRange",name:"showBarsRange",type:"checkbox",checked:this.showBarsRange,onchange:this.changeCheckboxInput}}]},Line.prototype.getShowPriceRangeRow=function(){return[{className:"tch-ss-showPriceRangeRow"},{text:this.chartData.techChart.translation["show-price-range"],options:{line:this,id:"tch-settingsStyle-input-showPriceRange",name:"showPriceRange",type:"checkbox",checked:this.showPriceRange,onchange:this.changeCheckboxInput}}]},Line.prototype.getShowPriceRow=function(){return[{className:"tch-ss-showPriceRow"},{text:this.chartData.techChart.translation["show-price"],options:{line:this,id:"tch-settingsStyle-input-showPrice",name:"showPrice",type:"checkbox",checked:this.showPrice,onchange:this.changeCheckboxInput}}]},Line.prototype.getShowDistance=function(){return[{className:"tch-ss-showDistance"},{text:this.chartData.techChart.translation["show-distance"],options:{line:this,id:"tch-settingsStyle-input-showDistance",name:"showDistance",type:"checkbox",checked:this.showDistance,onchange:this.changeCheckboxInput}}]},Line.prototype.getAlwaysShowStatsRow=function(){return[{className:"tch-ss-alwaysShowStatsRow"},{text:this.chartData.techChart.translation["always-show-stats"],options:{line:this,id:"tch-settingsStyle-input-alwaysShowStats",name:"alwaysShowStats",type:"checkbox",checked:this.alwaysShowStats,onchange:this.changeCheckboxInput}}]},Line.prototype.setVisibility=function(t,a){if("restoreOldSettingsLine"===a)this.periods=t;else{var e=this.chartData.chart.parent.querySelectorAll(".tch-line-settings-container input[name='visibility']");this.periods=[];for(var i=0;i<e.length;i++)if(!e[i].checked){var s=e[i].id.split("-");this.periods.push(ChartData.convertValueToPeriod(s[s.length-1]))}}this.chartData.chart.redrawInfo()},Line.prototype.getVisibility=function(){return this.periods.splice()},Line.prototype.fillLineStyle=function(t){var a=t.querySelector(".tch-line-settings-style");a.innerHTML="";var e=this.getStyleRows();this.fillDivWithRows(a,e)},Line.prototype.getTimeCandleForLine=function(t,a){return a[t].date},Line.prototype.createCheckboxforVisible=function(t,a){for(var e=[{name:"Minute",value:"1"},{name:"Minute5",value:"5"},{name:"Minute15",value:"15"},{name:"Minute30",value:"30"},{name:"Hours",value:"60"},{name:"Hours4",value:"Hour4"},{name:"Hour8",value:"Hour8"},{name:"Day",value:"Day"},{name:"Week",value:"Week"},{name:"Month",value:"Month"}],i=document.createElement("td"),s=0;s<e.length;s++){var r=document.createElement("label");r.innerText=e[s].name;var n=document.createElement("input");n.type="checkbox",n.name="periods",n.value=e[s].value,-1!==a.indexOf(e[s].value)?n.checked=!1:n.checked=!0,r.appendChild(n),i.appendChild(r)}return i},Line.prototype.draw=function(t,a,e,i,s){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;if(n.a.drawLine(null,t,a,i,e,s,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,1),"edit"===this.state||"active"===this.state){n.a.drawLine(null,t,a,i,e,s,this.color,[],parseFloat(this.width)+10,.1);for(var r=0;r<this.circles.length;r++){var o=this.circles[r].points[0].active?"red":"white";this.circles[r].drawWithShadow(t,o,this.color,.1)}}return!0},Line.prototype.getLineTypeArray=function(t,a){switch(t){case"normal":return[];case"dash":return[3*a,2*a];case"points":return[a,a];default:return[]}},Line.prototype.drawArrow=function(t,a,e,i,s,n){var o;"up"===n?(o=r.a.degToRad(135-e-s),this.drawWing(t,a,o,i,i),o=r.a.degToRad(225-e+s),this.drawWing(t,a,o,i,-i)):"down"===n&&(o=r.a.degToRad(-45-e-s),this.drawWing(t,a,o,i,i),o=r.a.degToRad(45-e+s),this.drawWing(t,a,o,i,-i))},Line.prototype.drawWing=function(t,a,e,i,s){var r=parseFloat(a.x),o=parseFloat(a.y),h=-1*Math.sin(e)*s+Math.cos(e)*i+r,c=Math.cos(e)*s+Math.sin(e)*i+o;n.a.drawLine(null,t,r,o,h,c,this.color,[],this.width,1)},Line.prototype.isFocused=function(t,a){return r.a.isPointOnLine({x1:this.points[0].x,x2:this.points[1].x,y1:this.points[0].y,y2:this.points[1].y},{x:t,y:a})},Line.prototype.fillSettingsPanelFull=function(t){t.innerHTML=this.htmlFullSettingsPanel(),t.setAttribute("tch-line-type",this.constructor.name)},Line.convertFromDTO=function(t,a){var e=i.a.convertFromDTO(t,a);e.circles=e.restoreCircles(a);for(var s=0;s<e.circles.length;s++)e.circles[s].points[0]=e.points[s],e.circles[s].data[0]=e.data[s];return e.updateCustomPropsByObj(e,a),e},Line.prototype.updateCustomPropsByObj=function(t,a){t.color=a.color,t.width=a.width,t.periods=a.periods.slice(0),t.lineType=a.lineType},Line.prototype.cloneCircles=function(t){for(var a=[],e=0;e<t.length;e++)a.push(t[e].convertToDTO());return a},Line.prototype.restoreCircles=function(t){for(var a=[],e=0;e<t.circles.length;e++)a.push(r.a.convertFromDTO(this.chartData,t.circles[e]));return a},Line.prototype.htmlFullSettingsPanel=function(){return"<div class='tch-line-settings-form'><ul class='tch-line-settings-panel-header tch-dropdown-header'><li class='tch-tab-selected' tch-text='style'>"+this.chartData.techChart.translation.style+"</li><li tch-text='coordinates'>"+this.chartData.techChart.translation.coordinates+"</li><li tch-text='visibility'>"+this.chartData.techChart.translation.visibility+"</li></ul><div class='tch-line-settings-panel-main'><div class='tch-line-settings-style'></div><div class='tch-line-settings-coordinates tch-hidden'><table><tbody></tbody></table></div><div class='tch-line-settings-visibility tch-hidden'><span></span><table><tbody></tbody></table></div></div><ul class='tch-dropdown-footer tch-clearfix'><li><input class='tch-line-settings-panel-default tch-btn tch-btn-default' type='button' tch-text='default' value='"+this.chartData.techChart.translation.default+"'/></li><li><input class=' tch-line-settings-panel-submit tch-btn tch-btn-submit' type='submit' tch-text='ok' value='"+this.chartData.techChart.translation.ok+"'><input class='tch-line-settings-panel-cancel tch-btn tch-btn-cancel' type='button' tch-text='cancel' value='"+this.chartData.techChart.translation.cancel+"'/></li></ul></div>"},Line.prototype.htmlSettingsPanel=function(){return"<div class='tch-line-settings-panel'><ul class='tch-line-panel-header'><li class='tch-line-delete' tch-text='delete'>"+this.chartData.techChart.translation.delete+"</li><li class='tch-line-params' tch-text='params'>"+this.chartData.techChart.translation.params+"</li></ul></div>"},Line.prototype.createSettingsPanel=function(t){t.classList.toggle("tch-hidden",!1),this.chartData.techChart.moveElements.DragObjects.push(new s.a(t)),t.onclick=function(t){t.stopPropagation()}},Line.prototype.fillDivWithRows=function(t,a){for(var e=0;e<a.length;e++)t.appendChild(this.createDivRow(a[e]))},Line.prototype.createDivRow=function(t){for(var a=document.createElement("div"),e=0;e<t.length;e++)t[e].className?a.className=t[e].className:"select"===t[e].options.type?a.appendChild(this.createSelectWithLabel(t[e].text,t[e].options)):"textarea"===t[e].options.type?a.appendChild(this.createTextAreaWithLabel(t[e].text,t[e].options)):"colorpicker"===t[e].options.type?a.appendChild(this.createColorPickerWithLabel(t[e].text,t[e].options)):"button"===t[e].options.type?a.appendChild(this.createButtonWithLabel(t[e].text,t[e].options)):a.appendChild(this.createInputWithLabel(t[e].text,t[e].options));return a},Line.prototype.changeValueInput=function(t,a){if(t.target.line){void 0===t.target.oldValue&&(t.target.oldValue=t.target.line[t.target.name]),a&&void 0===a.oldValue&&(a.oldValue=t.target.line[t.target.name]);var e=t.target.value;t.target.line.applyValue(e,t.target.name)}},Line.prototype.clickButton=function(t){var a=t.target.getAttribute("buttonvalue");void 0===t.target.oldValue&&(t.target.oldValue=t.target.line[t.target.name]),"on"===a?(t.target.setAttribute("buttonvalue","off"),a="off"):(t.target.setAttribute("buttonvalue","on"),a="on"),t.target.line.applyValue(a,t.target.name,t)},Line.prototype.applyValue=function(t,a){this[a]=t,this.isObjectEdit=!0,this.chartData.chart.redrawInfo(),this.isObjectEdit=!1,this.chartData.chart.updateDrawingObjectsOtherChart(this),this.chartData.chart.drawActiveDrawingObjectsOtherCharts(this.id)},Line.prototype.changeCheckboxInput=function(t){void 0===t.target.oldValue&&(t.target.oldValue=t.target.line[t.target.name]);var a=t.target.checked;t.target.line.applyValue(a,t.target.name)},Line.prototype.changeValueSelect=function(t){void 0===t.target.oldValue&&(t.target.oldValue=t.target.line[t.target.name]);var a=t.target.selectedOptions[0].value;t.target.line.applyValue(a,t.target.name)},Line.prototype.createColorPickerWithLabel=function(t,a){var e=document.createElement("div");if(t){var i=document.createElement("label");i.textContent=t,i.htmlFor=a.id,e.appendChild(i),i.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()}}var s=document.createElement("div");for(var r in a)a.hasOwnProperty(r)&&(s[r]=a[r]);var n=o.a.createSingle(s,this.chartData.techChart),h=s.querySelector(".tch-color-picker");if(a.onchange){h.setAttribute("name",a.name),h.oldValue=this[a.name];var c={target:{name:a.name,line:this,oldValue:this[a.name]}};n.onchange=function(t){c.target.value=t,a.onchange(c,s)}}return n.setColor(this[a.name]),e.appendChild(s),e},Line.prototype.createTextAreaWithLabel=function(t,a){var e=document.createElement("div");if(t){var i=document.createElement("label");i.textContent=t,i.htmlFor=a.id,e.appendChild(i),i.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()}}var s=document.createElement("textarea");for(var r in a)a.hasOwnProperty(r)&&"type"!==r&&(s[r]=a[r]);return s.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()},e.appendChild(s),e},Line.prototype.createInputWithLabel=function(t,a){var e=document.createElement("div"),i=this.chartData.techChart.makeTchTextValue(t);if(t){var s=document.createElement("label");s.textContent=t,s.htmlFor=a.id,s.setAttribute("tch-text",i),e.appendChild(s),s.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()}}var r=document.createElement("input");for(var n in a)a.hasOwnProperty(n)&&(r[n]=a[n]);return r.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()},e.appendChild(r),e},Line.prototype.createLinkCheckbox=function(t,a){var e,i=document.createElement("div"),s=this.chartData.techChart.makeTchTextValue(t),r=document.createElement("input");for(var n in a)a.hasOwnProperty(n)&&("tch-checkbox-input-row"===a[n]&&(r.className=a.inputRowClassName),r[n]=a[n]);return r.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()},i.appendChild(r),t&&((e=document.createElement("label")).textContent="",e.htmlFor=a.id,a.afterLabelRowClassName&&(e.className=a.afterLabelRowClassName),e.setAttribute("tch-label","marketsNoConn"),i.appendChild(e),e.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()}),t&&((e=document.createElement("label")).textContent=t,e.htmlFor=a.id,a.labelRowClassName&&(e.className=a.labelRowClassName),e.setAttribute("tch-text",s),i.appendChild(e),e.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()}),i},Line.prototype.createInputAndLabel=function(t,a){var e=document.createElement("div"),i=this.chartData.techChart.makeTchTextValue(t);t&&((s=document.createElement("label")).textContent=t,s.htmlFor=a.id,a.labelClassName&&(s.className=a.labelClassName),s.setAttribute("tch-text",i),e.appendChild(s),s.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()});var s,r=document.createElement("input");for(var n in a)a.hasOwnProperty(n)&&(r[n]=a[n]);return r.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()},e.appendChild(r),t&&((s=document.createElement("label")).textContent="",s.htmlFor=a.id,a.afterLabelClassName&&(s.className=a.afterLabelClassName),s.setAttribute("tch-label","marketsNoConn"),e.appendChild(s),s.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()},a.afterLabelClassName&&(s.onmouseover=function(){e.parentNode.querySelector("."+a.afterLabelClassName.substring(6)).classList.toggle(a.afterLabelClassName.substring(6)+"--text-color",!0)},s.onmouseout=function(){e.parentNode.querySelector("."+a.afterLabelClassName.substring(6)).classList.toggle(a.afterLabelClassName.substring(6)+"--text-color",!1)})),e},Line.prototype.createButtonWithLabel=function(t,a){var e=document.createElement("div"),i=this.chartData.techChart.makeTchTextValue(t);if(t){var s=document.createElement("label");s.textContent=t,s.htmlFor=a.id,s.setAttribute("tch-text",i),e.appendChild(s),s.onmousedown=function(t){t.stopPropagation()}}var r=document.createElement("input");for(var n in a)a.hasOwnProperty(n)&&(r[n]=a[n]);return r.setAttribute("buttonValue",a.buttonValue),r.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()},e.appendChild(r),e},Line.prototype.createSelectWithLabel=function(t,a){var e=document.createElement("div"),i=this.chartData.techChart.makeTchTextValue(t);if(t){var s=document.createElement("label");s.textContent=t,s.htmlFor=a.id,s.setAttribute("tch-text",i),e.appendChild(s),s.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()}}for(var r=document.createElement("select"),n=0;n<a.options.length;n++){var h=document.createElement("option");i=this.chartData.techChart.makeTchTextValue(a.options[n].text),h.value=a.options[n].value,h.text=a.options[n].text,h.setAttribute("tch-text",i),h.value===a.value&&(h.selected=!0),r.appendChild(h)}for(var c in a)a.hasOwnProperty(c)&&"options"!==c&&"type"!==c&&(r[c]=a[c]);return r.onmousedown=function(t){t.stopPropagation(),o.a.pickerListener()},e.appendChild(r),e},Line.prototype.addSettingsLineEvent=function(t){var a=t.querySelector(".tch-line-settings-panel"),e=a.querySelector(".tch-line-delete"),i=a.querySelector(".tch-line-params"),s=this;e.onclick=function(t){t.stopPropagation(),t.preventDefault(),s.chartData.chart.removeDrawingObjectsOtherCharts(s.chartData.editDrawingObject),s.chartData.chart.redrawDrawingObjectsOtherCharts(),s.chartData.editDrawingObject.remove(),s.chartData.chart.redrawDrawingObjects(),s.chartData.chart.redrawInfo(),s.chartData.techChart.autoSaveParams(),a.classList.toggle("tch-hidden",!0)},i.onclick=function(a){a.stopPropagation(),a.preventDefault(),s.createLineSettingsPanel(t)}}},"./src/scripts/Drawing/Rectangle.js":function(t,a,e){"use strict";function Rectangle(){n.a.apply(this,arguments),this.circles=[],this.circles.push(new o.a(this.chartData,{data:[this.data[0]],points:[this.points[0]]})),this.circles.push(new o.a(this.chartData,{data:[this.data[1]],points:[this.points[1]]})),this.color="#008000",this.rightEnd=!1,this.leftEnd=!1,this.heightData={v:0,y:0},this.fill=!0,this.fillColor="#0000ff",this.opacity=.1,this.trendLineIsFocused=this.isFocused,this.isFocused=function(t,a){if(this.trendLineIsFocused(t,a))return!0;this.isObjectEdit=!1;var e=this.getPosition(),i=r.a.isPointOnLine({x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2},{x:t,y:a}),s=r.a.isPointOnLine({x1:e.x2,x2:e.x3,y1:e.y2,y2:e.y3},{x:t,y:a}),n=r.a.isPointOnLine({x1:e.x3,x2:e.x0,y1:e.y3,y2:e.y0},{x:t,y:a});if(i||s||n){for(var o=0;o<this.points.length;o++)this.points[o].active=!0,this.circles&&this.circles[o]&&(this.circles[o].points[0].active=!0);return this.isObjectEdit=!0,!0}return!1},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;2===this.circles.length&&this.addPoints();var a=this.getPosition();if(this.fill){var e=[];e.push([a.x0,a.y0]),e.push([a.x1,a.y1]),e.push([a.x2,a.y2]),e.push([a.x3,a.y3]),i.a.drawPolygon(null,t,e,this.fillColor,!1,!0,0,4,this.opacity)}return t.lineCap="round",s.a.prototype.draw.apply(this,[t,a.x0,a.x1,a.y0,a.y1]),s.a.prototype.draw.apply(this,[t,a.x1,a.x2,a.y1,a.y2]),s.a.prototype.draw.apply(this,[t,a.x2,a.x3,a.y2,a.y3]),s.a.prototype.draw.apply(this,[t,a.x3,a.x0,a.y3,a.y0]),t.lineCap="butt",!0},this.moveTo=function(t,a,e){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].x=e.x,this.points[i].y=e.y,this.data[i].d=e.dateSeconds,this.data[i].v=e.value,this.circles[i].points=[this.points[i]],this.circles[i].data=[this.data[i]],0!==i&&2!==i||!this.points[2]?this.points[2]&&(this.recountPoint(2,3,1),this.recountPoint(0,1,3)):(this.recountPoint(1,0,2),this.recountPoint(3,2,0)))},this.recountPoint=function(t,a,e){this.points[t].x=this.points[a].x,this.points[t].y=this.points[e].y,this.data[t].d=this.data[a].d,this.data[t].v=this.data[e].v,this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]},this.updateLastPoint=function(){},this.addPoints=function(){var t,a,e,i,s,r;t=this.points[0],e=this.points[1],a={x:t.x,y:e.y},i={x:e.x,y:t.y},s={d:this.chartData.chart.toXValue(a.x),v:this.chartData.chart.toYValue(a.y)},r={d:this.chartData.chart.toXValue(i.x),v:this.chartData.chart.toYValue(i.y)},this.data[2]=this.data[1],this.points[2]=this.points[1],this.data[1]=s,this.points[1]=a,this.data.push(r),this.points.push(i),this.circles.push(new o.a(this.chartData,{data:[this.data[2]],points:[this.points[2]]})),this.circles.push(new o.a(this.chartData,{data:[this.data[3]],points:[this.points[3]]}))},this.getStyleRows=function(){var t=s.a.prototype.getStyleRows.apply(this,arguments),a=[this.getBackgroundRow()];return t.concat(a)},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,a){this.trendLineUpdateCustomPropsByObj(t,a),t.fill=a.fill,t.fillColor=a.fillColor},this.getPosition=function(){return{x0:i.a.getPosition(this.points[0].x,this.width),x1:i.a.getPosition(this.points[1].x,this.width),x2:i.a.getPosition(this.points[2].x,this.width),x3:i.a.getPosition(this.points[3].x,this.width),y0:i.a.getPosition(this.points[0].y,this.width),y1:i.a.getPosition(this.points[1].y,this.width),y2:i.a.getPosition(this.points[2].y,this.width),y3:i.a.getPosition(this.points[3].y,this.width)}}}e.d(a,"a",function(){return Rectangle});var i=e("./src/scripts/Libs/LibCanvas.js"),s=e("./src/scripts/Drawing/Line.js"),r=e("./src/scripts/Drawing/LibDrawing.js"),n=e("./src/scripts/Drawing/TrendLine.js"),o=e("./src/scripts/Drawing/Circle.js");Rectangle.prototype=Object.create(n.a.prototype),Rectangle.prototype.constructor=Rectangle},"./src/scripts/Drawing/Roulete.js":function(t,a,e){"use strict";function Roulete(t,a){i.a.apply(this,arguments),this.angleSpan=null,this.datadiv=null,this.datafordiv=null,this.drawingStage={current:0,max:2};var e=t.techChart.translation["bars-roulete"],o=t.techChart.translation["day-roulete"],h=t.techChart.translation["hour-roulete"],c=t.techChart.translation["minute-roulete"];this.draw=function(t){this.datadiv&&this.datadiv.remove();var a=this.getPosition();if(this.fill){var e=[];e.push([a.x0,a.y0]),e.push([a.x1,a.y1]),e.push([a.x2,a.y2]),e.push([a.x3,a.y3]),n.a.drawPolygon(null,t,e,this.fillColor,!1,!0,0,4,this.opacity)}var i,s,r=(this.points[1].x-this.points[0].x)/2+parseFloat(this.points[0].x),o=(this.points[1].y-this.points[0].y)/2+parseFloat(this.points[0].y),h=n.a.getPosition(r,this.width),c=n.a.getPosition(o,this.width),l=n.a.getPosition(a.x0,this.width),d=n.a.getPosition(a.x2,this.width),p=n.a.getPosition(a.y0,this.width),u=n.a.getPosition(a.y1,this.width);return n.a.drawLine(null,t,h,p,h,u,"#000000",[7,8],1,1),n.a.drawLine(null,t,l,c,d,c,"#000000",[7,8],1,1),i=parseFloat(this.points[1].x)<parseFloat(this.points[0].x)?"down":"up",parseFloat(this.points[1].y)<parseFloat(this.points[0].y)?(s="up",parseFloat(this.points[1].y-50)):(s="down",parseFloat(this.points[1].y)),this.drawArrow(t,{x:a.x2,y:o},0,7,30,i),this.drawArrow(t,{x:r,y:this.points[1].y},90,7,30,s),this.datafordiv=this.dataCalculate(),this.createDiv(),parseFloat(this.points[1].y)<parseFloat(this.points[0].y)?this.datadiv.style.top=this.points[1].y-50+"px":this.datadiv.style.top=this.points[1].y+"px",this.datadiv.style.left=r-this.datadiv.getBoundingClientRect().width/2+"px",!0},this.dataCalculate=function(){this.result=[];var t=this.chartData.chart.toYValue(this.points[0].y),e=this.chartData.chart.toYValue(this.points[1].y),i=this.chartData.chart.toXValue(this.points[1].x),s=r.a.binaryIndexOfCandleByTime(a.data[0].d,this.chartData.data[this.chartData.typeData]),n=r.a.binaryIndexOfCandleByTime(i,this.chartData.data[this.chartData.typeData]);"undefined"!==n&&null!==n||(n=0),"undefined"!==s&&null!==s||(s=this.chartData.data[this.chartData.typeData].length-1-n),this.result[0]=e-t;var l=this.CountOfFixed(this.result[0]);this.result[0]=this.result[0].toFixed(l);var d=this.chartData.data[this.chartData.typeData][n].date-this.chartData.data[this.chartData.typeData][s].date;this.result[3]=function convertTimestamp(t){var a="";if(t>=86e3){var e=t/86e3;t%=86e3,a+=e.toFixed(0)+o}if(t>=3600){var i=t/3600;t%=3600,a+=i.toFixed(0)+h}return t>60&&(a+=(t/60).toFixed(0)+c),a}(Math.abs(d)),d<0&&(this.result[3]="-"+this.result[3]);var p=this.result[0]/t*100;return l=this.CountOfFixed(p),this.result[1]="("+p.toFixed(l)+"%), ",this.result[2]=e-t,l=this.CountOfFixed(this.result[2]),this.result[2]=this.result[2].toFixed(l),this.result[4]=s-n,this.result},this.createDiv=function(){this.datadiv=document.createElement("div"),this.datadiv.classList.toggle("tch-roulete-data-container",!0),this.datadivFirstLine=document.createElement("div"),this.datadivFirstLine.classList.toggle("tch-roulete-inside-data-container",!0),this.datadivSecondLine=document.createElement("div"),this.datadivSecondLine.classList.toggle("tch-roulete-inside-data-container",!0),this.datadiv.appendChild(this.datadivFirstLine),this.datadiv.appendChild(this.datadivSecondLine),this.fromX0BartoX1Bar=document.createElement("span"),this.fromX0BartoX1Bar.classList.toggle("tch-chart-data-text",!0),this.fromX0BartoX1Bar.innerText=this.datafordiv[0].toString(),this.fromY0toY1change=document.createElement("span"),this.fromY0toY1change.classList.toggle("tch-chart-data-text",!0),this.fromY0toY1change.innerText=(this.datafordiv[2]*Math.pow(10,parseFloat(this.chartData.precission))).toFixed(0),this.percenChange=document.createElement("span"),this.percenChange.classList.toggle("tch-chart-data-text",!0),this.percenChange.innerText=this.datafordiv[1],this.timeChange=document.createElement("span"),this.timeChange.classList.toggle("tch-chart-data-text",!0),this.timeChange.innerText=this.datafordiv[3],this.barsCount=document.createElement("span"),this.barsCount.classList.toggle("tch-chart-data-text",!0),this.barsCount.innerText=this.datafordiv[4]+e,this.datadivFirstLine.appendChild(this.fromX0BartoX1Bar),this.datadivFirstLine.appendChild(this.percenChange),this.datadivFirstLine.appendChild(this.fromY0toY1change),this.datadivSecondLine.appendChild(this.barsCount),this.datadivSecondLine.appendChild(this.timeChange),this.chartData.chart.drawingText.appendChild(this.datadiv)},this.remove=function(){this.datadiv&&this.datadiv.remove(),Roulete.prototype.remove.apply(this,arguments)},this.CountOfFixed=function(t){for(var a=String(t).split(""),e=0;e<a.length;e++)if("."!==a[e]&&"0"!==a[e]&&"-"!==a[e])return e},this.appendPoint=function(t,a){this.data.push(t),this.points.push(a),this.circles.push(new s.a(this.chartData,{data:[this.data[this.data.length-1]],points:[this.points[this.points.length-1]]}))},this.updateLastPoint=function(t,a){2===this.drawingStage.current&&(this.remove(),this.chartData.techChart.setState("default"),this.chartData.techChart.setRouleteBtn("Off")),1===this.drawingStage.current&&this.chartData.techChart.setRouleteBtn("Off");var e=this.data.length-1;e<2&&(this.data[e]=t,this.points[e]=a)},this.moveTo=function(t,a,e){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].x=e.x,this.points[i].y=e.y,this.data[i].d=e.dateSeconds,this.data[i].v=e.value)},this.getStyleRows=function(){},this.isFocused=function(){},this.applyValue=function(t,a){this[a]=t,this.chartData.chart.redrawInfo(),this.chartData.chart.updateDrawingObjectsOtherChart(this),this.chartData.chart.drawActiveDrawingObjectsOtherCharts(this.id)},this.getPosition=function(){return{x0:this.points[0].x,x1:this.points[0].x,x2:this.points[1].x,x3:this.points[1].x,y0:this.points[0].y,y1:this.points[1].y,y2:this.points[1].y,y3:this.points[0].y}}}e.d(a,"a",function(){return Roulete});var i=e("./src/scripts/Drawing/Rectangle.js"),s=e("./src/scripts/Drawing/Circle.js"),r=e("./src/scripts/preBuild/Chart.js"),n=e("./src/scripts/Libs/LibCanvas.js");Roulete.prototype=Object.create(i.a.prototype),Roulete.prototype.constructor=Roulete},"./src/scripts/Drawing/TrendLine.js":function(t,a,e){"use strict";function TrendLine(){arguments&&arguments.length&&(s.a.apply(this,arguments),this.circles.push(new r.a(this.chartData,{data:[this.data[0]],points:[this.points[0]]})),this.circles.push(new r.a(this.chartData,{data:[this.data[1]],points:[this.points[1]]})),this.drawingStage={current:0,max:1},this.leftEnd=!1,this.rightEnd=!1,this.leftEndType="normal",this.rightEndType="normal",this.wingsLength=20,this.wingsAngle=15,this.rightEndPoint=null,this.leftEndPoint=null,this.statsTextColor="#00ff00",this.showPriceRange=!1,this.showBarsRange=!1,this.showDateRange=!1,this.showDistance=!1,this.showAngle=!1,this.alwaysShowStats=!1),this.isFocused=function(t,a){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isObjectEdit=!1,this.isChanged=!1;for(var e=!1,i=0,s=0;s<this.circles.length;s++){if(i++,o.a.isPointOnCircle(this.circles[s],{x:t,y:a})){this.circles[s].points[0].active=!0,this.points[s].active=!0,this.isChanged=!0,e=!0;break}this.circles[s].points[0].active=!1,this.points[s].active=!1}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;if(e)return!0;var r=this.points[0].x,n=this.points[1].x,h=this.points[0].y,c=this.points[1].y;if(this.leftEnd&&(r=this.leftEndPoint.x,h=this.leftEndPoint.y),this.rightEnd&&(n=this.rightEndPoint.x,c=this.rightEndPoint.y),o.a.isPointOnLine({x1:r,x2:n,y1:h,y2:c},{x:t,y:a})){for(var l=0;l<this.points.length;l++)this.points[l].active=!0,this.circles&&this.circles[l]&&(this.circles[l].points[0].active=!0);this.isObjectEdit=!0,e=!0}return e},this.updateLastPoint=function(t,a){var e=this.data.length-1;this.data[e]=t,this.points[e]=a,this.circles[e].points[0]=this.points[e]},this.appendPoint=function(t,a){this.data.push(t),this.points.push(a),this.circles.push(new r.a(this.chartData,{data:[this.data[this.data.length-1]],points:[this.points[this.points.length-1]]}))},this.updateValues=function(){for(var t=0;t<this.points.length;t++)this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y)},this.shiftTo=function(t,a,e,i,s){if(0!==a||0!==t)for(var r=0;r<this.points.length;r++)this.points[r].active&&(this.points[r].y-=a,this.points[r].x-=t,this.data[r].d-=i,this.data[r].v-=s),this.circles[r].points=[this.points[r]],this.circles[r].data=[this.data[r]]},this.moveTo=function(t,a,e){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].x=e.x,this.points[i].y=e.y,this.data[i].d=e.dateSeconds,this.data[i].v=e.value),i<this.circles.length&&(this.circles[i].points=[this.points[i]],this.circles[i].data=[this.data[i]])},this.updatePixels=function(){for(var t=0;t<this.points.length;t++){if(this.isPressed)return;this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v),this.circles[t].points[0]=this.points[t],this.circles[t].data[0]=this.data[t]}},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var a,e,s=this.points[0].x,r=this.points[1].x,n=this.points[0].y,h=this.points[1].y,c=s,l=r,d=n,p=h,u=null;if(("arrow"===this.leftEndType||"arrow"===this.rightEndType||this.leftEnd||this.rightEnd)&&(u=o.a.findLineAngleDeg({x1:s,y1:n,x2:r,y2:h})),"arrow"===this.leftEndType&&(a=i.a.getPosition(this.points[0].x,this.width),e=i.a.getPosition(this.points[0].y,this.width),this.drawArrow(t,{x:a,y:e},u,this.wingsLength,this.wingsAngle,"down")),"arrow"===this.rightEndType&&(a=i.a.getPosition(this.points[1].x,this.width),e=i.a.getPosition(this.points[1].y,this.width),this.drawArrow(t,{x:a,y:e},u,this.wingsLength,this.wingsAngle,"up")),this.leftEnd&&(this.leftEndPoint=this.getLeftEndPoint({x1:s,y1:n,x2:r,y2:h},this.chartData.chart.w,this.chartData.chart.h,u),c=this.leftEndPoint.x,d=this.leftEndPoint.y),this.rightEnd&&(this.rightEndPoint=this.getRightEndPoint({x1:s,y1:n,x2:r,y2:h},this.chartData.chart.w,this.chartData.chart.h,u),l=this.rightEndPoint.x,p=this.rightEndPoint.y),c=i.a.getPosition(c,this.width),d=i.a.getPosition(d,this.width),l=i.a.getPosition(l,this.width),p=i.a.getPosition(p,this.width),i.a.drawLine(null,t,c,d,l,p,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,1),"edit"!==this.state&&"active"!==this.state||i.a.drawLine(null,t,c,d,l,p,this.color,[],parseFloat(this.width)+10,.1),"edit"===this.state||"active"===this.state){for(var g=0;g<this.circles.length;g++)this.circles[g].points[0].active||this.circles[g].drawWithShadow(t,"white",this.color,.1);for(var D=0;D<this.circles.length;D++)this.circles[D].points[0].active&&this.circles[D].drawWithShadow(t,"red",this.color,.1)}return!0},this.lineGetStyleRows=this.getStyleRows,this.getStyleRows=function(){var t=this.lineGetStyleRows(),a=[this.getLeftEndRow(),this.getRightEndRow(),this.getStatsTextColorRow(),this.getShowPriceRangeRow(),this.getShowBarsRangeRow(),this.getShowDateTimeRangeRow(),this.getShowDistance(),this.getShowAngleRow(),this.getAlwaysShowStatsRow()];return t.concat(a)},this.remove=function(){TrendLine.prototype.remove.apply(this,arguments)},this.lineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.lineConvertToDTO();return this.updateCustomPropsByObj(t,this),t},this.lineApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.lineApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.updateCustomPropsByObj=function(t,a){s.a.prototype.updateCustomPropsByObj.apply(this,arguments),t.leftEnd=a.leftEnd,t.rightEnd=a.rightEnd,t.leftEndType=a.leftEndType,t.rightEndType=a.rightEndType,t.wingsLength=a.wingsLength,t.wingsAngle=a.wingsAngle,t.rightEndPoint=n.a.cloneObject(a.rightEndPoint),t.leftEndPoint=n.a.cloneObject(a.leftEndPoint),t.statsTextColor=a.statsTextColor,t.showPriceRange=a.showPriceRange,t.showBarsRange=a.showBarsRange,t.showDateRange=a.showDateRange,t.showDistance=a.showDistance,t.showAngle=a.showAngle,t.alwaysShowStats=a.alwaysShowStats}}e.d(a,"a",function(){return TrendLine});var i=e("./src/scripts/Libs/LibCanvas.js"),s=e("./src/scripts/Drawing/Line.js"),r=e("./src/scripts/Drawing/Circle.js"),n=e("./src/scripts/Drawing/DrawingObject.js"),o=e("./src/scripts/Drawing/LibDrawing.js");TrendLine.prototype=Object.create(s.a.prototype),TrendLine.prototype.constructor=TrendLine,TrendLine.convertFromDTO=function(t,a){var e=s.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e},TrendLine.prototype.getRightEndPoint=function(t,a,e,i){return(i=void 0===i?o.a.findLineAngleDeg(t):i)>=-45&&i<45?o.a.findPointOnLineByX(t,a):i>=45&&i<135?o.a.findPointOnLineByY(t,0):i<-45&&i>=-135?o.a.findPointOnLineByY(t,e):o.a.findPointOnLineByX(t,0)},TrendLine.prototype.getLeftEndPoint=function(t,a,e,i){return(i=void 0===i?o.a.findLineAngleDeg(t):i)>=-45&&i<45?o.a.findPointOnLineByX(t,0):i>=45&&i<135?o.a.findPointOnLineByY(t,e):i<-45&&i>=-135?o.a.findPointOnLineByY(t,0):o.a.findPointOnLineByX(t,a)}},"./src/scripts/Drawing/VerticalLine.js":function(t,a,e){"use strict";function VerticalLine(){arguments&&arguments.length&&(o.a.apply(this,arguments),this.chartData.chart?this.circles.push(new n.a(this.chartData,{data:[this.data[0]],points:[{x:this.points[0].x,y:this.chartData.chart.h/2}]})):this.circles.push(new n.a(this.chartData,{data:[this.data[0]],points:[{x:this.points[0].x,y:this.points[0].y}]}))),this.isFocused=function(t,a){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isChanged=!1;var e=!1;if(r.a.isPointOnCircle(this.circles[0],{x:t,y:a})&&(this.isChanged=!0,e=!0),e||r.a.isPointOnLine({x1:this.points[0].x,x2:this.points[1].x,y1:this.points[0].y,y2:this.points[1].y},{x:t,y:a})&&(this.isObjectEdit=!0,e=!0),e){this.circles[0].points[0].active=!0;for(var i=0;i<this.points.length;i++)this.points[i].active=!0}else{this.circles[0].points[0].active=!1;for(var s=0;s<this.points.length;s++)this.points[s].active=!1}return e},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.points[0].y=0,this.points[1].y=this.chartData.chart.h;var a=s.a.getPosition(this.points[0].x,this.width),e=s.a.getPosition(this.points[1].x,this.width),i=s.a.getPosition(this.points[0].y,this.width),r=s.a.getPosition(this.points[1].y,this.width);return o.a.prototype.draw.apply(this,[t,a,e,i,r])},this.updatePixels=function(){this.points[0].x=this.chartData.chart.toXPixels(this.data[0].d),this.points[1].x=this.points[0].x,this.circles[0].points[0].x=this.points[0].x,this.circles[0].points[0].y=this.chartData.chart.h/2},this.updateValues=function(){this.data[0].d=this.chartData.chart.toXValue(this.points[0].x)},this.shiftTo=function(t,a,e){if(0!==t){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].x=e.x,this.circles[0].points[0].x=e.x);this.data[0].d=e.dateSeconds}},this.moveTo=function(t,a,e){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].x=e.x);this.data[0].d=e.dateSeconds,this.circles[0].points[0].x=e.x},this.lineGetStyleRows=this.getStyleRows,this.getStyleRows=function(){var t=this.lineGetStyleRows(),a=[this.getShowDateRow()];return t.concat(a)},this.updateByObject=function(t){i.a.prototype.updateByObject.apply(this,arguments),this.circles[0].points[0]={x:this.circles[0].points[0].x,y:this.chartData.chart.h/2}}}e.d(a,"a",function(){return VerticalLine});var i=e("./src/scripts/Drawing/DrawingObject.js"),s=e("./src/scripts/Libs/LibCanvas.js"),r=e("./src/scripts/Drawing/LibDrawing.js"),n=e("./src/scripts/Drawing/Circle.js"),o=e("./src/scripts/Drawing/Line.js");VerticalLine.prototype=Object.create(o.a.prototype),VerticalLine.prototype.constructor=VerticalLine,VerticalLine.prototype.setShowTime=function(t){this.showTime=t},VerticalLine.prototype.getShowTime=function(){return this.showTime},VerticalLine.convertFromDTO=function(t,a){var e=o.a.convertFromDTO(t,a);return e.updateCustomPropsByObj(e,a),e}},"./src/scripts/Indicators/Indicator.js":function(t,a,e){"use strict";function toFixed(t){return parseFloat(t.toString().slice(0,15))}function sortTimeAscending(t,a){return t.T>a.T?1:t.T<a.T?-1:0}function sortTimeDescending(t,a){return t.T>a.T?-1:t.T<a.T?1:0}function getValuesFromDictionary(t){return Object.values(t).sort(sortTimeDescending)}function clone(t){return JSON.parse(JSON.stringify(t))}function LibIndicators(){}function Indicator(t,a){this.id=Indicator.getNextId(),this.name=a.name,this.fullName=a.fullName,this.params=Object.assign({},a.params),this.colors=Object.assign({},a.colors),this.opacity=Object.assign({},a.opacity),this.lineWidth=Object.assign({},a.lineWidth),this.oldParams={period:{},lineWidth:{}},this.type=a.type,this.data=[],this.showData=[],this.chartData=t,this.hidden=!!a.hidden&&a.hidden,this.h=a.h,this.top=a.top,this.oscillatorPrecission=6,this.oscillatorPrecissionFlag=!0}LibIndicators.toDataDictionary=function(t){for(var a={},e=0;e<t.length;e++)a[t[e].T]=t[e];return a},LibIndicators.SMA_noRounding=function(t,a){if(null===t||t.length<a)return[];for(var e=[],i=t.sort(sortTimeDescending),s=0,r=0,n=0,o=0,h=[],c=i.length-a,l=0;l<i.length;l++){var d=i[l];if(o<=c){if(h=i.slice(o,o+a),o++,h.forEach(function(t){r+=t.C}),s=r/a,n=d.T,r=0,isNaN(s)||isNaN(n))continue;e.push({T:n,P:s})}}return e},LibIndicators.SMA=function(t,a){if(null===t||t.length<a)return{};var e=[];return LibIndicators.SMA_noRounding(t,a).forEach(function(t){e.push({T:t.T,P:toFixed(t.P)})}),LibIndicators.toDataDictionary(e)},LibIndicators.EMA_noRounding=function(t,a){if(null===t||t.length<a)return{};var e=(t=t.sort(sortTimeAscending)).slice(0,a),i=LibIndicators.SMA_noRounding(e,a),s=i[0].P;s=parseFloat(s);var r,n=i[0].T,o=[];r=2/(a+1),o.push({T:n,P:parseFloat(s)});for(var h=a;h<t.length;h++)n=t[h].T,s=toFixed(s=(t[h].C-s)*r+s),isNaN(s)||isNaN(n)||o.push({T:n,P:s});return o},LibIndicators.EMA=function(t,a){if(null===t||t.length<a)return{};var e=[];return LibIndicators.EMA_noRounding(t,a).forEach(function(t){e.push({T:t.T,P:toFixed(t.P)})}),LibIndicators.toDataDictionary(e)},LibIndicators.StandartDeviation=function(t,a){if(null===t||t.length<a)return{};for(var e=t.sort(sortTimeAscending),i=0,s=[],r=[],n=[],o=0;o<=e.length-a;o++){for(var h=0,c=0;c<a;c++)h+=e[o+c].C,i=e[o+c].T;var l=h/a;s.push({T:i,C:l});for(var d=0,p=0;p<a;p++)d+=Math.pow(e[o+p].C-l,2)/a;r.push({T:i,C:d})}for(var u=0;u<r.length;u++){var g=Math.sqrt(r[u].C);n.push({T:r[u].T,P:g})}return LibIndicators.toDataDictionary(n)},LibIndicators.BollingerBands=function(t,a){if(null===t||t.length<a)return{};for(var e=t.sort(sortTimeDescending),i=[],s=0,r=[],n=e.length-a,o=0,h=0,c=0,l=0,d=0,p=0;p<e.length;p++){var u=e[p];if(s<=n){if(r=e.slice(s,s+a),s++,h=LibIndicators.SMA_noRounding(r,a),o=getValuesFromDictionary(o=LibIndicators.StandartDeviation(r,a)),l=(c=h[0].P)+2*o[0].P,l=Math.round(1e5*l)/1e5,d=c-2*o[0].P,d=Math.round(1e5*d)/1e5,isNaN(c)||isNaN(d)||isNaN(l)||isNaN(u.T))continue;i.push({T:u.T,M:c,U:l,L:d})}}return LibIndicators.toDataDictionary(i)},LibIndicators.Envelopes=function(t,a,e,i){if(null===t||t.length<a)return{};e?e/=1e4:e=.025;for(var s=t,r=[],n=0,o=0,h=0,c="EMA"===i.toUpperCase()?LibIndicators.EMA_noRounding(s,a):LibIndicators.SMA_noRounding(s,a),l=0;l<c.length;l++)o=(n=c[l].P)+n*e,o=Math.round(1e5*o)/1e5,h=n-n*e,h=Math.round(1e5*h)/1e5,isNaN(n)||isNaN(h)||isNaN(o)||isNaN(c[l].T)||r.push({T:c[l].T,M:n,U:o,L:h});return LibIndicators.toDataDictionary(r)},LibIndicators.So=function(t,a,e){if(null===t||t.length<a)return{};for(var i=[],s=t.sort(sortTimeDescending),r=[],n=0,o=0,h=0,c=0,l=0,d=0,p=s.length-a,u=0;u<s.length;u++)d<=p?(r=s.slice(u,u+a),n=Math.max.apply(Math,r.map(function(t){return t.H})),o=Math.min.apply(Math,r.map(function(t){return t.L})),h=r[r.length-a].C,c=r[r.length-a].T,d++):(u===p&&u++,h=s[u].C,c=s[u].T),l=toFixed(l=n-o===0?50:(h-o)/(n-o)*100),i.push({T:c,P:l});for(var g=0,D=0,f=[],w=0;w<=i.length-a;w++)(r=i.slice(w,w+e)).forEach(function(t){g+=parseFloat(t.P)}),D=toFixed(D=g/e),isNaN(D)||isNaN(i[w].P)||isNaN(i[w].T)||(f.push({T:i[w].T,K:i[w].P,D:D}),g=0,D=0);return LibIndicators.toDataDictionary(f)},LibIndicators.SoForK=function(t,a){if(null===t||t.length<a)return{};for(var e=[],i=t.sort(sortTimeDescending),s=[],r=0,n=0,o=0,h=0,c=0,l=0,d=i.length-a,p=0;p<i.length;p++)l<=d?(s=i.slice(p,p+a),r=Math.max.apply(Math,s.map(function(t){return t.H})),n=Math.min.apply(Math,s.map(function(t){return t.L})),o=s[s.length-a].C,h=s[s.length-a].T,l++):(p===d&&p++,o=i[p].C,h=i[p].T),c=r-n===0?50:(o-n)/(r-n)*100,e.push({T:h,P:c});return e},LibIndicators.WilliamsR=function(t,a){if(null===t||t.length<a)return{};for(var e=[],i=t.sort(sortTimeDescending),s=[],r=0,n=0,o=0,h=0,c=0,l=0,d=i.length-a,p=0;p<i.length;p++)l<=d?(s=i.slice(p,p+a),r=Math.max.apply(Math,s.map(function(t){return t.H})),n=Math.min.apply(Math,s.map(function(t){return t.L})),o=s[s.length-a].C,h=s[s.length-a].T,l++):(p===d&&p++,o=i[p].C,h=i[p].T),c=toFixed(c=r-n===0?50:(r-o)/(r-n)*-100),isNaN(c)||isNaN(h)||e.push({T:h,P:c});return LibIndicators.toDataDictionary(e)},LibIndicators.RSI=function(t,a){if(null===t||t.length<a)return{};for(var e=t.sort(sortTimeAscending),i=[],s=0,r=0,n=0,o=[],h=0,c=0,l=0,d=0,p=0,u=0,g=0,D=1;D<e.length;D++)if(r=e[D].C,n=e[D-1].C,s=e[D].T,o.push({T:s,C:r-n}),D>=a){if(c=0,l=0,D===a){if(o.forEach(function(t){h=t.C,s=t.T,h>0?d+=Math.abs(h):h<0&&(p+=Math.abs(h))}),d/=a,g=toFixed(g=100-100/(1+(u=0===(p/=a)?0:d/p))),isNaN(g)||isNaN(s))continue;i.push(new Object({T:e[D].T,P:g}))}if(D>a){if(h=o[D-1].C,s=o[D-1].T,h>0?(c=(d*(a-1)+Math.abs(h))/a,l=(p*(a-1)+0)/a):0===h?(l=(p*(a-1)+0)/a,c=(d*(a-1)+0)/a):(c=(d*(a-1)+0)/a,l=(p*(a-1)+Math.abs(h))/a),u=Math.abs(l)<1e-5?0:c/l,g=toFixed(g=Math.abs(l)<1e-5?100:100-100/(1+u)),d=c,p=l,isNaN(g)||isNaN(s))continue;i.push({T:s,P:g})}}return LibIndicators.toDataDictionary(i)},LibIndicators.BearsPower=function(t,a){if(t.length<a)return{};var e=clone(t);e=e.sort(sortTimeDescending);for(var i=LibIndicators.EMA_noRounding(e,a),s=[],r=[],n=0;n<e.length;n++)e[n].T>=i[0].T&&r.push(e[n]);var o=LibIndicators.toDataDictionary(i);for(n=0;n<r.length;n++){var h=r[n].T,c=r[n].L-o[h].P;isNaN(c)||isNaN(h)||s.push({T:h,P:c})}return LibIndicators.toDataDictionary(s)},LibIndicators.BullsPower=function(t,a){if(t.length<a)return{};var e=Object.assign(t);e=e.sort(sortTimeDescending);for(var i=LibIndicators.EMA_noRounding(e,a),s=[],r=[],n=0;n<e.length;n++)e[n].T>=i[0].T&&r.push(t[n]);for(var o=LibIndicators.toDataDictionary(i),h=0;h<r.length;h++){var c=r[h].T,l=r[h].H-o[c].P;isNaN(l)||isNaN(c)||s.push({T:c,P:l})}return LibIndicators.toDataDictionary(s)},LibIndicators.BullsBearsPower=function(t,a){if(null===t||t.length<a)return[];var e=clone(t);e=e.sort(sortTimeDescending);var i=[],s=LibIndicators.BearsPower(e,a),r=LibIndicators.BullsPower(e,a),n=LibIndicators.EMA_noRounding(e,a);s=getValuesFromDictionary(s),r=getValuesFromDictionary(r),n=getValuesFromDictionary(n);for(var o=[],h=0;h<s.length;h++)o.push(s[h].T);if((o=o.sort(function(t,a){return t>a?-1:t<a?1:0})).length<2)return null;var c=o[0],l=(o[1],toFixed(s[0].P)),d=toFixed(r[0].P),p=toFixed(n[0].P),u=toFixed(s[1].P),g=toFixed(r[1].P),D=toFixed(n[1].P);return d>0&&d<g&&p<D?i.push({T:c,P:-1}):l<0&&l>u&&p>D?i.push({T:c,P:1}):i.push({T:c,P:0}),LibIndicators.toDataDictionary(i)},LibIndicators.ATR=function(t,a){if(t.length<a)return{};var e=clone(t);e=e.sort(sortTimeAscending);for(var i=[],s=0;s<a;s++){var r=e[s].H,n=e[s].L,o={T:e[s].T};if(0===s)o.P=Math.abs(r-n),i.push(o);else{var h=e[s-1].C,c=Math.abs(r-n);c=Math.max(Math.abs(r-h),c),c=Math.max(Math.abs(n-h),c),o.P=c,i.push(o)}}var l=[],d=i.reduce(function(t,a){return t+a.P},0)/i.length;for(d=Math.round(1e5*d)/1e5,l.push({T:e[a-1].T,P:d}),s=a;s<e.length;s++){var p=e[s].T;r=e[s].H,n=e[s].L,h=e[s-1].C,c=Math.abs(r-n),c=Math.max(Math.abs(r-h),c),c=Math.max(Math.abs(n-h),c);var u=(l.slice(-1)[0].P*(a-1)+c)/a;u=toFixed(u),isNaN(u)||isNaN(p)||l.push({T:p,P:u})}return LibIndicators.toDataDictionary(l.reverse())},LibIndicators.ATR_Average=function(t,a,e){var i=[];if(null===t||t.length<a+e)return{};var s=clone(t);s=s.sort(sortTimeDescending);var r=LibIndicators.ATR(s,a);r=getValuesFromDictionary(r);for(var n=0;n<r.length-e;n++){var o=r.slice(n,n+e),h=0;o.forEach(function(t){h+=t.P});var c=h/e,l=r[n];l.P/1.2>c?i.push({T:l.T,P:1}):1.2*l.P<c?i.push({T:l.T,P:-1}):i.push({T:l.T,P:0})}return i},LibIndicators.Ichimoku=function(t,a,e,i,s){if(t.length<a)return{};var r=clone(t);r=r.sort(sortTimeAscending);var n,o,h,c,l,d,p,u,g,D,f={};s=Math.abs(r[0].T-r[1].T);for(var w=r.length,y=0;y<w;y++){if(g=-1/0,D=1/0,w-y>=a){for(var v=0;v<a;v++)g=Math.max(g,r[y+v].H),D=Math.min(D,r[y+v].L);n=(g+D)/2,u=r[a-1+y].T,n=Math.round(1e5*n)/1e5,f[u]?f[u].TenkanSen=n:f[u]={T:u,TenkanSen:n}}if(g=-1/0,D=1/0,w-y>=e){for(var m=0;m<e;m++)g=Math.max(g,r[y+m].H),D=Math.min(D,r[y+m].L);o=(g+D)/2,u=r[e-1+y].T,o=Math.round(1e5*o)/1e5,f[u]?f[u].KijunSen=o:f[u]={T:u,KijunSen:o}}if(u=y<e?r[y].T-s*e:r[y-e].T,h=r[y].C,h=Math.round(1e5*h)/1e5,void 0===f[u]?f[u]={T:u,ChinkouSpan:h}:f[u].ChinkouSpan=h,y>=e&&(c=(f[u=r[y].T].TenkanSen+f[u].KijunSen)/2,c=Math.round(1e5*c)/1e5,void 0===f[l=r[y+e]?r[y+e].T:u+s*e]?f[l]={T:l,SenkouSpanA:c}:f[l].SenkouSpanA=c),w-y>=i){u=r[y].T;for(var b=-1/0,x=1/0,C=0;C<i;C++)b=Math.max(b,r[y+C].H),x=Math.min(x,r[y+C].L);d=(b+x)/2,d=Math.round(1e5*d)/1e5,f[p=r[y+e+i-1]?r[y+e+i-1].T:r[w-1].T+s*(y+e+i-w)]?f[p].SenkouSpanB=d:f[p]={T:p,SenkouSpanB:d}}}return f},LibIndicators.Fractal=function(t,a){if(a||(a=5),!t||t.length<a)return{};var e=clone(t);e=e.sort(sortTimeAscending);for(var i={},s=a%2===0?a/2-1:Math.floor(a/2),r=0;r<e.length-a+1;r++){var n=e.slice(r,a+r),o=n.reduce(function(t,a){return t.H>a.H?t:a}),h=n.reduce(function(t,a){return t.L<a.L?t:a});n.indexOf(o)===s&&(i[o.T]={T:o.T,fractalHigh:o.H}),n.indexOf(h)===s&&(void 0===i[h.T]?i[h.T]={T:h.T,fractalLow:h.L}:i[h.T].fractalLow=h.L)}return i},LibIndicators.ADX=function(t,a){if(null===t||t.length<a)return{};for(var e=t.sort(sortTimeAscending),i=[],s=[],r=[],n=1;n<e.length;n++){var o=e[n].H,h=e[n].L,c=e[n-1].H,l=e[n-1].L,d=e[n-1].C,p=e[n].T,u=Math.max(o-h,Math.abs(o-d),Math.abs(h-d)),g=0,D=0;if(o>c?(g=o-c,g=Math.round(1e4*g)/1e4):g=0,h<l?(D=l-h,D=Math.round(1e4*D)/1e4):D=0,g>D?D=0:D>g?g=0:D===g&&(D=0,g=0),i.push({T:p,TR:u,DMP:g,DMM:D}),n>=a){var f,w,y,v=0,m=0,b=0,x=0,C=0,P=0,T=0,S=0;if(n===a){for(var O=i.slice(0,a),L=0;L<O.length;L++)v+=parseFloat(O[L].TR),b+=parseFloat(O[L].DMP),m+=parseFloat(O[L].DMM);f=v,w=b,y=m,P=(C=b/v*100)+(x=m/v*100),S=(T=Math.abs(C-x))/P*100,s.push({T:p,DIP:C,DIM:x,DISUM:P,DIDIF:T,DX:S})}else n>a&&(v=f-f/a+parseFloat(i[n-1].TR),m=y-y/a+parseFloat(i[n-1].DMM),P=(C=(b=w-w/a+parseFloat(i[n-1].DMP))/v*100)+(x=m/v*100),S=(T=Math.abs(C-x))/P*100,s.push({T:p,DIP:C,DIM:x,DISUM:P,DIDIF:T,DX:S}),f=v,w=b,y=m)}}var F,B,A=0,k=s.slice(0,a);for(L=0;L<k.length;L++)A+=parseFloat(k[L].DX);var j=A/a;if(k.length>=a){j=toFixed(j),F=toFixed(k[a-1].DIM),B=toFixed(k[a-1].DIP),j=isNaN(j)?0:j,F=isNaN(F)?0:F,B=isNaN(B)?0:B,r.push({T:k[a-1].T,DIP:B,DIM:F,ADX:j}),A=j;for(var M=a;M<s.length;M++)j=toFixed(j=(A*(a-1)+s[M].DX)/a),F=toFixed(s[M].DIM),B=toFixed(s[M].DIP),j=isNaN(j)?0:j,F=isNaN(F)?0:F,B=isNaN(B)?0:B,r.push({T:s[M].T,DIP:B,DIM:F,ADX:j}),A=j}return LibIndicators.toDataDictionary(r)},LibIndicators.ADXdiff=function(t,a){if(null===t||t.length<a)return{};for(var e=t.sort(sortTimeAscending),i=[],s=[],r=1;r<e.length;r++){var n=e[r].H,o=e[r].L,h=e[r-1].H,c=e[r-1].L,l=e[r-1].C,d=e[r].T,p=Math.max(n-o,Math.abs(n-l),Math.abs(o-l)),u=0,g=0;if((u=n>h?n-h:0)>(g=o<c?c-o:0)?g=0:g>u?u=0:g===u&&(g=0,u=0),i.push({T:d,TR:p,DMP:u,DMM:g}),r>=a){var D,f,w,y=0,v=0,m=0,b=0,x=0,C=0,P=0,T=0;if(r===a){for(var S=i.slice(0,a),O=0;O<S.length;O++)y+=parseFloat(S[O].TR),m+=parseFloat(S[O].DMP),v+=parseFloat(S[O].DMM);D=y,f=m,w=v,C=(x=m/y*100)+(b=v/y*100),T=(P=Math.abs(x-b))/C*100,s.push({T:d,DIP:x,DIM:b,DISUM:C,DIDIF:P,DX:T})}else r>a&&(y=D-D/a+parseFloat(i[r-1].TR),v=w-w/a+parseFloat(i[r-1].DMM),T=(P=(x=(m=f-f/a+parseFloat(i[r-1].DMP))/y*100)-(b=v/y*100))/(C=x+b)*100,s.push({T:d,DIP:x,DIM:b,DISUM:C,DIDIF:P,DX:T}),D=y,f=m,w=v)}}return s},LibIndicators.MACD=function(t,a,e,i){if(!a||!e||!i||t.length<e)return{};var s=clone(t);s=s.sort(function(t,a){return t.T-a.T});var r={},n=LibIndicators.EMA_noRounding(s,a),o=LibIndicators.EMA_noRounding(s,e);for(var h in n=LibIndicators.toDataDictionary(n),o=LibIndicators.toDataDictionary(o)){var c=o[h].T,l=n[c].P-o[h].P;r[c]={T:c,macdLine:l,signalLine:0,histogram:0}}var d=[];for(var p in r){var u=parseInt(p);d.push({T:u,O:0,H:0,L:0,C:r[p].macdLine})}var g=LibIndicators.EMA_noRounding(d,i);for(var D in g=LibIndicators.toDataDictionary(g)){var f=parseInt(D);r[f].signalLine=g[f].P,r[f].histogram=r[f].macdLine-g[f].P}return r},LibIndicators.Dema=function(t,a){if(null===t||t.length<a)return{};t=t.sort(sortTimeAscending);for(var e=LibIndicators.EMA_noRounding(t,a),i=[],s=[],r=0;r<e.length;r++)i.push({T:e[r].T,O:0,H:0,L:0,C:e[r].P});var n=LibIndicators.EMA_noRounding(i,a);for(r=0;r<n.length;r++){var o=2*e[r+a-1].P-n[r].P;s.push({T:n[r].T,P:o})}return LibIndicators.toDataDictionary(s)},LibIndicators.ParabolicSar=function(t,a,e,i){if(t.length<3)return{};a?a/=100:a=.02,e?e/=100:e=.02,i?i/=100:i=.2;var s=clone(t).sort(sortTimeAscending),r={},n={},o=!0,h=0;r[s[3].T]={T:s[3].T,P:0,EP:0,ST:0,D:!0},o=o?s[4].L>Math.min(s[4].L,s[3].L,s[2].L,s[1].L,s[0].L):s[4].H>=Math.min(s[4].L,s[3].L,s[2].L,s[1].L,s[0].L),r[s[4].T]={T:s[4].T,P:Math.min(s[4].L,s[3].L,s[2].L,s[1].L,s[0].L),EP:Math.max(s[4].H,s[3].H,s[2].H,s[1].H,s[0].H),ST:a,D:o},n[s[4].T]={T:s[4].T,P:r[s[4].T].P};for(var c=5;c<s.length-1;c++)r[s[c].T]={T:s[c].T,P:0,EP:0,ST:0,D:!0},r[s[c-1].T].D===r[s[c-2].T].D?r[s[c-1].T].D?(s[c].H>r[s[c-1].T].EP?r[s[c].T].EP=s[c].H:r[s[c].T].EP=r[s[c-1].T].EP,h=r[s[c-1].T].ST*(r[s[c-1].T].EP-r[s[c-1].T].P),r[s[c-1].T].P+h<Math.min(s[c-1].L,s[c-2].L)?r[s[c].T].P=r[s[c-1].T].P+h:r[s[c].T].P=Math.min(s[c-1].L,s[c-2].L),r[s[c].T].EP>r[s[c-1].T].EP?r[s[c-1].T].ST>=i?r[s[c].T].ST=i:r[s[c].T].ST=r[s[c-1].T].ST+e:r[s[c].T].ST=r[s[c-1].T].ST,r[s[c].T].D=s[c+1].L>r[s[c].T].P):(r[s[c].T].EP=Math.min(s[c].L,r[s[c-1].T].EP),h=r[s[c-1].T].ST*(r[s[c-1].T].EP-r[s[c-1].T].P),r[s[c-1].T].P+h>Math.max(s[c-1].H,s[c-2].H)?r[s[c].T].P=r[s[c-1].T].P+h:r[s[c].T].P=Math.max(s[c-1].H,s[c-2].H),r[s[c].T].EP<r[s[c-1].T].EP?r[s[c-1].T].ST>=i?r[s[c].T].ST=i:r[s[c].T].ST=r[s[c-1].T].ST+e:r[s[c].T].ST=r[s[c-1].T].ST,r[s[c].T].D=s[c+1].H>=r[s[c].T].P):(r[s[c].T].P=r[s[c-1].T].EP,r[s[c].T].ST=e,r[s[c-1].T].D?(s[c].H>r[s[c-1].T].EP?r[s[c].T].EP=s[c].H:r[s[c].T].EP=r[s[c-1].T].EP,r[s[c].T].D=s[c+1].L>r[s[c].T].P):(s[c].L<r[s[c-1].T].EP?r[s[c].T].EP=s[c].L:r[s[c].T].EP=r[s[c-1].T].EP,r[s[c].T].D=s[c+1].H>=r[s[c].T].P)),isNaN(r[s[c].T].P)||isNaN(s[c].T)||(n[s[c].T]={T:s[c].T,P:r[s[c].T].P});return n},LibIndicators.Keltner=function(t,a,e,i){if(null===t||t.length<a)return{};e||(e=1),i||(i="EMA");var s=[],r=0,n=0,o=0,h=0,c=t;switch(i){case"SMA":r=LibIndicators.SMA_noRounding(c,a);break;case"EMA":default:r=LibIndicators.EMA_noRounding(c,a)}for(var l=LibIndicators.ATR(c,a),d=0;d<r.length;d++)n=r[d].P,o=(n=Math.round(1e5*n)/1e5)+e*l[r[d].T].P,o=Math.round(1e5*o)/1e5,h=n-e*l[r[d].T].P,h=Math.round(1e5*h)/1e5,s.push({T:r[d].T,M:n,U:o,L:h});return LibIndicators.toDataDictionary(s)},LibIndicators.Donchian=function(t,a){if(null===t||t.length<a)return{};for(var e=t.sort(sortTimeDescending),i=[],s=0;s<e.length-a;s++){for(var r=-1/0,n=1/0,o=0;o<a;o++)r=Math.max(r,e[s+o].H),n=Math.min(n,e[s+o].L);var h=(r+n)/2;i.push({T:e[s].T,M:h,U:r,L:n})}return LibIndicators.toDataDictionary(i)},LibIndicators.AO=function(t){if(null===t||t.length<5)return{};for(var a=t.sort(sortTimeDescending),e=[],i=[],s=0;s<a.length;s++)i.push({T:a[s].T,O:0,H:0,L:0,C:(a[s].H+a[s].L)/2});var r=LibIndicators.SMA_noRounding(i,5),n=LibIndicators.SMA_noRounding(i,34);for(var o in r=LibIndicators.toDataDictionary(r),n=LibIndicators.toDataDictionary(n)){var h=n[o].T,c=n[o].P,l=r[o].P-c;e.push({T:h,P:l})}return LibIndicators.toDataDictionary(e)},LibIndicators.AC=function(t){if(null===t||t.length<5)return{};for(var a=t.sort(sortTimeDescending),e=[],i=getValuesFromDictionary(LibIndicators.AO(a)),s=[],r=0;r<i.length;r++)s.push({T:i[r].T,O:0,H:0,L:0,C:i[r].P});var n=LibIndicators.SMA_noRounding(s,5);for(var o in n){var h=n[o].T,c=n[o].P,l=i[o].P-c;e.push({T:h,P:l})}return LibIndicators.toDataDictionary(e)},e.d(a,"a",function(){return Indicator}),Indicator.prototype.createData=function(t){this.data=Indicator.calculate(this,Indicator.convertDataToOCLHT(t)),this.oscillatorPrecissionFlag&&this.getCurrentOscillatorPrecission()},Indicator.prototype.createCurrentValue=function(t){var a=t[0].date,e=Indicator.createDataforOnePointIndicator(this,t),i=Indicator.calculate(this,Indicator.convertDataToOCLHT(e));this.isChanged=this.checkValueHasChanged(this.data[a],i[a]),i[a]&&(this.data[a]=i[a])},Indicator.prototype.checkValueHasChanged=function(t,a){for(var e in t)if(t.hasOwnProperty(e)&&a&&t[e]===a[e]&&"T"!==e)return!1;return!0},Indicator.createDataforOnePointIndicator=function(t,a){var e=[],i=t.name,s=t.params;switch(i.toLowerCase()){case"sma":case"ema":case"bb":case"sar":case"williamsr":case"std":case"atr":case"bulls":case"bears":case"keltner":e=a.slice(0,s.period);break;case"dema":case"fractal":case"adx":e=a.slice(0,2*s.period);break;case"donchian":case"rsi":e=a.slice(0,s.period+1);break;case"ichimoku":e=a.slice(0,s.largePeriod);break;case"env":e=a.slice(0,s.lenght);break;case"macd":e=a.slice(0,s.slowLength);break;case"so":e=a.slice(0,s.K);break;case"ao":e=a.slice(0,34);break;case"ac":e=a.slice(0,39);break;default:e=[]}return e},Indicator.prototype.createShowData=function(){if(this.showData=[],this.chartData.chart&&this.chartData.chart.selectedData&&0!==this.chartData.chart.selectedData.length&&this.data&&0!==Object.keys(this.data).length){var t=this.getExtraIndicatorsDataNumb(),a=this.chartData.getCurrentTimeStep(),e=this.chartData.chart.selectedData[0].date;this.chartData.chart.selectedData[0].isCurrentData&&(e+=t*a);var i=this.chartData.chart.selectedData[this.chartData.chart.selectedData.length-1].date-a;this.chartData.chart.selectedData[this.chartData.chart.selectedData.length-1].date===this.chartData.data[this.chartData.typeData][this.chartData.data[this.chartData.typeData].length-1].date&&(i-=t*a);for(var s=this.data,r=Object.keys(s),n=r.length-1;n>=0;n--)parseInt(r[n])<=e&&parseInt(r[n])>=i&&this.showData.push(s[r[n]])}},Indicator.prototype.getExtraIndicatorsDataNumb=function(){switch(this.name.toLowerCase()){case"ichimoku":return this.params.largePeriod+this.params.middlePeriod;default:return 0}},Indicator.getValuesFromDictionary=function(t){return Object.values(t).sort(function(t,a){return t.T>a.T?-1:t.T<a.T?1:0})},Indicator.prototype.convertToDTO=function(){var t={};return t.name=this.name,t.fullName=this.fullName,t.params=Object.assign({},this.params),t.colors=Object.assign({},this.colors),t.opacity=Object.assign({},this.opacity),t.lineWidth=Object.assign({},this.lineWidth),t.type=this.type,t.hidden=this.hidden,t.h=this.h,t.top=this.top,t},Indicator.convertFromDTO=function(t,a){return new Indicator(t,a)},Indicator.prototype.draw=function(){var t=this.chartData.chart;if(t&&t.selectedData&&0!==t.selectedData.length){var a=Indicator.getValuesFromDictionary(this.data);if(a&&0!==a.length&&!this.hidden)if("oscillator"===this.type)t.oscillatorCharts[this.id].clear(),t.oscillatorCharts[this.id].draw(this,a,t),t.chartData.options.Chart.needPriceOscillators&&t.oscillatorCharts[this.id].drawPriceLineCurrentOscillator(this,a,t);else if("trend"===this.type)switch(this.name.toLowerCase()){case"sma":case"ema":case"dema":t.drawLinePT(this,a,t.canvasDataNormalContext);break;case"bb":case"env":case"keltner":case"donchian":t.drawBollingerBandsIndicator(this,a,t.canvasDataNormalContext);break;case"fractal":t.drawFractal(this,a,t.canvasDataNormalContext);break;case"ichimoku":t.drawIchimoku(this,a,t.canvasDataNormalContext);break;case"sar":t.drawSar(this,a,t.canvasDataNormalContext);break;default:return}}},Indicator.prototype.applyIndicatorHeight=function(t,a){this.h=t.height,this.w=parseFloat(a.parent.style.width),this.top=t.top},Indicator.calculate=function(t,a){var e=[],i=t.name,s=t.params;switch(i.toLowerCase()){case"sma":e=LibIndicators.SMA(a,s.period);break;case"ema":e=LibIndicators.EMA(a,s.period);break;case"bb":e=LibIndicators.BollingerBands(a,s.period);break;case"dema":e=LibIndicators.Dema(a,s.period);break;case"fractal":e=LibIndicators.Fractal(a,s.period);break;case"sar":e=LibIndicators.ParabolicSar(a,s.startAf,s.stepAf,s.maxAf);break;case"ichimoku":e=LibIndicators.Ichimoku(a,s.smallPeriod,s.middlePeriod,s.largePeriod,s.timePeriod);break;case"env":e=LibIndicators.Envelopes(a,s.lenght,s.percent,s.avarage);break;case"macd":e=LibIndicators.MACD(a,s.fastLength,s.slowLength,s.signalLength);break;case"adx":e=LibIndicators.ADX(a,s.period);break;case"williamsr":e=LibIndicators.WilliamsR(a,s.period);break;case"rsi":e=LibIndicators.RSI(a,s.period);break;case"std":e=LibIndicators.StandartDeviation(a,s.period);break;case"atr":e=LibIndicators.ATR(a,s.period);break;case"so":e=LibIndicators.So(a,s.K,s.D);break;case"bulls":e=LibIndicators.BullsPower(a,s.period);break;case"bears":e=LibIndicators.BearsPower(a,s.period);break;case"keltner":e=LibIndicators.Keltner(a,s.period,s.multi);break;case"donchian":e=LibIndicators.Donchian(a,s.period);break;case"ao":e=LibIndicators.AO(a);break;case"ac":e=LibIndicators.AC(a);break;default:e=[]}return e},Indicator.getNextId=function(){return Indicator.id++},Indicator.convertDataToOCLHT=function(t){return t.map(function(t){return{O:parseFloat(t.open),C:parseFloat(t.close),L:parseFloat(t.low),H:parseFloat(t.high),T:t.date}})},Indicator.prototype.getCurrentOscillatorPrecission=function(){var t;for(var a in this.data)if(this.data.hasOwnProperty(a)){t=this.data[a];break}var e=1;for(var i in t)t.hasOwnProperty(i)&&"T"!==i&&(e=e<=t[i].toFixed(0).length?t[i].toFixed(0).length:e);this.oscillatorPrecission=this.oscillatorPrecission-e,this.oscillatorPrecissionFlag=!1},Indicator.id=0},"./src/scripts/Libs/ColorPicker.js":function(t,a,e){"use strict";function Picker(t,a){this.techChart=a,this.parent=t,this.rgba=[0,0,0,1],this.init()}e.d(a,"a",function(){return Picker}),Picker.shownPickers=[],Picker.html="<div class='tch-color-picker-container'><div class='tch-color-picker'></div></div>",Picker.createSingle=function(t,a){return t.innerHTML=Picker.html,new Picker(t,a)},Picker.prototype.init=function(){for(var t=this.parent.querySelectorAll(".tch-color-picker"),a=0;a<t.length;a++)this.addPickerEvents(t[a]);this.getImgUrl()},Picker.prototype.getImgUrl=function(){if(!Picker.imgUrl){var t=document.createElement("span");this.parent.appendChild(t),t.classList.toggle("tch-color-picker-img-url",!0),Picker.imgUrl=getComputedStyle(this.parent.querySelector(".tch-color-picker-img-url")).backgroundImage.match(/url\(["|']?([^"']*)["|']?\)/)[1],this.parent.removeChild(t)}},Picker.prototype.addPickerEvents=function(t){var a=this;t.onclick=function(t){t.preventDefault(),a.createPallete(t.target)}},Picker.rgbaToArray=function(t){for(var a,e=[],i=t.replace("rgba(","").replace(")","").split(","),s=0;s<i.length;s++)a=parseFloat(i[s]),isNaN(a)||(e[s]=a);return e},Picker.prototype.createPallete=function(t){var a=t.style.backgroundColor;(a=Picker.getColor(a))&&(this.rgba=Picker.rgbaToArray(a)),Picker.shownPickers.push(this);var e=document.createElement("div");e.className="tch-color-picker-palette",e.addEventListener("mousedown",function(t){t.stopPropagation()}),document.addEventListener("mousedown",Picker.pickerListener),t.parentNode.appendChild(e),this.paletteRect=e.getBoundingClientRect(),this.palette=e,this.picker=t;var i=document.createElement("div");e.appendChild(i),this.createTablePallete(e),this.createScroll(e),this.createChangeButton(e)},Picker.prototype.createScroll=function(t){var a=document.createElement("div");a.className="container-scroll";var e=document.createElement("input");e.setAttribute("type","range"),e.setAttribute("min","0"),e.setAttribute("max","1"),e.setAttribute("step","0.1"),e.setAttribute("value",this.rgba[3]),a.appendChild(e),t.appendChild(a),this.scroll=e;var i=this;e.oninput=function(t){i.rgba[3]=parseFloat(t.target.value),i.updateValue()},this.setScrollColor()},Picker.prototype.createChangeButton=function(t){var a=document.createElement("input");a.setAttribute("type","button"),a.className="btn-custom-color",a.setAttribute("value",this.techChart.translation["custom-color"]);var e=this;a.onclick=function(){"wrapper-table"===t.querySelector("div").className?e.createCanvasPallete(t):e.createTablePallete(t),e.pointerRect=e.pointer.getBoundingClientRect(),e.canvasRect=e.ctx.canvas.getBoundingClientRect()},t.appendChild(a)},Picker.prototype.createTablePallete=function(t){for(var a=this,e=document.createElement("table"),i=[],s=0;s<8;s++)i[s]=[];i[0][0]="rgba(0, 0, 0, 1)",i[0][1]="rgba(66, 66, 66, 1)",i[0][2]="rgba(101, 101, 101, 1)",i[0][3]="rgba(152, 152, 152, 1)",i[0][4]="rgba(182, 182, 182, 1)",i[0][5]="rgba(203, 203, 203, 1)",i[0][6]="rgba(216, 216, 216, 1)",i[0][7]="rgba(238, 238, 238, 1)",i[0][8]="rgba(242, 242, 242, 1)",i[0][9]="rgba(255, 255, 255, 1)",i[1][0]="rgba(151, 0, 0, 1)",i[1][1]="rgba(255, 0, 0, 1)",i[1][2]="rgba(255, 152, 0, 1)",i[1][3]="rgba(255, 255, 0, 1)",i[1][4]="rgba(0, 255, 0, 1)",i[1][5]="rgba(0, 255, 255, 1)",i[1][6]="rgba(73, 133, 231, 1)",i[1][7]="rgba(0, 0, 255, 1)",i[1][8]="rgba(152, 0, 255, 1)",i[1][9]="rgba(255, 0, 255, 1)",i[2][0]="rgba(230, 184, 175, 1)",i[2][1]="rgba(244, 204, 204, 1)",i[2][2]="rgba(252, 229, 205, 1)",i[2][3]="rgba(255, 242, 204, 1)",i[2][4]="rgba(217, 234, 211, 1)",i[2][5]="rgba(208, 224, 227, 1)",i[2][6]="rgba(201, 218, 248, 1)",i[2][7]="rgba(207, 226, 243, 1)",i[2][8]="rgba(217, 210, 233, 1)",i[2][9]="rgba(234, 209, 220, 1)",i[3][0]="rgba(221, 126, 107, 1)",i[3][1]="rgba(234, 153, 153, 1)",i[3][2]="rgba(249, 203, 156, 1)",i[3][3]="rgba(255, 229, 153, 1)",i[3][4]="rgba(182, 215, 168, 1)",i[3][5]="rgba(162, 196, 201, 1)",i[3][6]="rgba(164, 194, 244, 1)",i[3][7]="rgba(159, 197, 232, 1)",i[3][8]="rgba(180, 167, 214, 1)",i[3][9]="rgba(213, 166, 189, 1)",i[4][0]="rgba(204, 65, 37, 1)",i[4][1]="rgba(224, 102, 102, 1)",i[4][2]="rgba(246, 178, 107, 1)",i[4][3]="rgba(255, 217, 102, 1)",i[4][4]="rgba(147, 196, 125, 1)",i[4][5]="rgba(118, 165, 175, 1)",i[4][6]="rgba(109, 158, 235, 1)",i[4][7]="rgba(111, 168, 220, 1)",i[4][8]="rgba(142, 124, 195, 1)",i[4][9]="rgba(194, 123, 160, 1)",i[5][0]="rgba(166, 28, 0, 1)",i[5][1]="rgba(204, 0, 0, 1)",i[5][2]="rgba(230, 145, 56, 1)",i[5][3]="rgba(241, 194, 50, 1)",i[5][4]="rgba(106, 168, 79, 1)",i[5][5]="rgba(69, 129, 142, 1)",i[5][6]="rgba(60, 120, 216, 1)",i[5][7]="rgba(61, 133, 198, 1)",i[5][8]="rgba(103, 78, 167, 1)",i[5][9]="rgba(166, 77, 121, 1)",i[6][0]="rgba(133, 32, 12, 1)",i[6][1]="rgba(153, 0, 0, 1)",i[6][2]="rgba(180, 95, 6, 1)",i[6][3]="rgba(191, 144, 0, 1)",i[6][4]="rgba(56, 118, 29, 1)",i[6][5]="rgba(19, 79, 92, 1)",i[6][6]="rgba(17, 85, 204, 1)",i[6][7]="rgba(11, 83, 148, 1)",i[6][8]="rgba(53, 28, 117, 1)",i[6][9]="rgba(116, 27, 71, 1)",i[7][0]="rgba(91, 15, 0, 1)",i[7][1]="rgba(102, 0, 0, 1)",i[7][2]="rgba(120, 63, 4, 1)",i[7][3]="rgba(127, 96, 0, 1)",i[7][4]="rgba(39, 78, 19, 1)",i[7][5]="rgba(12, 52, 61, 1)",i[7][6]="rgba(28, 69, 135, 1)",i[7][7]="rgba(7, 55, 99, 1)",i[7][8]="rgba(32, 18, 77, 1)",i[7][9]="rgb(76, 17, 48)";for(var r=0;r<8;r++){for(var n=document.createElement("tr"),o=0;o<10;o++){var h=document.createElement("td"),c=document.createElement("div");c.style.background=i[r][o],c.className="wrapper-color",c.onclick=function(t){for(var e=t.target.style.background.split("(")[1].split(")")[0].split(","),i=0;i<3;i++)a.rgba[i]=e[i];a.updateValue()},h.appendChild(c),n.appendChild(h)}e.appendChild(n)}var l=t.querySelector("div");l.innerHTML="",l.className="wrapper-table",l.appendChild(e)},Picker.prototype.createCanvasPallete=function(t){var a=document.createElement("canvas"),e=document.createElement("div");e.className="tch-color-picker-pointer";var i=a.getContext("2d");this.pointer=e,this.ctx=i;var s=t.querySelector("div");s.innerHTML="",s.className="wrapper-canvas",s.appendChild(e),s.appendChild(a);var r=s.getElementsByTagName("canvas")[0];this.ctx.canvas.width=r.clientWidth,this.ctx.canvas.height=r.clientHeight;for(var n=a.width,o=a.height,h=0;h<n;h++){var c=this.getColorGradient(h,1,n,1);i.fillStyle="rgba("+c[0]+","+c[1]+","+c[2]+","+c[3]+")",i.fillRect(h,0,1,o)}var l=this;e.onmouseup=function(){l.pressed=!1},e.onmousedown=function(){l.pressed=!0},a.onmousedown=function(){l.pressed=!0},a.onmouseup=function(){l.pressed=!1},a.onclick=function(t){l.setPointerPosition(t)},a.onmousemove=function(t){l.pressed&&l.setPointerPosition(t)},e.onmousemove=function(t){l.pressed&&l.setPointerPosition(t)},this.pointerRect=e.getBoundingClientRect(),this.canvasRect=a.getBoundingClientRect()},Picker.prototype.getColorGradient=function(t,a,e){return[Picker.getR(t,e),Picker.getG(t,e),Picker.getB(t,e),255]},Picker.getR=function(t,a){var e=Math.floor(255*Math.cos(2*t*Math.PI/a));return e>0?e:0},Picker.getG=function(t,a){var e=Math.floor(255*Math.sin(2*t*Math.PI/a));return e>0?e:0},Picker.getB=function(t,a){var e=Math.floor(255*Math.sin(2*t*Math.PI/a+Math.PI));return e>0?e:0},Picker.prototype.setPointerPosition=function(t){var a=Math.floor(t.clientX-this.paletteRect.left),e=Math.floor(t.clientY-this.paletteRect.top);this.pointer.style.zIndex=2,this.pointer.style.top=e-this.pointerRect.height/2+"px",this.pointer.style.left=a-this.pointerRect.width/2+"px",this.pointerRect=this.pointer.getBoundingClientRect(),this.canvasRect=this.ctx.canvas.getBoundingClientRect();var i=this.canvasRect.left-this.paletteRect.left;this.canvasRect.right<=this.pointerRect.right&&(a=this.canvasRect.width+i-this.pointerRect.width/2-2),this.canvasRect.left>=this.pointerRect.left&&(a=i+this.pointerRect.width/2);var s=this.canvasRect.top-this.paletteRect.top;this.canvasRect.top>this.pointerRect.top&&(e=s+this.pointerRect.height/2),this.canvasRect.bottom<this.pointerRect.bottom&&(e=s-this.pointerRect.height/2+this.canvasRect.height-2),this.pointer.style.top=e-this.pointerRect.height/2+"px",this.pointer.style.left=a-this.pointerRect.width/2+"px",a=Math.floor(a-(this.canvasRect.left-this.paletteRect.left)),e=Math.floor(e-(this.canvasRect.top-this.paletteRect.top));var r=this.getColorGradient(a,e,this.canvasRect.width,this.canvasRect.height);this.rgba[0]=r[0],this.rgba[1]=r[1],this.rgba[2]=r[2],this.rgba[3]=r[3],this.updateValue()},Picker.prototype.updateValue=function(){var t=this.getColor();this.picker||(this.picker=this.parent.querySelector(".tch-color-picker")),this.picker.style.backgroundColor=t,this.pointer&&(this.pointer.style.backgroundColor=t),this.picker.onchange&&this.picker.onchange(t),this.onchange&&this.onchange(t),this.setScrollColor()},Picker.prototype.setScrollColor=function(){if(this.scroll){var t=this.getColor(),a=(t=t.replace("rgba(","").replace(")","")).split(", "),e="linear-gradient(to right,rgba("+a[0]+", "+a[1]+", "+a[2]+", 0)5%,rgba("+a[0]+", "+a[1]+", "+a[2]+", 1)95%)";this.scroll.style.background=e}},Picker.prototype.setColor=function(t){t=Picker.getColor(t),this.rgba=Picker.rgbaToArray(t),this.updateValue()},Picker.prototype.getColor=function(){return"rgba("+this.rgba[0]+", "+this.rgba[1]+", "+this.rgba[2]+", "+this.rgba[3]+")"},Picker.pickerListener=function(){for(var t=0;t<Picker.shownPickers.length;t++){if(Picker.shownPickers[t].palette){var a=Picker.shownPickers[t].palette;a.parentNode.removeChild(a)}Picker.shownPickers.splice(t,1)}document.removeEventListener("mousedown",Picker.pickerListener)},Picker.getColor=function(t){return 0!==t.indexOf("#")?0===t.indexOf("rgba")?t:0===t.indexOf("rgb")?t.replace(")",", 1)").replace("rgb","rgba"):t:/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)?(3==(a=t.substring(1).split("")).length&&(a=[a[0],a[0],a[1],a[1],a[2],a[2]]),"rgba("+[(a="0x"+a.join(""))>>16&255,a>>8&255,255&a].join(",")+",1)"):void 0;var a}},"./src/scripts/Libs/Helper.js":function(t,a,e){"use strict";function Helper(){}e.d(a,"a",function(){return Helper}),Helper.detectBrowser=function(t,a){var e,i;if(-1!==t.navigator.userAgent.indexOf("Opera")||-1!==t.navigator.userAgent.indexOf("OPR")){try{e=t.navigator.userAgent.split("OPR/")[1].split(" ")[0]}catch(s){e="0"}i={bro:"opera",ver:e}}else if(-1!==t.navigator.userAgent.indexOf("MSIE")||a.documentMode){try{e=t.navigator.userAgent.split("rv:")[1].split(")")[0]}catch(s){e="0"}i={bro:"ie",ver:e}}else if(t.StyleMedia){try{e=t.navigator.userAgent.split("Edge/")[1].split(" ")[0]}catch(s){e="0"}i={bro:"edge",ver:e}}else if(-1!==t.navigator.userAgent.indexOf("Chrome")){try{e=t.navigator.userAgent.split("Chrome/")[1].split(" ")[0]}catch(s){e="0"}i={bro:"chrome",ver:e}}else if(-1!==t.navigator.userAgent.indexOf("Safari")){try{e=t.navigator.userAgent.split("Safari/")[1].split(" ")[0]}catch(s){e="0"}i={bro:"safari",ver:e}}else if(-1!==t.navigator.userAgent.indexOf("Firefox")){try{e=t.navigator.userAgent.split("Firefox/")[1].split(" ")[0]}catch(s){e="0"}i={bro:"firefox",ver:e}}else i={bro:"unknown",ver:"unknown"};return i},Helper.isBrowOk=function(t,a){var e=Object.keys(t).indexOf(a.bro);if(e>-1){var i=t[Object.keys(t)[e]];i=i.split(".");for(var s=a.ver.split("."),r=0;r<s.length;r++){if(parseInt(i[r])<parseInt(s[r]))return!0;if(parseInt(i[r])>parseInt(s[r]))return!1}return!0}return!1},Helper.warningBrowser=function(){var t=Helper.detectBrowser(window,document);return Helper.isBrowOk(Helper.validBrowsers,t)},Helper.showWarningBrowser=function(t,a){var e=void 0===t?Helper.alertMag:t,i=void 0===a?document.body:a,s=document.createElement("div");s.parent=i,s.classList.toggle("tch-divAlert",!0);var r=document.createElement("span");r.classList.toggle("tch-spanAlert",!0),r.innerHTML=e,s.appendChild(r),s.addEventListener("click",function(t){Helper.removeAlert(t.target)}),i.appendChild(s)},Helper.removeAlert=function(t){(t=t||this).parent.removeChild(t)},Helper.validBrowsers={opera:"43.0",edge:"14.14393",chrome:"56.0.2924.87",safari:"9.1.3",firefox:"51.0.1"},Helper.alertMag="<p>Отображение и работа графика могут быть не верными в текущей версии браузера.</p><span>Кликните, чтобы продолжить.</span>"},"./src/scripts/Libs/LibCanvas.js":function(t,a,e){"use strict";function LibCanvas(){}e.d(a,"a",function(){return LibCanvas}),LibCanvas.measureText=function(t,a,e){var i=t.font;t.font=a;var s=t.measureText(e);return t.font=i,s},LibCanvas.getPosition=function(t,a){var e=Math.round(2*t)/2,i=e%1;return a%2===0&&.5===i?e-=.5:a%2!==0&&0===i&&(e-=.5),e},LibCanvas.clearRect=function(t,a,e,i,s,r){if(t||a){var n=a||t.getContext("2d");n&&n.clearRect(e,i,s,r)}},LibCanvas.drawLine=function(t,a,e,i,s,r,n,o,h,c){if(t||a){var l,d=a||t.getContext("2d");d&&(o&&d.setLineDash&&d.setLineDash(o),h&&(l=d.lineWidth,d.lineWidth=h),c&&(d.globalAlpha=c),d.beginPath(),d.moveTo(e,i),d.lineTo(s,r),d.strokeStyle=n,d.stroke(),o&&d.setLineDash,h&&(d.lineWidth=l),c&&(d.globalAlpha=1))}},LibCanvas.drawArc=function(t,a,e,i,s,r,n,o,h,c,l,d){if(t||a){var p=a||t.getContext("2d");p&&(h&&p.setLineDash&&p.setLineDash(h),s*=Math.PI/180,r=-r*(Math.PI/180),p.beginPath(),p.arc(e,i,n,s,r,d),p.lineWidth=c,p.stroke())}},LibCanvas.drawEllipse=function(t,a,e,i,s,r,n,o,h,c,l,d,p,u,g){if(t||a){var D,f=a||t.getContext("2d");f&&(g&&f.setLineDash&&f.setLineDash(g),f.globalAlpha=u||1,l&&(f.fillStyle=l),p&&(f.strokeStyle=p),d&&(D=f.strokeWidth,f.lineWidth=d),f.beginPath(),f.ellipse(e,i,s,r,n,o,h,c),f.stroke(),f.fill(),d&&(f.lineWidth=D))}},LibCanvas.drawRectangle=function(t,a,e,i,s,r,n,o,h){if(t||a){var c,l=a||t.getContext("2d");l&&(h&&(c=l.lineWidth,l.lineWidth=h),n&&(l.fillStyle=n,"transparent"==n?l.clearRect(e,i,s,r):l.fillRect(e,i,s,r)),o&&(l.strokeStyle=o,l.strokeRect(e,i,s,r)),h&&(l.lineWidth=c))}},LibCanvas.drawRoundedRectangleWithBorderStyle=function(t,a,e,i,s,r,n,o,h,c){if(t||a){var l,d=a||t.getContext("2d");d&&c&&(l=d.lineWidth,d.lineWidth=c);var p=e+s,u=i+r;r<5&&(n=0),d.beginPath(),d.strokeStyle=h,d.lineWidth=c,d.moveTo(e+n,i),d.lineTo(p-n,i),d.quadraticCurveTo(p,i,p,i+n),d.lineTo(p,i+r-n),d.quadraticCurveTo(p,u,p-n,u),d.lineTo(e+n,u),d.quadraticCurveTo(e,u,e,u-n),d.lineTo(e,i+n),d.quadraticCurveTo(e,i,e+n,i),o&&(d.fillStyle=o,d.fill()),d.stroke(),c&&(d.lineWidth=l)}},LibCanvas.drawGradient=function(t,a,e,i,s,r,n){if(t||a){var o=a||t.getContext("2d");if(o){var h=o.createLinearGradient(e,e,r,s);h.addColorStop(0,"rgba(0,0,0,0)"),h.addColorStop(1,n),o.fillStyle=h,o.fillRect(i,e,s,r)}}},LibCanvas.drawRectangleRound=function(t,a,e,i,s,r,n,o,h){if(t||a){var c=a||t.getContext("2d");c&&(c.beginPath(),c.moveTo(e,i),c.lineTo(e+s,i),c.quadraticCurveTo(e+s+n,i,e+s+n,i+n),c.lineTo(e+s+n,i+n+r),c.quadraticCurveTo(e+s+n,i+2*n+r,e+s,i+2*n+r),c.lineTo(e,i+2*n+r),c.quadraticCurveTo(e-n,i+2*n+r,e-n,i+n+r),c.lineTo(e-n,i+n),c.quadraticCurveTo(e-n,i,e,i),c.strokeStyle=h,c.fillStyle=o,h&&(c.strokeStyle=h),c.stroke(),o&&(c.fillStyle=o,c.fill()))}},LibCanvas.drawQuadraticCurve=function(t,a,e,i,s,r,n,o,h,c,l){if(t||a){var d,p=a||t.getContext("2d");p&&(p.globalAlpha=c||1,l&&p.setLineDash&&p.setLineDash(l),h&&(d=p.lineWidth,p.lineWidth=h),o&&(p.strokeStyle=o),n&&(p.fillStyle=n),p.beginPath(),p.moveTo(e.x,e.y),p.quadraticCurveTo(i.x,i.y,s.x,s.y),p.stroke(),p.fill(),h&&(p.lineWidth=d))}},LibCanvas.drawText=function(t,a,e,i,s,r,n){if(t||a){var o=a||t.getContext("2d");o&&(o.font=r,o.fillStyle=n,o.fillText(s,e,i))}},LibCanvas.drawPolygon=function(t,a,e,i,s,r,n,o,h,c){if(!(e.length<2||!i&&!s)&&(t||a)){var l=a||t.getContext("2d");if(l){var d;i&&(l.fillStyle=i),s&&(null!==n&&(d=l.lineWidth,l.lineWidth=n),l.strokeStyle=s),c&&l.setLineDash&&l.setLineDash(c),l.beginPath(),l.moveTo(e[0][0],e[0][1]),o=void 0==o?e.length:Math.min(e.length,o);for(var p=1;p<o;++p)l.lineTo(e[p][0],e[p][1]);void 0!=r&&!0!==r||l.closePath(),h&&(l.globalAlpha=h),i&&l.fill(),l.globalAlpha=1,s&&(l.stroke(),null!==n&&(l.lineWidth=d))}}},LibCanvas.inCircle=function(t,a,e){return Math.hypot(e.x-t,e.y-a)<=e.radius},LibCanvas.inRect=function(t,a,e,i,s,r){var n=Math.min(e,s),o=Math.max(e,s),h=Math.min(i,r),c=Math.max(i,r);return t>=n&&t<=o&&a>=h&&a<=c},LibCanvas.inTriangle=function(t,a,e){function sign(t,a,e){return(t[0]-e[0])*(a[1]-e[1])-(a[0]-e[0])*(t[1]-e[1])}var i=[t,a],s=sign(i,e[0],e[1])<0,r=sign(i,e[1],e[2])<0,n=sign(i,e[2],e[0])<0;return s==r&&r==n},LibCanvas.drawCircle=function(t,a,e,i,s,r,n,o,h){if(t||a){var c=a||t.getContext("2d");c&&(h&&(c.globalAlpha=h),c.setLineDash([0,0]),c.beginPath(),c.arc(e,i,s,0,2*Math.PI,!1),c.fillStyle=n,c.fill(),r&&(c.lineWidth=r,c.strokeStyle=o||n,c.stroke()),h&&(c.globalAlpha=1))}},LibCanvas.createImage=function(t){if(!t)return!1;var a=new Image;return a.src=t,a},LibCanvas.drawImage=function(t,a,e,i,s,r,n,o){if(isNaN(e)||isNaN(i)||!s)return!1;if(t||a){var h=a||t.getContext("2d");if(h)if(r)void 0!=n&&void 0!=o?h.drawImage(r,e,i,n,o):h.drawImage(r,e,i);else{var c=new Image;c.onload=function(){void 0!=n&&void 0!=o?h.drawImage(c,e,i,n,o):h.drawImage(c,e,i)},c.src=s}}},LibCanvas.setClip=function(t,a,e,i,s,r){if(t||a){var n,o=a||t.getContext("2d");o&&(n=o.lineWidth,o.lineWidth=0,o.rect(e,i,s,r),o.stroke(),o.clip(),o.lineWidth=n)}},LibCanvas.drawLinearGradient=function(t,a,e,i,s,r,n,o,h,c,l,d){if(t||a){var p=a||t.getContext("2d"),u=p.createLinearGradient(e,i,s,r);u.addColorStop(0,l),u.addColorStop(1,d),p.fillStyle=u,p.fillRect(n,o,h,c)}},LibCanvas.drawArrow=function(t,a,e,i,s,r,n,o,h,c,l,d){if(t||a){var p,u=a||t.getContext("2d");h&&u.setLineDash&&u.setLineDash(h),o&&(u.strokeStyle=o),n&&(u.fillStyle=n),c&&(u.lineWidth=c),l&&(u.globalAlpha=l),u.beginPath(),u.lineWidth=1,u.moveTo(e,i-1),u.lineTo(s,r-1),u.lineTo(s,r+1),u.lineTo(e,i+1),u.closePath(),u.stroke(),u.fill(),p=Math.atan((r-i)/(s-e)),p+=(s>e?90:-90)*Math.PI/180,function drawArrowHead(){u.save(),u.beginPath(),u.translate(s,r),u.rotate(p),u.moveTo(0,0),u.lineTo(6,15),d?(u.lineTo(-6,15),u.closePath(),u.fill(),u.strokeStyle=o,u.lineWidth=.5,u.stroke()):(u.moveTo(0,0),u.lineTo(-6,15),u.stroke()),u.restore()}()}},LibCanvas.setShadow=function(t,a,e,i,s,r){if(t||a){var n=a||t.getContext("2d");n.shadowBlur=i||0,n.shadowColor=e||"#0000",n.shadowOffsetX=s||0,n.shadowOffsetY=r||0}}},"./src/scripts/Libs/MoveLib.js":function(t,a,e){"use strict";function DragObject(t){var a;t.dragObject=this,this.parent=t,this.forTrget=t.classList.contains("tch-move-tools"),this.maxLeft,this.maxTop,this.minLeft,this.minTop,this.fixPos={top:!1,right:!1,bottom:!1,left:!1},this.fixMinMax={top:!1,right:!1,bottom:!1,left:!1},this.geom={},this.reCalculationSize(),this.bodyTop=document.body.getBoundingClientRect().top,this.bord={},this.s=t.style,i.makeDraggable(t);var e,s={opacity:".3",boxShadow:""},r={};this.onDragStart=function(t){a={top:this.s.top,left:this.s.left,position:this.s.position},this.s.position="absolute",this.upStyle(),this.minLeft=parseFloat(getComputedStyle(this.parent).left)-this.parent.getBoundingClientRect().left,this.minTop=parseFloat(getComputedStyle(this.parent).top)-this.parent.getBoundingClientRect().top-window.scrollY,this.maxLeft=document.documentElement.clientWidth-(this.geom.borderLeftWidth+this.geom.borderRightWidth)+this.minLeft-this.geom.width,this.maxTop=document.documentElement.clientHeight-(this.geom.borderTopWidth+this.geom.borderBottomWidth)+this.minTop-this.geom.height,e=t},this.hide=function(){t.style.display="none"},this.show=function(){t.style.display=""},this.onDragMove=function(a,i,s){var r={};parseFloat(t.style.left),i=a.pageX-e.x,s=a.pageY-e.y,this.minLeft>=i?(r.left=r.right=this.minLeft,this.fixMinMax.left=!0):this.maxLeft<=i?(r.left=r.right=this.maxLeft,this.fixMinMax.right=!0):(r.left=r.right=i,this.fixMinMax.left=!1,this.fixMinMax.right=!1),this.minTop>=s?(r.top=r.bottom=this.minTop,this.fixMinMax.top=!0):this.maxTop<=a.pageY+this.minTop?(r.top=r.bottom=this.maxTop,this.fixMinMax.bottom=!0):(r.top=r.bottom=s-window.scrollY,this.fixMinMax.top=!1,this.fixMinMax.bottom=!1),t.style.top=r.top+"px",t.style.left=r.left+"px";var n=this.lipnetOF(r);0!=Object.keys(n).length?this.lipShow(n,t):(t.style.boxShadow="",t.classList.toggle("tch-border",!1))},this.onDragSuccess=function(){},this.onDragFail=function(){this.s.top=a.top,this.s.left=a.left,this.s.position=a.position},this.toString=function(){return t.id},this.lipnetOF=function(t){var a={};return this.bord.bottom+this.deltaLip>t.top&&this.bord.top-this.deltaLip<t.top&&(this.bord.left-this.deltaLip<t.left&&this.bord.left+this.deltaLip>t.left&&(a.left=this.bord.left-t.left),this.bord.right-this.deltaLip<t.right&&this.bord.right+this.deltaLip>t.right&&(a.right=this.bord.right-t.right)),this.bord.right+this.deltaLip>t.left&&this.bord.left-this.deltaLip<t.left&&(this.bord.top-this.deltaLip<t.top&&this.bord.top+this.deltaLip>t.top&&(a.top=this.bord.top-t.top),this.bord.bottom-this.deltaLip<t.bottom&&this.bord.bottom+this.deltaLip>t.bottom&&(a.bottom=this.bord.bottom-t.bottom)),a},this.lipShow=function(t,a){var e=t.hasOwnProperty("top")?t.top:0+t.hasOwnProperty("bottom")?t.bottom:0,i=t.hasOwnProperty("left")?t.left:0+t.hasOwnProperty("right")?t.right:0;a.style.boxShadow="rgba(0, 0, 0, .35) 0px 0px 10px 5px, "+i+"px "+e+"px 0px -1px rgba(200, 200, 200, .8), "+i+"px "+e+"px 5px 5px red",a.classList.toggle("tch-border",!0)},this.upStyle=function(){for(var t in s)s.hasOwnProperty(t)&&(r[t]=this.s[t],this.s[t]=s[t])},this.downStyle=function(){for(var t in s)s.hasOwnProperty(t)&&(this.s[t]=r[t]);this.s.opacity=1,this.boxShadow="",this.parent.classList.toggle("tch-border",!1),this.rememberStyle={}},this.downLip=function(){var t=parseFloat(""===this.s.left?getComputedStyle(this.parent).left:this.s.left),a=parseFloat(""===this.s.top?getComputedStyle(this.parent).top:this.s.top);for(var e in this.fixPos)this.fixPos.hasOwnProperty(e)&&(this.fixPos[e]=!1);this.bord.bottom+this.deltaLip>a&&this.bord.top-this.deltaLip<a&&(Math.abs(this.bord.left-t)<this.deltaLip&&(this.s.left=this.bord.left+"px",this.fixPos.left=!0),Math.abs(this.bord.right-t)<this.deltaLip&&(this.s.left=this.bord.right+"px",this.fixPos.right=!0)),this.bord.right+this.deltaLip>t&&this.bord.left-this.deltaLip<t&&(Math.abs(this.bord.top-a)<this.deltaLip&&(this.s.top=this.bord.top+"px",this.fixPos.top=!0),Math.abs(this.bord.bottom-a)<this.deltaLip&&(this.s.top=this.bord.bottom+"px",this.fixPos.bottom=!0))},this.changeContainer=function(){}}function DropTarget(t,a){t.dropTarget=this,this.classNameBar=a+"OK",this.canAccept=function(){return!0},this.accept=function(t,a){this.onLeave(a,!0)},this.onLeave=function(a,e){t.classList.toggle(this.classOK,!1),a.classList.toggle(this.classNameBar,!1),e&&this.stuck(t,a)},this.stuck=function(t,a){var e=t.getBoundingClientRect().top,i=t.getBoundingClientRect().left;a.classList.toggle(this.classNameBar,!0),a.style.top=e,a.style.left=i},this.onEnter=function(a){a.classList.toggle(this.classNameBar,!0),t.classList.toggle(this.classOK,!0)},this.toString=function(){return t.id}}function fixEvent(t){var a=t||window.event;if(null===a.pageX&&null!==a.clientX){var e=document.documentElement,i=document.body;a.pageX=a.clientX+(e&&e.scrollLeft||i&&i.scrollLeft||0)-(e.clientLeft||0),a.pageY=a.clientY+(e&&e.scrollTop||i&&i.scrollTop||0)-(e.clientTop||0)}return!a.which&&a.button&&(a.which=1&a.button?1:2&a.button?3:4&a.button?2:0),a}e.d(a,"c",function(){return i}),e.d(a,"a",function(){return DragObject}),e.d(a,"b",function(){return s});var i=function(){function mouseDown(t){return i.pressed=!0,1!==(t=fixEvent(t)).which&&0!==t.which||(a={x:t.pageX,y:t.pageY,element:this},function addDocumentEventHandlers(){document.onmousemove=mouseMove,document.onmouseup=mouseUp,document.ondragstart=document.body.onselectstart=function(){return!1}}()),!1}function mouseMove(i){if(i=fixEvent(i),a){if(Math.abs(a.x-i.pageX)<5&&Math.abs(a.y-i.pageY)<5)return!1;var r=a.element;e=r,t=r.dragObject;var n=function getMouseOffset(t,a,e){var i=function getOffset(t){return t.getBoundingClientRect?function getOffsetRect(t){var a=getComputedStyle(t),e=(t.getBoundingClientRect(),document.body),i=document.documentElement,s=window.pageYOffset||i.scrollTop||e.scrollTop,r=window.pageXOffset||i.scrollLeft||e.scrollLeft,n=i.clientTop||e.clientTop||0,o=i.clientLeft||e.clientLeft||0,h=parseFloat(a.top)+s-n,c=parseFloat(a.left)+r-o;return{top:Math.round(h),left:Math.round(c)}}(t):function getOffsetSum(t){for(var a=0,e=0;t;)a+=parseInt(t.offsetTop),e+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:a,left:e}}(t)}(t);return{x:a-i.left,y:e-i.top}}(r,a.x,a.y,t.bodyTop);a=null,t.onDragStart(n)}if(t.onDragMove(i,i.pageX,i.pageY),t.forTrget)var o=function getCurrentTarget(a){if(navigator.userAgent.match("MSIE")||navigator.userAgent.match("Gecko"))var e=a.clientX,i=a.clientY;else e=a.pageX,i=a.pageY;t.hide();var s=document.elementFromPoint(e,i);for(t.show();s;){if(s.dropTarget&&s.dropTarget.canAccept(t))return s.dropTarget;s=s.parentNode}return null}(i);return s!=o&&(s&&s.onLeave(e),o&&o.onEnter(e),s=o),!1}function mouseUp(){i.pressed=!1,t?(s&&(s.accept(t,e),t.onDragSuccess(s,e)),t.downLip(),t.downStyle(),t=null):a=null,function removeDocumentEventHandlers(){document.onmousemove=document.onmouseup=document.ondragstart=document.body.onselectstart=null}(),i.pressed=!1}var t,a,e,s;return{makeDraggable:function makeDraggable(t){t.onmousedown=mouseDown}}}(),s=function MoveLib(){var t=this;this.DragObjects=[],this.dropTargetContainer={},window.addEventListener("resize",function(){t.moveResize()}),this.addDragObject=function(t,a){this.DragObjects.push(new DragObject(t,a))},this.setContainer=function(t){this.dropTargetContainer=t,this.setBords()},this.setBords=function(){this.DragObjects.forEach(function(a){a.setBord(t.dropTargetContainer)})},this.addToolBarTop=function(t){new DropTarget(t,"tch-move-toolbarTop")},this.addToolBarLeft=function(){new DropTarget(toolbarLeft,"tch-move-toolbarLeft")},this.moveResize=function(t){this.DragObjects.forEach(function(a){a.moveForResize(t)})},this.resizeDragObjects=function(){this.DragObjects.forEach(function(t){t.reCalculationSize()}),this.setBords(this.dropTargetContainer)}};DragObject.prototype.deltaLip=15,DropTarget.prototype.classTargetOK="tch-uponMe",DragObject.prototype.setBord=function(t){this.downLip(),this.bord.left=t.left,this.bord.top=t.top,this.bord.right=t.right-this.geom.width,this.bord.bottom=t.bottom-this.geom.height,this.moveForSetBord()},DragObject.prototype.reCalculationSize=function(){this.geom.width=this.parent.getBoundingClientRect().width,this.geom.height=this.parent.getBoundingClientRect().height,this.geom.borderTopWidth=parseFloat(getComputedStyle(this.parent).borderTopWidth),this.geom.borderLeftWidth=parseFloat(getComputedStyle(this.parent).borderLeftWidth),this.geom.borderBottomWidth=parseFloat(getComputedStyle(this.parent).borderBottomWidth),this.geom.borderRightWidth=parseFloat(getComputedStyle(this.parent).borderRightWidth)},DragObject.prototype.moveForSetBord=function(){this.fixPos.top&&(this.s.top=this.bord.top+"px"),this.fixPos.right&&(this.s.left=this.bord.right+"px"),this.fixPos.bottom&&(this.s.top=this.bord.bottom+"px"),this.fixPos.left&&(this.s.left=this.bord.left+"px")},DragObject.prototype.moveForResize=function(t){var a=t?t.top:0,e=t?t.left:0;this.minLeft=parseFloat(getComputedStyle(this.parent).left)-this.parent.getBoundingClientRect().left,this.minTop=parseFloat(getComputedStyle(this.parent).top)-this.parent.getBoundingClientRect().top,this.maxLeft=document.documentElement.clientWidth-(this.geom.borderLeftWidth+this.geom.borderRightWidth)+this.minLeft-this.geom.width,this.maxTop=document.documentElement.clientHeight-(this.geom.borderTopWidth+this.geom.borderBottomWidth)+this.minTop-this.geom.height,this.fixMinMax.top&&(this.s.top=this.minTop+"px"),this.fixMinMax.right&&(this.s.left=this.maxLeft+"px"),this.fixMinMax.bottom&&(this.s.top=this.maxTop+"px"),this.fixMinMax.left&&(this.s.left=this.minLeft+"px"),!t||this.fixPos.top||this.fixPos.bottom||(this.s.top=parseFloat(this.s.top)-a+"px"),!t||this.fixPos.right||this.fixPos.left||(this.s.left=parseFloat(this.s.left)-e+"px")},s.prototype.FunctionOnBrouse={Opera:{},ie:{},edge:{},chrome:{},safari:{},firefox:{},unknown:{}},s.prototype.ForBrouse=s.prototype.FunctionOnBrouse[function detectBrouse(){return-1!==navigator.userAgent.indexOf("Opera")||-1!==navigator.userAgent.indexOf("OPR")?"opera":-1!==navigator.userAgent.indexOf("MSIE")||document.documentMode?"ie":window.StyleMedia?"edge":-1!==navigator.userAgent.indexOf("Chrome")?"chrome":-1!==navigator.userAgent.indexOf("Safari")?"safari":-1!==navigator.userAgent.indexOf("Firefox")?"firefox":"unknown"}()]},"./src/scripts/News/Bubble.js":function(t,a,e){"use strict";function NewsBubble(){arguments&&arguments.length&&Bubble.apply(this,arguments),this.text="N",this.type="NewsBubble",this.showBubble=this.show,this.show=function(t){this.showBubble(t),this.divBubble.classList.toggle("tch-news-bubbles",!0)},this.getMaxItemsDate=function(){return Bubble.getDateNewsBubble(this.items[0])},this.getMinItemsDate=function(){return Bubble.getDateNewsBubble(this.items[this.items.length-1])}}function EventsBubble(){arguments&&arguments.length&&Bubble.apply(this,arguments),this.text="E",this.type="EventsBubble",this.showBubble=this.show,this.show=function(t){this.showBubble(t),this.divBubble.classList.toggle("tch-events-bubbles",!0)},this.getPositionTop=function(){return parseFloat(this.point.y)-4.5*this.radius-this.cY},this.getMaxItemsDate=function(){return Bubble.getDateEventsBubble(this.items[0])},this.getMinItemsDate=function(){return Bubble.getDateEventsBubble(this.items[this.items.length-1])}}function Bubble(t,a){this.chartData=t,this.items=a.items,this.id=a.id,this.parent=null,this.divBubble=null,this.date=a.date,this.value=a.value,this.point=a.point,this.cY=15,this.radius=8,this.fontSize=14,this.currentPageIndex=0,this.currentPage=1,this.candleWidth=this.chartData.candleWidth,this.tooltip=null}NewsBubble.prototype=Object.create(Bubble.prototype),NewsBubble.prototype.constructor=NewsBubble;var i=e("./src/scripts/Drawing/LibDrawing.js");EventsBubble.prototype=Object.create(Bubble.prototype),EventsBubble.prototype.constructor=EventsBubble,e.d(a,"a",function(){return Bubble}),Bubble.currentId=0,Bubble.prototype.isFocused=function(t,a){var e=this.getPositionLeft(),s=this.getPositionTop(),r=2*this.radius,n={x1:e,x2:e+r,y1:s,y2:s+r};return i.a.isPointInRect(n,{x:t,y:a},5)},Bubble.prototype.moveBubbleX=function(t){this.point.x-=t,this.divBubble.style.left=this.getPositionLeft()+"px",this.chartData.options.Chart.autoScale&&(this.updatePixelsY(),this.divBubble.style.top=this.getPositionTop()+"px")},Bubble.prototype.moveBubbleY=function(t){this.point.y-=t,this.divBubble.style.top=this.getPositionTop()+"px"},Bubble.prototype.show=function(t){this.parent=t,this.divBubble=document.createElement("div"),this.divBubble.classList.toggle("tch-bubble-id-"+this.id,!0),this.divBubble.classList.toggle("tch-bubbles",!0);var a=document.createElement("span");a.textContent=this.text,this.setParams(),this.resize(this.candleWidth),this.divBubble.appendChild(a),this.parent.appendChild(this.divBubble)},Bubble.prototype.remove=function(){return this.removeTooltip(),this.parent.removeChild(this.divBubble),this},Bubble.prototype.updatePixels=function(){this.updatePixelsY(),this.updatePixelsX()},Bubble.prototype.updatePixelsY=function(){this.point.y=this.chartData.chart.toYPixels(this.value)},Bubble.prototype.updatePixelsX=function(){this.point.x=this.chartData.chart.toXPixels(this.date)},Bubble.getBubbles=function(t,a,e,i,s){if(!t.chart||!t.chart.showData||0===t.chart.showData.length)return[];i=i||t.chart.showData[t.chart.showData.length-1].date,s=s||t.chart.showData[0].date;var r=Bubble.selectItems(i,s,a,e),n=Bubble.convertToBubbles(r,t,e);return this.combineBubbles(n)},Bubble.prototype.fixPosition=function(){var t=this.chartData.chart,a=t.binarySearhElementWithField(t.showData,parseFloat(this.point.x),"x"),e=t.showData[a]?t.showData[a]:t.showData[0];this.point.x=e.x,this.point.y=t.toYPixels(e.high),this.value=e.high,this.date=e.date},Bubble.selectItems=function(t,a,e,i){for(var s=[],r=0;r<e.length;r++){var n=Bubble["getDate"+i](e[r]);if(n>t&&n<a)s.push(e[r]);else if(n<t)break}return s},Bubble.getDateNewsBubble=function(t){return t.PublishDate},Bubble.getDateEventsBubble=function(t){var a=t.DateTime.Year,e=t.DateTime.Month-1,i=t.DateTime.Day,s=t.DateTime.Hour,r=t.DateTime.Minute,n=t.DateTime.Second;return Date.UTC(a,e,i,s,r,n)/1e3},Bubble.convertToBubbles=function(t,a,e){if(0===t.length)return[];for(var i=a.chart.showData,s=[],r=0,n="getDate"+e,o=0;o<i.length;o++){for(var h=[];t[r]&&Bubble[n](t[r])>=i[o].date;)h.push(t[r++]);if(h.length){var c=Bubble.createBubble(i[o],a,h,e);s.push(c)}}return s},Bubble.createBubble=function(t,a,e,i){var s={date:t.date,value:t.high,items:e,point:{x:t.x,y:a.chart.toYPixels(t.high)},id:Bubble.getId()};switch(i){case"NewsBubble":return new NewsBubble(a,s);case"EventsBubble":return new EventsBubble(a,s);default:return new Bubble(a,s)}},Bubble.combineBubbles=function(t){if(t&&0===t.length)return[];for(var a=[],e=0;e<t.length;e++)a[a.length-1]&&Bubble.isTouch(a[a.length-1],t[e])?a[a.length-1].items=a[a.length-1].items.concat(t[e].items):a.push(t[e]);for(var i=0;i<a.length;i++)a[i].fixPosition();return a},Bubble.sortItemsByDate=function(t){return t.sort(function(t,a){return a.date-t.date})},Bubble.isTouch=function(t,a){return Math.abs(parseFloat(t.point.x)-parseFloat(a.point.x))<=t.radius+a.radius},Bubble.deleteRedundantBubblesLeftRight=function(t,a,e){Bubble.deleteRedundantBubblesFromRight(t,e),Bubble.deleteRedundantBubblesFromLeft(t,a)},Bubble.deleteRedundantBubblesFromRight=function(t,a){for(;t.length&&parseInt(t[0].point.x)>a;)t[0].remove(),t.splice(0,1)},Bubble.deleteRedundantBubblesFromLeft=function(t,a){for(;t.length&&parseInt(t[t.length-1].point.x)<a;)t[t.length-1].remove(),t.splice(t.length-1,1)},Bubble.prototype.resize=function(t){this.cY=3*t,this.radius=this.getRadius(t),this.divBubble.style.left=this.getPositionLeft()+"px",this.divBubble.style.top=this.getPositionTop()+"px";var a=2*this.radius;this.divBubble.style.width=a+"px",this.divBubble.style.height=a+"px",this.divBubble.style.fontSize=1.8*this.radius+"px"},Bubble.prototype.hideTooltip=function(){this.tooltip.mouseLeaveParentDiv()},Bubble.prototype.removeTooltip=function(){this.tooltip&&this.tooltip.remove()},Bubble.prototype.getPositionLeft=function(){return parseFloat(this.point.x)-this.radius},Bubble.prototype.getPositionTop=function(){return parseFloat(this.point.y)-1.5*this.radius-this.cY},Bubble.prototype.setParams=function(){this.divBubble.style.left=this.getPositionLeft()+"px",this.divBubble.style.top=this.getPositionTop()+"px";var t=2*this.radius;this.divBubble.style.width=t+"px",this.divBubble.style.height=t+"px",this.divBubble.style.fontSize=1.8*this.radius+"px"},Bubble.prototype.getRadius=function(t){var a=.6*t;return a<9?9:a},Bubble.getId=function(){return Bubble.currentId++}},"./src/scripts/TechnicalChart/TechnicalChartConstructor.js":function(t,a,e){"use strict";e.r(a),e.d(a,"default",function(){return D});var i=e("./node_modules/@babel/runtime/helpers/objectSpread.js"),s=e.n(i),r=e("./node_modules/@babel/runtime/helpers/classCallCheck.js"),n=e.n(r),o=e("./node_modules/@babel/runtime/helpers/createClass.js"),h=e.n(o),c=e("./src/scripts/Config/config.js"),l=e("./src/scripts/Config/styles.js"),d=e("./src/scripts/Config/Languages/languages.js"),p=e("./src/scripts/Connector/ConnectorTest.js"),u=e("./src/scripts/Connector/ConnectorWidgets.js"),g=(e("./src/scripts/preBuild/ChartData.js"),e("./src/scripts/Libs/Helper.js"),e("./src/scripts/Libs/ColorPicker.js"),e("./src/scripts/Libs/MoveLib.js"),e("./src/scripts/ChartTypes/CandleChart.js"),e("./src/scripts/ChartTypes/AreaChart.js"),e("./src/scripts/ChartTypes/LineChart.js"),e("./src/scripts/ChartTypes/BarChart.js"),e("./src/scripts/ChartTypes/HollowCandleChart.js"),e("./src/scripts/Indicators/Indicator.js"),e("./src/scripts/Drawing/Roulete.js"),e("./src/scripts/utils/utils.js")),D=(e("./node_modules/whatwg-fetch/fetch.js"),e("./src/styles/common.less"),function(){function TechnicalChart(t,a){n()(this,TechnicalChart),t.container&&(this.store=this.getStore(),this.defaultAllConfiguration=this.getDefaultAllConfiguration(),this.mappingConfiguration(t),a&&Object.keys(a).length?this.connectorInstance=a:this.connectorInstance=this.createConnector(this.configuration.connectorOptions.type,this.configuration),this.parent=this.createParent(t.container,t.id),this.chartTypes=Object(g.c)(this.configuration.dropDown.chartTypes,{candle:"Candles",area:"Area",line:"Line",bar:"Bars",hollow:"Hollow Candles"}),this.typeData={ask:"Ask",bid:"Bid",mid:"Middle"},this.tChartDefaultParams={activeSpliter:this.config.defaultParams.activeSpliter,activeChartIndex:this.config.defaultParams.activeChartIndex,cursorType:this.config.defaultParams.cursorType,setTimeoutforSave:this.config.defaultParams.setTimeoutforSave,paramsPanels:this.config.defaultParams.paramsPanels,version:this.config.defaultParams.version},this.dropForHidden=[],this.activeMenuContainer=[],this.arrowForHidden=[],this.changedGlobalSettings={},this.settings={},this.chartsContainerRect={},this.chartsOff=6,this.charts=[],this.activeSpliter=this.tChartDefaultParams.activeSpliter,this.cursorType=this.tChartDefaultParams.cursorType,this.activeChartIndex=this.tChartDefaultParams.activeChartIndex,this.autoSaveTimeout=null,this.chartsArray=[],this.groupCharts={},this.activeTab="",this.canAddTab=!0,this.maxTabsQuantity=this.config.tabsQuantity,this.priceOffset=6,this.signalsList=[],this.defaultTopDataPanel=this.config.defaultTopPositionDataWindowOnChart,this.defaultLeftDataPanel=10,this.isNoOptions=!1,this.sideBarListItemps=[])}return h()(TechnicalChart,[{key:"translation",get:function get(){return this.currentLanguage}},{key:"configuration",get:function get(){return this.config}},{key:"connector",get:function get(){return this.connectorInstance}},{key:"defaultParams",get:function get(){return this.tChartDefaultParams}},{key:"styles",get:function get(){return this.allStyles}}]),TechnicalChart}());D.prototype.createParent=function(t,a){var e=t.firstElementChild,i=document.createElement("div");return i.setAttribute("class","widget-container tch-technical-chart-container-".concat(a)),t.insertBefore(i,e),i},D.prototype.mappingConfiguration=function(t){t.id&&this.store.setID(t.id);var a=JSON.parse(localStorage.getItem(this.getKeyForLocalStorage())),e=a?a.params:this.defaultAllConfiguration.config,i=t.config?t.config:{},s=Object(g.d)(e,i);if(this.config=Object(g.a)(s),t&&t.styles&&Object.keys(t.styles).length){var r=Object(g.d)(this.defaultAllConfiguration.styles,t.styles);this.store.setIsExternalStyle(!0),this.allStyles=r}else this.store.setIsExternalStyle(!1),this.allStyles=this.defaultAllConfiguration.styles;t&&t.translate&&Object.keys(t.translate).length?this.translate=t.translate:this.translate=this.defaultAllConfiguration.translate,this.currentLanguage=this.translate[this.config.lang]},D.prototype.chartHeaderMenus=function(){var t={candle:this.translation.candle,area:this.translation.area,line:this.translation.line,bar:this.translation.bar,hollow:this.translation.hollow};return Object(g.c)(this.configuration.dropDown.chartTypes,t)},D.prototype.sideBarMenus=function(){return{cursorType:this.configuration.modules.sideBarButtons.cursorTypeButton?{arrow:this.translation.arrow,dot:this.translation.dot,cross:this.translation.cross}:null,lineType:this.configuration.modules.sideBarButtons.drawingObjectsButton?{drawingVerticalLine:this.translation["vertical-line"],drawingHorizontalLine:this.translation["horizontal-line"],drawingTrendLine:this.translation["trend-line"],drawingTrendAngle:this.translation["trend-angle"],drawingHorizontalRay:this.translation["horizontal-ray"],drawingArrow:this.translation.arrow,drawingRay:this.translation.ray,drawingParallelChannel:this.translation["parallel-channel"],drawingDisjointAngle:this.translation["disjoint-angle"],drawingFlatTopBottom:this.translation["flat-top/bottom"]}:null,brushType:this.configuration.modules.sideBarButtons.brushTypeButton?{drawingBrush:this.translation.brush,drawingRectangle:this.translation.rectangle,drawingRotatedRect:this.translation["rotated-rectangle"],drawingEllipse:this.translation.ellipse,drawingTriangle:this.translation.triangle,drawingPolyline:this.translation.polyline,drawingCurve:this.translation.curve,drawingArc:this.translation.arc}:null,textType:this.configuration.modules.sideBarButtons.textTypeButton?{drawingText:this.translation.text,drawingAnchoredText:this.translation["anchored-text"],drawingArrowMarkLeft:this.translation["arrow-mark-left"],drawingArrowMarkRight:this.translation["arrow-mark-right"],drawingArrowMarkUp:this.translation["arrow-mark-up"],drawingArrowMarkDown:this.translation["arrow-mark-down"],drawingFlag:this.translation.flag,drawingNote:this.translation.note,drawingAnchoredNote:this.translation["anchored-note"]}:null}},D.prototype.typeDatas=function(){var t={bid:{key:"bid",value:"bid",text:this.translation.bid},ask:{key:"ask",value:"ask",text:this.translation.ask},mid:{key:"mid",value:"mid",text:this.translation.mid}};return Object(g.c)(this.config.dropDown.typeDatas,t)},D.prototype.periods=function(){var t={Minute:{key:"1-minute",value:"1",text:this.translation["1m"]},Minute5:{key:"5-minutes",value:"5",text:this.translation["5m"]},Minute15:{key:"15-minutes",value:"15",text:this.translation["15m"]},Minute30:{key:"30-minutes",value:"30",text:this.translation["30m"]},Hour:{key:"1-hour",value:"60",text:this.translation["1h"]},Hour4:{key:"4-hours",value:"Hour4",text:this.translation["4h"]},Hour8:{key:"8-hours",value:"Hour8",text:this.translation["8h"]},Day:{key:"1-day",value:"Day",text:this.translation["1D"]},Week:{key:"1-week",value:"Week",text:this.translation["1W"]},Month:{key:"1-month",value:"Month",text:this.translation["1M"]}};return Object(g.c)(this.config.dropDown.periods,t)},D.prototype.getPeriods=function(){return{1:{key:"1-minute",name:"1",value:"Minute",text:"1m"},5:{key:"5-minutes",name:"5",value:"Minute5",text:"5m"},15:{key:"15-minutes",name:"15",value:"Minute15",text:"15m"},30:{key:"30-minutes",name:"30",value:"Minute30",text:"30m"},60:{key:"1-hour",name:"60",value:"Hour",text:"1h"},Hour4:{key:"4-hours",name:"Hour4",value:"Hour4",text:"4h"},Hour8:{key:"8-hours",name:"Hour8",value:"Hour8",text:"8h"},Day:{key:"1-day",name:"Day",value:"Day",text:"1D"},Week:{key:"1-week",name:"Week",value:"Week",text:"1W"},Month:{key:"1-month",name:"Month",value:"Month",text:"1M"}}},D.prototype.spliterTemplates=function(){return[{count:1,template:[!1]},{count:2,template:[[!1,!1]]},{count:2,template:[!1,!1]},{count:3,template:[[!1,!1,!1]]},{count:3,template:[!1,!1,!1]},{count:3,template:[[[!1,!1],!1]]},{count:3,template:[!1,[!1,!1]]},{count:6,template:[[[!1,!1,!1],[!1,!1,!1]]]},{count:8,template:[[[!1,!1,!1,!1],[!1,!1,!1,!1]]]}]},D.prototype.createConnector=function(t,a){switch(t){case"test":return p.a.getInstance(a);case"widgets":return u.a.getInstance(a)}},D.prototype.getDefaultAllConfiguration=function(){return{config:s()({},Object(g.b)(Object(c.a)())),styles:s()({},Object(g.b)(l.a)),translate:s()({},Object(g.b)(d.a))}},D.prototype.getStore=function(){var t=null,a=null,e=null,i="",s=null;return{getChart:function getChart(){return t},getChartData:function getChartData(){return a},getChartDataInstance:function getChartDataInstance(){return e},getID:function getID(){return i},isExternalStyleState:function isExternalStyleState(){return s},setChart:function setChart(a){t=a},setChartData:function setChartData(t){a=t},setChartDataInstance:function setChartDataInstance(t){e=t},setIsExternalStyle:function setIsExternalStyle(t){s=t},setID:function setID(t){return i=t}}}},"./src/scripts/preBuild/Chart.js":function(t,a,e){"use strict";function Axis(t,a,e,i,s,r,n,o,h,c,l){this.value=t,this.x1=a,this.y1=e,this.x2=i,this.y2=s,this.lineClass=r,this.textX=parseFloat(n).toFixed(1),this.textY=parseFloat(o).toFixed(1),this.textClass=h,this.date=c,this.Mmmdd=l}function OscillatorChart(t,a,e){this.id=t,this.iniStr="<div class='tch-oscillator-data-panel'></div><canvas class='tch-chart-data-normal'></canvas><canvas class='tch-chart-data-pixelated'></canvas><div class='tch-chart-oscillator-rate-text-container'></div>",this.marginTop=20,this.marginBottom=20,this.dataPanelContainer,this.canvasDataNormal,this.canvasDataNormalContext,this.canvasDataPixelated,this.canvasDataPixelatedContext,this.scaleParams,this.chartData=a,this.w=e.w,this.h=e.h,this.top=e.top,this.name=e.name}function Tooltip(t,a){this.chartData=t,this.bubble=a.bubble,this.bubble.tooltip=this}function TooltipEvents(){Tooltip.apply(this,arguments),this.getParentDiv=function(){return this.chartData.chart.parent.querySelector(".tch-events-tooltip-container")},this.reAppend=function(){this.parentDiv.appendChild(this.headerDiv),this.headerDiv.appendChild(this.dateDiv),1!==this.data.length&&(this.spansDiv||(this.createSpansDiv(),this.createSpans(),this.setSpansClasses()),this.headerDiv.appendChild(this.spansDiv),this.spansDiv.appendChild(this.leftArrowSpan),this.spansDiv.appendChild(this.pagesSpan),this.spansDiv.appendChild(this.rightArrowSpan)),this.parentDiv.appendChild(this.bodyDiv)},this.createBodyDiv=function(){this.bodyDiv=document.createElement("div"),this.parentDiv.appendChild(this.bodyDiv),this.bodyDiv.classList.toggle("tch-tooltip-body",!0),this.bodyDiv.appendChild(this.createTitle()),this.infoEventsDiv=this.createInfoEventsDiv(),this.bodyDiv.appendChild(this.infoEventsDiv)},this.createTitle=function(){return this.titleDiv=document.createElement("div"),this.titleDiv.classList.toggle("tch-events-tooltip-title",!0),this.titleDiv.innerHTML=this.getTitleText(this.data[this.bubble.currentPageIndex]),this.titleDiv},this.getTitleText=function(){var t=this.data[this.bubble.currentPageIndex],a=t.name;return t.link?"<a href='"+t.link+"' target='_blank'>"+a+"</a>":a},this.createInfoEventsDiv=function(){return this.infoEventDiv=document.createElement("div"),this.infoEventDiv.classList.toggle("tch-events-tooltip-infoEventDiv",!0),this.data[this.bubble.currentPageIndex].actual?this.infoEventDiv.classList.toggle("tch-hidden",!1):this.infoEventDiv.classList.toggle("tch-hidden",!0),this.infoEventDiv.appendChild(this.createNameEventDiv()),this.infoEventDiv.appendChild(this.createDataEventDiv()),this.imgEventParentDiv=document.createElement("div"),this.imgEventParentDiv.classList.toggle("tch-events-tooltip-imgEventParentDiv"),this.imgEventParentDiv.appendChild(this.createImgEventDiv()),this.infoEventDiv.appendChild(this.imgEventParentDiv),this.infoEventDiv},this.createNameEventDiv=function(){return this.nameEventDiv=document.createElement("div"),this.nameEventDiv.classList.toggle("tch-events-tooltip-nameEventDiv",!0),this.nameEventSpanActual=this.nameEventSpan("actual"),this.nameEventSpanPrevious=this.nameEventSpan("previous"),this.nameEventSpanConsensus=this.nameEventSpan("consensus"),this.nameEventDiv.appendChild(this.nameEventSpanActual),this.nameEventDiv.appendChild(this.nameEventSpanPrevious),this.nameEventDiv.appendChild(this.nameEventSpanConsensus),this.nameEventDiv},this.createImgEventDiv=function(){return this.imgEventDiv=document.createElement("div"),this.imgEventDiv.classList.toggle("tch-events-tooltip-imgEventDiv",!0),this.updateImgEventDiv(this.data[this.bubble.currentPageIndex]),this.imgEventDiv},this.createDataEventDiv=function(){return this.dataEventDiv=document.createElement("div"),this.dataEventDiv.classList.toggle("tch-events-tooltip-dataEventDiv",!0),this.dataEventSpanActual=this.dataEventSpan("actual"),this.dataEventSpanPrevious=this.dataEventSpan("previous"),this.dataEventSpanConsensus=this.dataEventSpan("consensus"),this.dataEventDiv.appendChild(this.dataEventSpanActual),this.dataEventDiv.appendChild(this.dataEventSpanPrevious),this.dataEventDiv.appendChild(this.dataEventSpanConsensus),this.dataEventDiv},this.dataEventSpan=function(t){return this.secondSpan=document.createElement("span"),this.secondSpan.innerHTML=this.data[this.bubble.currentPageIndex][t],this.secondSpan.classList.toggle("tch-events-tooltip-span-events",!0),this.secondSpan},this.nameEventSpan=function(t){return this.firstSpan=document.createElement("span"),this.firstSpan.innerHTML=t,this.firstSpan.classList.toggle("tch-events-tooltip-span-name",!0),this.firstSpan},this.updateImgEventDiv=function(){var t=this.data[this.bubble.currentPageIndex];this.imgEventDiv.classList.toggle("tch-events-tooltip-up-arrow",t.better),this.imgEventDiv.classList.toggle("tch-events-tooltip-down-arrow",t.worst)},this.updateInfo=function(){this.dataEventDiv.children[0].textContent=this.data[this.bubble.currentPageIndex].actual,this.dataEventDiv.children[1].textContent=this.data[this.bubble.currentPageIndex].previous,this.dataEventDiv.children[2].textContent=this.data[this.bubble.currentPageIndex].consensus,this.data[this.bubble.currentPageIndex].actual?this.infoEventDiv.classList.toggle("tch-hidden",!1):this.infoEventDiv.classList.toggle("tch-hidden",!0),this.titleDiv.innerHTML=this.getTitleText(),this.updateImgEventDiv()},this.processData=function(t){for(var a=[],e=0;e<t.length;e++){var i=this.getLinkHref(t[e]),s=TooltipEvents.processEventItem(t[e]);s.link=i,s.name=t[e].Name,s.date=new Date(t[e].DateTime.Date).toGMTString(),a.push(s)}return a}}function TooltipNews(){Tooltip.apply(this,arguments),this.getParentDiv=function(){return this.chartData.chart.parent.querySelector(".tch-news-tooltip-container")},this.reAppend=function(){this.parentDiv.appendChild(this.headerDiv),this.headerDiv.appendChild(this.dateDiv),1!==this.data.length&&(this.headerDiv.appendChild(this.spansDiv),this.spansDiv.appendChild(this.leftArrowSpan),this.spansDiv.appendChild(this.pagesSpan),this.spansDiv.appendChild(this.rightArrowSpan)),this.parentDiv.appendChild(this.bodyDiv),this.bodyDiv.appendChild(this.img),this.bodyDiv.appendChild(this.titleDiv),this.titleDiv.appendChild(this.link)},this.createBodyDiv=function(){this.bodyDiv=document.createElement("div"),this.parentDiv.appendChild(this.bodyDiv),this.bodyDiv.classList.toggle("tch-tooltip-body",!0),this.img=document.createElement("img"),this.bodyDiv.appendChild(this.img),this.img.classList.toggle("tch-news-tooltip-img",!0),this.img.src=this.data[this.bubble.currentPageIndex].img+"?size=tiny",this.img.align="left",this.titleDiv=document.createElement("div"),this.bodyDiv.appendChild(this.titleDiv),this.titleDiv.classList.toggle("tch-news-tooltip-title",!0),this.link=document.createElement("a"),this.titleDiv.appendChild(this.link),this.link.classList.toggle("tch-news-tooltip-link",!0),this.link.href=this.data[this.bubble.currentPageIndex].link,this.link.innerHTML=this.data[this.bubble.currentPageIndex].title,this.link.target="_blank"},this.updateInfo=function(){this.img.src=this.data[this.bubble.currentPageIndex].img+"?size=tiny",this.link.href=this.data[this.bubble.currentPageIndex].link,this.link.innerHTML=this.data[this.bubble.currentPageIndex].title},this.processData=function(t){for(var a=[],e=0;e<t.length;e++)a.push({id:t[e].ID,img:t[e].Image,link:t[e].Link,date:this.convertDateToGMT(t[e].PublishDate),title:t[e].Title});return a},this.convertDateToGMT=function(t){return new Date(1e3*t).toGMTString()}}function Signal(t,a){this.id=a.signal.id,this.chartData=t,this.data=a.signal,this.width=1,this.dirArrow={},this.predictionLines={color:"#4672aa"},this.patternEndTime,this.predictionArea={color:"rgba(50, 50, 50, 0.3)"},this.supportLine={start:{},end:{},color:"#4672aa"},this.resistanceLine={start:{},end:{},color:"#63b089"},this.moveX=function(t){this.predictionLines.start.x+=t,this.predictionLines.end.x+=t,this.supportLine.start.x+=t,this.supportLine.end.x+=t,this.dirArrow.start.x+=t,this.dirArrow.end.x+=t,this.predictionArea.x?this.predictionArea.x+=t:(this.predictionLines.support.start.x+=t,this.predictionLines.support.end.x+=t,this.predictionLines.resistance.start.x+=t,this.predictionLines.resistance.end.x+=t),this.patternEndTime+=t},this.shiftTo=function(t,a){this.moveX(t),this.predictionLines.start.y+=t,this.predictionLines.end.y+=t,this.supportLine.start.y+=t,this.supportLine.end.y+=t,this.dirArrow.start.y+=t,this.dirArrow.end.y+=t,this.predictionArea.y?this.predictionArea.y+=t:(this.predictionLines.support.start.y+=a,this.predictionLines.support.end.y+=a,this.predictionLines.resistance.start.y+=a,this.predictionLines.resistance.end.y+=a)}}var i=e("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=e.n(i),r=e("./src/scripts/Libs/LibCanvas.js");Axis.prototype.moveX=function(t){var a=this.x1-t,e=parseFloat(this.textX)-t;this.x1=a,this.x2=a,this.textX=e.toFixed(1)},Axis.prototype.show=function(t,a,e,i,s,n,o,h,c){var l;if(a){this.x1===this.x2?(l=r.a.getPosition(this.x1,1),r.a.drawLine(null,a,l,Math.round(this.y1),l,Math.round(this.y2),s,this.getLineTypeArray(n,1),1)):(l=r.a.getPosition(this.y1,1),r.a.drawLine(null,a,Math.round(this.x1),l,Math.round(this.x2),l,s,this.getLineTypeArray(n,1),1));var d="valueLines"===this.lineClass?0:-4,p=document.createElement("span"),u="valueLines"===this.lineClass?this.value:this.value+"\n"+this.Mmmdd;"Default"!==c&&0===this.x1&&(u=this.getValueFromTickAxis(u,c)),p.innerText=u,p.style.left=(parseFloat(this.textX)+-2).toFixed(1)+"px",p.style.top=(parseFloat(this.textY)+d).toFixed(1)+"px",p.style.color=o,p.style.fontSize=h+"px",i.appendChild(p)}},Axis.prototype.getLineTypeArray=function(t,a){switch(t){case"normal":return[];case"dash":return[3*a,2*a];case"points":return[a,a];default:return[]}},Axis.prototype.getValueFromTickAxis=function(t,a){return"Default"===a?t:parseFloat(t).toFixed(a.length-1)};var n=e("./src/scripts/Libs/MoveLib.js"),o=e("./src/scripts/Drawing/LibDrawing.js"),h=e("./src/scripts/Drawing/VerticalLine.js"),c=e("./src/scripts/Drawing/Roulete.js"),l=e("./src/scripts/Drawing/Brush.js"),d=e("./src/scripts/Indicators/Indicator.js");OscillatorChart.prototype.init=function(t){this.parent=t,this.parent.chart=this,this.parent.innerHTML=this.iniStr,this.dataPanelContainer=this.parent.querySelector(".tch-oscillator-data-panel"),this.createLabel()},OscillatorChart.prototype.createLabel=function(){var t=this.parent.querySelector(".tch-chart-oscillator-rate-text-container");switch(this.name.toLowerCase()){case"adx":t.appendChild(this.createLabelSpan("ADX")),t.appendChild(this.createLabelSpan("DIM")),t.appendChild(this.createLabelSpan("DIP"));break;case"macd":t.appendChild(this.createLabelSpan("histogram")),t.appendChild(this.createLabelSpan("macd")),t.appendChild(this.createLabelSpan("signal"));break;case"so":t.appendChild(this.createLabelSpan("Kline")),t.appendChild(this.createLabelSpan("Dline"));break;case"williamsr":case"rsi":case"atr":case"bulls":case"bears":case"ao":case"ac":case"std":t.appendChild(this.createLabelSpan())}},OscillatorChart.prototype.createLabelSpan=function(t){var a=document.createElement("div");a.classList.add("tch-chart-oscillator-rate-text");var e=document.createElement("div");a.appendChild(e);var i=document.createElement("span");return t?i.classList.add("tch-oscillator-rate-value"+t):i.classList.add("tch-oscillator-rate-value"),i.classList.add("tch-oscillator-price"),e.appendChild(i),a},OscillatorChart.prototype.getValue=function(t,a){return!(t<this.top||t>this.top+this.h||!this.scaleParams)&&this.toYValue(t,a)},OscillatorChart.prototype.setElementsPositionAndSize=function(t,a,e,i){this.w=t||this.w,this.h=a||this.h,this.top=i||this.top,this.clipPathOffset=e||this.clipPathOffset,this.parent.style.top=this.top+"px",this.parent.style.height=this.h+"px",this.canvasDataNormal=this.parent.querySelector(".tch-chart-data-normal"),this.canvasDataNormal.setAttribute("width",this.w-e+"px"),this.canvasDataNormal.setAttribute("height",this.h+"px"),this.canvasDataNormalContext=this.canvasDataNormal.getContext("2d"),this.canvasDataPixelated=this.parent.querySelector(".tch-chart-data-pixelated"),this.canvasDataPixelated.setAttribute("width",this.w-e+"px"),this.canvasDataPixelated.setAttribute("height",this.h+"px"),this.canvasDataPixelatedContext=this.canvasDataPixelated.getContext("2d")},OscillatorChart.prototype.clear=function(){r.a.clearRect(null,this.canvasDataNormalContext,0,0,this.canvasDataNormal.width,this.canvasDataNormal.height),r.a.clearRect(null,this.canvasDataPixelatedContext,0,0,this.canvasDataPixelated.width,this.canvasDataPixelated.height)},OscillatorChart.prototype.draw=function(t,a,e){if(!t.hidden)switch(t.name.toLowerCase()){case"adx":this.drawADX(t,a,e);break;case"macd":this.drawMACD(t,a,e);break;case"williamsr":case"rsi":case"atr":this.drawLinePT(t,a,e);break;case"so":this.drawSO(t,a,e);break;case"bulls":case"bears":this.drawHistogram(t,a,e,this.getColorLineHistogram);break;case"ao":case"ac":this.drawHistogram(t,a,e,this.getColorAoHistogram);break;case"std":this.drawLinePT(t,a,e)}},OscillatorChart.prototype.drawPriceLineCurrentOscillator=function(t,a){if(!t.hidden&&a[0]&&this.scaleParams)switch(t.name.toLowerCase()){case"adx":this.drawPriceLineOscillator(a[0].ADX,t.lineWidth.ADX,t.colors.ADX),this.drawPriceLineOscillator(a[0].DIM,t.lineWidth.DIM,t.colors.DIM),this.drawPriceLineOscillator(a[0].DIP,t.lineWidth.DIP,t.colors.DIP),this.drawPriceValueOscillator(a[0].ADX,t.colors.ADX,"ADX",t.oscillatorPrecission),this.drawPriceValueOscillator(a[0].DIM,t.colors.DIM,"DIM",t.oscillatorPrecission),this.drawPriceValueOscillator(a[0].DIP,t.colors.DIP,"DIP",t.oscillatorPrecission);break;case"macd":this.drawPriceLineOscillator(a[0].histogram,t.lineWidth.histogram,t.colors.histogram),this.drawPriceLineOscillator(a[0].macdLine,t.lineWidth.macd,t.colors.macd),this.drawPriceLineOscillator(a[0].signalLine,t.lineWidth.signal,t.colors.signal),this.drawPriceValueOscillator(a[0].histogram,t.colors.histogram,"histogram",t.oscillatorPrecission),this.drawPriceValueOscillator(a[0].macdLine,t.colors.macd,"macd",t.oscillatorPrecission),this.drawPriceValueOscillator(a[0].signalLine,t.colors.signal,"signal",t.oscillatorPrecission);break;case"so":this.drawPriceLineOscillator(a[0].D,t.lineWidth.DLine,t.colors.DLine),this.drawPriceValueOscillator(a[0].D,t.colors.DLine,"Dline",t.oscillatorPrecission),this.drawPriceLineOscillator(a[0].K,t.lineWidth.KLine,t.colors.KLine),this.drawPriceValueOscillator(a[0].K,t.colors.KLine,"Kline",t.oscillatorPrecission);break;case"williamsr":case"rsi":case"atr":case"bulls":case"bears":case"std":this.drawPriceLineOscillator(a[0].P,t.lineWidth.line,t.colors.line),this.drawPriceValueOscillator(a[0].P,t.colors.line,"",t.oscillatorPrecission);break;case"ao":case"ac":this.drawPriceLineOscillator(a[0].P,t.lineWidth.line,"#0000FF"),this.drawPriceValueOscillator(a[0].P,"#0000FF","",t.oscillatorPrecission)}},OscillatorChart.prototype.drawPriceLineOscillator=function(t,a,e){if(!this.chartData.data||0!==this.chartData.data.length){var i=this.toYPixels(t);if(!(i>this.h)){var s=this.canvasDataPixelatedContext,n=r.a.getPosition(i,a);r.a.drawLine(null,s,0,n,this.w,n,e,[a,a],a,null)}}},OscillatorChart.prototype.drawPriceValueOscillator=function(t,a,e,i){var s,r=this.chartData.options.Chart.scalesFontSize,n=parseFloat((""+t).replace(",","."));n=n.toFixed(i),(s=e?this.parent.querySelector(".tch-oscillator-rate-value"+e):this.parent.querySelector(".tch-oscillator-rate-value")).style.fontSize=r+"px";var o=this.toYPixels(t);o>this.h||o<=0?s.parentNode.style.display="none":(s.parentNode.style.display="block",s.innerText=n,this.priceTextHeight||(this.priceTextHeight=s.parentNode.getBoundingClientRect().height),this.priceTextColor||(this.priceTextColor=this.chartData.chart.getPriceTextColor(a)),s.parentNode.style.left=this.w+4+"px",s.parentNode.style.top=o-this.priceTextHeight/2+"px",s.parentNode.style.backgroundColor=a,s.parentNode.style.color=this.priceTextColor)},OscillatorChart.prototype.drawLinePT=function(t,a,e){var i=this;if(a[0]&&this.scaleParams){var s=this.canvasDataNormalContext,n=a.map(function(t){return[e.toXPixels(t.T).toFixed(1),i.toYPixels(t.P).toFixed(1)]});r.a.drawPolygon(null,s,n,null,t.colors.line,!1,t.lineWidth.line,n.length)}},OscillatorChart.prototype.getColorLineHistogram=function(t){return t.colors.line},OscillatorChart.prototype.getColorAoHistogram=function(t,a,e){return e[a][2]>(e[a+1]?e[a+1][2]:e[a][2])?t.colors.lineUp:t.colors.lineDown},OscillatorChart.prototype.drawHistogram=function(t,a,e,i){if(a&&0!==a.length&&parent&&a[0]&&this.scaleParams){for(var s=[],n=Math.round(this.toYPixels(0)),o=0;o<a.length;o++)if(a[o]){var h=r.a.getPosition(e.toXPixels(a[o].T),t.lineWidth.line);if(h>=0&&h<=e.w-e.chartData.rightPadding){var c=Math.round(this.toYPixels(a[o].P));s.push([[h,n],[h,c],a[o].P])}}for(var l,d=this.canvasDataPixelatedContext,p=0;p<s.length;p++)l=i(t,p,s),r.a.drawLine(null,d,s[p][0][0],s[p][0][1],s[p][1][0],s[p][1][1],l,[],t.lineWidth.line,1);var u=s[0],g=r.a.getPosition(u[0][1],1);r.a.drawLine(null,d,0,g,this.w,g,t.colors.line,[1,1],1,null)}},OscillatorChart.prototype.drawSO=function(t,a,e){if(a&&0!==a.length&&a[0]&&this.scaleParams){for(var i=this.canvasDataNormalContext,s={D:[],K:[]},n=0;n<a.length;n++)if(a[0]){var o=e.toXPixels(a[n].T);o>=0&&o<=e.w-e.chartData.rightPadding&&(s.D.push([o.toFixed(1),this.toYPixels(a[n].D).toFixed(1)]),s.K.push([o.toFixed(1),this.toYPixels(a[n].K).toFixed(1)]))}r.a.drawPolygon(null,i,s.D,null,t.colors.DLine,!1,t.lineWidth.DLine,s.D.length),r.a.drawPolygon(null,i,s.K,null,t.colors.KLine,!1,t.lineWidth.KLine,s.K.length)}},OscillatorChart.prototype.drawADX=function(t,a,e){if(a&&0!==a.length&&a[0]&&this.scaleParams){for(var i={ADX:[],DIM:[],DIP:[]},s=0;s<a.length;s++)if(a[s]){var n=e.toXPixels(a[s].T);n>=0&&n<=e.w-e.chartData.rightPadding&&(i.ADX.push([n.toFixed(1),this.toYPixels(a[s].ADX).toFixed(1)]),i.DIM.push([n.toFixed(1),this.toYPixels(a[s].DIM).toFixed(1)]),i.DIP.push([n.toFixed(1),this.toYPixels(a[s].DIP).toFixed(1)]))}var o=this.canvasDataNormalContext;r.a.drawPolygon(null,o,i.ADX,null,t.colors.ADX,!1,t.lineWidth.ADX,i.ADX.length),r.a.drawPolygon(null,o,i.DIM,null,t.colors.DIM,!1,t.lineWidth.DIM,i.DIM.length),r.a.drawPolygon(null,o,i.DIP,null,t.colors.DIP,!1,t.lineWidth.DIP,i.DIP.length)}},OscillatorChart.prototype.drawMACD=function(t,a,e){if(a&&0!==a.length&&parent&&a[0]){for(var i={L:[],S:[]},s=[],n=Math.round(this.toYPixels(0)),o=0;o<a.length;o++)if(a[o]){var h=r.a.getPosition(e.toXPixels(a[o].T),t.lineWidth.histogram);if(h>=0&&h<=e.w-e.chartData.rightPadding){var c=Math.round(this.toYPixels(a[o].histogram));s.push([[h,n],[h,c]]),i.L.push([h.toFixed(1),this.toYPixels(a[o].macdLine).toFixed(1)]),i.S.push([h.toFixed(1),this.toYPixels(a[o].signalLine).toFixed(1)])}}var l=this.canvasDataNormalContext,d=this.canvasDataPixelatedContext;r.a.drawPolygon(null,l,i.L,null,t.colors.macd,!1,t.lineWidth.macd,i.L.length),r.a.drawPolygon(null,l,i.S,null,t.colors.signal,!1,t.lineWidth.signal,i.S.length);for(var p=0;p<s.length;p++)r.a.drawLine(null,d,s[p][0][0],s[p][0][1],s[p][1][0],s[p][1][1],t.colors.histogram,[],t.lineWidth.histogram,1);var u=s[0],g=r.a.getPosition(u[0][1],1);r.a.drawLine(null,d,0,g,this.w,g,t.colors.histogram,[1,1],1,null)}},OscillatorChart.prototype.toYValue=function(t,a){if(isNaN(t))return!1;t-=this.getOffsetY();var e=this.h;return(parseFloat(this.scaleParams.minB)+this.scaleParams.deltaY*(e-t)).toFixed(a)},OscillatorChart.prototype.toYPixels=function(t){return!isNaN(t)&&this.h-(t-this.scaleParams.minB)/this.scaleParams.deltaY},OscillatorChart.prototype.getValueAxis=function(t,a){this.scaleParams&&(a=this.getCurrPrecission(),this.valueAxis=g.prototype.getValueAxis(this.scaleParams.minB,this.scaleParams.maxB,4,this.w,this.h,t,a,this.top),this.valueAxis.shift())},OscillatorChart.prototype.getOffsetY=function(){return this.top},OscillatorChart.prototype.getScaleParams=function(t,a){if(t&&0!==t.length){var e=this.getMaxValue(t,a),i=this.getMinValue(t,a),s=g.prototype.getDeltaYforBoundsCalculation(i,e,this.h,this.marginTop,this.marginBottom),r=parseFloat(g.prototype.getMaxB(s,e,this.marginTop,a)),n=parseFloat(g.prototype.getMinB(s,i,this.marginBottom,a));return n===r&&(n-=1/Math.pow(10,a),r+=1/Math.pow(10,a)),{minB:n,maxB:r,deltaY:parseInt(Math.pow(10,12)*(r-n)/this.h)/Math.pow(10,12)}}},OscillatorChart.prototype.getMaxValue=function(t){if(t&&0!==t.length){for(var a=Number.MIN_VALUE,e=0;e<t.length;e++)for(var i in t[e])if(t[e].hasOwnProperty(i)&&"T"!==i){var s=t[e][i];a<s&&(a=s)}return a}},OscillatorChart.prototype.getMinValue=function(t){if(t&&0!==t.length){for(var a=Number.MAX_VALUE,e=0;e<t.length;e++)for(var i in t[e])if(t[e].hasOwnProperty(i)&&"T"!==i){var s=t[e][i];a>s&&(a=s)}return a}},OscillatorChart.prototype.redrawOnResize=function(){var t=this.chartData.getIndicatorIndex(this.chartData.indicators,this),a=this.chartData.indicators[t],e=d.a.getValuesFromDictionary(a.data);a.createShowData(),this.scaleParams=this.getScaleParams(a.showData,parseInt(this.chartData.precission)),this.setElementsPositionAndSize(this.w,this.h,this.clipPathOffset),this.clear(),this.draw(a,e,this.chartData.chart),this.chartData.chart.redrawGrid()},OscillatorChart.prototype.drawLabels=function(){},OscillatorChart.prototype.getCurrPrecission=function(){var t=this.chartData.indicators;for(var a in t)if(t.hasOwnProperty(a)&&t[a].id===this.id)return t[a].oscillatorPrecission};var p=e("./src/scripts/News/Bubble.js");Tooltip.prototype.init=function(){this.point=this.getPoint(),this.data=this.processData(this.bubble.items),this.isFocused=!0,this.isVisible=!1,this.parentDiv=this.getParentDiv(),this.parentDiv.innerHTML="",this.draw()},Tooltip.prototype.getParentDiv=function(){return null},Tooltip.prototype.draw=function(){this.createMarkup()},Tooltip.prototype.createMarkup=function(){this.createParentDiv(),this.createHeaderDiv(),this.createDateDiv(),1!==this.data.length&&(this.createSpansDiv(),this.createSpans(),this.setSpansClasses()),this.createBodyDiv(),this.parentDiv.classList.toggle("tch-hidden",!1),this.isVisible=!0,this.adjustParentDivPosition()},Tooltip.prototype.createParentDiv=function(){this.parentDiv.addEventListener("mouseenter",this.mouseEnterParentDiv.bind(this)),this.parentDiv.addEventListener("mouseleave",this.mouseLeaveParentDiv.bind(this)),this.parentDiv.onmousedown=function(t){t.preventDefault(),t.stopPropagation()},this.parentDiv.onmouseup=function(t){t.preventDefault(),t.stopPropagation()}},Tooltip.prototype.mouseEnterParentDiv=function(){this.isFocused=!0},Tooltip.prototype.updateInfo=function(){},Tooltip.prototype.mouseLeaveParentDiv=function(){this.isFocused=!1;var t=this;this.leaveTimeout=setTimeout(function(){t.leaveParentDiv()},400)},Tooltip.prototype.leaveParentDiv=function(){!this.isFocused&&this.isVisible&&(this.parentDiv.classList.toggle("tch-hidden",!0),this.isVisible=!1,this.parentDiv.innerHTML="")},Tooltip.prototype.createHeaderDiv=function(){this.headerDiv=document.createElement("div"),this.parentDiv.appendChild(this.headerDiv),this.headerDiv.classList.toggle("tch-tooltip-header",!0)},Tooltip.prototype.createDateDiv=function(){this.dateDiv=document.createElement("div"),this.headerDiv.appendChild(this.dateDiv),this.dateDiv.classList.toggle("tch-tooltip-date",!0),this.dateDiv.innerHTML=this.data[this.bubble.currentPageIndex].date},Tooltip.prototype.createSpansDiv=function(){this.spansDiv=document.createElement("div"),this.headerDiv.appendChild(this.spansDiv),this.spansDiv.classList.toggle("tch-tooltip-spans",!0)},Tooltip.prototype.createSpans=function(){this.leftArrowSpan=document.createElement("span"),this.spansDiv.appendChild(this.leftArrowSpan),this.leftArrowSpan.addEventListener("mousedown",this.clickLeftArrow.bind(this)),this.leftArrowSpan.innerHTML=" ",this.pagesSpan=document.createElement("span"),this.spansDiv.appendChild(this.pagesSpan),this.pagesSpan.classList.toggle("tch-tooltip-pages",!0),this.pagesSpan.innerHTML=this.bubble.currentPage+"/"+this.data.length,this.rightArrowSpan=document.createElement("span"),this.spansDiv.appendChild(this.rightArrowSpan),this.rightArrowSpan.addEventListener("mousedown",this.clickRightArrow.bind(this)),this.rightArrowSpan.innerHTML=" "},Tooltip.prototype.setSpansClasses=function(){1===this.bubble.currentPage?(this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow",!0),this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow-active",!0)):this.bubble.currentPage===this.data.length?(this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow",!0),this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow-active",!0)):(this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow-active",!0),this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow-active",!0))},Tooltip.prototype.updateSpansClasses=function(){1===this.bubble.currentPage?(this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow-active",!1),this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow",!0),this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow-active",!0)):this.bubble.currentPage===this.data.length?(this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow-active",!1),this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow",!0),this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow",!1),this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow-active",!0)):(this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow-active",!0),this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow-active",!0))},Tooltip.prototype.clickLeftArrow=function(){this.leftArrowSpan.classList.contains("tch-tooltip-left-arrow-active")&&(--this.bubble.currentPage,--this.bubble.currentPageIndex,this.update())},Tooltip.prototype.clickRightArrow=function(){this.rightArrowSpan.classList.contains("tch-tooltip-right-arrow-active")&&(++this.bubble.currentPage,++this.bubble.currentPageIndex,this.updateSpansClasses(),this.update())},Tooltip.prototype.remove=function(){this.isFocused=!1,this.parentDiv.classList.toggle("tch-hidden",!0),this.isVisible=!1},Tooltip.prototype.update=function(){1!==this.data.length&&this.updateSpansClasses(),this.dateDiv.innerHTML=this.data[this.bubble.currentPageIndex].date,1!==this.data.length&&(this.pagesSpan.innerHTML=this.bubble.currentPage+"/"+this.data.length),this.updateInfo()},Tooltip.prototype.refresh=function(){this.isFocused=!0,this.parentDiv.classList.toggle("tch-hidden",!1),this.isVisible=!0,this.point=this.getPoint(),this.data=this.processData(this.bubble.items),this.reAppend(),this.update(),this.adjustParentDivPosition()},Tooltip.prototype.getPoint=function(){return{x:this.bubble.getPositionLeft(),y:this.bubble.getPositionTop()}},Tooltip.prototype.adjustParentDivPosition=function(){var t=this.parentDiv.getBoundingClientRect();this.isAdjustRight(t)?this.isAdjustLeft(t)?this.parentDiv.style.left=this.point.x- -1*(this.chartData.chart.w-this.point.x-t.width-2*this.bubble.radius)+"px":this.parentDiv.style.left=this.point.x-t.width+"px":this.parentDiv.style.left=this.point.x+2*this.bubble.radius+"px",this.isAdjustBottom(t)?(this.parentDiv.style.top=this.point.y-t.height+"px",this.isAdjustTop(t)&&(this.parentDiv.style.top="15px")):this.isAdjustTop(t)?(this.parentDiv.style.top="15px",this.isAdjustBottom(t)&&(this.parentDiv.style.top=this.point.y-t.height+"px")):this.parentDiv.style.top=this.point.y+this.bubble.radius/2+"px"},Tooltip.prototype.isAdjustRight=function(t){return this.point.x+t.width+2*this.bubble.radius>this.chartData.chart.w-this.chartData.rightPadding},Tooltip.prototype.isAdjustBottom=function(t){return this.point.y+t.height+this.bubble.radius/2>this.chartData.chart.h},Tooltip.prototype.isAdjustLeft=function(t){return this.point.x-t.width-2*this.bubble.radius<=0},Tooltip.prototype.isAdjustTop=function(t){return this.point.y-t.height-this.bubble.radius/2<=0},TooltipEvents.processEventItem=function(t){var a={previous:t.Revised||t.Previous,actual:t.Actual,consensus:t.Consensus,revised:t.Revised?t.Previous:"",better:t.Better,worst:t.Worst,volatility:t.Volatility,tentative:t.Tentative};return a.previous&&(a.previous=a.previous.toFixed(t.Precision).replace(".",","),a.previous=t.PotPrevious?t.Unit+a.previous+t.PotPrevious:a.previous+t.Unit),a.actual&&(a.actual=a.actual.toFixed(t.Precision).replace(".",","),a.actual=t.PotActual?t.Unit+a.actual+t.PotActual:a.actual+t.Unit),a.consensus&&(a.consensus=a.consensus.toFixed(t.Precision).replace(".",","),a.consensus=t.PotConsensus?t.Unit+a.consensus+t.PotConsensus:a.consensus+t.Unit),a.revised&&(a.revised=a.revised.toFixed(t.Precision).replace(".",","),a.revised=t.PotConsensus?t.Unit+a.revised+t.PotConsensus:a.revised+t.Unit),a},TooltipEvents.prototype=Object.create(Tooltip.prototype),TooltipEvents.prototype.constructor=TooltipEvents,TooltipEvents.prototype.getLinkHref=function(t){if(!t.HTMLDescription)return null;var a=t.HTMLDescription.match('href="(.*?)"');return a&&a[1]?a[1]:null},TooltipNews.prototype=Object.create(Tooltip.prototype),TooltipNews.prototype.constructor=TooltipNews;var u=e("./src/scripts/utils/utils.js");Signal.prototype.draw=function(t){var a=this.supportLine;a.start.x=r.a.getPosition(a.start.x,this.width),r.a.drawLine(null,t,a.start.x,a.start.y,a.end.x,a.end.y,a.color,[],this.width);var e=this.resistanceLine;e.start.x=r.a.getPosition(e.start.x,this.width),r.a.drawLine(null,t,e.start.x,e.start.y,e.end.x,e.end.y,e.color,[],this.width);var i=r.a.getPosition(this.patternEndTime,this.width);r.a.drawLine(null,t,i,0,i,t.canvas.clientHeight,"#ff0000",[6,4],2,1),this.predictionArea.x?r.a.drawRectangle(null,t,this.predictionArea.x,this.predictionArea.y,this.predictionArea.width,this.predictionArea.height,this.predictionArea.color,"#ff0000",this.width,[]):(r.a.drawLine(null,t,a.end.x,a.end.y,this.predictionLines.support.end.x,this.predictionLines.support.end.y,this.predictionLines.color,[4,2],this.width),r.a.drawLine(null,t,e.end.x,e.end.y,this.predictionLines.resistance.end.x,this.predictionLines.resistance.end.y,this.predictionLines.color,[4,2],this.width)),this.dirArrow.end&&r.a.drawArrow(null,t,this.dirArrow.start.x,this.dirArrow.start.y,this.dirArrow.end.x,this.dirArrow.end.y,this.dirArrow.color,"#fff",[],this.width,1,!0)},Signal.prototype.calcPoints=function(){var t=this.convertData();this.patternEndTime=t.patternEnd,this.supportLine.end=this.getMissingPoint(t.pointAx,t.pointAy,t.pointBx,t.pointBy,t.patternEnd),t.pointAx>t.pointCx?this.supportLine.start=this.getMissingPoint(t.pointAx,t.pointAy,t.pointBx,t.pointBy,t.pointCx):(this.supportLine.start.x=t.pointAx,this.supportLine.start.y=t.pointAy),this.resistanceLine.end=this.getMissingPoint(t.pointCx,t.pointCy,t.pointDx,t.pointDy,t.patternEnd),t.pointAx<t.pointCx?this.resistanceLine.start=this.getMissingPoint(t.pointCx,t.pointCy,t.pointDx,t.pointDy,t.pointAx):(this.resistanceLine.start.x=t.pointCx,this.resistanceLine.start.y=t.pointCy),this.calculatePredictions(t),this.calculateArrow(t)},Signal.prototype.calculatePredictions=function(t){if(t.predictionPriceFrom)this.predictionArea.x=t.predictionTimeFrom+3,this.predictionArea.y=t.predictionPriceTo,this.predictionArea.width=t.predictionTimeTo-t.predictionTimeFrom,this.predictionArea.height=Math.abs(t.predictionPriceTo-t.predictionPriceFrom);else{var a=this.getIntersectionPoint(t.pointAx,t.pointAy,t.pointBx,t.pointBy,t.pointCx,t.pointCy,t.pointDx,t.pointDy);this.calculateResistancePredictions(t,a),this.calculateSupportPredictions(t,a)}},Signal.prototype.getMissingPoint=function(t,a,e,i,s){if(isNaN(t)||isNaN(a)||isNaN(e)||isNaN(i)||isNaN(s))return!1;var r,n,o=Math.abs(t-e),h=Math.abs(a-i);return n=s>t?e>t?e:t:e>t?t:e,r=Math.abs(s-n)*h/o,{x:s,y:n==t?a>i?a+r:a-r:a>i?i-r:i+r}},Signal.prototype.getIntersectionPoint=function(t,a,e,i,s,r,n,o){var h=Math.round(i-a),c=Math.round(t-e),l=Math.round(a*e-t*i),d=Math.round(o-r),p=Math.round(s-n),u=Math.round(r*n-s*o);if(h*p!=d*c)return{x:Math.round(-(l*p-u*c)/(h*p-d*c)),y:Math.round(-(h*u-d*l)/(h*p-d*c))}},Signal.prototype.calculateResistancePredictions=function(t,a){var e=Math.round(this.resistanceLine.end.x+(this.resistanceLine.end.x-this.resistanceLine.start.x)/2),i=0;e>=a.x&&a.x>t.patternEnd?(e=Math.round(a.x-.2*(a.x-this.resistanceLine.start.x)),i=Math.round((e-this.resistanceLine.start.x)*(this.resistanceLine.end.y-this.resistanceLine.start.y)/(this.resistanceLine.end.x-this.resistanceLine.start.x)+this.resistanceLine.start.y)):i=Math.round((e-this.resistanceLine.start.x)*(this.resistanceLine.end.y-this.resistanceLine.start.y)/(this.resistanceLine.end.x-this.resistanceLine.start.x)+this.resistanceLine.start.y),this.predictionLines.resistance={end:{x:e,y:i}}},Signal.prototype.calculateSupportPredictions=function(t,a){var e=Math.round(this.supportLine.end.x+(this.supportLine.end.x-this.supportLine.start.x)/2),i=0;e>=a.x&&a.x>t.patternEnd?(e=Math.round(a.x-.2*(a.x-this.supportLine.start.x)),i=Math.round((e-this.supportLine.start.x)*(this.supportLine.end.y-this.supportLine.start.y)/(this.supportLine.end.x-this.supportLine.start.x)+this.supportLine.start.y)):i=Math.round((e-this.supportLine.start.x)*(this.supportLine.end.y-this.supportLine.start.y)/(this.supportLine.end.x-this.supportLine.start.x)+this.supportLine.start.y),this.predictionLines.support={end:{x:e,y:i}}},Signal.prototype.calculateArrow=function(t){var a=this.chartData.chart.getNearestCandleIndex(this.data.patternEndTime);if(!(this.chartData.chart.showData[a].date<this.patternEndTime)){var e=this.chartData.chart.showData[a],i=this.toYPixels((parseFloat(e.close)+parseFloat(e.open))/2),s=this.toXPixels(this.chartData.data&&this.chartData.data.mid[0]?new Date(this.chartData.data.mid[0].date).getTime():(new Date).getTime());this.dirArrow.end={x:Math.round(s+20)},this.dirArrow.start={y:i},t.predictionTimeFrom&&s+20>t.predictionTimeTo&&(this.dirArrow.end.x=t.predictionTimeTo-5),1==this.data.direction?(this.dirArrow.color=this.resistanceLine.color,t.predictionPriceFrom?(this.dirArrow.start.x=this.resistanceLine.end.x,this.dirArrow.end.y=t.predictionPriceFrom):(this.dirArrow.start.x=this.supportLine.end.x,this.dirArrow.end.y=Math.round((this.dirArrow.end.x-this.resistanceLine.start.x)*(this.resistanceLine.end.y-this.resistanceLine.start.y)/(this.resistanceLine.end.x-this.resistanceLine.start.x)+this.resistanceLine.start.y))):(this.dirArrow.color="#ff0000",t.predictionPriceTo?(this.dirArrow.start.x=this.supportLine.end.x,this.dirArrow.end.y=t.predictionPriceTo):(this.dirArrow.start.x=this.resistanceLine.end.x,this.dirArrow.end.y=(this.dirArrow.end.x-this.supportLine.start.x)*(this.supportLine.end.y-this.supportLine.start.y)/(this.supportLine.end.x-this.supportLine.start.x)+this.supportLine.start.y))}},Signal.prototype.convertData=function(){var t=this.chartData.getCurrentTimeStepByServerPeriod();return{pointAx:this.toXPixels(this.data.supportx0+t),pointAy:this.toYPixels(this.data.supporty0),pointBx:this.toXPixels(this.data.supportx1+t),pointBy:this.toYPixels(this.data.supporty1),pointCx:this.toXPixels(this.data.resistancex0+t),pointCy:this.toYPixels(this.data.resistancey0),pointDx:this.toXPixels(this.data.resistancex1+t),pointDy:this.toYPixels(this.data.resistancey1),patternEnd:this.toXPixels(this.data.patternEndTime),predictionTimeFrom:this.toXPixels(this.data.predictionTimeFrom),predictionTimeTo:this.toXPixels(this.data.predictionTimeTo),predictionPriceFrom:this.toYPixels(this.data.predictionPriceFrom),predictionPriceTo:this.toYPixels(this.data.predictionPriceTo)}},Signal.prototype.toXPixels=function(t){return this.chartData.chart.toXPixels(t)},Signal.prototype.toYPixels=function(t){return this.chartData.chart.toYPixels(t)},e.d(a,"a",function(){return g});var g=function Chart(t,a,e){s()(this,Chart),e.store.setChart(Chart),this.techChart=e,this.parent=t,this.chartData=a,this.chartData.chart=this,this.resizeTimer,this.showData=[],this.selectedData=[],this.timeAxis=[],this.w,this.h,this.top,this.curX,this.curY,this.crosshair={params:{x:0,y:0}},this.isShowCrosshair=!1,this.valueAxis=[],this.timeAxisStep,this.valueAxisCount=5,this.valueTextHeigh=11,this.useCanvas=!0,this.canvasGrid,this.canvasGridContext,this.canvasDrawing,this.canvasDrawingContext,this.canvasDataNormal,this.canvasDataNormalContext,this.canvasDataPixelated,this.canvasDataPixelatedContext,this.canvasRateNormal,this.canvasRateNormalContext,this.canvasRatePixelated,this.canvasRatePixelatedContext,this.canvasInfo,this.canvasInfoContext,this.divEventListener,this.drawingTextContainer,this.waterMarkContainer,this.navigationButtonsContainer,this.bubblesContainer,this.isPressed=!1,this.isSetScaleY=!1,this.dataPanel,this.isBusy=!1,this.chartOscillatorContainer,this.oscillatorCharts={},this.zoomSelector,this.axisTextContainer,this.optionsTextContainer,this.offX=50,this.offY=18,this.priceTextWidth=!1,this.crosshairTextHeight=!1,this.crosshairTextWidth=!1,this.parentRect,this.priceTextColor,this.redrawOnMoveTimeout=null,this.moving={totalX:0,totalY:0},this.tappedClickTimer=null,this.index=0,this.magnetDistance=30,this.clipPathOffset=8,this.resizeEdgeHeight=5,this.getNewsTimeout=null,this.getEventsTimeout=null,this.signalsDataPanel=null,this.signals=Object.keys(a.signalsData),this.newsBubbles=[],this.recreateNewsBubblesTimeout=null,this.eventsBubbles=[],this.recreateEventsBubblesTimeout=null,this.isOptionActive=!1,this.isPipsShow=!1};g.prototype.html=function(){return"<div class='tch-chart-background'>\n            <div class='tch-spinner-container'></div>\n        </div>\n        <div class='tch-chart-container'>\n            <canvas class='tch-chart-grid'></canvas>\n            <div class='tch-chart-watermark-container'>\n                <div>\n                  <span class='tch-chart-watermark'>WaterMark</span>\n                </div>\n            </div>\n            <canvas class='tch-chart-drawing'></canvas>\n            <canvas class='tch-chart-data-normal'></canvas>\n            <canvas class='tch-chart-data-pixelated'></canvas>\n            <div class='tch-axis-text'></div>\n            <div class='tch-drawing-text'></div>\n            <canvas class='tch-chart-signals'></canvas>\n            <div class='tch-news-bubbles-container'></div>\n            <div class='tch-events-bubbles-container'></div>\n            <div class='tch-chart-oscillators-container'></div>\n            <canvas class='tch-chart-drawing-active'></canvas>\n            <canvas class='tch-chart-info tch-move-container'></canvas>\n            <canvas class='tch-chart-rate-normal'></canvas>\n            <canvas class='tch-chart-rate-pixelated'></canvas>\n\n            <div class='tch-chart-rate-text-container'>\n            <div class='tch-chart-rate-text'>\n            <div style='display: none;'>\n                <span class='tch-options-label-triangle tch-options-triangle tch-rate-triangle'></span>\n                <span class='tch-last-bar-value tch-price'></span>\n            </div>\n            </div>\n                <div class='tch-chart-rate-text'>\n                    <div style='display: none;'><span class='tch-rate-value tch-price'></span></div>\n                </div>\n            </div>\n            <div class='tch-chart-info-text-container'>\n                <div class='tch-chart-info-text'>\n                    <div style='display: none;'>\n                        <span class='tch-info-value tch-price'></span>\n                    </div>\n                    <div style='display: none;'>\n                        <span class='tch-info-date'></span>\n                    </div>\n                </div>\n            </div>\n            <div class='tch-zoom-selector'></div>\n            <div class='tch-line-settings-container tch-hidden tch-move'></div>\n            <ul class='tch-nav-buttons  tch-nav-many'>\n                <li class='tch-nav-left'></li>\n                <li class='tch-nav-out'></li>\n                <li class='tch-nav-ref'></li>\n                <li class='tch-nav-in'></li>\n                <li class='tch-nav-right'></li>\n            </ul>\n            <ul class='tch-nav-buttons  tch-nav-one'>\n                <li class = 'tch-nav-start'></li>\n            </ul>\n            <div class='tch-chart-event-listener'></div>\n            <div class='tch-tooltip-container tch-news-tooltip-container tch-hidden'></div>\n            <div class='tch-tooltip-container tch-events-tooltip-container tch-hidden'></div>\n        <div>"},g.prototype.createOscillatorCharts=function(){this.resizeOscillatorHeights(),this.chartOscillatorContainer=this.parent.querySelector(".tch-chart-oscillators-container");for(var t=0;t<this.chartData.indicators.length;t++)if("oscillator"===this.chartData.indicators[t].type){var a=document.createElement("div");a.classList.add("tch-oscillator-"+this.chartData.indicators[t].id),this.chartOscillatorContainer.appendChild(a);var e={w:this.chartData.indicators[t].w,h:this.chartData.indicators[t].h,top:this.chartData.indicators[t].top,name:this.chartData.indicators[t].name};this.oscillatorCharts[this.chartData.indicators[t].id]=new OscillatorChart(this.chartData.indicators[t].id,this.chartData,e),this.oscillatorCharts[this.chartData.indicators[t].id].init(a)}},g.prototype.setOscillatorChartsPostionAndSize=function(){for(var t=0;t<this.chartData.indicators.length;t++)"oscillator"===this.chartData.indicators[t].type&&this.oscillatorCharts[this.chartData.indicators[t].id].setElementsPositionAndSize()},g.prototype.resizeOscillatorHeights=function(){var t;!this.parentRect&&this.chartData.parentRect&&(this.parentRect=this.chartData.parentRect),this.parentRect?(t=this.parentRect.height,this.parentRect=this.parent.getBoundingClientRect(),this.chartData.parentRect=this.parentRect):(this.parentRect=this.parent.getBoundingClientRect(),this.chartData.parentRect=this.parentRect,t=this.parentRect.height);for(var a=2*this.chartData.options.Chart.scalesFontSize+10,e=this.chartData.options.Chart.oldScalesFontSize?2*this.chartData.options.Chart.oldScalesFontSize+10:a,i=(this.parentRect.height-a)/(t-e),s=0;s<this.chartData.indicators.length;s++)if("oscillator"===this.chartData.indicators[s].type){var r=this.chartData.indicators[s];r.h=r.h*i,r.top=r.top*i}!this.h&&this.chartData.h&&(this.h=this.chartData.h),!this.top&&this.chartData.top&&(this.top=this.chartData.top),this.h*=i,this.top*=i,this.chartData.h=this.h,this.chartData.top=this.top},g.prototype.init=function(t,a){if(this.parent){this.setChartElementsSize(this.chartData),this.parent.innerHTML=this.html();var e=this.parent.querySelector(".tch-chart-container");if(t||(e.style.opacity=0,e.style.visibility="hidden"),this.createOscillatorCharts(),this.setElementsPositionAndSize(),this.checkHasEnoughData(this.chartData,this.w)||!this.chartData.hasPrevData)this.chartData.data&&this.chartData.data[this.chartData.typeData]&&0!==this.chartData.data[this.chartData.typeData].length&&(this.selectedData=this.selectDataToShow(this.chartData.data[this.chartData.typeData],this.chartData.startDateSeconds,this.chartData.spacing,this.w),this.chartData.startX>this.w/2&&(this.chartData.startX=this.w/2),this.showData=this.processDataToShow(this.selectedData,this.chartData.rightPadding,this.chartData.spacing,this.w,this.h,this.chartData.precission,this.chartData.startX,null),this.newsBubbles=[],this.setGetNewsTimeout(),this.eventsBubbles=[],this.setGetEventsTimeout(),this.deleteRedundantElements(this.showData,0,this.w,this.chartData.rightPadding,this.chartData.spacing),this.chartData.indicators&&this.chartData.indicators.length&&this.createIndicatorsShowData(),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.timeAxis=this.getTimeAxis(this.showData,this.w,this.parentRect.height-this.offY,this.chartData.period,this.chartData.timeMode,this.chartData.localization),this.getOscillatorChartsAxis(),this.updateDrawingObjectsPixels(),this.drawDataPanel(this.showData[0]),this.draw(this.showData,this.h),this.chartData.techChart.initializationDone||this.moveRightChart(this,this.w*this.techChart.configuration.offsetChart),this.drawActiveDrawingObjects(),this.clearGrid(),this.drawTimeAxis(this.timeAxis),this.drawValueAxis(this.valueAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrent(this.chartData.currentValue),a||this.addEvents(),t||(e.style.visibility="initial",e.style.transition="opacity 1s ease",e.style.opacity=1),this.chartData.isShowAllSignals&&this.drawActiveSignal(),this.chartData.techChart.initializationDone=!0,this.initialized=!0,this.chartData.techChart.setCanAddTab());else{var i=this.getLastDate(this.chartData.data[this.chartData.typeData]);if(i){var s=this.getExtraDataNumb(this.chartData,this.w);this.chartData.getExtraData(this.chartData,i,s,this.chartData.getExtraDataOnInitComplete)}else this.chartData.getFirstData()}}},g.prototype.resizeChartHeight=function(){this.setChartSizes(),this.setWatermarkSize(),this.showData=this.processDataToShow(this.selectedData,this.chartData.rightPadding,this.chartData.spacing,this.w,this.h,this.chartData.precission,this.chartData.startX,null),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.updateDrawingObjectsPixels(),this.getOscillatorChartsAxis(),this.draw(this.showData,this.h),this.drawActiveDrawingObjects(),this.clearGrid(),this.drawTimeAxis(this.timeAxis),this.drawValueAxis(this.valueAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrent(this.chartData.currentValue)},g.prototype.getScalesOffsetData=function(){this.chartData.currentValue[this.chartData.typeData]=this.getCurrentValue(),this.chartData.precission=this.chartData.precission?this.chartData.precission:5;var t=this.chartData.precission;if(0!==this.chartData.getOscillatorChartsPrecission()){var a=this.chartData.currentValue[this.chartData.typeData].split("").length;t=(8>a?8:a)-1-this.chartData.currentValue[this.chartData.typeData].replace(",",".").split(".")[0].length}var e=parseFloat(this.chartData.currentValue[this.chartData.typeData]).toFixed(t),i=Axis.prototype.getValueFromTickAxis(e,this.chartData.options.Chart.typeTick),s=r.a.measureText(this.canvasGridContext,this.chartData.options.Chart.scalesFontSize+"px Arial",i),n=r.a.measureText(this.canvasGridContext,this.chartData.options.Chart.scalesFontSize+"px Arial",e);this.offX=Math.max(parseInt(n.width),parseInt(s.width))+10,this.offY=parseInt(2*this.chartData.options.Chart.scalesFontSize)+10},g.prototype.getCurrentValue=function(){var t="0.00000";return this.chartData.data[this.chartData.typeData][0]?t=this.chartData.data[this.chartData.typeData][0].close:this.chartData.currentValue[this.chartData.typeData]&&(t=this.chartData.currentValue[this.chartData.typeData]),t},g.prototype.setChartSizes=function(){var t=this.offX,a=(this.offY,this.clipPathOffset);this.canvasGrid.style.backgroundColor=this.chartData.colors.Chart.backgroundColor,this.canvasSignals.setAttribute("width",this.w-a+"px"),this.canvasSignals.setAttribute("height",this.h+"px"),this.canvasSignalsContext=this.canvasSignals.getContext("2d"),this.canvasDrawingActive.setAttribute("width",this.w-a+"px"),this.canvasDrawingActive.setAttribute("height",this.h+"px"),this.canvasDrawingActiveContext=this.canvasDrawingActive.getContext("2d"),this.canvasDrawing.setAttribute("width",this.w-a+"px"),this.canvasDrawing.setAttribute("height",this.h+"px"),this.canvasDrawingContext=this.canvasDrawing.getContext("2d"),this.drawingText.style.width=this.w-a+"px",this.drawingText.style.height=this.h+"px",this.newsBubblesContainer.style.width=this.w-a+"px",this.newsBubblesContainer.style.height=this.h+"px",this.eventsBubblesContainer.style.width=this.w-a+"px",this.eventsBubblesContainer.style.height=this.h+"px",this.canvasDataNormal.setAttribute("width",this.w-a+"px"),this.canvasDataNormal.setAttribute("height",this.h+"px"),this.canvasDataNormalContext=this.canvasDataNormal.getContext("2d"),this.canvasDataPixelated.setAttribute("width",this.w-a+"px"),this.canvasDataPixelated.setAttribute("height",this.h+"px"),this.canvasDataPixelatedContext=this.canvasDataPixelated.getContext("2d"),this.waterMarkContainer.style.width=this.w-a+"px",this.waterMarkContainer.style.height=this.h+"px",this.waterMarkContainer.style.color=this.chartData.colors.Chart.watermarkColor,this.waterMarkContainer.style.fontSize=parseInt(this.h/4)+"px",this.canvasRateNormal.setAttribute("width",this.w+t+"px"),this.canvasRateNormal.setAttribute("height",this.h+"px"),this.canvasRateNormalContext=this.canvasRateNormal.getContext("2d"),this.canvasRatePixelated.setAttribute("width",this.w+t+"px"),this.canvasRatePixelated.setAttribute("height",this.h+"px"),this.canvasRatePixelatedContext=this.canvasRatePixelated.getContext("2d"),this.divEventListener=this.parent.querySelector(".tch-chart-event-listener"),this.divEventListener.classList.toggle("tch-cursor-"+this.chartData.cursorType),this.drawingTextContainer=this.parent.querySelector(".tch-drawing-text"),this.drawingTextContainer.style.top="0px"},g.prototype.setElementsPositionAndSize=function(){var t;this.parentRect?(t=this.parentRect.height,this.parentRect=this.parent.getBoundingClientRect(),this.chartData.parentRect=this.parentRect):(this.parentRect=this.parent.getBoundingClientRect(),this.chartData.parentRect=this.parentRect,t=this.parentRect.height),this.canvasGrid=this.parent.querySelector(".tch-chart-grid"),this.canvasGrid.setAttribute("height",parseInt(this.parentRect.height)+"px"),this.canvasGridContext=this.canvasGrid.getContext("2d"),this.getScalesOffsetData();var a=this.offX,e=this.offY,i=this.clipPathOffset;this.w=parseInt(this.parentRect.width)-a,this.h&&Object.keys(this.oscillatorCharts).length?this.h=(this.h+e)*parseInt(this.parentRect.height)/t-e:this.h=parseInt(this.parentRect.height)-e,this.top=0,this.chartData.h=this.h,this.chartData.top=this.top;var s=Object.keys(this.oscillatorCharts);if(s.length)for(var r,n,o=this.parentRect.height/t,h=0;h<s.length;h++){var c=this.oscillatorCharts[s[h]];r=c.h*o,n=c.top*o,c.parent.classList.toggle("tch-oscillator",!0),c.parent.style.height=r+"px",c.parent.style.top=n+"px",c.setElementsPositionAndSize(this.w,r,i)}this.canvasSignals=this.parent.querySelector(".tch-chart-signals"),this.canvasDrawingActive=this.parent.querySelector(".tch-chart-drawing-active"),this.canvasDrawing=this.parent.querySelector(".tch-chart-drawing"),this.drawingText=this.parent.querySelector(".tch-drawing-text"),this.newsBubblesContainer=this.parent.querySelector(".tch-news-bubbles-container"),this.eventsBubblesContainer=this.parent.querySelector(".tch-events-bubbles-container"),this.newsTooltipContainer=this.parent.querySelector(".tch-news-tooltip-container"),this.eventsTooltipContainer=this.parent.querySelector(".tch-events-tooltip-container"),this.canvasDataNormal=this.parent.querySelector(".tch-chart-data-normal"),this.canvasDataPixelated=this.parent.querySelector(".tch-chart-data-pixelated"),this.waterMarkContainer=this.parent.querySelector(".tch-chart-watermark-container"),this.canvasRateNormal=this.parent.querySelector(".tch-chart-rate-normal"),this.canvasRatePixelated=this.parent.querySelector(".tch-chart-rate-pixelated"),this.canvasInfo=this.parent.querySelector(".tch-chart-info"),this.canvasInfo.setAttribute("height",parseInt(this.parentRect.height)+"px"),this.canvasInfo.setAttribute("width",this.w+a+"px"),this.canvasInfoContext=this.canvasInfo.getContext("2d"),this.canvasGrid.setAttribute("width",this.w+a+"px"),this.setChartSizes();var l=this.waterMarkContainer.querySelector("span"),d=this.techChart.translation[this.techChart.getPeriods()[this.chartData.period].key];l.textContent=this.chartData.pair.FullName+", "+d,this.setWatermarkSize(),this.navButtons=this.parent.querySelector(".tch-nav-buttons.tch-nav-many");var p=(this.w-this.navButtons.offsetWidth)/2;this.navButtons.style.left=p+"px",this.navButtons.style.bottom=e+"px",this.navButtonStartContainer=this.parent.querySelector(".tch-nav-buttons.tch-nav-one"),this.navButtonStartContainer.style.left=this.w-a+"px",this.navButtonStartContainer.style.bottom=e+"px",this.chartOscillatorContainer=this.parent.querySelector(".tch-chart-oscillators-container"),this.axisTextContainer=this.parent.querySelector(".tch-axis-text"),this.zoomSelector=this.parent.querySelector(".tch-zoom-selector"),this.zoomInBtn=this.parent.querySelector(".tch-zoomin-btn"),this.parent.parentNode&&this.parent.parentNode.parentNode&&this.parent.parentNode.parentNode&&this.parent.parentNode.parentNode.parentNode&&(this.dataPanel=this.parent.parentNode.parentNode.parentNode.querySelector(".tch-data-panel")),this.crosshair.text={},this.crosshair.text.spanValue=this.parent.querySelector(".tch-info-value"),this.crosshair.text.spanDate=this.parent.querySelector(".tch-info-date"),this.crosshair.text.spanValue.style.background=this.chartData.colors.Chart.crosshair,this.crosshair.text.spanDate.style.background=this.chartData.colors.Chart.crosshair,this.crosshair.text.spanValue.parentNode.style.backgroundColor=this.chartData.colors.Chart.crosshair,this.crosshair.text.spanDate.parentNode.style.backgroundColor=this.chartData.colors.Chart.crosshair,this.browser=this.detectBrowser(window,document)},g.prototype.setWatermarkSize=function(){var t=this.waterMarkContainer.querySelector("span");if(this.w>0)for(;t.getBoundingClientRect().width>this.w-10;){var a=parseInt(this.waterMarkContainer.style.fontSize);a-=1,this.waterMarkContainer.style.fontSize=a+"px"}},g.prototype.getChartElementsSize=function(){return{candleWidth:this.chartData.candleWidth,lineSpacing:1.5*this.chartData.candleWidth}},g.prototype.addEvents=function(){var t=this;window.onscroll=function(){t.parentRect=t.parent.getBoundingClientRect()};var a=t.divEventListener;a.onmouseover=function(a){t.rectChart_mouseOver(a,t)},a.onmouseout=function(a){t.rectChart_mouseOut(a,t)},a.onmousemove=function(a){t.rectChart_mouseMove(a,t)},a.onmousedown=function(a){t.rectChart_mouseDown(a,t)},a.onmouseup=function(a){t.rectChart_mouseUp(a,t)},a.addEventListener("touchstart",function(a){t.rectChart_touchStart(a,t,null)}),a.addEventListener("touchmove",function(a){t.rectChart_touchMove(a,t)}),a.addEventListener("touchend",function(a){t.rectChart_touchEnd(a,t)}),a.ondblclick=function(a){t.rectChart_dblclick(a,t)},a.oncontextmenu=function(a){t.rectChart_contextMenu(a,t)},"firefox"==this.detectBrowser(window,document)?a.addEventListener("MozMousePixelScroll",function(a){t.rectChart_mouseWheel(a,t)}):"ie"==this.detectBrowser(window,document)?a.addEventListener("wheel",function(a){t.rectChart_mouseWheel(a,t)}):a.addEventListener("mousewheel",function(a){t.rectChart_mouseWheel(a,t)}),this.addNavBtnsEvents(t)},g.prototype.rectChart_dblclick=function(t,a){var e=Math.floor(t.clientX-a.parentRect.left),i=Math.floor(t.clientY-a.parentRect.top);(e>a.w&&i<a.h||"click"===t.type)&&(a.chartData.options.Chart.autoScale||(a.chartData.options.Chart.autoScale=!0,this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams),a.chartData.indicators&&a.chartData.indicators.length&&a.createIndicatorsShowData(),a.updateDrawingObjectsPixels(),a.resizeNewsBubbles(),a.resizeEventsBubbles(),a.draw(a.showData,a.h),a.valueAxis=a.getValueAxis(a.chartData.scaleParams.minB,a.chartData.scaleParams.maxB,a.valueAxisCount,a.w,a.h,a.chartData.options.Chart.scalesFontSize,a.chartData.precission),a.getOscillatorChartsAxis(),a.clearGrid(),a.drawValueAxis(a.valueAxis),a.drawTimeAxis(a.timeAxis),a.drawOscillatorChartsAxis(),a.drawChartBorder(),a.drawCurrentValue(),this.activeSignal&&this.redrawActiveSignal())),a=null},g.prototype.rectChart_mouseWheel=function(t,a){if(t&&t.preventDefault&&t.preventDefault(),a.showData&&!(a.showData.length<1)&&!(Math.abs(t.deltaX)>Math.abs(t.deltaY))){var e=Math.floor(t.clientX-a.parentRect.left),i=t.deltaY?t.deltaY:t.detail;if(e<a.w)a.zoomX(i,1.2);else{a.chartData.options.Chart.autoScale=!1;var s=i>0?-15:15,r=parseFloat(a.chartData.scaleParams.minB),n=parseFloat(a.chartData.scaleParams.maxB),o=s*a.chartData.scaleParams.deltaY;a.chartData.scaleParams.minB=r+o,a.chartData.scaleParams.maxB=n-o,a.chartData.scaleParams.deltaY=(a.chartData.scaleParams.maxB-a.chartData.scaleParams.minB)/a.h,a.resizeShowDataValuesY(a.showData,a.h,a.chartData.scaleParams),a.updateDrawingObjectsPixels(),a.removeNewsTooltip(),a.removeEventsTooltip(),a.resizeNewsBubbles(),a.resizeEventsBubbles(),a.draw(a.showData,a.h),a.valueAxis=a.getValueAxis(a.chartData.scaleParams.minB,a.chartData.scaleParams.maxB,a.valueAxisCount,a.w,a.h,a.chartData.options.Chart.scalesFontSize,a.chartData.precission),a.getOscillatorChartsAxis(),a.clearGrid(),a.drawValueAxis(a.valueAxis),a.drawTimeAxis(a.timeAxis),a.drawOscillatorChartsAxis(),a.drawChartBorder(),a.drawCurrentValue()}a.moveCrosshairXY(a.showData,a.curX,a.curY,a.w,a.h),a.chartData.editDrawingObject&&"drawingTrend"===a.chartData.state&&(a.chartData.editDrawingObject.moveTo(a.crosshair.params.x,a.crosshair.params.y,a.crosshair.params),a.chartData.editDrawingObject.updateValues()),a.redrawInfo(),this.activeSignal&&this.redrawActiveSignal(),a.drawActiveDrawingObjects(!0),a.chartData.techChart.autoSaveParams(),a=null}},g.prototype.rectChart_mouseOver=function(t,a){n.c&&n.c.pressed||(a.isShowCrosshair=!0)},g.prototype.rectChart_mouseOut=function(t,a){if(!n.c||!n.c.pressed){switch(t.preventDefault(),a.isShowCrosshair=!1,a.chartData.state){case"zoomIn":a.rectChart_mouseOut_zoomIn(t);break;case"drawingBrush":a.rectChart_mouseOut_Brush(t);break;default:a.rectChart_mouseOut_default(t,a)}a=null}},g.prototype.rectChart_mouseOut_zoomIn=function(t){t.preventDefault()},g.prototype.rectChart_mouseOut_Brush=function(){if(this.rectChart_mouseUp_drawingBrush(),this.chartData.isDrawingObjectsLocked&&this.chartData.techChart.switchLockBtn(),this.chartData.editDrawingObject){if(0===this.chartData.editDrawingObject.circles.length)return;this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),this.chartData.editDrawingObject=null}},g.prototype.rectChart_mouseOut_default=function(t,a){t.preventDefault(),t.target.classList.remove("moveX"),t.target.classList.remove("moveY"),a.isPressed=!1,a.clearInfo(),a.drawActiveDrawingObjects(),a.setResizeOscillatorOff(),a.crosshair.text&&(a.crosshair.text.spanDate.parentNode.style.display="none",a.crosshair.text.spanValue.parentNode.style.display="none"),this.navButtons.classList.toggle("tch-active",!1),a=null},g.prototype.rectChart_contextMenu=function(t,a){t.preventDefault();var e=!1;if(a.chartData.editDrawingObject&&("drawingBrush"===a.chartData.state?(a.rectChart_mouseUp_drawingBrush(),e=!0):a.chartData.editDrawingObject.drawingStage.current<=a.chartData.editDrawingObject.drawingStage.max&&(a.removeDrawingObjectsOtherCharts(a.chartData.editDrawingObject),a.redrawAllDrawingObjectsOtherCharts(),a.chartData.editDrawingObject.remove(),e=!0),e))return a.chartData.state="default",a.chartData.techChart.deactivateMenuTypeAll(),a.redrawDrawingObjects(),void a.redrawActiveDrawingObjects();var i=Math.floor(t.clientX-a.parentRect.left),s=Math.floor(t.clientY-a.parentRect.top);a.curX=i,a.curY=s,this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),a.chartData.editDrawingObject=null),this.chartData.activeDrawingObject&&(this.chartData.activeDrawingObject.state="normal",this.chartData.activeDrawingObject.draw(this.canvasDrawingContext),a.chartData.activeDrawingObject=null);for(var r=0;r<a.chartData.drawingObjects.length;r++){if(a.chartData.drawingObjects[r].isFocused(a.curX,a.curY)){a.chartData.drawingObjects[r].state="edit",a.chartData.editDrawingObject=a.chartData.drawingObjects[r],a.redrawDrawingObjects(),a.drawActiveDrawingObjects(!0);var n=a.getSettingsPanelContainer();a.chartData.editDrawingObject.fillSettingsPanel(n),n.classList.toggle("tch-hidden",!1),n.offsetWidth+i>a.parentRect.width&&(n.style.left=a.parentRect.width-n.offsetWidth+"px"),n.offsetHeight+s>a.parentRect.height&&(n.style.top=parseInt(n.style.top)-n.offsetHeight+"px");break}a.chartData.drawingObjects[r]instanceof c.a?(a.chartData.drawingObjects[r].remove(),!1===this.chartData.isStayDrawingMode&&(this.chartData.techChart.setState("default"),this.chartData.techChart.setRouleteBtn("Off")),this.redrawDrawingObjects(),this.redrawInfo()):a.chartData.drawingObjects[r].state="normal"}a=null},g.prototype.rectChart_mouseDown=function(t,a){var e=Math.floor(t.clientX-a.parentRect.left),i=Math.floor(t.clientY-a.parentRect.top);a.setActiveChart(),t.preventDefault(),a.curX=e,a.curY=i,1===t.which||0===t.which?("default"!==a.chartData.state&&!1===a.chartData.techChart.charts[0].chartData.isShowDrawingObjects&&a.chartData.techChart.hiddeAllDrawing(),a["rectChart_mouseDown_"+(a.chartData.state?a.chartData.state:"default")](t)):3===t.which&&t.preventDefault(),a=null},g.prototype.rectChart_touchStart=function(t,a){if(t.changedTouches.length>1)return!1;t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY,t.radiusX=t.changedTouches[0].radiusX,t.radiusY=t.changedTouches[0].radiusY;var e=Math.floor(t.clientX-a.parentRect.left),i=Math.floor(t.clientY-a.parentRect.top);a.curX=e,a.curY=i,null===a.tappedClickTimer?a.tappedClickTimer=setTimeout(function(){a.tappedClickTimer=null,a.rectChart_mouseMove(t,a),a.rectChart_mouseDown(t,a),a.redrawInfo()},200):(clearTimeout(a.tappedClickTimer),a.tappedClickTimer=null,a.rectChart_dblclick(t,a)),t.preventDefault()},g.prototype.rectChart_touchMove=function(t,a){t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY,t.isNoLimitedMove=!0,a.rectChart_mouseMove(t,a)},g.prototype.rectChart_touchEnd=function(t,a){a.rectChart_mouseUp(t,a)},g.prototype.rectChart_mouseDown_drawingAnchoredText=function(t){this.rectChart_mouseDown_drawingTextObject(t,"AnchoredText")},g.prototype.rectChart_mouseUp_drawingAnchoredText=function(t){this.rectChart_mouseUp_drawingText(t)},g.prototype.rectChart_mouseDown_drawingText=function(t){this.rectChart_mouseDown_drawingTextObject(t,"Text")},g.prototype.rectChart_mouseDown_drawingFlag=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"Flag"),this.draw()},g.prototype.rectChart_mouseUp_drawingFlag=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingText=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseDown_drawingTextObject=function(t,a){this.rectChart_mouseDown_drawingOnePointObject(t,a),this.draw();var e=this.getSettingsPanelContainer();e.closeCounter=1,this.chartData.editDrawingObject.createLineSettingsPanel(e)},g.prototype.rectChart_mouseDown_drawingArrowMarkLeft=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"ArrowMarkLeft")},g.prototype.rectChart_mouseDown_drawingArrowMarkRight=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"ArrowMarkRight")},g.prototype.rectChart_mouseDown_drawingArrowMarkUp=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"ArrowMarkUp")},g.prototype.rectChart_mouseDown_drawingArrowMarkDown=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"ArrowMarkDown")},g.prototype.rectChart_mouseUp_drawingArrowMarkLeft=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingArrowMarkRight=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingArrowMarkUp=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingArrowMarkDown=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingBrush=function(){this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.completeFigure(),this.completeFigureOtherCharts(this.chartData.editDrawingObject.id),this.redrawInfo(),this.drawActiveDrawingObjects(!0),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id))},g.prototype.rectChart_mouseDown_drawingNote=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"Note");var a=this.getSettingsPanelContainer();a.closeCounter=1,this.chartData.editDrawingObject.createLineSettingsPanel(a)},g.prototype.rectChart_mouseUp_drawingNote=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseDown_drawingAnchoredNote=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"AnchoredNote");var a=this.getSettingsPanelContainer();a.closeCounter=1,this.chartData.editDrawingObject.createLineSettingsPanel(a)},g.prototype.rectChart_mouseUp_drawingAnchoredNote=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseDown_drawingRectangle=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Rectangle")},g.prototype.rectChart_mouseUp_drawingRectangle=function(){},g.prototype.rectChart_mouseDown_drawingPolyline=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Polyline")},g.prototype.rectChart_mouseUp_drawingPolyline=function(){},g.prototype.rectChart_mouseDown_drawingRotatedRect=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"RotatedRect")},g.prototype.rectChart_mouseDown_drawingFlatTopBottom=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"FlatTopBottom"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseDown_drawingParallelChannel=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"ParallelChannel"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseDown_drawingDisjointAngle=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"DisjointAngle"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseDown_drawingTrendAngle=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"TrendAngle"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseDown_drawingRay=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Ray"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseDown_drawingTrendLine=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"TrendLine"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseDown_drawingArrow=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Arrow"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseDown_drawingArc=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Arc"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseDown_drawingEllipse=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Ellipse"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseDown_drawingTriangle=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Triangle")},g.prototype.rectChart_mouseDown_drawingRoulete=function(t){var a=this.getDrawingObjectIndexByType("Roulete");a>-1&&this.chartData.drawingObjects[a].drawingStage.current>=this.chartData.drawingObjects[a].drawingStage.max?(this.chartData.state="default",this.chartData.drawingObjects[a].remove(),this.redrawInfo(),this.rectChart_mouseDown_default(t)):this.rectChart_mouseDown_drawingPointsObject(t,"Roulete")},g.prototype.rectChart_mouseUp_drawingRoulete=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingTriangle=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingRectangle=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseDown_drawingCurve=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Curve"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingCurve=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingArrow=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingArc=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingEllipse=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingRotatedRect=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingRay=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingHorizontalRay=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingHorizontalLine=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingVerticalLine=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingTrendLine=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingTrendAngle=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingFlatTopBottom=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingDisjointAngle=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.rectChart_mouseUp_drawingParallelChannel=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},g.prototype.toggleDisabledClasses=function(t){var a=[".tch-zoomin-btn",".tch-zoomout-btn",".tch-show-hide-drawing-btn",".tch-roulete-drawing-btn",".tch-dropdown-container-periods",".tch-chart-type-container",".tch-indicator-container",".tch-settings-button",".tch-tab-btn"];this.techChart.configuration.modules.headerButtons.searchQuotationButton&&a.push(".tch-search");for(var e=0;e<a.length;e++){var i=this.chartData.techChart.parent.querySelector(a[e]);if(".tch-search"===a[e])i.disabled=t,i.classList.toggle("tch-disabled",t),i.parentElement.classList.toggle("tch-disabled",t);else if(".tch-dropdown-container-periods"===a[e]||".tch-chart-type-container"===a[e]||".tch-indicator-container"===a[e])i.classList.toggle("tch-disabled",t),i.childNodes[0].classList.toggle("tch-disabled",t),i.childNodes[1].classList.toggle("tch-disabled",t);else if(".tch-tab-btn"===a[e]&&Object.keys(this.chartData.techChart.groupCharts).length!==this.chartData.techChart.maxTabsQuantity)i.classList.toggle("tch-tab-btn-disable",t),i.parentElement.classList.toggle("tch-tab-btn-disable",t);else{if(i.classList.contains("tch-roulete-drawing-btn")&&i.classList.contains("tch-active"))continue;i.classList.toggle("tch-disabled",t),i.parentElement.classList.toggle("tch-disabled",t)}}for(var s=this.chartData.techChart.parent.querySelectorAll(".tch-chart-tab"),r=0;r<s.length;r++)s[r].classList.toggle("tch-disabled",t)},g.prototype.checkDisabledStates=function(t,a){var e=this.chartData.editDrawingObject;"drawingRoulete"===t&&e.drawingStage.max==a-1?this.toggleDisabledClasses(!1):"edit"===t&&1==a?this.toggleDisabledClasses(!0):("drawing"!==t.substring(0,7)||e.drawingStage.max!=a-1||this.chartData.isStayDrawingMode)&&(e.drawingStage.max!=a-1||this.chartData.isStayDrawingMode)||this.toggleDisabledClasses(!1)},g.prototype.rectChart_mouseDown_drawingPointsObject=function(t,a){if(this.chartData.editDrawingObject)this.chartData.editDrawingObject.drawingStage.current<=this.chartData.editDrawingObject.drawingStage.max?(this.chartData.editDrawingObject.updateLastPoint({d:this.crosshair.params.dateSeconds,v:this.crosshair.params.value},{x:this.crosshair.params.x,y:this.crosshair.params.y}),this.chartData.editDrawingObject.drawingStage.current++,this.chartData.editDrawingObject.drawingStage.current<=this.chartData.editDrawingObject.drawingStage.max?this.chartData.editDrawingObject.appendPoint({d:this.crosshair.params.dateSeconds,v:this.crosshair.params.value},{x:this.crosshair.params.x,y:this.crosshair.params.y,active:!0}):(this.chartData.state=this.chartData.isStayDrawingMode?this.chartData.state:"default",this.chartData.editDrawingObject.points[this.chartData.editDrawingObject.points.length-1].active=!1,this.redrawInfo()),this.updateDrawingObjectsOtherChart(this.chartData.editDrawingObject),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)):(this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),this.updateDrawingObjectsOtherChart(this.chartData.editDrawingObject),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id),this.chartData.editDrawingObject=null,this.redrawInfo(),this.rectChart_mouseDown_drawingPointsObject(t,a));else{this.chartData.isDrawingObjectsLocked&&this.chartData.techChart.switchLockBtn();var e={};e.points=[{x:this.crosshair.params.x,y:this.crosshair.params.y},{x:this.crosshair.params.x,y:this.crosshair.params.y,active:!0}];var i=this.crosshair.params.dateSeconds,s=this.crosshair.params.value;e.data=[{d:i,v:s},{d:i,v:s}];var r=o.a.createDrawingObjectByType(a,[this.chartData,e]);r.state="edit",this.chartData.editDrawingObject=r,this.chartData.drawingObjects.push(r),this.chartData.editDrawingObject.drawingStage.current++,this.createDrawingObjectOtherCharts(a,r.id,e),this.drawActiveDrawingObjectsOtherCharts(r.id)}"default"===this.chartData.state&&this.chartData.techChart.deactivateMenuTypeAll()},g.prototype.rectChart_mouseDown_drawingBrush=function(){if(this.chartData.isDrawingObjectsLocked&&this.chartData.techChart.switchLockBtn(),this.chartData.editDrawingObject){if(0==this.chartData.editDrawingObject.circles.length)return;this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),this.chartData.editDrawingObject=null}var t={};t.points=[{x:this.crosshair.params.x,y:this.crosshair.params.y},{x:this.crosshair.params.x,y:this.crosshair.params.y,active:!0}];var a=this.crosshair.params.dateSeconds,e=this.crosshair.params.value;t.data=[{d:a,v:e},{d:a,v:e}];var i=new l.a(this.chartData,t);i.state="edit",this.chartData.editDrawingObject=i,this.chartData.drawingObjects.push(i),this.chartData.editDrawingObject.drawingStage.current++,this.createDrawingObjectOtherCharts("Brush",i.id,t),this.drawActiveDrawingObjectsOtherCharts(i.id)},g.prototype.rectChart_mouseDown_drawingHorizontalLine=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"HorizontalLine")},g.prototype.rectChart_mouseDown_drawingHorizontalRay=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"HorizontalRay")},g.prototype.rectChart_mouseDown_drawingOnePointObject=function(t,a){this.chartData.isDrawingObjectsLocked&&this.chartData.techChart.switchLockBtn(),this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),this.chartData.editDrawingObject=null);var e={};e.points=[{x:this.crosshair.params.x,y:this.crosshair.params.y},{x:this.crosshair.params.x,y:this.crosshair.params.y,active:!0}];var i=this.crosshair.params.dateSeconds,s=this.crosshair.params.value;e.data=[{d:i,v:s},{d:i,v:s}];var r=o.a.createDrawingObjectByType(a,[this.chartData,e]);r.state="edit",this.chartData.editDrawingObject=r,this.chartData.drawingObjects.push(r),this.createDrawingObjectOtherCharts(a,r.id,e),this.redrawActiveDrawingObjects(!0),this.drawActiveDrawingObjectsOtherCharts(r.id),this.chartData.state=this.chartData.isStayDrawingMode?this.chartData.state:"default","default"===this.chartData.state&&this.chartData.techChart.deactivateMenuTypeAll()},g.prototype.rectChart_mouseDown_drawingVerticalLine=function(){this.chartData.isDrawingObjectsLocked&&this.chartData.techChart.switchLockBtn(),this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),this.chartData.editDrawingObject=null);var t={};t.points=[{x:this.crosshair.params.x,y:0},{x:this.crosshair.params.x,y:this.h}];var a=this.crosshair.params.dateSeconds;t.data=[{d:a}];var e=new h.a(this.chartData,t);e.state="edit",this.chartData.editDrawingObject=e,this.chartData.drawingObjects.push(e),this.createDrawingObjectOtherCharts("VerticalLine",e.id,t),this.redrawActiveDrawingObjects(!0),this.drawActiveDrawingObjectsOtherCharts(e.id),this.chartData.state=this.chartData.isStayDrawingMode?this.chartData.state:"default","default"===this.chartData.state&&this.chartData.techChart.deactivateMenuTypeAll()},g.prototype.createDrawingObjectOtherCharts=function(t,a,e){for(var i=this.chartData.techChart.charts,s=0;s<i.length;s++)if(s!==this.chartData.techChart.activeChartIndex&&i[s].chartData.pair.ID===this.chartData.pair.ID){var r=o.a.createDrawingObjectByType(t,[i[s].chartData,e]);i[s].chartData.drawingObjects.push(r),r.id=a}},g.prototype.rectChart_mouseDown_zoomIn=function(){this.curY>this.h||this.curX>this.w||(this.chartData.zoomData.startX=this.curX,this.chartData.zoomData.startY=this.curY,this.isPressed=!0)},g.prototype.rectChart_mouseDown_default=function(t){if(this.curX<this.w&&this.curY<this.parentRect.height-this.offY){if(!this.chartData.isDrawingObjectsLocked){var a=!1;if(this.chartData.editDrawingObject){if(this.chartData.editDrawingObject.isFocused(this.curX,this.curY))return this.chartData.activeDrawingObject&&(this.chartData.activeDrawingObject.state="normal",this.chartData.activeDrawingObject.isPressed=!1,this.chartData.activeDrawingObject=null),this.chartData.editDrawingObject.isPressed=!0,this.chartData.editDrawingObject.state="edit",void this.redrawDrawingObjects();this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject=null,a=!0}if(this.chartData.activeDrawingObject){if(this.chartData.activeDrawingObject.isFocused(this.curX,this.curY))return this.chartData.activeDrawingObject.state="edit",this.chartData.editDrawingObject=this.chartData.activeDrawingObject,this.chartData.editDrawingObject.isPressed=!0,this.chartData.activeDrawingObject=null,this.redrawDrawingObjects(),void this.drawActiveDrawingObjects(!0);this.chartData.activeDrawingObject.state="normal",this.chartData.activeDrawingObject=null,a=!0}for(var e=0;e<this.chartData.drawingObjects.length;e++)if(this.chartData.drawingObjects[e].isFocused(this.curX,this.curY))return this.chartData.drawingObjects[e].state="edit",this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.state="normal"),this.chartData.editDrawingObject=this.chartData.drawingObjects[e],this.chartData.activeDrawingObject&&(this.chartData.activeDrawingObject.state="normal",this.chartData.activeDrawingObject=null),a=!0,void this.redrawDrawingObjects();a&&(this.redrawInfo(),this.redrawDrawingObjects())}if(this.isPressed=!0,this.chartData.indicators.length){var i;for(e=0;e<this.chartData.indicators.length;e++)if("oscillator"===this.chartData.indicators[e].type){i=this.oscillatorCharts[this.chartData.indicators[e].id].top,Math.abs(this.curY-i)<this.resizeEdgeHeight&&(this.isResizeOscillator=!0,this.oscillatorCharts[this.chartData.indicators[e].id].parent.classList.toggle("tch-chart-resized-top",!0),e>0&&"oscillator"===this.chartData.indicators[e-1].type&&this.oscillatorCharts[this.chartData.indicators[e-1].id].parent.classList.toggle("tch-chart-resized-bottom",!0));var s=this.oscillatorCharts[this.chartData.indicators[e].id].h;Math.abs(this.curY-(i+s))<this.resizeEdgeHeight&&(this.isResizeOscillator=!0,this.oscillatorCharts[this.chartData.indicators[e].id].parent.classList.toggle("tch-chart-resized-bottom",!0))}if(this.isResizeOscillator)return void(Math.abs(this.curY-this.h)&&this.parent.classList.toggle("tch-chart-resized-bottom",!0))}this.chartData.options.Chart.autoScale?t.target.classList.add("moveX"):(t.target.classList.add("moveX"),t.target.classList.add("moveY"))}else this.curX>this.w&&this.curY<this.parentRect.height-this.offY&&(this.chartData.options.Chart.autoScale=!1,this.isSetScaleY=!0,this.isPressed=!0,t.target.classList.add("moveY"));this.chartData.techChart.closePanelSettingIndicator(t)},g.prototype.rectChart_mouseUp=function(t,a){t.preventDefault(),1!==t.which&&0!==t.which||(a["rectChart_mouseUp_"+(a.chartData.state?a.chartData.state:"default")](t),a.mouseUpOtherCharts(a)),a.chartData.techChart.autoSaveParams(),a=null},g.prototype.mouseUpOtherCharts=function(t){for(var a=t.chartData.techChart.charts,e=0;e<a.length;e++)e===t.chartData.techChart.activeChartIndex&&"zoomIn"==a[e].chartData.state&&a[e].rectChart_mouseUp_zoomIn()},g.prototype.setResizeOscillatorOff=function(){if(this.isResizeOscillator){var t=this.parent.querySelectorAll(".tch-chart-resized-top");t&&t.length&&g.removeClass(t,"tch-chart-resized-top");var a=this.parent.querySelectorAll(".tch-chart-resized-bottom");a&&a.length&&g.removeClass(a,"tch-chart-resized-bottom"),this.parent.classList.toggle("tch-chart-resized-top",!1),this.parent.classList.toggle("tch-chart-resized-bottom",!1),this.isResizeOscillator=!1}},g.prototype.rectChart_mouseUp_default=function(t){t.target.classList.remove("moveX"),t.target.classList.remove("moveY"),this.isPressed=!1,this.isSetScaleY=!1,this.setResizeOscillatorOff(),this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.isPressed?(this.chartData.editDrawingObject.isPressed=!1,this.chartData.editDrawingObject.updateValues()):(this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),this.chartData.editDrawingObject=null),this.redrawInfo()),this.navButtonStartContainer.onmouseup(t)},g.prototype.rectChart_mouseUp_zoomIn=function(){if(this.isPressed){this.chartData.techChart.parent.querySelector(".tch-zoomin-btn").classList.toggle("tch-active"),this.chartData.zoomData.endX=this.curX,this.chartData.zoomData.endY=this.curY;var t,a=!1;this.scaleZoomDataQuantCandles(this.chartData.zoomData,5),this.chartData.zoomData.startY!==this.chartData.zoomData.endY&&this.showData.length<=10&&(a=!0),a||(t={maxValue:this.chartData.scaleParams.maxB,minValue:this.chartData.scaleParams.minB,startDate:this.chartData.startDateSeconds,candleWidth:this.chartData.candleWidth,startX:this.w-parseFloat(this.showData[0].x)},this.chartData.zoomSteps.push(t),this.chartData.zoomData.click?this.zoomX(-100,2):this.zoomArea(this.chartData.zoomData)),this.chartData.techChart.parent.querySelector(".tch-zoomout-btn").disabled=!1,this.isPressed=!1,this.zoomSelector.style.display="none",this.chartData.state="default",this.chartData.techChart.autoSaveParams()}},g.prototype.rectChart_mouseMove_drawingPointsObject=function(){if(this.chartData.editDrawingObject&&this.chartData.editDrawingObject.drawingStage.current<=this.chartData.editDrawingObject.drawingStage.max){var t=this.clearInfo();this.drawCrosshair(t,t.canvas.height,this.techChart.configuration.modules.headerButtons.createPipsButton),this.chartData.editDrawingObject.moveTo(this.curX,this.curY,this.crosshair.params),this.drawActiveDrawingObjects(!0),this.updateDrawingObjectsOtherChart(this.chartData.editDrawingObject),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)}},g.prototype.rectChart_mouseMove_drawingBrushObject=function(){if(this.chartData.editDrawingObject&&1==this.chartData.editDrawingObject.drawingStage.current){var t=this.clearInfo();this.drawCrosshair(t,t.canvas.height,this.techChart.configuration.modules.headerButtons.createPipsButton),this.chartData.editDrawingObject.moveTo(this.curX,this.curY,this.crosshair.params),this.drawActiveDrawingObjects(!0),this.updateDrawingObjectsOtherChart(this.chartData.editDrawingObject),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)}},g.prototype.rectChart_mouseMove_zoomIn=function(){if(this.isPressed){var t=this.chartData.zoomData.startX,a=this.chartData.zoomData.startY,e=this.curX,i=this.curY;t>this.w-8&&(t=this.w-8),a>this.h&&(a=this.h),e>this.w-8&&(e=this.w-8),i>this.h&&(i=this.h);var s=Math.abs(e-t),r=Math.abs(i-a);this.zoomSelector.style.left=e-t<0?e+"px":t+"px",this.zoomSelector.style.top=i-a<0?i+"px":a+"px",this.zoomSelector.style.width=s+"px",this.zoomSelector.style.height=r+"px",this.zoomSelector.style.display="block"}},g.prototype.processMoving=function(t,a){if(this.isSetScaleY){if(Math.abs(a)<1)return;var e=a>0?-15:15;this.chartData.options.Chart.autoScale=!1;var i=parseFloat(this.chartData.scaleParams.minB),s=parseFloat(this.chartData.scaleParams.maxB),r=e*this.chartData.scaleParams.deltaY;this.chartData.scaleParams.minB=i-r,this.chartData.scaleParams.maxB=s+r,this.chartData.scaleParams.deltaY=(this.chartData.scaleParams.maxB-this.chartData.scaleParams.minB)/this.h,this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams),this.updateDrawingObjectsPixels(),this.resizeNewsBubbles(),this.resizeEventsBubbles(),this.draw(this.showData,this.h),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.getOscillatorChartsAxis(),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrentValue(),this.clearInfo(),this.drawActiveDrawingObjects()}else{if(this.chartData.options.Chart.autoScale){if(!this.moveChartX(this,t))return}else if(!this.moveChartY(this,a)&!this.moveChartX(this,t))return;this.showData[0].date===this.selectedData[0].date&&this.showData[this.showData.length-1].date===this.selectedData[this.selectedData.length-1].date||(this.selectedData=this.getSelectedDataByShowData(this.showData),this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams)),this.chartData.indicators&&this.chartData.indicators.length&&this.createIndicatorsShowData(),this.updateDrawingObjectsPixels(),this.draw(this.showData,this.h),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.getOscillatorChartsAxis(),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrentValue()}this.activeSignal&&this.redrawActiveSignal()},g.prototype.rectChart_mouseMove_default=function(t,a,e,i,s){if(t.preventDefault(),t.stopPropagation(),this.isPressed){this.moving.totalX+=a,this.moving.totalY+=e;var r=this;this.movingTimeout||(a=this.moving.totalX,e=this.moving.totalY,r.moving.totalX=0,r.moving.totalY=0,this.movingTimeout=setTimeout(function(){r.processMoving(a,e),r.movingTimeout=null,r=null},5))}else if(this.chartData.isDrawingObjectsLocked)this.focusNewsBubbles(i,s),this.focusEventsBubbles(i,s),this.navButtons.onmousemove();else if(this.chartData.editDrawingObject&&this.chartData.editDrawingObject.isPressed){var n=this.crosshair.params.x,o=this.crosshair.params.y,h=this.crosshair.params.dateSeconds,c=this.crosshair.params.value;this.curX=i,this.curY=s;var l=this.clearInfo();this.drawCrosshair(l,l.canvas.height,this.techChart.configuration.modules.headerButtons.createPipsButton),a=n-this.crosshair.params.x,e=o-this.crosshair.params.y;var d=h-this.crosshair.params.dateSeconds,p=c-this.crosshair.params.value;if(Math.abs(a)<1&&Math.abs(e)<1)return;this.chartData.editDrawingObject.isObjectEdit?this.chartData.editDrawingObject.shiftTo(a,e,this.crosshair.params,d,p):(this.chartData.editDrawingObject.moveTo(this.curX,this.curY,this.crosshair.params),this.drawActiveDrawingObjects(!0)),this.updateDrawingObjectsOtherChart(this.chartData.editDrawingObject),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id),this.drawActiveDrawingObjects()}else{var u=!1,g=null,D=null,f=!1;this.chartData.editDrawingObject&&(g=this.chartData.editDrawingObject.isObjectEdit,D=this.chartData.editDrawingObject.isChanged);for(var w=0;w<this.chartData.drawingObjects.length;w++){if(this.chartData.drawingObjects[w].isFocused(this.curX,this.curY)){"edit"===this.chartData.drawingObjects[w].state||"active"===this.chartData.drawingObjects[w].state?u=!0:(this.chartData.drawingObjects[w].state="active",this.chartData.activeDrawingObject=this.chartData.drawingObjects[w],u=!0),this.chartData.editDrawingObject&&this.chartData.editDrawingObject.isChanged!==D&&(f=!0);break}"active"===this.chartData.drawingObjects[w].state?(this.chartData.drawingObjects[w].state="normal",this.chartData.activeDrawingObject=null,this.chartData.drawingObjects[w].draw(this.canvasDrawingContext),u=!0):"edit"===this.chartData.drawingObjects[w].state&&(u=!0),!this.chartData.editDrawingObject||this.chartData.editDrawingObject.isChanged===D&&g===this.chartData.editDrawingObject.isObjectEdit||(f=!0)}f&&this.drawActiveDrawingObjects(!0),this.focusNewsBubbles(i,s),this.focusEventsBubbles(i,s),u?(this.redrawInfo(),this.redrawDrawingObjects()):this.navButtons.onmousemove()}var y;if(this.chartData.indicators.length)for(w=0;w<this.chartData.indicators.length;w++)if("oscillator"===this.chartData.indicators[w].type){if(y=this.oscillatorCharts[this.chartData.indicators[w].id].top,Math.abs(this.curY-y)<this.resizeEdgeHeight){t.target.classList.toggle("tch-cursor-arrow",!1),t.target.classList.toggle("moveY",!0);break}t.target.classList.toggle("moveY",!1),t.target.classList.toggle("tch-cursor-arrow",!0)}},g.prototype.rectChart_mouseMove=function(t,a){if(!n.c||!n.c.pressed){t.preventDefault();var e=Math.floor(t.clientX-a.parentRect.left),i=Math.floor(t.clientY-a.parentRect.top),s=a.curX-e,r=a.curY-i;if(a.isResizeOscillator)a.resizeOscillatorOnMouseMove(a.curY,r);else switch(a.chartData.state){case"default":a.rectChart_mouseMove_default(t,s,r,e,i);break;case"drawingBrush":a.rectChart_mouseMove_drawingBrushObject(t,s,r,e,i);break;case"zoomIn":a.rectChart_mouseMove_zoomIn(t,a);break;default:a.rectChart_mouseMove_drawingPointsObject(t,s,r,e,i)}a.curX=e,a.curY=i,a.moveCrosshairXY(a.showData,a.curX,i,a.w,a.h),a.redrawInfo(),a=null}},g.prototype.resize=function(){var t=(parseInt(this.parentRect.width)-this.offX)/2;this.showData&&this.showData.length&&this.showData[0].x<t&&(this.chartData.startX=0),this.init()},g.prototype.horizontalArrowEvent=function(t){this.moveChartX(this,t)&&(this.showData[0].date===this.selectedData[0].date&&this.showData[this.showData.length-1].date===this.selectedData[this.selectedData.length-1].date||(this.selectedData=this.getSelectedDataByShowData(this.showData),this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams)),this.chartData.indicators&&this.chartData.indicators.length&&this.createIndicatorsShowData(),this.updateDrawingObjectsPixels(),this.draw(this.showData,this.h),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.getOscillatorChartsAxis(),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrentValue(),this.redrawInfo())},g.prototype.verticalArrowEvent=function(t){this.chartData.options.Chart.autoScale=!1,this.moveChartY(this,t,!0),this.draw(this.showData,this.h),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.drawChartBorder(),this.drawCurrentValue(),this.redrawInfo()},g.prototype.redraw=function(){this.selectedData=this.selectDataToShow(this.chartData.data[this.chartData.typeData],this.chartData.startDateSeconds,this.chartData.spacing,this.w),this.showData=this.processDataToShow(this.selectedData,this.chartData.rightPadding,this.chartData.spacing,this.w,this.h,this.chartData.precission,this.chartData.startX,null),this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams),this.chartData.indicators&&this.chartData.indicators.length&&this.createIndicatorsShowData(),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission,this.offY),this.timeAxis=this.getTimeAxis(this.showData,this.w,this.parentRect.height-this.offY,this.chartData.period,this.chartData.timeMode,this.chartData.localization),this.getOscillatorChartsAxis(),this.updateDrawingObjectsPixels(),this.drawDataPanel(this.showData[0]),this.draw(this.showData,this.h),this.drawActiveDrawingObjects(),this.activeSignal&&this.redrawActiveSignal(),this.clearGrid(),this.drawTimeAxis(this.timeAxis),this.drawValueAxis(this.valueAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrent(this.chartData.currentValue)},g.prototype.redrawActiveDrawingObjects=function(t){this.clearCanvas(this.canvasDrawingActive),this.drawActiveDrawingObjects(t)},g.prototype.drawChart=function(t,a){if(!t||0===t.length||isNaN(a))return!1;var e=this.canvasDataNormalContext,i=this.canvasDataPixelatedContext;if(!e||!i)return!1;var s=this.canvasDataNormalContext.canvas,n=this.canvasDataPixelatedContext.canvas;return r.a.clearRect(s,null,0,0,s.width,s.height),r.a.clearRect(n,null,0,0,n.width,n.height),this.chartData.indicators&&this.chartData.indicators.length&&this.drawIndicators(),this.redrawDrawingObjects(),!0},g.prototype.setBackgroundColor=function(t){this.chartData.colors.Chart.backgroundColor=t,this.canvasGrid.style.backgroundColor=this.chartData.colors.Chart.backgroundColor},g.prototype.setColorDown=function(t){var a;if(t.indexOf("#")>-1)a=this.hexToRgb(t);else{var e=t.split(")")[0];a={r:(e=(e=e.split("(")[1]).split(", "))[0],g:e[1],b:e[2]}}a="rgba("+a.r+","+a.g+","+a.b+", 0.12)",this.chartData.colors.AreaChart.colorDown=a},g.prototype.setChartThemes=function(t){t=t.toLowerCase(),this.chartData.colors=Object(u.b)(this.chartData.themes[t]),this.chartData.chart.init(!0)},g.prototype.createShowData=function(){this.showData=this.processDataToShow(this.selectedData,this.chartData.rightPadding,this.chartData.spacing,this.w,this.h,this.chartData.precission,this.chartData.startX,null)},g.prototype.isPositionValid=function(){return parseFloat(this.showData[0].x)<this.w-this.chartData.rightPadding+this.chartData.spacing},g.prototype.getElementsByXRange=function(t,a,e){if(!t||0===t.length||isNaN(a)||isNaN(e))return[];var i=this.binarySearhElementWithField(t,a,"x"),s=this.binarySearhElementWithField(t,e,"x");return t.slice(s,i+1)},g.prototype.binarySearhElementWithField=function(t,a,e){for(var i,s,r=t.length-1,n=0;r>n;)if((s=t[i=(r+n)/2|0])[e]>a)n=i+1;else{if(!(s[e]<a))return i;r=i-1}return t[r]&&t[r][e]>a&&r!==t.length-1&&(r+=1),r},g.prototype.detectBrowser=function(t,a){return-1!==t.navigator.userAgent.indexOf("Opera")||-1!==t.navigator.userAgent.indexOf("OPR")?"opera":-1!==t.navigator.userAgent.indexOf("MSIE")||a.documentMode?"ie":t.StyleMedia?"edge":-1!==t.navigator.userAgent.indexOf("Chrome")?"chrome":-1!==t.navigator.userAgent.indexOf("Safari")?"safari":-1!==t.navigator.userAgent.indexOf("Firefox")?"firefox":"unknown"},g.countDigits=function(t){var a=(""+t).replace(",",".").split(".");return a.length>1?a[1].length:0},g.prototype.checkHasEnoughData=function(t,a){return this.getExtraDataNumb(t,a)<=0},g.prototype.getExtraDataNumb=function(t,a){var e=this.selectDataToShow(t.data[t.typeData],t.startDateSeconds,t.spacing,a);return this.pxToDataNumb(Math.ceil((a-t.rightPadding)/t.spacing))-e.length},g.prototype.pxToDataNumb=function(t){return!t||isNaN(t)?0:t},g.prototype.selectDataToShow=function(t,a,e,i){if(!t||0===t.length||isNaN(a)||isNaN(e)||isNaN(i))return[];for(var s=[],r=Math.ceil(i/e),n=0;n<t.length&&s.length<=r;n++)if(t[n]){if(t[n].date>a)continue;s.push(t[n])}return s},g.prototype.getCoordinateX=function(t,a,e,i){if(t=parseFloat(t),a=parseFloat(a),e=parseFloat(e),i=parseFloat(i),!(isNaN(t)||isNaN(a)||isNaN(e)||isNaN(i))){var s=parseFloat(t-a-i*e);return(s=s>0?s:0).toFixed(1)}},g.prototype.getCoordinateY=function(t,a,e,i){if(t=parseFloat(t),a=parseFloat(a),e=parseFloat(e),i=parseFloat(i),!(isNaN(t)||isNaN(a)||isNaN(e)||isNaN(i)||0===i))return parseFloat(a-(t-e)/i).toFixed(1)},g.prototype.drawChartBorder=function(){var t=r.a.getPosition(this.parentRect.height-this.offY,2);r.a.drawLine(null,this.canvasGridContext,0,t,Math.round(this.w-7),t,this.chartData.colors.Chart.colorScalesLines,[],2),t=r.a.getPosition(this.w-7,2),r.a.drawLine(null,this.canvasGridContext,t,-7,t,Math.round(this.parentRect.height-this.offY),this.chartData.colors.Chart.colorScalesLines,[],2),this.drawChartOscillatorsBorder(2)},g.prototype.drawChartOscillatorsBorder=function(t){var a,e;for(var i in this.oscillatorCharts)this.oscillatorCharts.hasOwnProperty(i)&&(e=this.oscillatorCharts[i].top,a=r.a.getPosition(e,t),r.a.drawLine(null,this.canvasGridContext,0,a,Math.round(this.w-7),a,this.chartData.colors.Chart.colorScalesLines,[],t))},g.prototype.clearGrid=function(){this.axisTextContainer.innerHTML="";var t=this.canvasGridContext,a=t.canvas;r.a.clearRect(null,t,0,0,a.width,a.height)},g.prototype.clearCanvas=function(t,a){r.a.clearRect(null,a,0,0,t.width,t.height)},g.prototype.clearSignals=function(){var t=this.canvasSignalsContext,a=t.canvas;this.clearCanvas(a,t)},g.prototype.clearOptions=function(){var t=this.canvasOptionsContext,a=t.canvas;this.clearCanvas(a,t)},g.prototype.getNearestCandleIndex=function(t){if(!this.showData||0===this.showData.length)return!1;if(this.showData[0].date<=t)return 0;var a=this.binarySearhElementWithField(this.showData,t,"date");return this.showData[a].date<t&&(a-=1),a},g.prototype.setChartZoomedSize=function(t,a,e){var i=t>0?this.chartData.candleWidth/t:this.chartData.candleWidth*t;if(e<0)this.chartData.zoomView=this.chartData.zoomView/a;else{if(!(e>0))return;this.chartData.zoomView=this.chartData.zoomView*a}this.chartData.candleWidth=i*this.chartData.zoomView,this.chartData.candleWidth<1?this.chartData.candleWidth=1:this.chartData.candleWidth>100&&(this.chartData.candleWidth=100),this.chartData.spacing=1.5*this.chartData.candleWidth},g.prototype.getElementIndexByPositionX=function(t,a){if(a>t[0].x)return-1;for(var e=t.length-1,i=0;i<t.length;i++)if(parseFloat(t[i].x)<=a){e=i;break}return e},g.prototype.redrawInfo=function(){var t=this.clearInfo();this.drawCrosshair(t,t.canvas.height,this.techChart.configuration.modules.headerButtons.createPipsButton),this.drawActiveDrawingObjects()},g.prototype.clearInfo=function(){var t=this.canvasInfoContext,a=t.canvas;return this.clearCanvas(a,t),t},g.prototype.getIndexByDate=function(t,a){var e=-1,i=g.binaryIndexByDate(t,a);return null!==i&&(e=i),e},g.binaryIndexByDate=function(t,a){for(var e,i,s=0,r=t.length-1;s<=r;)if((i=t[e=(s+r)/2|0]).date>a)s=e+1;else{if(!(i.date<a))return e;r=e-1}return null},g.prototype.createShowDataToAdd=function(t){for(var a=[],e=0;e<t.length;e++){var i=this.createShowDataItem(t[e],this.chartData.precission);t[e].isCurrent&&(i.isCurrent=!0),a.push(i)}return a},g.prototype.getSelectedDataByShowData=function(t){return g.getSelectedDataByShowDataBinary(t,this.chartData.data[this.chartData.typeData])},g.getSelectedDataByShowDataBinary=function(t,a){if(!t||0===t.length)return[];var e=t[0].date,i=g.binaryIndexByDate(a,e),s=t[t.length-1].date,r=g.binaryIndexByDate(a,s);return a.slice(i,r+1)},g.prototype.getValueFromTick=function(t,a){var e;switch(a){case"Default":e=t;break;case"1":e=parseFloat(t).toFixed(0);break;case"10":e=parseFloat(t).toFixed(1);break;case"100":e=parseFloat(t).toFixed(2);break;case"1000":e=parseFloat(t).toFixed(3);break;case"10000":e=parseFloat(t).toFixed(4);break;case"100000":e=parseFloat(t).toFixed(5);break;case"1000000":e=parseFloat(t).toFixed(6);break;default:e=t}return e},g.binaryIndexOfCandleByTime=function(t,a){for(var e,i,s=0,r=a.length-1;s<=r;)if((i=a[e=(s+r)/2|0]).date>t)s=e+1;else{if(!(i.date<t))return e;r=e-1}return null},g.removeClass=function(t,a){for(var e=0;e<t.length;e++)t[e].classList.toggle(a,!1)},g.prototype.drawDataPanel=function(t){if(t&&this.dataPanel){var a=new Date(1e3*t.date);this.dataPanel.querySelector(".tch-data-panel-header  span:nth-child(2)").innerText=this.chartData.pair.FullName,this.dataPanel.querySelector(".tch-data-panel-header  span:nth-child(3)").innerText=this.techChart.translation[this.techChart.getPeriods()[this.chartData.period].key],this.dataPanel.querySelector(".tch-data-panel-header  span:nth-child(4)").innerText=this.getLocalizedTimeText(a,this.chartData.localization,5,this.chartData.timeMode);var e=this.dataPanel.querySelector(".tch-data-candle");e.innerHTML="";var i,s,r,n,o,h=["open","high","low","close"];if(t.open)s=t.open,r=t.high,n=t.low,o=t.close;else if(t.date>=this.chartData.data[this.chartData.typeData][0].date)s=this.chartData.data[this.chartData.typeData][0].open,r=this.chartData.data[this.chartData.typeData][0].high,n=this.chartData.data[this.chartData.typeData][0].low,o=this.chartData.data[this.chartData.typeData][0].close;else{var c=this.chartData.data[this.chartData.typeData].length-1;s=this.chartData.data[this.chartData.typeData][c].open,r=this.chartData.data[this.chartData.typeData][c].high,n=this.chartData.data[this.chartData.typeData][c].low,o=this.chartData.data[this.chartData.typeData][c].close}var l=this.chartData.options.Chart.typeTick;"Default"!==this.chartData.options.Chart.typeTick&&(s=this.getValueFromTick(s,l),r=this.getValueFromTick(r,l),n=this.getValueFromTick(n,l),o=this.getValueFromTick(o,l)),i=[s,r,n,o];for(var d=0;d<4;d++){var p=document.createElement("li");p.innerHTML="<span tch-text='"+h[d]+"'>"+this.techChart.translation[h[d]]+"</span>";var u=document.createElement("span");u.innerText=i[d],e[h[d]]=u,p.appendChild(u),e.appendChild(p)}this.updateIndicatorsDataPanel(t.date)}},g.prototype.updateDataPanel=function(t){var a=this.techChart.configuration.modules.chartElements.isDataPanelCreate;if(t&&a){var e=new Date(1e3*t.date);this.dataPanel.querySelector(".tch-data-panel-header  span:nth-child(2)").innerText=this.chartData.pair.FullName,this.dataPanel.querySelector(".tch-data-panel-header  span:nth-child(3)").innerText=this.techChart.translation[this.techChart.getPeriods()[this.chartData.period].key],this.dataPanel.querySelector(".tch-data-panel-header  span:nth-child(4)").innerText=this.getLocalizedTimeText(e,this.chartData.localization,5,this.chartData.timeMode);var i,s,r,n,o,h=this.dataPanel.querySelector(".tch-data-candle"),c=["open","high","low","close"];if(t.open)s=t.open,r=t.high,n=t.low,o=t.close;else if(t.date>=this.chartData.data[this.chartData.typeData].date)s=this.chartData.data[this.chartData.typeData].open,r=this.chartData.data[this.chartData.typeData].high,n=this.chartData.data[this.chartData.typeData].low,o=this.chartData.data[this.chartData.typeData].close;else{var l=this.chartData.data[this.chartData.typeData].length-1;s=this.chartData.data[this.chartData.typeData][l].open,r=this.chartData.data[this.chartData.typeData][l].high,n=this.chartData.data[this.chartData.typeData][l].low,o=this.chartData.data[this.chartData.typeData][l].close}var d=this.chartData.options.Chart.typeTick;"Default"!==this.chartData.options.Chart.typeTick&&(s=this.getValueFromTick(s,d),r=this.getValueFromTick(r,d),n=this.getValueFromTick(n,d),o=this.getValueFromTick(o,d)),i=[s,r,n,o];for(var p=0;p<4;p++)h[c[p]].innerText=i[p];this.chartData.index===this.chartData.techChart.activeChartIndex&&this.chartData.indicators&&this.chartData.indicators.length&&this.updateIndicatorsDataPanel(t.date)}},g.prototype.addTimeAxisForPrediction=function(t,a){if(!a||!this.timeAxis)return t;var e;if(!t||t.length<=0?(t=[],e=this.timeAxis[0]):e=t[0],!e)return t;for(var i=(a=parseFloat(a))*this.chartData.spacing,s={x:e.x1,x1:e.x1,date:e.date};parseFloat(s.x1)+i<this.w;){s.date=s.date+this.chartData.getCurrentTimeStep()*a,s.x1=s.x=parseFloat(s.x1)+i;var r=this.createHourTimeAxis(s,this.w,this.parentRect.height-this.offY,this.chartData.timeMode,this.chartData.localization);if(!r)break;r.isPrediction=!0,t.unshift(r)}return t},g.prototype.addTimeAxisForPast=function(t,a){if(!a||!this.timeAxis)return t;var e;if(!t||t.length<=0?(t=[],e=this.timeAxis[this.timeAxis.length-1]):e=t[t.length-1],!e)return t;for(var i=(a=parseFloat(a))*this.chartData.spacing,s={x:e.x1,x1:e.x1,date:e.date};parseFloat(s.x1)-i>0;){s.date=s.date-this.chartData.getCurrentTimeStep()*a,s.x1=s.x=parseFloat(s.x1)-i;var r=this.createHourTimeAxis(s,this.w,this.parentRect.height-this.offY);if(!r)break;r.isPast=!0,t.push(r)}return t},g.prototype.createTimeAxis=function(t,a,e,i){var s,n=this.techChart.configuration.lang,o=this.getLocalizedTimeText(new Date(1e3*a.date),n,9,this.chartData.timeMode);if(this.canvasGridContext){var h=r.a.measureText(this.canvasGridContext,this.chartData.options.Chart.scalesFontSize+"px Arial",o),c=r.a.measureText(this.canvasGridContext,this.chartData.options.Chart.scalesFontSize+"px Arial",t);s=h.width>c.width?h.width:c.width}return new Axis(t,parseFloat(a.x),0,parseFloat(a.x),i,"timeLines",parseFloat(a.x)-s/2,i+parseFloat(this.valueTextHeigh)/3,"timeText",a.date,o,this.canvasGridContext)},g.prototype.createDaysTimeAxis=function(t,a,e,i,s){var r=new Date(1e3*t.date);s=s||navigator.language;var n=this.getLocalizedTimeText(r,s,1,i);return this.createTimeAxis(n,t,a,e)},g.prototype.createHourTimeAxis=function(t,a,e,i,s){var r=new Date(1e3*t.date),n=this.getLocalizedTimeText(r,s,3,i);return this.createTimeAxis(n,t,a,e)},g.prototype.getHourTimeAxisFromItems=function(t,a,e,i,s,r){for(var n=null;!n&&(n=this.getHourTimeAxisByPeriod(t,a,e,i,s,r),!((i/=2)<=30));)i<=150&&i>30?i=60:i<=300&&i>150?i=300:i<=450&&i>300?i=600:i<=900&&i>450&&(i=900);return n},g.prototype.getHourTimeAxisByPeriod=function(t,a,e,i,s,r){for(var n=null,o=null,h=0;h<t.length;h++)if(t[h].date%i===0&&(o=new Date(1e3*t[h].date)),o){(n=this.createHourTimeAxis(t[h],a,e,s,r)).showDataItem=t[h];break}return n},g.prototype.getTimeAxis=function(t,a,e,i,s,r){this.timeAxisStep=this.getTimeAxisStep();var n=[],o=this.getFirstAxis(t,a,e,i,s,r);if(o){n.push(o);for(var h=!1,c=0;c<t.length;null)if(t[c].date!==n[0].date)if(h){if(t[c].x>0){var l=this.createHourTimeAxis(t[c],a,e,s,r);l&&n.push(l)}c+=this.timeAxisStep}else c++;else h=!0,c+=this.timeAxisStep}return n=this.addTimeAxisForPast(n,this.timeAxisStep),n=this.addTimeAxisForPrediction(n,this.timeAxisStep),this.fixFirstTimeAxis(n)},g.prototype.fixFirstTimeAxis=function(t){return t.length&&parseFloat(t[0].x1)>this.w-7&&t.shift(),t},g.prototype.getDayTimeAxis=function(t,a,e,i,s){for(var r=null,n=null,o=0;o<t.length;o++)if(t[o].date%86400===0?n=new Date(1e3*t[o].date):t[o+1]&&new Date(1e3*t[o].date).getUTCDate()!==new Date(1e3*t[o+1].date).getUTCDate()&&(n=new Date(1e3*t[o].date)),n){(r=this.createDaysTimeAxis(t[o],a,e,i,s)).showDataItem=t[o];break}return r},g.prototype.drawTimeAxis=function(t){t&&t.length&&this.showTimeAxis(t,this.axisTextContainer)},g.prototype.showTimeAxis=function(t,a,e){var i;e=e||this.chartData.options.Chart.typeTick,i=this.chartData.colors.Chart.vertGridLines;for(var s=0;s<t.length;s++)t[s].show(null,this.canvasGridContext,null,a,i,this.chartData.options.Chart.typeVertGridLines,this.chartData.colors.Chart.scalesText,this.chartData.options.Chart.scalesFontSize,e)},g.prototype.getNextTimeAxisToLeft=function(t,a,e,i,s,r,n){if(t&&a&&e&&i&&s&&void 0!==r&&n){this.removeTimeAxisForPast(a);var o=[];e=parseFloat(e);var h=!1,c=0;for(a[0].date<=t[0].date&&(c=(c=a.length*e-e)<0?0:c);c<t.length;)if(t[c].date!==a[a.length-1].date)if(h){if(t[c].x>0){var l=this.createHourTimeAxis(t[c],i,s,r,n);l&&o.push(l)}c+=e}else c++;else c+=e,h=!0;return this.addTimeAxisForPast(o,e)}},g.prototype.getNextTimeAxisToRight=function(t,a,e,i,s,r,n){if(t&&a&&e&&i&&s&&void 0!==r&&n){this.removeTimeAxisForPrediction(a);var o=[];e=parseFloat(e);var h=!1,c=t.length-1;for(c=c<0?0:c;c<t.length&&c>=0;)if(t[c].date!=a[0].date)if(h){if(parseFloat(t[c].x)<i){var l=this.createHourTimeAxis(t[c],i,s,r,n);l&&o.unshift(l)}c-=e}else c--;else c-=e,h=!0;return this.addTimeAxisForPrediction(o,e)}},g.prototype.removeTimeAxisForPrediction=function(t){if(t&&0!==t.length)for(;t.length>1&&t[0].isPrediction;)t.splice(0,1)},g.prototype.removeTimeAxisForPast=function(t){if(t&&0!==t.length)for(;t.length>1&&t[0].isPast;)t.splice(0,1)},g.prototype.needsTimeAxisToRight=function(){var t=this.timeAxisStep*this.chartData.spacing,a=0;return this.chartData.candleWidth&&(a=this.chartData.candleWidth/2),!(!this.timeAxis||!this.timeAxis.length)&&parseFloat(this.timeAxis[0].x1)+t<=this.w-a},g.prototype.needsTimeAxisToLeft=function(){var t=this.timeAxisStep*this.chartData.spacing;return!(!this.timeAxis||!this.timeAxis.length)&&parseFloat(this.timeAxis[this.timeAxis.length-1].x1)-t>0},g.prototype.getFirstAxis=function(t,a,e,i,s,r){if(t&&0!==t.length){if(1===this.timeAxisStep)return this.createHourTimeAxis(t[0],a,e,s,r);var n=parseFloat(t[0].x)-this.timeAxisStep*this.chartData.spacing,o=parseFloat(t[0].x),h=this.getElementsByXRange(t,n,o),c=null;return c||(c=this.getHourTimeAxisFromItems(h,a,e,3600,s,r)),c||(c=this.createHourTimeAxis(t[0],a,e,s,r)),c}},g.prototype.getTimeAxisStep=function(){if(this.chartData.spacing){var t=parseInt(250/this.chartData.spacing);return t<5&&t>2?t=5:t>5?(t=parseInt(t/5),t*=5):t<=0&&(t=2),parseInt(t)}},g.prototype.moveAxisX=function(t,a,e,i){if(t&&0!==t.length){for(var s=t.length-1;s>=0;s--)t[s].moveX(a,e,i),this.isRedundantAxis(t[s],e,i)&&t.splice(s,1);this.addExtraTimeAxisOnMove(a,t,e,i,this.chartData.period,this.w-this.chartData.rightPadding,this.parentRect.height-this.offY,this.chartData.timeMode,this.chartData.localization),this.fixFirstTimeAxis(this.timeAxis)}},g.prototype.addExtraTimeAxisOnMove=function(t,a,e,i,s,r,n,o,h){var c;this.needsTimeAxisToLeft()&&(c=this.getNextTimeAxisToLeft(this.showData,this.timeAxis,this.timeAxisStep,r,n,o,h),this.timeAxis=this.timeAxis.concat(c)),this.needsTimeAxisToRight()&&(c=this.getNextTimeAxisToRight(this.showData,this.timeAxis,this.timeAxisStep,r,n,o,h),this.timeAxis=c.concat(this.timeAxis))},g.prototype.isRedundantAxis=function(t,a,e){var i=!1,s=parseFloat(t.x1);return(s<=a||s>=e)&&(i=!0),i},g.prototype.getLocalizedTimeText=function(t,a,e,i){var s="",r={};if("default"===a&&(a="ru"),"safari"===this.browser)"local"!==i&&(t=new Date(t.getTime()+60*t.getTimezoneOffset()*1e3)),1===e?s=(s=t.toLocaleDateString("short")).slice(0,s.length-3):3===e?s=(s=t.toLocaleTimeString("short")).slice(0,s.length-3):5===e&&(s=(s=t.toLocaleString("short","short")).slice(0,s.length-3));else{switch("local"!==i&&(r.timeZone="utc"),e){case 1:r.month="2-digit",r.day="2-digit";break;case 3:r.hour="2-digit",r.minute="2-digit";break;case 5:r.month="2-digit",r.day="2-digit",r.year="2-digit",r.hour="2-digit",r.minute="2-digit"}9!==e&&(s=t.toLocaleTimeString(a,r))}return 9===e&&(r.month="ar"!==a?"short":"2-digit",r.day="2-digit",(s=(s=t.toLocaleDateString("ar"!==a?a:"en",r)).replace(" ","/")).length>6&&"edge"!==this.browser&&(s=s.substring(0,6))),s},g.prototype.getValueAxis=function(t,a,e,i,s,r,n,o){o=o||0;for(var h=[],c=(a-t)/e,l=(a-t)/s,d=a-c/2,p=0;p<e;p++){var u=s-((d=0===p?d:d-c)-t)/l,g=i+7,D=u-r/2-2;D>s-r/2&&(D=s-r/2),u+=o,D+=o;var f=new Axis(d.toFixed(n),0,u,i,u,"valueLines",g,D,"valueText");h.push(f)}return h},g.prototype.drawValueAxis=function(t,a,e){void 0!==a&&null!==a||(a=this.h);var i,s=parseInt(a/parseFloat(this.chartData.options.Chart.scalesFontSize)),r=t.length,n=s<r,o=r%2===0?r/2:r-1-parseInt(r/2);i=this.chartData.colors.Chart.horzGridLines;for(var h=0;h<r;h++)(0===s||1===s&&(e?h>0:h!==o)||2===s&&0!==h&&h!==r-1||s>2&&n&&h%2!==0)&&(t[h].value=""),t[h].show(parent,this.canvasGridContext,null,this.axisTextContainer,i,this.chartData.options.Chart.typeHorzGridLines,this.chartData.colors.Chart.scalesText,this.chartData.options.Chart.scalesFontSize,this.chartData.options.Chart.typeTick)},g.prototype.drawOscillatorChartsAxis=function(){var t=this.oscillatorCharts;for(var a in t)t.hasOwnProperty(a)&&t[a].valueAxis&&t[a].valueAxis.length&&this.drawValueAxis(t[a].valueAxis,t[a].h,!0)},g.prototype.getOscillatorChartsAxis=function(){var t=this.oscillatorCharts;for(var a in t)t.hasOwnProperty(a)&&t[a].getValueAxis(this.chartData.options.Chart.scalesFontSize,parseInt(this.chartData.precission,this.offY))},g.prototype.moveChartX=function(t,a,e,i){return 0!==(a=this.deltaCorrectionForMoveChartX(a))&&(this.moveGraphicX(a,this.w,this.chartData.rightPadding,this.chartData.spacing,i),this.moveAxisX(this.timeAxis,a,0,this.w-this.chartData.rightPadding),this.setGetNewsTimeout(),this.setGetEventsTimeout(),!0)},g.prototype.deltaCorrectionForMoveChartX=function(t,a){if(!t)return 0;a||(a=this);var e=a.chartData.data[a.chartData.typeData],i=a.showData,s=a.chartData.spacing,r=a.w-a.chartData.rightPadding,n=a.chartData.hasPrevData;return t<0?a.leftDeltaCorrection(t,e,i,s,r,n):a.rightDeltaCorrection(t,e,i,s,r)},g.prototype.leftDeltaCorrection=function(t,a,e,i,s,r){var n=e[e.length-1],o=parseFloat(n.x);if(a[a.length-1].date===n.date)if(a.length===e.length){var h=parseFloat(e[0].x);s-h+o>=2*i?h>s-i?t=0:h+Math.abs(t)>s-i&&(t=-(s-h-i)):o>=i||o>s-h?t=0:o+Math.abs(t)>i&&(t=-(i-o))}else!r&&o>=i?t=0:o+Math.abs(t)>i&&(t=-(i-o));else{var c=this.binarySearhElementWithField(a,n.date,"date"),l=(a.length-c)*i;Math.abs(t)>l&&(t=-(l-o))}return t.toFixed(0)},g.prototype.rightDeltaCorrection=function(t,a,e,i,s){var r,n=e[0],o=parseFloat(n.x);return a[0].date===n.date?o<=s/2?t=0:t>(r=o-s/2)&&(t=r):t>(r=this.binarySearhElementWithField(a,n.date,"date")*i+s/2)&&(t=r),t.toFixed(0)},g.prototype.moveChartXwithoutData=function(t){var a=parseFloat(this.showData[t.showData.length-1].x)-this.chartData.spacing;t=this,this.movingTimeout=setTimeout(function(){t.moveRightChart(t,a),t.movingTimeout=null,t=null},20)},g.prototype.moveChartY=function(t,a){if(0===a)return!1;t.moveElementsY(t.showData,a),t.moveNewsBubblesY(a),t.moveEventsBubblesY(a);var e=parseFloat(a)*t.chartData.scaleParams.deltaY;return t.chartData.scaleParams.maxB=parseFloat(t.chartData.scaleParams.maxB)-e,t.chartData.scaleParams.minB=parseFloat(t.chartData.scaleParams.minB)-e,!0},g.prototype.moveGraphicX=function(t,a,e,i){if(0!==t){if(this.moveElementsX(this.showData,t,a,e),this.deleteRedundantElements(this.showData,t,a,e,i),this.moveNewsBubblesX(t),this.moveEventsBubblesX(t),this.needsElementToLeft(this.showData,i)){var s=this.getDataToLeft(this.chartData.data[this.chartData.typeData],this.showData,i);this.addElementsToLeft(this.showData,s,i)}if(this.needsElementToRight(this.showData,a,e,i)){var r=this.getDataToRight(this.chartData.data[this.chartData.typeData],this.showData,a,e,i);this.addElementsToRight(this.showData,r,i,a,e)}this.deleteRedundantElements(this.showData,t,a,e,i),this.chartData.startDateSeconds=this.showData[0].date;var n=this.showData&&this.showData.length?this.showData[0].x:0;this.chartData.startX=a-e-parseFloat(n)}},g.prototype.canMove=function(t,a,e,i,s){if(t.showData[0]){var r=!1,n=parseFloat(t.showData[0].x),o=parseFloat(t.showData[t.showData.length-1].x);return a<0?(r=!t.needsElementToLeft(t.showData,s)||t.chartData.hasPrevData)||(r=t.chartData.data[t.chartData.typeData].length*t.chartData.candleWidth<e/2?o<e-t.chartData.data[t.chartData.typeData].length*t.chartData.candleWidth-(i+7*t.chartData.candleWidth):o<2*t.chartData.spacing):a>0&&((r=!t.needsElementToRight(t.showData,e,i,s)||t.chartData.hasNextData)||(r=t.chartData.data[t.chartData.typeData].length*t.chartData.candleWidth<e/2?n>t.chartData.data[t.chartData.typeData].length*t.chartData.candleWidth+i+7*t.chartData.candleWidth:n>e/2)),r}},g.prototype.updateChart=function(t,a){!a||a.session&&"close"===a.session.toLowerCase()||(!a.isWaitForData&&!a.hasNextData&&a.data&&a.data[a.typeData]&&a.data[a.typeData].length&&a.data[a.typeData][0].isCurrentData?a.chart.getDataOnUpdateComplete(a.chart,t):a.hasNextData=!0)},g.prototype.getDataOnUpdateComplete=function(t,a){if(t.chartData.data.bid[0]||t.chartData.data.bid[0].isCurrentData){if(a){t.chartData.data.ask[0]=a.ask,t.chartData.data.bid[0]=a.bid,t.chartData.data.mid[0]=a.mid,t.chartData.data.ask[0].isCurrentData=!1,t.chartData.data.bid[0].isCurrentData=!1,t.chartData.data.mid[0].isCurrentData=!1;var e={};e.bid=t.createCurrentDataItem(t.chartData.data.bid[0],t.chartData.currentValue.bid),e.ask=t.createCurrentDataItem(t.chartData.data.ask[0],t.chartData.currentValue.ask),e.mid=t.createCurrentDataItem(t.chartData.data.mid[0],t.chartData.currentValue.mid),e.ask.isCurrentData=!0,e.bid.isCurrentData=!0,e.mid.isCurrentData=!0,t.chartData.data.bid.unshift(e.bid),t.chartData.data.ask.unshift(e.ask),t.chartData.data.mid.unshift(e.mid)}if(t.selectedData[0].isCurrentData){if(t.selectedData[0]=t.chartData.data[this.chartData.typeData][1],t.selectedData.unshift(t.chartData.data[this.chartData.typeData][0]),!t.showData[0].x)return!1;var i=parseFloat(t.showData[0].x);t.showData=t.processDataToShow(t.selectedData,t.chartData.rightPadding,t.chartData.spacing,t.w,t.h,t.chartData.precission);var s=parseFloat(t.showData[0].x)-i;t.moveChartX(t,s),t.deleteRedundantElements(t.showData,0,t.w,t.chartData.rightPadding,t.chartData.spacing),t.chartData.indicators&&t.chartData.indicators.length&&(t.createIndicatorsShowData(),t.drawIndicators()),t.valueAxis=t.getValueAxis(t.chartData.scaleParams.minB,t.chartData.scaleParams.maxB,t.valueAxisCount,t.w,t.h,t.chartData.options.Chart.scalesFontSize,t.chartData.precission),t.getOscillatorChartsAxis(),t.timeAxis=t.getTimeAxis(t.showData,t.w,t.parentRect.height-t.offY,t.chartData.period,t.chartData.timeMode,t.chartData.localization),t.updateDrawingObjectsPixels(),t.chartData.updateIndicatorsData(),t.draw(t.showData,t.h),t.clearGrid(),t.drawTimeAxis(t.timeAxis),t.drawValueAxis(t.valueAxis),t.drawOscillatorChartsAxis(),t.drawChartBorder(),t.drawCurrent(t.chartData.currentValue),t.moveCrosshairXY(t.showData,t.curX,t.curY,t.w,t.h),t.redrawInfo(),t.updateDrawingObjectsPixels(),t.redrawDrawingObjects()}}},g.prototype.drawCurrentValue=function(){this.isDrawCurrentShowData(this.chartData,this.showData)?this.drawCurrent(this.chartData.currentValue):this.redrawCurrentPriceLine(this.chartData.currentValue)},g.prototype.isDrawCurrentShowData=function(t,a){if(!t||!t.data||!a||0===a.length||!t.data[t.typeData]||0===t.data[t.typeData].length)return!1;if(a[0].isCurrentData)return!0;var e=t.data[t.typeData][0].date===a[0].date&&!t.hasNextData,i=this.isPositionValid();return e&&i},g.prototype.drawCurrent=function(t,a){if(!t||0===parseFloat(t[this.chartData.typeData])||!this.chartData.scaleParams)if(a)t.ask=a.ask.close,t.bid=a.bid.close,t.mid=a.mid.close;else{if(!this.chartData.data[this.chartData.typeData][0]||!this.chartData.data[this.chartData.typeData][0].isCurrentData)return;t.ask=this.chartData.data.ask[0].close,t.bid=this.chartData.data.bid[0].close,t.mid=this.chartData.data.mid[0].close}t.ask=t.ask.replace(",","."),t.bid=t.bid.replace(",","."),t.mid=t.mid.replace(",","."),this.chartData.currentValue.ask=t.ask,this.chartData.currentValue.bid=t.bid,this.chartData.currentValue.mid=t.mid;var e,i=this.chartData.chart.constructor.name;if(this.isDrawCurrentShowData(this.chartData,this.showData)){if(this.updateCurrentData(t),this.chartData.options.Chart.autoScale&&(parseFloat(t[this.chartData.typeData])>this.chartData.scaleParams.maxV||parseFloat(t[this.chartData.typeData])<this.chartData.scaleParams.minV)){var s=this.getScaleParams(this.selectedData,this.h,this.chartData.precission);if(isNaN(parseFloat(s.minB))&&isNaN(parseFloat(s.maxB))&&isNaN(parseFloat(s.deltaY)))return;this.chartData.options.Chart.scaleSeriesOnly||this.resizeShowDataByTrendIndicators(),(s.minB<this.chartData.scaleParams.minB||s.maxB>this.chartData.scaleParams.maxB)&&(this.chartData.scaleParams=s,this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams),this.draw(this.showData,this.h),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission,this.offY),this.getOscillatorChartsAxis(),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawOscillatorChartsAxis(),this.drawTimeAxis(this.timeAxis),this.drawChartBorder())}var n=this.canvasRateNormalContext,o=this.canvasRatePixelatedContext;switch(r.a.clearRect(null,n,0,0,n.canvas.width,n.canvas.height),r.a.clearRect(null,o,0,0,o.canvas.width,o.canvas.height),this.drawCurrentShowData(t,a),this.chartData.updateCurrentIndicatorsData(),this.redrawOscillators(),i){case"BarChart":case"HollowChart":case"CandleChart":e=this.chartData.colors[i].candleBear;break;case"LineChart":case"AreaChart":e=this.chartData.colors[i].priceLine}}else this.redrawCurrentPriceLine(this.chartData.currentValue);this.drawCurrentLabel(t,e,!0,!1,this.chartData.colors[i])},g.prototype.redrawCurrentPriceLine=function(t){var a=this.canvasRateNormalContext,e=this.canvasRatePixelatedContext;r.a.clearRect(null,a,0,0,a.canvas.width,a.canvas.height),r.a.clearRect(null,e,0,0,e.canvas.width,e.canvas.height),this.drawCurrentPriceLine(t),this.drawLastBarPrice(this.showData[0])},g.prototype.drawCurrentPriceLine=function(t){if(!this.chartData.data[this.chartData.typeData]||0!==this.chartData.data[this.chartData.typeData].length){var a=this.toYPixels(t[this.chartData.typeData]);if(a>this.h||a<0)this.parent.querySelector(".tch-rate-value").parentNode.style.display="none";else{var e,i,s,n=this.chartData.chart.constructor.name;switch(n){case"HollowChart":s=this.chartData.chart.showData[0].hollowCandlePriceLine;break;case"BarChart":case"CandleChart":case"LineChart":case"AreaChart":e=this.chartData.colors[n].candleBear,i=this.chartData.colors[n].candleBool,s=parseFloat(this.chartData.data[this.chartData.typeData][0].close)>parseFloat(this.chartData.data[this.chartData.typeData][0].open)?i:e}"LineChart"!==n&&"AreaChart"!==n||(s=this.chartData.colors[n].priceLine);var o=this.chartData.options.Chart.widthPriceLine;a=r.a.getPosition(a,o),this.chartData.options.Chart.needPriceLine&&this.showData.length>0&&(this.showData[0].date!==this.chartData.data[this.chartData.typeData][0].date||this.chartData.isExpired||this.drawCurrentShowData(t,void 0),r.a.drawLine(null,this.canvasRatePixelatedContext,0,a,this.w+this.offX,a,s,[o,o],o));var h=s===e;this.drawPrice(parseFloat(t[this.chartData.typeData]).toFixed(this.chartData.precission),a,"tch-price-bear",h,s)}}},g.prototype.drawLastBarPrice=function(t){if(t){var a,e,i,s=this.chartData.chart.constructor.name;switch(a=this.parent.querySelector(".tch-rate-value"),"LineChart"!==s&&"AreaChart"!==s||(e=this.chartData.colors[s].priceLine,i=this.chartData.colors[s].priceLine),s){case"BarChart":case"HollowChart":case"CandleChart":case"LineChart":case"AreaChart":e=this.chartData.colors[s].candleBear,i=this.chartData.colors[s].candleBool}var n=parseFloat(t.close)>=parseFloat(t.open)?i:e,o=this.toYPixels(t.close),h=n===e;o>0&&o<this.h?(this.drawPrice(parseFloat(t.close).toFixed(this.chartData.precission),o,"tch-price-bear",h,n,!0),this.chartData.isShowPriceLineOfLastBar&&r.a.drawLine(null,this.canvasRatePixelatedContext,0,o,this.w,o,n,[],this.chartData.options.Chart.widthPriceLine)):a.parentNode.style.display="none"}},g.prototype.drawCurrentLabel=function(t,a,e,i,s){if(this.parent){var n,o=t[this.chartData.typeData],h=this.chartData.chart.constructor.name;n=this.isOptionActive?13:this.chartData.options.Chart.scalesFontSize;var c=this.canvasRatePixelatedContext.canvas;if(c&&this.canvasRatePixelatedContext&&o){i&&r.a.clearRect(null,this.canvasRatePixelatedContext,0,0,c.width,c.height),o=parseFloat((""+o).replace(",","."));var l=this.parent.querySelector(".tch-rate-value");l.style.fontSize=n+"px";var d=this.toYPixels(o);if(d>this.h)return void(l.parentNode.style.display="none");if(this.selectedData&&this.selectedData.length&&this.selectedData[0].isCurrentData){s.candleBool,parseFloat(this.selectedData[0].close)>parseFloat(this.selectedData[0].open)&&(a="LineChart"===h||"AreaChart"===h?this.chartData.colors[h].colorLine:s.candleBool),"HollowChart"===h&&(a=this.chartData.chart.showData[0].hollowCandlePriceLine);var p=this.chartData.options.Chart.widthPriceLine;d=r.a.getPosition(d,p),this.chartData.options.Chart.needPriceLine&&("LineChart"!==h&&"AreaChart"!==h||(a=this.chartData.colors[h].priceLine),r.a.drawLine(null,this.canvasRatePixelatedContext,0,d,this.w+this.offX,d,a,[],p));var u=a!==("LineChart"===h||"AreaChart"===h?this.chartData.colors[h].colorLine:s.candleBool);d>0&&d<this.h?this.drawPrice(o.toFixed(this.chartData.precission),d,"tch-price-bear",u,a):l.parentNode.style.display="none"}}}},g.prototype.updatePositionLabelSpanTriangle=function(){this.parent.querySelector(".tch-options-triangle").style.top=parseFloat(this.y).toFixed(1)+"px"},g.prototype.drawCurrentPath=function(t,a,e,i,s,n,o,h){if(e){var c,l,d,p,u;c={x:n,y:a-3},l={x:n-8,y:a+h/2},d={x:n,y:a+h+2},p={x:s,y:a+h+2},u={x:s,y:a-3};var g=[];g.push([c.x,c.y]),g.push([l.x,l.y]),g.push([d.x,d.y]),g.push([p.x,p.y]),g.push([u.x,u.y]),r.a.drawPolygon(null,e,g,i,null)}},g.prototype.updateCurrentData=function(t){var a=parseFloat(t[this.chartData.typeData]);this.chartData.data&&this.chartData.data[this.chartData.typeData].length&&this.chartData.data[this.chartData.typeData][0].isCurrentData&&(a>parseFloat(this.chartData.data[this.chartData.typeData][0].high)?this.chartData.data[this.chartData.typeData][0].high=t[this.chartData.typeData]:a<parseFloat(this.chartData.data[this.chartData.typeData][0].low)&&(this.chartData.data[this.chartData.typeData][0].low=t[this.chartData.typeData]),this.chartData.data[this.chartData.typeData][0].close=t[this.chartData.typeData]),this.selectedData&&this.selectedData[0]&&this.selectedData[0].isCurrentData&&(a>parseFloat(this.selectedData[0].high)?this.selectedData[0].high=t[this.chartData.typeData]:a<parseFloat(this.selectedData[0].low)&&(this.selectedData[0].low=t[this.chartData.typeData]),this.selectedData[0].close=t[this.chartData.typeData])},g.prototype.getCurrentDataComplete=function(t,a){t.isDrawCurrentShowData(t.chartData,t.showData)&&(t.chartData.data.bid[0].isCurrentData&&(t.chartData.data.bid[0].low=a[0].bid.low,t.chartData.data.bid[0].high=a[0].bid.high,t.chartData.data.bid[0].close=a[0].bid.close,t.chartData.data.ask[0].low=a[0].ask.low,t.chartData.data.ask[0].high=a[0].ask.high,t.chartData.data.ask[0].close=a[0].ask.close,t.chartData.data.mid[0].low=a[0].mid.low,t.chartData.data.mid[0].high=a[0].mid.high,t.chartData.data.mid[0].close=a[0].mid.close),t.selectedData[0].isCurrentData&&(t.selectedData[0].low=a[0][this.chartData.typeData].low,t.selectedData[0].high=a[0][this.chartData.typeData].high,t.selectedData[0].close=a[0][this.chartData.typeData].close),t.chartData.currentValue.ask=a[0].ask.close,t.chartData.currentValue.bid=a[0].bid.close,t.chartData.currentValue.mid=a[0].mid.close,t.drawCurrent(t.chartData.currentValue,!!t.selectedData[0].isCurrentData&&a[0]))},g.prototype.drawPrice=function(t,a,e,i,s){var r;(r=this.parent.querySelector(".tch-rate-value")).parentNode.style.display="block";var n=this.chartData.options.Chart.typeTick;r.innerText="Default"!==n?this.getValueFromTick(t,n):t,this.priceTextHeight||(this.priceTextHeight=r.parentNode.getBoundingClientRect().height),this.priceTextColor||(this.priceTextColor=this.getPriceTextColor(s)),this.priceTextColor&&this.isOptionActive&&(this.priceTextColor="#FFFFFF"),r.parentNode.style.left=this.w+"px",r.parentNode.style.top=a-this.priceTextHeight/2+"px",r.parentNode.style.backgroundColor=s,r.parentNode.style.color=this.priceTextColor},g.prototype.getPriceTextColor=function(t){var a;if(t.indexOf("#")>-1)a=this.hexToRgb(t);else{var e=t.split(")")[0];e=(e=e.split("(")[1]).split(", "),a={r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2])}}return(a.r+a.g+a.b)/3<=127?"#FFFFFF":"#000000"},g.prototype.hexToRgb=function(t){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},g.prototype.createCurrentDataItem=function(t,a){var e=parseFloat(t.close),i=parseFloat(a),s=e<i?t.close:a,r=e>i?t.close:a;return{open:t.close,close:a,low:s,high:r,date:t.date+this.chartData.getCurrentTimeStep(),isCurrentData:!0}},g.prototype.drawCrosshairChart=function(t){if(this.isPressed||!this.isShowCrosshair||!this.useCanvas||!t)return this.crosshair.text.spanValue.parentNode.style.display="none",this.crosshair.text.spanDate.parentNode.style.display="none",!1;var a=this.crosshair.showData,e=this.curX,i=this.curY;if(!a||0===a.length)return!1;var s=this.getElementIndexByPositionX(a,e);if(s<0)if(e>parseFloat(a[0].x))s=0;else{if(!(e<parseFloat(a[a.length-1].x)))return!1;s=a.length-1}var r=a[s];return!!r&&(this.getStepedCursorParams(e,i,a[0],a[a.length-1],r),this.isShowCrosshair?this.showCrosshair(t):this.crosshair.text.spanValue.parentNode.style.display="none",this.crosshair.isUpdatedTime&&this.updateDataPanel(r),r)},g.prototype.showCrosshair=function(t){var a,e=this.parentRect.height-this.offY,i=this.crosshair.width,s=(this.curX,this.curY),n=this.chartData.colors.Chart.colorCrossHair,o=parseInt(this.chartData.options.Chart.widthCrossHair),h=this.chartData.options.Chart.scalesFontSize,c=this.getLineTypeArray(this.chartData.options.Chart.typeCrossHair,o);if(this.crosshair.params.x<this.w-8){a=r.a.getPosition(this.crosshair.params.x,2),r.a.drawLine(null,t,a,Math.round(e),a,0,n,c,2*o),this.crosshair.text.spanDate.parentNode.style.display="block",this.crosshair.text.spanDate.innerText=this.crosshair.params.time,this.crosshair.text.spanDate.style.textAlign="center",this.crosshairTextWidth||(this.crosshairTextWidth=this.crosshair.text.spanDate.parentNode.getBoundingClientRect().width);var l=this.crosshair.params.x-this.crosshairTextWidth/2-7;this.crosshair.params.x+this.crosshairTextWidth/2-7>this.w&&(l=this.w-this.crosshairTextWidth-7),this.crosshair.params.x-this.crosshairTextWidth/2<0&&(l=0),this.crosshair.text.spanDate.parentNode.style.left=l.toFixed(1)+"px",this.crosshair.text.spanDate.parentNode.style.top=e.toFixed(1)+"px"}else this.crosshair.text.spanDate.parentNode.style.display="none";var d=this.crosshair.params.value,p=this.chartData.options.Chart.typeTick;if(d="Default"!==p?this.getValueFromTick(d,p):this.crosshair.params.value,s<e){var u;if(this.crosshair.text.spanValue.parentNode.style.display="block",s>this.h){d="";for(var g=Object.keys(this.oscillatorCharts),D=0;D<g.length&&(u=this.oscillatorCharts[g[D]].getCurrPrecission(),!(d=this.oscillatorCharts[g[D]].getValue(s,u)));D++);}if(!d)return void(this.crosshair.text.spanValue.parentNode.style.display="none");a=r.a.getPosition(this.crosshair.params.y,2),r.a.drawLine(null,t,Math.round(i)+this.offX,a,0,a,n,c,2*o),this.crosshair.text.spanValue.innerText=d,this.crosshair.text.spanValue.style.fontSize=h+"px",this.crosshairTextHeight||(this.crosshairTextHeight=this.crosshair.text.spanValue.parentNode.getBoundingClientRect().height),this.crosshair.text.spanValue.parentNode.style.right="0",this.crosshair.text.spanValue.parentNode.style.left=i-this.priceOffset+"px",this.crosshair.text.spanValue.parentNode.style.top=a-this.crosshairTextHeight/2+"px"}else this.crosshair.text.spanValue.parentNode.style.display="none"},g.prototype.moveCrosshairXY=function(t,a,e,i,s){this.crosshair.showData=t,this.crosshair.width=i,this.crosshair.height=s},g.prototype.getStepedCursorParams=function(t,a,e,i,s){var r=this.crosshair.params.value,n=this.crosshair.params.time,o=this.getStepedCursorParamsX(t,e,i,s),h=o.dateSeconds;if(t=o.x,this.crosshair.params.dateSeconds!==h){var c=new Date(1e3*h),l=this.getLocalizedTimeText(c,this.chartData.localization,5,this.chartData.timeMode);this.crosshair.params.dateSeconds=h,this.crosshair.params.time=l}this.crosshair.params.x=t;var d=this.getStepedCursorParamsY(a,s);a=d.y;var p=d.value;this.crosshair.params.y=a,this.crosshair.params.value=p,this.crosshair.isUpdatedTime=n!==this.crosshair.params.time,this.crosshair.isUpdatedValue=r!==this.crosshair.params.value},g.prototype.getStepedCursorParamsY=function(t,a){var e=t;if(this.isMagnetModeOn()&&Number(this.crosshair.params.x)===Number(a.x)){var i=this.magnetDistance,s=this.toYPixels(a.open);Math.abs(s-t)<i&&(e=s,i=Math.abs(s-t));var r=this.toYPixels(a.low);Math.abs(r-t)<i&&(e=r,i=Math.abs(r-t));var n=this.toYPixels(a.high);Math.abs(n-t)<i&&(e=n,i=Math.abs(n-t));var o=this.toYPixels(a.close);Math.abs(o-t)<i&&(e=o,i=Math.abs(r-t))}return{y:e,value:this.toYValue(e)}},g.prototype.isMagnetModeOn=function(){var t=this.chartData.editDrawingObject&&this.chartData.editDrawingObject.isPressed&&!this.chartData.editDrawingObject.isObjectEdit,a=this.chartData.state.indexOf("drawing")>-1;return this.chartData.isMagnetMode&&(a||t)},g.prototype.getStepedCursorParamsX=function(t,a,e,i){var s,r=this.crosshair.params.dateSeconds;return t>a.x?(t=(s=Math.floor((this.curX-a.x)/this.chartData.spacing))*this.chartData.spacing+parseFloat(a.x))!==this.crosshair.params.x&&(r=a.date+s*this.chartData.getCurrentTimeStep()):t<e.x?(s=Math.floor((e.x-t)/this.chartData.spacing),(t=parseFloat(e.x)-s*this.chartData.spacing)!==this.crosshair.params.x&&(r=e.date-s*this.chartData.getCurrentTimeStep(),this.crosshair.params.x=t)):(t=parseFloat(i.x))!==this.crosshair.params.x&&(r=i.date,this.crosshair.params.x=t),{x:t,dateSeconds:r}},g.prototype.setCursorType=function(t){this.chartData.cursorType=t;for(var a=this.divEventListener.classList;a.length>1;)a.remove(a.item(1));a.add("tch-cursor-"+t)},g.prototype.getLineTypeArray=function(t,a){switch(t){case"normal":return[2*a,0];case"dash":return[5*a,2*a];case"points":return[2*a,2*a];default:return[]}},g.prototype.drawPips=function(t){var a,e,i=this.chartData.scaleParams,s=this.chartData.chart.curY,n=this.chartData.chart.curX,o=this.h,h=this.chartData.currentValue[this.chartData.typeData],c=this.chartData.colors.Chart.pipsColor;if(!(s>o)){var l=this.calculationsForDrawPips(i,s,n,o,h);r.a.drawLine(null,t,l.left,l.downY,l.left,l.upY,c,[],2),this.drawPipsValue(t,l.left,l.upY,s,i,o,h),a=this.createArrArrowDown(l.left,l.downY),r.a.drawPolygon(null,t,a,null,c,!1,2,a.length),e=this.createArrArrowUp(l.left,l.upY),r.a.drawPolygon(null,t,e,null,c,!1,2,e.length)}},g.prototype.calculationsForDrawPips=function(t,a,e,i,s){var r=i-(s/t.deltaY-t.minB/t.deltaY);return{downY:Math.max(a,r)-1,upY:Math.min(a,r)+1,left:e>150?e-80:e+80}},g.prototype.createArrArrowUp=function(t,a){if(isNaN(parseFloat(t))||!isFinite(t)||isNaN(parseFloat(a))||!isFinite(a))return[];var e=[];return t=+t,a=+a,e.push([t-5,a+5]),e.push([t,a]),e.push([t+5,a+5]),e},g.prototype.createArrArrowDown=function(t,a){if(isNaN(parseFloat(t))||!isFinite(t)||isNaN(parseFloat(a))||!isFinite(a))return[];var e=[];return t=+t,a=+a,e.push([t-5,a-5]),e.push([t,a]),e.push([t+5,a-5]),e},g.prototype.drawPipsValue=function(t,a,e,i,s,n,o){t.font="13px Arial";var h=this.chartData.colors.Chart.pipsColor,c=this.calculationsForDrawPipsValue(s,i,e,o,n);a-=t.measureText(c.pips).width+7,r.a.drawText(null,t,a,c.textY,c.pips,"12px Segoe UI",h)},g.prototype.calculationsForDrawPipsValue=function(t,a,e,i,s){var r=+t.minB+t.deltaY*(s-a),n=i.split(".");return{pips:Math.abs(r-parseFloat(i)).toFixed(n[n.length-1].length),textY:Math.max(65,e-14)}},g.prototype.getVariable=function(t,a){return String(t.getPropertyValue(a)).trim()},g.prototype.deactivateChart=function(){if(this.parent){this.parent.classList.remove("tch-active"),this.parent.querySelector(".tch-line-settings-container").classList.toggle("tch-hidden",!0);var t=!1;this.chartData.activeDrawingObject&&(this.chartData.activeDrawingObject.state="normal",this.chartData.activeDrawingObject=null,t=!0),this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject=null,t=!0),t&&(this.redrawInfo(),this.redrawDrawingObjects())}},g.prototype.setActiveChart=function(t){if(t||this.chartData.index!==this.chartData.techChart.activeChartIndex){var a=this.chartData.techChart.getActiveChartData().state;this.chartData.state=a,this.chartData.techChart.setActiveChartProps(this.chartData);for(var e=this.chartData.techChart.charts,i=0;i<e.length;i++)i!==this.chartData.techChart.activeChartIndex&&e[i].deactivateChart();if(e.length>1&&e[this.chartData.techChart.activeChartIndex].parent.classList.add("tch-active"),!1===this.chartData.isStayDrawingMode&&"drawingRoulete"===this.chartData.state&&(this.chartData.state="default",this.chartData.techChart.setRouleteBtn("Off")),this.chartData.techChart.setActiveChartParams(),this.chartData.drawingObjects.length)for(var s=0;s<this.chartData.drawingObjects.length;s++)(this.chartData.drawingObjects[s].drawingStage.current===this.chartData.drawingObjects[s].drawingStage.max&&"curve"===this.chartData.drawingObjects[s].name||this.chartData.drawingObjects[s].drawingStage.current<this.chartData.drawingObjects[s].drawingStage.max)&&(this.removeDrawingObjectsOtherCharts(this.chartData.drawingObjects[s]),this.chartData.drawingObjects[s].remove(),this.redrawDrawingObjects(),this.redrawDrawingObjectsOtherCharts())}},g.prototype.getMaxB=function(t,a,e,i){var s=a/2;return t>1e-8&&(s=e*t),(parseFloat(parseFloat(a).toFixed(i))+Math.ceil(Math.pow(10,i)*s)/Math.pow(10,i)).toFixed(i)},g.prototype.getMinB=function(t,a,e,i){var s=a/2;return t>1e-8&&(s=e*t),(parseFloat(parseFloat(a).toFixed(i))-Math.ceil(Math.pow(10,i)*s)/Math.pow(10,i)).toFixed(i)},g.prototype.getDeltaYforBoundsCalculation=function(t,a,e,i,s){return parseInt(Math.pow(10,12)*(parseFloat(a)-parseFloat(t))/(e-(i+s)))/Math.pow(10,12)},g.prototype.getScaleParams=function(t,a,e){if(!t||0===t.length||!this.chartData.options.Chart.autoScale)return this.chartData.scaleParams;var i=this.getMaxValue(t,e),s=this.getMinValue(t,e),r=this.getDeltaYforBoundsCalculation(s,i,a,this.chartData.marginTop,this.chartData.marginBottom),n=this.getMaxB(r,i,this.chartData.marginTop,e),o=this.getMinB(r,s,this.chartData.marginBottom,e);return{minB:o,maxB:n,deltaY:parseInt(1e11*(n-o)/a)/1e11,minV:s,maxV:i}},g.prototype.getOscillatorsScaleParams=function(){for(var t=0;t<this.chartData.indicators.length;t++){var a=this.chartData.indicators[t];if("oscillator"===a.type){var e=this.oscillatorCharts[a.id];a.createData(this.chartData.data[this.chartData.typeData]),a.createShowData(),e.scaleParams=e.getScaleParams(a.showData,parseInt(this.chartData.precission))}}},g.prototype.getScaleParamsByExtremum=function(t,a,e,i,s,r){var n=this.getDeltaYforBoundsCalculation(t,a,s,e,i),o=this.getMaxB(n,a,e,r),h=this.getMinB(n,t,i,r);return{minB:h,maxB:o,deltaY:parseInt(Math.pow(10,12)*(o-h)/s)/Math.pow(10,12),minV:t,maxV:a}},g.prototype.checkExtremum=function(t,a){return a<t.min&&(t.min=a),a>t.max&&(t.max=a),t},g.prototype.getLastDate=function(t){var a=null;return t&&t.length&&(a=t[t.length-1].date),a},g.prototype.getDataToRight=function(t,a,e,i,s){var r=a[0],n=parseFloat(r.x),o=r.date,h=this.getNumberOfDataToRight(n,e,i,s),c=this.getIndexByDate(t,o),l=[];return c>-1&&c>0&&c-h>0?(l=t.slice(c-h,c),this.chartData.hasNextData&&!this.chartData.isWaitFallBackData&&c<this.chartData.fallBack/2&&(this.chartData.isWaitFallBackData=!0,this.getDataOnMove(this,-this.chartData.fallBack/2,this.chartData.data[this.chartData.typeData][0].date,!0))):this.chartData.hasNextData?(l=[],this.getDataOnMove(this,-h,o)):c>-1&&c-h<=0&&(l=t.slice(0,c)),l},g.prototype.getDataToLeft=function(t,a,e){var i=a[a.length-1],s=parseFloat(i.x),r=i.date,n=Math.ceil(s/e),o=this.getIndexByDate(t,r),h=[];if(o>-1&&o<t.length-1){h=t.slice(o+1,o+n+1);var c=a.length>this.chartData.fallBack?a.length:this.chartData.fallBack;this.chartData.hasPrevData&&!this.chartData.isWaitFallBackData&&o>this.chartData.data[this.chartData.typeData].length-c&&(this.chartData.isWaitFallBackData=!0,this.getDataOnMove(this,this.chartData.fallBack/2,this.chartData.data[this.chartData.typeData][this.chartData.data[this.chartData.typeData].length-1].date,!0))}else this.chartData.hasPrevData&&(h=[],this.getDataOnMove(this,n,r));return h},g.prototype.getDataOnMove=function(t,a,e,i){this.waitForData||(a<0?i?this.chartData.getExtraData(this.chartData,e,a,this.chartData.getFallBackDataOnMoveToLeftComplete):this.chartData.getExtraData(this.chartData,e,a,this.chartData.getExtraDataOnMoveToLeftComplete):i?this.chartData.getExtraData(this.chartData,e,a,this.chartData.getFallBackDataOnMoveToRightComplete):this.chartData.getExtraData(this.chartData,e,a,this.chartData.getExtraDataOnMoveToRightComplete))},g.prototype.getFallBackDataOnMoveToLeftComplete=function(t){t.chartData.isWaitFallBackData=!1},g.prototype.getFallBackDataOnMoveToRightComplete=function(t){t.chartData.isWaitFallBackData=!1},g.prototype.getDataOnMoveToRightComplete=function(t,a){t.addElementsToLeft(t.showData,a,t.chartData.spacing,t.w,t.chartData.rightPadding)},g.prototype.getDataOnMoveToLeftComplete=function(t,a){t.addElementsToRight(t.showData,a,t.chartData.spacing,t.w,t.chartData.rightPadding)},g.prototype.addElementsToRight=function(t,a,e,i,s){for(var r=this.createShowDataToAdd(a),n=r.length-1;n>=0&&(a[n].isCurrentData&&(r[n].isCurrentData=!0),this.addElementToRight(t,r[n],e,i,s),!(parseFloat(t[0].x)>=i-s));n--);},g.prototype.addElementToRight=function(t,a,e,i,s){var r=parseFloat(t[0].x),n=t[0].date;if(a.date>n){var o=r+e;o>i-s&&(o=i-s),a.x=o.toFixed(1),this.resizeShowItemValuesY(a,this.h,this.chartData.scaleParams),t.unshift(a)}},g.prototype.addElementsToLeft=function(t,a,e){for(var i=this.createShowDataToAdd(a),s=0;s<i.length&&(this.addElementToLeft(t,i[s],e),!(parseFloat(t[t.length-1].x)<=0));s++);},g.prototype.addElementToLeft=function(t,a,e){var i=parseFloat(t[t.length-1].x);if(a.date<t[t.length-1].date){var s=i-e;s<0&&(s=0),a.x=s.toFixed(1),this.resizeShowItemValuesY(a,this.h,this.chartData.scaleParams),t[t.length]=a}},g.prototype.drawIndicators=function(){for(var t=0;t<this.chartData.indicators.length;t++)this.chartData.indicators[t].data&&("oscillator"===this.chartData.indicators[t].type&&this.oscillatorCharts[this.chartData.indicators[t].id].clear(),this.chartData.indicators[t].draw())},g.prototype.drawIchimoku=function(t,a,e){for(var i,s,n,o={TenkanSen:[],KijunSen:[],ChinkouSpan:[],SenkouSpanA:[],SenkouSpanB:[]},h=0;h<a.length;h++)if(void 0!==a[h]){var c=this.toXPixels(a[h].T);c=c.toFixed(1);var l=void 0;a[h].TenkanSen&&(l=this.toYPixels(a[h].TenkanSen),o.TenkanSen.push([c,l])),a[h].KijunSen&&(l=this.toYPixels(a[h].KijunSen),o.KijunSen.push([c,l])),a[h].ChinkouSpan&&(l=this.toYPixels(a[h].ChinkouSpan),o.ChinkouSpan.push([c,l])),a[h].SenkouSpanA&&(l=this.toYPixels(a[h].SenkouSpanA),o.SenkouSpanA.push([c,l])),a[h].SenkouSpanB&&(l=this.toYPixels(a[h].SenkouSpanB),o.SenkouSpanB.push([c,l]))}for(var d in o)o.hasOwnProperty(d)&&r.a.drawPolygon(null,e,o[d],null,t.colors[d],!1,t.lineWidth[d],o[d].length);for(var p=[],u=[],g="init",D=0;D<o.SenkouSpanB.length&&o.SenkouSpanA[D];D++)parseFloat(o.SenkouSpanA[D][1])<parseFloat(o.SenkouSpanB[D][1])?"A"===g?(u.push(o.SenkouSpanA[D]),u.unshift(o.SenkouSpanB[D])):("init"!==g&&(i={P1:o.SenkouSpanA[D-1],P2:o.SenkouSpanA[D]},s={P1:o.SenkouSpanB[D-1],P2:o.SenkouSpanB[D]},n=this.getCrossPoint(i,s),u.push(n),p.push({cloud:u,mark:"B"}),(u=[]).push(n)),u.push(o.SenkouSpanA[D]),u.unshift(o.SenkouSpanB[D]),g="A"):parseFloat(o.SenkouSpanA[D][1])>parseFloat(o.SenkouSpanB[D][1])?"B"===g?(u.unshift(o.SenkouSpanB[D]),u.push(o.SenkouSpanA[D])):("init"!==g&&(i={P1:o.SenkouSpanA[D-1],P2:o.SenkouSpanA[D]},s={P1:o.SenkouSpanB[D-1],P2:o.SenkouSpanB[D]},n=this.getCrossPoint(i,s),u.push(n),p.push({cloud:u,mark:"A"}),(u=[]).push(n)),u.push(o.SenkouSpanA[D]),u.unshift(o.SenkouSpanB[D]),g="B"):parseFloat(o.SenkouSpanA[D][1])===parseFloat(o.SenkouSpanB[D][1])&&(u.push(o.SenkouSpanA[D]),u.unshift(o.SenkouSpanB[D]));u.length&&p.push({cloud:u,mark:g});for(var f=0;f<p.length;f++)p[f].cloud&&p[f].cloud.length&&r.a.drawPolygon(null,e,p[f].cloud,this.hexToRgbA(t.colors[p[f].mark],t.opacity[p[f].mark]),null)},g.prototype.getCrossPoint=function(t,a){var e=parseFloat(t.P1[0]),i=parseFloat(t.P2[0]),s=parseFloat(a.P1[0]),r=parseFloat(a.P2[0]),n=parseFloat(t.P1[1]),o=parseFloat(t.P2[1]),h=parseFloat(a.P1[1]),c=parseFloat(a.P2[1]),l=((r-s)*(n-h)-(c-h)*(e-s))/((c-h)*(i-e)-(r-s)*(o-n));return[e+l*(i-e),n+l*(o-n)]},g.prototype.hexToRgbA=function(t,a){if(t.indexOf("rgba")>-1)return t;if(t.indexOf("rgb")>-1)return t.replace(")",","+a+" )").replace("rgb","rgba");var e;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t))return 3===(e=t.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2]]),"rgba("+[(e="0x"+e.join(""))>>16&255,e>>8&255,255&e].join(",")+","+a+")";throw new Error("Bad Hex")},g.prototype.drawFractal=function(t,a,e){for(var i,s,n,o,h,c,l,d,p=this.chartData.candleWidth,u=0;u<a.length;u++)void 0!==a[u]&&(i=!1,a[u].fractalHigh&&(i=this.toXPixels(a[u].T),o=(s=this.getFractalItemY(a[u],"high")-p/2)-p,c=s,d=s,n=i,h=i-p/2,l=i+p/2,r.a.drawPolygon(null,e,[[n,o],[h,c],[l,d]],t.colors.line,null)),a[u].fractalLow&&(i||(i=this.toXPixels(a[u].T)),o=(s=this.getFractalItemY(a[u],"low")+p/2)+p,c=s,d=s,n=i,h=i-p/2,l=i+p/2,r.a.drawPolygon(null,e,[[n,o],[h,c],[l,d]],t.colors.line,null)))},g.prototype.drawSar=function(t,a,e){for(var i,s,n,o,h,c,l,d,p,u,g=this.chartData.candleWidth,D=0;D<a.length;D++)void 0!==a[D]&&(i=this.toXPixels(a[D].T),c=s=this.toYPixels(a[D].P).toFixed(1),d=s,u=(o=s-g)+2*g,n=i,h=i-g/2,l=i+g/2,p=i,r.a.drawPolygon(null,e,[[n,o],[h,c],[p,u],[l,d]],t.colors.line,null))},g.prototype.drawBollingerBandsIndicator=function(t,a,e){if(a&&0!==a.length&&parent){for(var i={L:[],M:[],U:[]},s=0;s<a.length;s++)if(void 0!==a[s]){var n=this.toXPixels(a[s].T);n>=0&&n<=this.w-this.chartData.rightPadding&&(i.L.push([n.toFixed(1),this.toYPixels(a[s].L).toFixed(1)]),i.M.push([n.toFixed(1),this.toYPixels(a[s].M).toFixed(1)]),i.U.push([n.toFixed(1),this.toYPixels(a[s].U).toFixed(1)]))}var o=i.L.concat(i.U.reverse());r.a.drawPolygon(null,e,o,this.hexToRgbA(t.colors.cloud,t.opacity.cloud),null),r.a.drawPolygon(null,e,i.L,null,t.colors.L,!1,t.lineWidth.L,i.L.length),r.a.drawPolygon(null,e,i.M,null,t.colors.M,!1,t.lineWidth.M,i.L.length),r.a.drawPolygon(null,e,i.U,null,t.colors.U,!1,t.lineWidth.U,i.L.length)}},g.prototype.drawLinePT=function(t,a,e){var i=this;if(a[0]){var s=a.map(function(t){return[i.toXPixels(t.T).toFixed(1),i.toYPixels(t.P).toFixed(1)]});r.a.drawPolygon(null,e,s,null,t.colors.line,!1,t.lineWidth.line,s.length)}},g.prototype.updateIndicatorsDataPanel=function(t){this.chartData.techChart.updateIndicatorsDataPanel(t)},g.prototype.createIndicatorsShowData=function(){for(var t=0;t<this.chartData.indicators.length;t++)this.chartData.indicators[t].data&&0!==this.chartData.indicators[t].data.length||this.chartData.indicators[t].createData(this.chartData.data[this.chartData.typeData]),this.chartData.indicators[t].createShowData();this.resizeShowDataByTrendIndicators(),this.getOscillatorsScaleParams()},g.prototype.resizeShowDataByTrendIndicators=function(){var t=!1;if(this.chartData.options.Chart.autoScale&&!this.chartData.options.Chart.scaleSeriesOnly){var a=this.indicatorsGetExtremum(),e=this.chartData.scaleParams.minB,i=this.chartData.scaleParams.maxB;a.min<e&&(e=a.min),a.max>i&&(i=a.max),(i>this.chartData.scaleParams.maxB||e<this.chartData.scaleParams.minB)&&(this.chartData.scaleParams=this.getScaleParamsByExtremum(e,i,this.chartData.marginTop,this.chartData.marginBottom,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams),t=!0)}return t},g.prototype.setScaleSeriesOnly=function(){if(this.chartData.options.Chart.autoScale&&!this.chartData.options.Chart.scaleSeriesOnly){var t=this.indicatorsGetExtremum(),a=this.chartData.scaleParams.minB,e=this.chartData.scaleParams.maxB;t.min<a&&(a=t.min),t.max>e&&(e=t.max),e===this.chartData.scaleParams.maxB&&a===this.chartData.scaleParams.minB||(this.chartData.scaleParams=this.getScaleParamsByExtremum(a,e,this.chartData.marginTop,this.chartData.marginBottom,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams))}},g.prototype.applyChartHight=function(t){this.h=t.chart.height,this.top=t.chart.top,this.chartData.h=this.h,this.chartData.top=this.top},g.prototype.applyIndicatorsHeights=function(t){for(var a=0;a<this.chartData.indicators.length;a++){var e=this.chartData.indicators[a].id;t.oscCharts[e]&&this.chartData.indicators[a].applyIndicatorHeight(t.oscCharts[e],this)}},g.prototype.calculateHeightOnCreate=function(t,a,e){e-=this.offY;var i=t?Object.keys(t).length:0,s=e/(i+3),r=e-s,n={},o=s;if(i>0){var h,c,l=s/e;for(var d in t)t.hasOwnProperty(d)&&(n[(h=t[d]).id]={},n[h.id].height=h.h-h.h*l,c=n[h.id].height/h.h,n[h.id].top=h.top*c,o+=n[h.id].height);a=e-o}else a=e-s;return{newElement:{height:parseInt(s),top:parseInt(r)},chart:{height:parseInt(a),top:0},oscCharts:n}},g.prototype.calculateHeightOnDelete=function(t,a,e){e-=this.offY;var i=t?Object.keys(t).length:0,s=this.h,r=this.top,n={},o=e/(e-a.h);if(i>1){var h;for(var c in t)t.hasOwnProperty(c)&&(n[(h=t[c]).id]={},n[h.id].top=h.top>a.top?h.top-a.h:h.top,n[h.id].top=parseInt(o*n[h.id].top),n[h.id].height=parseInt(h.h*o));r>a.top&&(r-=a.h),r*=o,s=this.h*o}else s=e;return{chart:{height:parseInt(s),top:parseInt(r)},oscCharts:n}},g.prototype.removeIndicator=function(t){var a=this.chartData.getIndicatorIndex(this.chartData.indicators,t);if("trend"===t.type)this.chartData.indicators.splice(a,1),this.draw(this.showData,this.h);else if("oscillator"===t.type){var e=parseInt(this.parent.style.height),i=this.calculateHeightOnDelete(this.oscillatorCharts,this.chartData.indicators[a],e);this.chartData.indicators.splice(a,1),delete this.oscillatorCharts[t.id],this.applyChartHight(i),this.applyIndicatorsHeights(i),this.init()}},g.prototype.redrawOscillators=function(){for(var t=0;t<this.chartData.indicators.length;t++)if("oscillator"===this.chartData.indicators[t].type){var a=this.chartData.indicators[t];this.chartData.indicators[t].isChanged&&(this.oscillatorCharts[a.id].clear(),this.oscillatorCharts[a.id].redrawOnResize(),a.draw())}},g.prototype.indicatorsGetExtremum=function(){for(var t=this.chartData.indicators,a=Number.MAX_VALUE,e=Number.MIN_VALUE,i=0;i<t.length;i++)if("trend"===t[i].type&&!t[i].hidden&&t[i].showData&&t[i].showData.length){var s=this.indicatorGetExtremum(t[i]);s.min<a&&(a=s.min),s.max>e&&(e=s.max)}return{min:a,max:e}},g.prototype.indicatorGetExtremum=function(t){var a={};switch(t.name.toLowerCase()){case"sma":case"ema":a=this.getExtremumPT(t.showData);break;case"bb":a=this.getExtremumBollingerBands(t.showData);break;case"fractal":a=this.getExtremumFractal(t.showData);break;case"ichimoku":a=this.getExtremumIchimoku(t.showData);break;case"macd":a=this.getExtremumMACD(t.showData);break;case"env":case"keltner":case"donchian":a=this.getExtremumBollingerBands(t.showData);break;case"dema":a=this.getExtremumPT(t.showData)}return a},g.prototype.getExtremumMACD=function(t){for(var a={min:Number.MAX_VALUE,max:Number.MIN_VALUE},e=0;e<t.length;e++){var i=t[e].macdHistogram;i&&this.checkExtremum(a,i),(i=t[e].macdLine)&&this.checkExtremum(a,i),(i=t[e].signalLine)&&this.checkExtremum(a,i)}return a},g.prototype.getExtremumPT=function(t){for(var a={min:Number.MAX_VALUE,max:Number.MIN_VALUE},e=0;e<t.length;e++)this.checkExtremum(a,t[e].P);return a},g.prototype.getExtremumBollingerBands=function(t){for(var a={min:Number.MAX_VALUE,max:Number.MIN_VALUE},e=0;e<t.length;e++)this.checkExtremum(a,t[e].L),this.checkExtremum(a,t[e].U);return a},g.prototype.getExtremumFractal=function(t){for(var a={min:Number.MAX_VALUE,max:Number.MIN_VALUE},e=0;e<t.length;e++)t[e].fractalHigh&&this.checkExtremum(a,t[e].fractalHigh),t[e].fractalLow&&this.checkExtremum(a,t[e].fractalLow);return a},g.prototype.getExtremumIchimoku=function(t){for(var a={min:Number.MAX_VALUE,max:Number.MIN_VALUE},e=0;e<t.length;e++){var i=t[e].TenkanSen;i&&this.checkExtremum(a,i),(i=t[e].KijunSen)&&this.checkExtremum(a,i),(i=t[e].ChinkouSpan)&&this.checkExtremum(a,i),(i=t[e].SenkouSpanA)&&this.checkExtremum(a,i),i=t[e].SenkouSpanB,t[e].SenkouSpanB&&this.checkExtremum(a,i)}return a},g.prototype.toXPixels=function(t){if(isNaN(t)||!this.showData||this.showData.length<=0)return!1;var a=this.getNearestCandleIndex(t),e=this.showData[a].date,i=e-t,s=this.chartData.getCurrentTimeStep();if(i>s&&this.showData[a+1])return parseFloat(this.showData[a+1].x);0===a&&this.showData[a+1]?(a++,i=(e=this.showData[a].date)-t):a===this.showData.length-1&&this.showData[a-1]&&(a--,i=(e=this.showData[a].date)-t);var r=this.chartData.spacing,n=Math.abs(s/r);return parseFloat(this.showData[a].x)-i/n},g.prototype.toXValue=function(t){if(isNaN(t)||!this.showData||0===this.showData.length)return!1;var a=this.showData,e=this.getElementIndexByPositionX(a,t);-1===e&&(e=0);var i=a[e].x,s=this.chartData.spacing,r=this.chartData.getCurrentTimeStep(),n=Math.abs(r/s),o=i-t;return a[e].date-o*n},g.prototype.toYValue=function(t,a){if(isNaN(t))return!1;var e=this.h,i=parseFloat(this.chartData.scaleParams.minB)+this.chartData.scaleParams.deltaY*(e-t),s=a||this.chartData.precission;return i.toFixed(s)},g.prototype.toYPixels=function(t){return!isNaN(t)&&this.h-(t-this.chartData.scaleParams.minB)/this.chartData.scaleParams.deltaY},g.prototype.getDrawingObjectIndexByType=function(t){for(var a=0;a<this.chartData.drawingObjects.length;a++)if(this.chartData.drawingObjects[a].constructor.name===t)return a;return-1},g.prototype.moveDrawingObjects=function(t,a){for(var e=0;e<this.chartData.drawingObjects.length;e++)this.chartData.options.Chart.autoScale?(this.chartData.drawingObjects[e].shiftTo(t,0),this.chartData.drawingObjects[e].updateYPixels()):this.chartData.drawingObjects[e].shiftTo(t,a)},g.prototype.moveDrawingObjectsX=function(t){this.moveDrawingObjects(t,0)},g.prototype.moveDrawingObjectsY=function(t){this.moveDrawingObjects(0,t)},g.prototype.clearDrawingCanvas=function(){var t=this.canvasDrawingContext,a=t.canvas;r.a.clearRect(null,t,0,0,a.width,a.height)},g.prototype.clearDrawingActiveCanvas=function(){var t=this.canvasDrawingActiveContext,a=t.canvas;r.a.clearRect(null,t,0,0,a.width,a.height)},g.prototype.redrawDrawingObjects=function(){if(this.clearDrawingCanvas(),this.chartData.isShowDrawingObjects){this.drawingTextContainer.classList.toggle("tch-hidden",!1);for(var t=0;t<this.chartData.drawingObjects.length;t++)if("normal"===this.chartData.drawingObjects[t].state||"active"===this.chartData.drawingObjects[t].state){if(this.chartData.drawingObjects[t].periods.length&&!this.chartData.drawingObjects[t].periods.indexOf(this.chartData.period))continue;this.chartData.drawingObjects[t].draw(this.canvasDrawingContext)}}else this.drawingTextContainer.classList.toggle("tch-hidden",!0)},g.prototype.getDrawingObjectDTOsOtherCharts=function(){for(var t=[],a=this.chartData.techChart.charts,e=0;e<a.length;e++)e!==this.chartData.techChart.activeChartIndex&&a[e].chartData.pair.ID===this.chartData.pair.ID&&a[e].chartData.drawingObjects.length&&(t=a[e].chartData.convertDrawingObjectsToDTO());return t},g.prototype.removeAllDrawingObjectsOtherCharts=function(){for(var t=this.chartData.techChart.charts,a=0;a<t.length;a++)a!==this.chartData.techChart.activeChartIndex&&t[a].chartData.pair.ID===this.chartData.pair.ID&&t[a].removeAllDrawingObjects()},g.prototype.redrawAllDrawingObjectsOtherCharts=function(){for(var t=this.chartData.techChart.charts,a=0;a<t.length;a++)a!==this.chartData.techChart.activeChartIndex&&t[a].chartData.pair.ID===this.chartData.pair.ID&&t[a].redrawDrawingObjects()},g.prototype.removeEditDrawingObject=function(){var t=this.chartData.editDrawingObject;t&&(this.removeDrawingObjectsOtherCharts(t),this.chartData.editDrawingObject.remove(),this.redrawInfo(),this.redrawAllDrawingObjectsOtherCharts(),this.chartData.techChart.autoSaveParams())},g.prototype.drawActiveDrawingObjects=function(t){(t||this.chartData.editDrawingObject&&this.chartData.editDrawingObject.isObjectEdit)&&(this.chartData.editDrawingObject||this.chartData.activeDrawingObject)&&this.chartData.isShowDrawingObjects&&(r.a.clearRect(null,this.canvasDrawingActiveContext,0,0,this.canvasDrawingActive.width,this.canvasDrawingActive.height),this.chartData.editDrawingObject&&this.chartData.editDrawingObject.draw(this.canvasDrawingActiveContext),this.chartData.activeDrawingObject&&this.chartData.activeDrawingObject.draw(this.canvasDrawingActiveContext)),this.chartData.activeDrawingObject||this.chartData.editDrawingObject||r.a.clearRect(null,this.canvasDrawingActiveContext,0,0,this.canvasDrawingActive.width,this.canvasDrawingActive.height)},g.prototype.redrawDrawingObjectsOtherCharts=function(){for(var t=this.chartData.techChart.charts,a=0;a<t.length;a++)a!==this.chartData.techChart.activeChartIndex&&t[a].chartData.pair.ID===this.chartData.pair.ID&&(t[a].redrawDrawingObjects(),t[a].drawActiveDrawingObjects())},g.prototype.drawActiveDrawingObjectsOtherCharts=function(t){for(var a=this.chartData.techChart.charts,e=0;e<a.length;e++)if(e!==this.chartData.techChart.activeChartIndex&&a[e].chartData.pair.ID===this.chartData.pair.ID)for(var i=a[e].chartData.drawingObjects,s=0;s<i.length;s++)if(i[s].id===t){if("normal"===i[s].state)a[e].redrawDrawingObjects();else{var r=a[e].clearInfo();a[e].drawCrosshair(r,r.canvas.height,!1),a[e].drawActiveDrawingObjects()}break}},g.prototype.completeFigureOtherCharts=function(t){for(var a=this.chartData.techChart.charts,e=0;e<a.length;e++)if(e!==this.chartData.techChart.activeChartIndex&&a[e].chartData.pair.ID===this.chartData.pair.ID)for(var i=a[e].chartData.drawingObjects,s=0;s<i.length;s++)i[s].id===t&&i[s].completeFigure()},g.prototype.removeDrawingObjectsOtherCharts=function(t){for(var a=this.chartData.techChart.charts,e=0;e<a.length;e++)if(e!==this.chartData.techChart.activeChartIndex&&a[e].chartData.pair.ID===this.chartData.pair.ID)for(var i=a[e].chartData.drawingObjects,s=0;s<i.length;s++)if(i[s].id===t.id){i[s].remove();break}},g.prototype.createDrawingObjectOtherCharts=function(t,a,e){for(var i=this.chartData.techChart.charts,s=0;s<i.length;s++)if(s!==this.chartData.techChart.activeChartIndex&&i[s].chartData.pair.ID===this.chartData.pair.ID){var r=o.a.createDrawingObjectByType(t,[i[s].chartData,e]);if(r instanceof c.a)continue;i[s].chartData.drawingObjects.push(r),r.id=a,r.state="normal"}},g.prototype.updateDrawingObjectsOtherChart=function(t){for(var a=this.chartData.techChart.charts,e=0;e<a.length;e++)if(e!==this.chartData.techChart.activeChartIndex&&a[e].chartData.pair.ID===this.chartData.pair.ID)for(var i=a[e].chartData.drawingObjects,s=0;s<i.length;s++)if(i[s].id===t.id){i[s].updateByObject(t);break}},g.prototype.getFocusedDrawingObject=function(t,a){for(var e=0;e<this.chartData.drawingObjects.length;e++)if(this.chartData.drawingObjects[e].isFocused(t,a))return this.chartData.drawingObjects[e];return!1},g.prototype.getDrawingObjectById=function(t){for(var a=0;a<this.chartData.drawingObjects.length;a++)if(this.chartData.drawingObjects[a].id===t)return this.chartData.drawingObjects[a];return null},g.prototype.updateDrawingObjectsPixels=function(){this.chartData.activeDrawingObject&&this.chartData.activeDrawingObject.updatePixels(),this.chartData.editDrawingObject&&this.chartData.editDrawingObject.updatePixels();for(var t=0;t<this.chartData.drawingObjects.length;t++)this.chartData.drawingObjects[t].updatePixels()},g.prototype.removeAllDrawingObjects=function(){for(this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.remove(),this.chartData.editDrawingObject=null),this.chartData.activeDrawingObject&&(this.chartData.activeDrawingObject.remove(),this.chartData.activeDrawingObject=null);this.chartData.drawingObjects.length;)this.chartData.drawingObjects[0].remove();this.chartData.drawingObjects=[],this.redrawDrawingObjects(),this.redrawInfo()},g.prototype.redrawOnResize=function(){this.resizeChartHeight()},g.prototype.redrawGrid=function(){this.chartData.chart.getOscillatorChartsAxis(),this.clearGrid(),this.drawTimeAxis(this.timeAxis),this.drawValueAxis(this.valueAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder()},g.prototype.redrawOnMove=function(){},g.prototype.resizeOscillatorOnMouseMove=function(){var t={};t.topParams=this.getTopResizedObjectsParams(),t.bottomParams=this.getBottomResizedObjectsParams(),this.isValidResizeObjectParmas(t)&&this.applyResizedObjectsParams(t)},g.prototype.applyResizedObjectsParams=function(t){if("oscillatorChart"===t.topParams.type){t.topParams.chart.h=t.topParams.newHeight,t.topParams.chart.top=t.topParams.newTop;var a=this.chartData.getIndicatorIndex(this.chartData.indicators,t.topParams.chart);this.chartData.indicators[a].h=t.topParams.chart.h,this.chartData.indicators[a].top=t.topParams.chart.top,t.topParams.chart.redrawOnResize()}else"chart"===t.topParams.type&&(this.h=t.topParams.chart.h,this.top=t.topParams.chart.top,this.chartData.h=t.topParams.chart.h,this.chartData.top=t.topParams.chart.top,this.redrawOnResize());if("oscillatorChart"===t.bottomParams.type){t.bottomParams.chart.h=t.bottomParams.newHeight;var e=this.chartData.getIndicatorIndex(this.chartData.indicators,t.bottomParams.chart);this.chartData.indicators[e].h=t.bottomParams.chart.h,t.bottomParams.chart.redrawOnResize()}else"chart"===t.bottomParams.type&&(this.h=t.bottomParams.newHeight,this.chartData.h=t.bottomParams.newHeight,this.redrawOnResize())},g.prototype.getTopResizedObjectsParams=function(){var t,a={},e=this.parent.querySelector(".tch-chart-resized-top");return e?(a.type="oscillatorChart",a.chart=e.chart,a.oldTop=parseFloat(e.style.top),a.newTop=this.curY+0,t=a.oldTop-a.newTop,a.oldHeight=e.chart.h,a.newHeight=a.oldHeight+t):this.parent.classList.contains("tch-chart-resized-top")&&(a.type="chart",a.chart=this,a.oldTop=this.top,a.newTop=this.curY,t=a.oldTop-a.newTop,a.oldHeight=this.h,a.newHeight=a.oldHeight+t),a},g.prototype.getBottomResizedObjectsParams=function(){var t,a={},e=this.parent.querySelector(".tch-chart-resized-bottom");return e?(a.type="oscillatorChart",a.chart=e.chart,a.oldBottom=e.chart.top+e.chart.h,a.newBottom=this.curY,t=a.oldBottom-a.newBottom,a.oldHeight=e.chart.h,a.newHeight=a.oldHeight-t):this.parent.classList.contains("tch-chart-resized-bottom")&&(a.type="chart",a.chart=this,a.oldBottom=this.top+this.h,a.newBottom=this.curY,t=a.oldBottom-a.newBottom,a.oldHeight=this.h,a.newHeight=a.oldHeight-t),a},g.prototype.isValidResizeObjectParmas=function(t){return!(!t.topParams.chart||!t.bottomParams.chart)&&!(t.topParams.newHeight<2*this.resizeEdgeHeight||t.bottomParams.newHeight<2*this.resizeEdgeHeight)},g.prototype.getSettingsPanelContainer=function(){var t=this.parent.querySelector(".tch-line-settings-container");return t.style.left=this.curX+"px",t.style.top=this.curY+"px",t},g.prototype.zoomArea=function(t){parseFloat(t.minValue)!==parseFloat(t.maxValue)&&(this.chartData.options.Chart.autoScale=!1,this.chartData.scaleParams.maxB=t.maxValue,this.chartData.scaleParams.minB=t.minValue,this.chartData.scaleParams.deltaY=(this.chartData.scaleParams.maxB-this.chartData.scaleParams.minB)/this.h,this.chartData.startDateSeconds=t.startDate,this.chartData.candleWidth=t.candleWidth,this.chartData.spacing=1.5*this.chartData.candleWidth,this.selectedData=this.selectDataToShow(this.chartData.data[this.chartData.typeData],this.chartData.startDateSeconds,this.chartData.spacing,this.w),this.showData=this.processDataToShow(this.selectedData,this.chartData.rightPadding+t.startX,this.chartData.spacing,this.w,this.h,this.chartData.precission),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.timeAxis=this.getTimeAxis(this.showData,this.w,this.parentRect.height-this.offY,this.chartData.period,this.chartData.timeMode,this.chartData.localization),this.updateDrawingObjectsPixels(),this.resizeNewsBubbles(),this.resizeEventsBubbles(),this.draw(this.showData,this.h),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.getOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrentValue(),this.moveCrosshairXY(this.showData,this.curX,this.curY,this.w,this.h),this.redrawInfo())},g.prototype.zoomOut=function(){if(void 0!==this.chartData.zoomSteps&&0!==this.chartData.zoomSteps.length){var t=this.chartData.zoomSteps.pop();this.chartData.zoomData=t,this.zoomArea(this.chartData.zoomData),0===this.chartData.zoomSteps.length&&(this.chartData.options.Chart.autoScale=!0,this.chartData.techChart.parent.querySelector(".tch-zoomout-btn").disabled=!0)}},g.prototype.dropZoomSteps=function(){this.techChart.configuration.modules.sideBarButtons.zoomButton&&(this.chartData.zoomSteps=[],this.chartData.techChart.parent.querySelector(".tch-zoomout-btn").disabled=!0)},g.prototype.scaleZoomData=function(t){var a=Math.abs(t.startX-t.endX),e=Math.abs(t.startY-t.endY),i=Math.min(t.startY,t.endY),s=Math.min(t.startX,t.endX)+a,r=i+e,n=i;t.maxValue=this.toYValue(n),t.minValue=this.toYValue(r),t.startDate=this.toXValue(s),t.candleWidth=this.chartData.candleWidth*(this.w/a),t.startX=this.w-parseFloat(this.showData[0].x),t.click=a<50},g.prototype.zoomX=function(t,a,e){this.setChartZoomedSize(this.chartData.zoomView,a,-1*t),e=(e=isNaN(e)?this.getElementIndexByPositionX(this.showData,this.curX):e)>=0?e:0;var i=this.showData[e];if(i=this.correctionZoomX(i,e,t,this),this.showData=[],this.showData.push(i),this.selectedData=this.getSelectedDataByShowData(this.showData),this.needsElementToLeft(this.showData,this.chartData.spacing)){var s=this.getDataToLeft(this.chartData.data[this.chartData.typeData],this.showData,this.chartData.spacing);this.addElementsToLeft(this.showData,s,this.chartData.spacing)}if(this.needsElementToRight(this.showData,this.w,this.chartData.rightPadding,this.chartData.spacing)){var r=this.getDataToRight(this.chartData.data[this.chartData.typeData],this.showData,this.w,this.chartData.rightPadding,this.chartData.spacing);this.addElementsToRight(this.showData,r,this.chartData.spacing,this.w,this.chartData.rightPadding)}if(this.deleteRedundantElements(this.showData,0,this.w,this.chartData.rightPadding,this.chartData.spacing),this.chartData.startDateSeconds=this.showData[0].date,this.selectedData=this.getSelectedDataByShowData(this.showData),this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams),!this.chartData.data[this.chartData.typeData][0].isCurrentData&&!this.chartData.isExpired){var n=this.createCurrentDataItem(this.chartData.data[this.chartData.typeData][0],this.chartData.currentValue[this.chartData.typeData]);this.chartData.data[this.chartData.typeData].unshift(n),this.chartData.startDateSeconds=this.chartData.data[this.chartData.typeData][0].date}this.chartData.indicators&&this.chartData.indicators.length&&this.createIndicatorsShowData(),this.updateDrawingObjectsPixels(),this.removeNewsTooltip(),this.removeEventsTooltip(),this.resizeNewsBubbles(),this.resizeEventsBubbles(),this.draw(this.showData,this.h),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.getOscillatorChartsAxis(),this.timeAxis=this.getTimeAxis(this.showData,this.w,this.parentRect.height-this.offY,this.chartData.period,this.chartData.timeMode,this.chartData.localization),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrentValue(),this.moveCrosshairXY(this.showData,this.curX,this.curY,this.w,this.h),this.redrawInfo(),this.chartData.startX=0,this.showData[0].isCurrentData&&(this.chartData.startX=this.w-this.chartData.rightPadding-parseFloat(this.showData[0].x))},g.prototype.correctionZoomX=function(t,a,e,i){if(t&&void 0!==a&&null!==a&&void 0!==e&&null!==e){i||(i=this);var s=i.chartData.data[i.chartData.typeData],r=i.chartData.spacing,n=i.w-i.chartData.rightPadding;return s.length===i.showData.length?function correctionWhereAllDataOnChart(){if(e<0){var s=parseFloat(t.x),o=s-(i.showData.length-a)*r<=r,h=s+r*a>=n-r;o&&!h?(t=i.showData[i.showData.length-1]).x=""+r:h&&!o&&((t=i.showData[0]).x=""+(n-r))}}():function correctionWithoutAllDataOnChart(){if(e>0)if(parseFloat(i.showData[0].x)-r<n/2)(t=i.showData[0]).x=""+n/2;else if(!i.chartData.hasPrevData){var o=i.showData[i.showData.length-1],h=parseFloat(o.x);if(s[s.length-1].date==o.date&&h+r>r)parseInt(n/r)<=s.length?(t=i.showData[i.showData.length-1]).x=""+r:t=i.showData[i.showData.length-1];else{var c=i.binarySearhElementWithField(s,t.date,"date"),l=s.length;if(parseInt(parseFloat(t.x)/r)>l-c){t=i.showData[i.showData.length-1];var d=(l-c-(i.showData.length-a))*r+r;t.x=""+d.toFixed(1)}}}}(),t}},g.prototype.scaleZoomDataQuantCandles=function(t,a){var e=Math.abs(t.startX-t.endX),i=1.5*this.chartData.candleWidth*(this.w/e);if((this.w-this.chartData.rightPadding)/i<a&&i!==1/0){var s=(this.w-this.chartData.rightPadding)/a/i;t.startX<t.endX?(t.startX=t.startX*s,t.endX=t.endX/s>this.w?this.w:t.endX/s):(t.startX=t.endX/s>this.w?this.w:t.endX/s,t.endX=t.endX*s),e=Math.abs(t.startX-t.endX)}var r=Math.abs(t.startY-t.endY),n=Math.min(t.startY,t.endY),o=Math.min(t.startX,t.endX)+e,h=n+r,c=n;t.maxValue=this.toYValue(c),t.minValue=this.toYValue(h),t.startDate=this.toXValue(o),t.candleWidth=this.chartData.candleWidth*(this.w/e),t.startX=this.w-parseFloat(this.showData[0].x),t.click=e<40},g.prototype.addNavBtnsEvents=function(){var t=this.parent.querySelector(".tch-nav-buttons.tch-nav-many"),a=this.parent.querySelector(".tch-nav-buttons.tch-nav-one"),e=t.querySelector(".tch-nav-left"),i=t.querySelector(".tch-nav-out"),s=t.querySelector(".tch-nav-ref"),r=t.querySelector(".tch-nav-in"),n=t.querySelector(".tch-nav-right"),o=this,h=.8*parseInt(t.style.left.replace(/px/,"")),c=1.2*t.getBoundingClientRect().width+h/.8,l=.85*t.offsetTop;t.onmousemove=function(){var e=parseInt(o.crosshair.params.x);o.crosshair.params.y>=l&&e>=h&&e<=c?t.classList.toggle("tch-active",!0):t.classList.toggle("tch-active",!1),o.chartData.data.bid&&o.chartData.data.bid[0]&&o.showData&&o.showData[0]&&o.chartData.data.bid[0].date!==o.showData[0].date?a.classList.toggle("tch-active",!0):a.classList.toggle("tch-active",!1)},t.onmousedown=function(){o.setActiveChart()},a.onmousedown=function(){for(var t=o.toXPixels(o.chartData.data.bid[0].date),e=parseFloat(o.showData[0].x),i=t-e,s=100,r=i/(600/s);r>100&&s>=10;)r=i/(600/(s-=5));a.intervalId||(a.intervalId=setInterval(function(){o.moveRightChart(o,r),o.chartData.data.bid[0].date===o.showData[0].date&&(t=o.toXPixels(o.chartData.data.bid[0].date),i=t-o.w+o.w/20,o.moveRightChart(o,i),clearInterval(a.intervalId),a.intervalId=null)},s),o.setActiveChart())},this.navButtonStartContainer.onmouseup=function(){o.chartData.data.bid[0].date!==o.showData[0].date?a.classList.toggle("tch-active",!0):a.classList.toggle("tch-active",!1)},e.addEventListener("mousedown",function(){o.moveLeftChart(o,10),e.interval=setInterval(function(){o.moveLeftChart(o,10)},100)}),e.addEventListener("mouseleave",function(){clearInterval(e.interval)}),e.addEventListener("mouseup",function(){clearInterval(e.interval)}),i.addEventListener("click",function(){o.zoomX(100,1.2,0)}),s.addEventListener("click",function(){var t=!1;for(o.chartData.candleWidth=6,o.chartData.spacing=1.5*o.chartData.candleWidth;!o.showData[0].isCurrentData;)o.moveRightChart(o,10),t=!0;t&&o.moveRightChart(o,o.w*o.techChart.configuration.offsetChart),o.zoomX(0,1,0)}),r.addEventListener("click",function(){o.zoomX(-100,1.2,0)}),n.addEventListener("mousedown",function(){o.moveRightChart(o,10),n.interval=setInterval(function(){o.moveRightChart(o,10)},100)}),n.addEventListener("mouseleave",function(){clearInterval(n.interval)}),n.addEventListener("mouseup",function(){clearInterval(n.interval)})},g.prototype.moveLeftChart=function(t,a){this.moveChartX(this,-a)&&(this.showData[0].date===this.selectedData[0].date&&this.showData[this.showData.length-1].date===this.selectedData[this.selectedData.length-1].date||(this.selectedData=this.getSelectedDataByShowData(this.showData),this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams)),t.chartData.indicators&&t.chartData.indicators.length&&t.createIndicatorsShowData(),this.updateNavPanelAction())},g.prototype.moveRightChart=function(t,a){this.moveChartX(this,a)&&(this.showData[0].date===this.selectedData[0].date&&this.showData[this.showData.length-1].date===this.selectedData[this.selectedData.length-1].date||(this.selectedData=this.getSelectedDataByShowData(this.showData),this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams)),t.chartData.indicators&&t.chartData.indicators.length&&t.createIndicatorsShowData(),this.updateNavPanelAction())},g.prototype.zoomChartNavBtnClick=function(t){t.zoomX(-100,1.2,0)},g.prototype.moveRightChartStart=function(t,a){this.moveChartX(this,a)&&(this.showData[0].date===this.selectedData[0].date&&this.showData[this.showData.length-1].date===this.selectedData[this.selectedData.length-1].date||(this.selectedData=this.getSelectedDataByShowData(this.showData),this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams)),t.chartData.indicators&&t.chartData.indicators.length&&t.createIndicatorsShowData(),this.updateNavPanelAction())},g.prototype.updateNavPanelAction=function(){this.updateDrawingObjectsPixels(),this.draw(this.showData,this.h),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.getOscillatorChartsAxis(),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrentValue(),this.redrawInfo()},g.prototype.convertToDTO=function(){var t={};return t.chartDataDTO=this.chartData.convertToDTO(),t.w=this.w,t.h=this.h,t.offX=this.offX,t.offY=this.offY,t},g.convertFromDTO=function(t,a){t&&a&&(this.chartData.convertFromDTO(a.chartDataDTO),t.w=a.w,t.h=a.h,t.offX=a.offX,t.offY=a.offY)},g.prototype.setGetNewsTimeout=function(){var t=this,a=setTimeout(function(){t.processGetNews(t,a)},500);this.getNewsTimeout=a},g.prototype.processGetNews=function(t,a){t.getNewsTimeout===a&&(t.getNews(t.showData)||t.updateNewsBubbles(),t.getNewsTimeout=null,t=null)},g.prototype.getNews=function(t){if(!t||0===t.length)return!1;var a=t[t.length-1].date,e=t[0].date;return this.chartData.getNews(a,e)},g.prototype.setGetEventsTimeout=function(){var t=this,a=setTimeout(function(){t.processGetEvents(t,a)},500);this.getEventsTimeout=a},g.prototype.processGetEvents=function(t,a){t.getEventsTimeout===a&&(t.getEvents(t.showData)||t.updateEventsBubbles(),t.getEventsTimeout=null,t=null)},g.prototype.getEvents=function(t){if(!t||0===t.length)return!1;var a=t[t.length-1].date,e=t[0].date;return this.chartData.getEvents(a,e)},g.prototype.moveNewsBubblesY=function(t){this.moveBubblesY(t,this.newsBubbles)},g.prototype.moveNewsBubblesX=function(t){this.moveBubblesX(t,this.newsBubbles)},g.prototype.showNewsBubbles=function(){this.showBubbles(this.newsBubbles,this.newsBubblesContainer)},g.prototype.resizeNewsBubbles=function(){this.resizeBubbles(this.newsBubbles,this.chartData.candleWidth),this.setRecreateNewsBubblesTimeout()},g.prototype.removeNewsTooltip=function(){this.removeBubblesTooltip(this.newsBubbles)},g.prototype.focusNewsBubbles=function(t,a){for(var e=0;e<this.newsBubbles.length;e++){if(this.newsBubbles[e].isFocused(t,a)){setTimeout(this.processNewsBubbleFocus.bind(this,this.newsBubbles[e]),400),this.newsBubbles[e].isBubbleFocused=!0;break}if(this.newsBubbles[e].isBubbleFocused){this.newsBubbles[e].isBubbleFocused=!1;break}this.newsBubbles[e].newsTooltip&&(this.newsBubbles[e].isBubbleFocused=!1,this.newsBubbles[e].hideTooltip("newsTooltip"))}},g.prototype.processNewsBubbleFocus=function(t){if(this.eventsTooltipContainer.classList.contains("tch-hidden")&&t.isBubbleFocused)if(t.newsTooltip)""===t.newsTooltip.parentDiv.innerHTML?t.newsTooltip.refresh():t.newsTooltip&&t.newsTooltip.leaveTimeout&&(clearTimeout(t.newsTooltip.leaveTimeout),t.newsTooltip.leaveTimeout=null);else{var a={bubble:t};t.newsTooltip=new TooltipNews(this.chartData,a),t.newsTooltip.init()}},g.prototype.updateNewsBubbles=function(){var t=this.chartData.getServerPeriod();this.techChart.configuration.timeframesForNews.indexOf(t)>=0&&this.updateBubbles(this.newsBubbles,0,this.w-this.clipPathOffset,this.chartData.newsData.news,this.newsBubblesContainer,"NewsBubble")},g.prototype.removeAllNewsBubbles=function(){for(var t=0;t<this.newsBubbles.length;t++)this.newsBubbles[t].remove();this.newsBubbles=[]},g.prototype.createNewsBubbles=function(t){this.newsBubbles=p.a.getBubbles(this.chartData,t,"NewsBubble")},g.prototype.setRecreateNewsBubblesTimeout=function(){var t=this,a=setTimeout(function(){t.processRecreateNewsBubbles(t,a)},250);this.recreateNewsBubblesTimeout=a},g.prototype.processRecreateNewsBubbles=function(t,a){t.recreateNewsBubblesTimeout===a&&(t.removeAllNewsBubbles(),t.setGetNewsTimeout(),t.updateNewsBubbles(),t.resizeBubbles(t.newsBubbles,t.chartData.candleWidth),t.recreateNewsBubblesTimeout=null,t=null)},g.prototype.moveEventsBubblesY=function(t){this.moveBubblesY(t,this.eventsBubbles)},g.prototype.moveEventsBubblesX=function(t){this.moveBubblesX(t,this.eventsBubbles)},g.prototype.showEventsBubbles=function(){this.showBubbles(this.eventsBubbles,this.eventsBubblesContainer)},g.prototype.resizeEventsBubbles=function(){this.resizeBubbles(this.eventsBubbles,this.chartData.candleWidth),this.setRecreateEventsBubblesTimeout()},g.prototype.removeEventsTooltip=function(){this.removeBubblesTooltip(this.eventsBubbles)},g.prototype.focusEventsBubbles=function(t,a){for(var e=0;e<this.eventsBubbles.length;e++){if(this.eventsBubbles[e].isFocused(t,a)){setTimeout(this.processEventsBubbleFocus.bind(this,this.eventsBubbles[e]),400),this.eventsBubbles[e].isBubbleFocused=!0;break}if(this.eventsBubbles[e].isBubbleFocused){this.eventsBubbles[e].isBubbleFocused=!1;break}this.eventsBubbles[e].tooltip&&(this.eventsBubbles[e].isBubbleFocused=!1,this.eventsBubbles[e].hideTooltip("eventsTooltip"))}},g.prototype.processEventsBubbleFocus=function(t){if(this.newsTooltipContainer.classList.contains("tch-hidden")&&t.isBubbleFocused)if(t.tooltip)""===t.tooltip.parentDiv.innerHTML?t.tooltip.refresh():t.tooltip&&t.tooltip.leaveTimeout&&(clearTimeout(t.tooltip.leaveTimeout),t.tooltip.leaveTimeout=null);else{var a={bubble:t};t.tooltip=new TooltipEvents(this.chartData,a),t.tooltip.init()}},g.prototype.updateEventsBubbles=function(){var t=this.chartData.getServerPeriod();this.techChart.configuration.timeframesForEvents.indexOf(t)>=0&&this.updateBubbles(this.eventsBubbles,0,this.w-this.clipPathOffset,this.chartData.eventsData.events,this.eventsBubblesContainer,"EventsBubble")},g.prototype.removeAllEventsBubbles=function(){for(var t=0;t<this.eventsBubbles.length;t++)this.eventsBubbles[t].remove();this.eventsBubbles=[]},g.prototype.createEventsBubbles=function(t){this.eventsBubbles=p.a.getBubbles(this.chartData,t,"EventsBubble")},g.prototype.setRecreateEventsBubblesTimeout=function(){var t=this,a=setTimeout(function(){t.processRecreateEventsBubbles(t,a)},250);this.recreateEventsBubblesTimeout=a},g.prototype.processRecreateEventsBubbles=function(t,a){t.recreateEventsBubblesTimeout===a&&(t.removeAllEventsBubbles(),t.setGetEventsTimeout(),t.updateEventsBubbles(),t.resizeBubbles(t.eventsBubbles,t.chartData.candleWidth),t.recreateEventsBubblesTimeout=null,t=null)},g.prototype.moveBubblesX=function(t,a){if(a.length)for(var e=0;e<a.length;e++)a[e].moveBubbleX(t)},g.prototype.moveBubblesY=function(t,a){if(a.length)for(var e=0;e<a.length;e++)a[e].moveBubbleY(t)},g.prototype.resizeBubbles=function(t,a){for(var e=0;e<t.length;e++)t[e].updatePixels(),t[e].resize(a)},g.prototype.showBubbles=function(t,a){for(var e=0;e<t.length;e++)t[e].parent||t[e].show(a)},g.prototype.removeBubblesTooltip=function(t){for(var a=0;a<t.length;a++)t[a].removeTooltip()},g.prototype.getExtraIntervalToRight=function(t){if(0===this.showData.length)return[];var a=this.showData[0].date,e=this.showData[this.showData.length-1].date;return t.length&&(e=t[0].getMaxItemsDate()),{from:e,to:a}},g.prototype.getExtraIntervalToLeft=function(t){if(0===this.showData.length)return[];var a=this.showData[0].date;return t.length&&(a=t[t.length-1].getMinItemsDate()),{from:this.showData[this.showData.length-1].date,to:a}},g.prototype.deleteRedundantBubblesLeftRight=function(t,a,e){p.a.deleteRedundantBubblesLeftRight(t,a,e)},g.prototype.needsBubblesToLeft=function(t,a){return 0===t.length||parseFloat(t[t.length-1].point.x)>a},g.prototype.needsBubblesToRight=function(t,a){return 0===t.length||parseFloat(t[0].point.x)<a},g.prototype.updateBubbles=function(t,a,e,i,s,r){t.length?(this.needsBubblesToLeft(t,a)&&this.addBubblesToLeft(t,s,i,r),this.needsBubblesToRight(t,e)&&this.addBubblesToRight(t,s,i,r)):(this.createBubblesByType(i,r),this.showBubblesByType(r)),this.deleteRedundantBubblesLeftRight(t,a,e)},g.prototype.addBubblesToRight=function(t,a,e,i){var s=this.getExtraIntervalToRight(t),r=p.a.getBubbles(this.chartData,e,i,s.from,s.to);this.addExtraBubblesToRight(t,r,a)},g.prototype.addBubblesToLeft=function(t,a,e,i){var s=this.getExtraIntervalToLeft(t),r=p.a.getBubbles(this.chartData,e,i,s.from,s.to);this.addExtraBubblesToLeft(t,r,a)},g.prototype.addExtraBubblesToRight=function(t,a,e){if(a.length)for(var i=0;i<a.length;i++)p.a.isTouch(t[0],a[i])?t[0].items=a[i].items.concat(t[0].items):(a[i].show(e),t.unshift(a[i]))},g.prototype.addExtraBubblesToLeft=function(t,a,e){if(a.length)for(var i=0;i<a.length;i++)p.a.isTouch(t[t.length-1],a[i])?t[t.length-1].items=t[t.length-1].items.concat(a[i].items):(a[i].show(e),t.push(a[i]))},g.prototype.createBubblesByType=function(t,a){this["create"+a+"s"](t)},g.prototype.showBubblesByType=function(t){this["show"+t+"s"]()},g.prototype.updateSignals=function(){this.techChart.configuration.modules.signals&&(this.signalsPanel||this.createSignalsPanel(),this.signals=Object.keys(this.chartData.signalsData),this.signalsPanel.spanNumber.textContent=this.signals.length,this.fillSignalsPanelBody(),this.checkActiveSignalRelevance())},g.prototype.getSignalsPanelHtml=function(){var t=this.chartData.isShowSignalsBody?"tch-up":"tch-down",a=this.chartData.isShowAllSignals?"tch-eye-active":"",e=this.chartData.isShowSignalsBody?"":"tch-hidden";return"<div class='tch-signals-panel-header'><span>"+this.techChart.translation.signals+"</span><span class='tch-signals-number'></span><span class='tch-signals-eye "+a+"'></span><span class='tch-signals-arrow "+t+"'></span></div></div><div class='tch-signals-panel-body "+e+"'><ul></ul></div>"},g.prototype.getSignalsBodyRow=function(t){var a=this.chartData.signalsData[t],e=a.isVisible?"tch-eye-active":"";return"<li id='"+a.id+"'><span class='tch-signals-period'>"+a.period+"</span><span>"+a.forecast+"</span><span>"+a.strength+"</span><span class='tch-signals-eye "+e+"'></span></li>"},g.prototype.fillSignalsPanelBody=function(){this.signalsPanel.body.list.innerHTML=this.getSignalsBodyRows(this.signals),this.addSignalsPanelBodyEvents()},g.prototype.addSignalsPanelBodyEvents=function(){for(var t=this.signalsPanel.body.querySelectorAll(".tch-signals-eye"),a=this,e=0;e<t.length;e++)t[e].onclick=function(t){a.signalsPanelBodyEyeClick(t)};for(var i=this.signalsPanel.body.querySelectorAll(".tch-signals-period"),s=0;s<i.length;s++)i[s].onclick=function(t){a.signalsPanelBodyPeriodClick(t)}},g.prototype.signalsPanelBodyPeriodClick=function(t){var a=t.target.parentNode.getAttribute("id"),e=this.chartData.signalsData[a].period;this.chartData.isShowAllSignals=!0,this.hideSignals(e),this.chartData.signalsData[a].isVisible=!0,this.chartData.techChart.changePeriod(e),this.chartData.techChart.changeTypeData("mid",this.chartData.techChart),this.chartData.techChart.autoSaveParams()},g.prototype.signalsPanelBodyEyeClick=function(t){var a=t.target.classList.toggle("tch-eye-active"),e=t.target.parentNode.getAttribute("id");if(a)if(this.activeSignal){var i=this.chartData.signalsData[e].period;this.hideSignals(i),this.chartData.signalsData[e].isVisible=!0,this.closeOtherEyes(e,i),this.signalsPanel.spanEye.classList.toggle("tch-eye-active",!0),this.chartData.isShowAllSignals=!0,this.drawActiveSignal()}else this.signalsPanelBodyPeriodClick(t);else this.activeSignal&&this.activeSignal.id===parseInt(e)&&(this.chartData.signalsData[e].isVisible=!1,this.clearSignals());this.chartData.techChart.autoSaveParams()},g.prototype.closeOtherEyes=function(t,a){for(var e=this.signalsPanel.getElementsByTagName("li"),i=0;i<e.length;i++)e[i].id!==t&&e[i].children[0].textContent===a&&e[i].children[3].classList.toggle("tch-eye-active",!1)},g.prototype.getSignalsBodyRows=function(t){for(var a="",e=0;e<t.length;e++)t[e].isVisible&&this.signalsPanel.spanEye.classList.toggle("tch-eye-active",!0),a+=this.getSignalsBodyRow(t[e]);return a},g.prototype.createSignalsPanel=function(){this.techChart.configuration.modules.signals&&!this.signalsPanel&&(this.signalsPanel=this.chartData.techChart.createSignalsPanel(),this.addSignalsPanelEvents())},g.prototype.addSignalsPanelEvents=function(){var t=this;this.signalsPanel.spanArrow.onclick=function(a){t.signalsPanelSpanArrowClick(a,t)},this.signalsPanel.spanEye.onclick=function(a){t.signalsPanelSpanEyeClick(a)}},g.prototype.signalsPanelSpanArrowClick=function(t){var a=t.target.classList.contains("tch-up");t.target.classList.toggle("tch-up",!a),t.target.classList.toggle("tch-down",a),this.signalsPanel.body.classList.toggle("tch-hidden",a),this.chartData.isShowSignalsBody=!a,this.chartData.techChart.autoSaveParams()},g.prototype.signalsPanelSpanEyeClick=function(t){if(this.chartData.isShowAllSignals=!this.chartData.isShowAllSignals,t.target.classList.toggle("tch-eye-active",this.chartData.isShowAllSignals),this.chartData.isShowAllSignals)this.drawActiveSignal();else{for(var a=this.signalsPanel.body.querySelectorAll(".tch-signals-eye"),e=0;e<a.length;e++)a[e].classList.toggle("tch-eye-active",!1);for(var i in this.chartData.signalsData)this.chartData.signalsData.hasOwnProperty(i)&&(this.chartData.signalsData[i].isVisible=!1);this.clearSignals()}this.chartData.techChart.autoSaveParams()},g.prototype.drawActiveSignal=function(){var t=this.getActiveSignalData();this.activeSignal&&this.clearSignals(),t&&(this.activeSignal=new Signal(this.chartData,{signal:t}),this.redrawActiveSignal())},g.prototype.getActiveSignalData=function(){var t=null,a=this.techChart.store.getChartData().convertValueToServerPeriod(this.chartData.period);for(var e in this.chartData.signalsData)if(this.chartData.signalsData.hasOwnProperty(e)&&this.chartData.signalsData[e].isVisible&&this.chartData.signalsData[e].period===a){t=this.chartData.signalsData[e];break}return t},g.prototype.hideSignals=function(t){for(var a in this.chartData.signalsData)this.chartData.signalsData.hasOwnProperty(a)&&this.chartData.signalsData[a].period===t&&(this.chartData.signalsData[a].isVisible=!1)},g.prototype.redrawActiveSignal=function(){this.chartData.isShowAllSignals&&"mid"===this.chartData.typeData?(this.clearSignals(),this.activeSignal.calcPoints(),this.activeSignal.draw(this.canvasSignalsContext)):this.clearSignals()},g.prototype.checkActiveSignalRelevance=function(){this.activeSignal&&-1===this.signals.indexOf(this.activeSignal.id.toString())&&(this.activeSignal=null,this.clearSignals())}},"./src/scripts/preBuild/ChartData.js":function(t,a,e){"use strict";e.d(a,"a",function(){return p});var i=e("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=e.n(i),r=e("./node_modules/@babel/runtime/helpers/createClass.js"),n=e.n(r),o=(e("./src/scripts/Connector/ConnectorWidgets.js"),e("./src/scripts/Libs/LibCanvas.js")),h=e("./src/scripts/Indicators/Indicator.js"),c=e("./src/scripts/Drawing/DrawingObject.js"),l=e("./src/scripts/News/Bubble.js"),d=e("./src/scripts/utils/utils.js"),p=function(){function ChartData(t){s()(this,ChartData),t.store.setChartData(ChartData),this.techChart=t,this.defParams={pair:t.configuration.pair,period:t.configuration.period,timeMode:t.configuration.timeMode,chartType:t.configuration.chartType,indicators:t.configuration.indicators,currentValue:t.configuration.currentValue,drawingObjects:[],typeData:t.configuration.typeData,currentOptions:{},isMagnetMode:t.configuration.isMagnetMode,isStayDrawingMode:t.configuration.isStayDrawingMode,isShowDrawingObjects:t.configuration.isShowDrawingObjects,isDrawingObjectsLocked:t.configuration.isDrawingObjectsLocked,isPipsShow:t.configuration.isPipsShow,cursorType:t.configuration.defaultParams.cursorType},ChartData.defaultParams=this.defParams,this.colors=Object(d.b)(t.styles.colors),this.options=Object(d.b)(t.styles.options),t.styles.themes&&(this.themes=Object(d.b)(t.styles.themes)),this.id=t.configuration.pair.ID,this.chartType=t.configuration.chartType,this.period=t.configuration.period,this.timeMode=t.configuration.timeMode,this.indicators=Object(d.b)(t.configuration.indicators),this.currentValue={ask:"0.00000",bid:"0.00000",mid:"0.00000"},this.pair=Object(d.b)(t.configuration.pair),this.localization=navigator.language,this.quotationName=t.configuration.quotationName,this.data={ask:[],bid:[],mid:[]},this.images=Object(d.b)(t.configuration.images),this.hasPrevData=!0,this.hasNextData=t.configuration.hasNextData,this.rightPadding=t.configuration.rightPadding,this.startDateSeconds,this.spacing,this.candleWidth=t.configuration.candleWidth,this.dataOffset=t.configuration.dataOffset,this.precission=t.configuration.precission,this.session,this.isWaitForData=!1,this.isWaitFallBackData=!1,this.chart,this.marginTop=t.configuration.marginTop,this.marginBottom=t.configuration.marginBottom,this.scaleParams=Object(d.b)(t.configuration.scaleParams),this.numb=t.configuration.numb,this.fallBack=t.configuration.fallBack,this.zoomView=t.configuration.zoomView,this.startX=this.candleWidth,this.startY=t.configuration.startY,this.state=t.configuration.state,this.drawingObjects=Object(d.b)(t.configuration.drawingObjects),this.editDrawingObject,this.activeDrawingObject,this.isDrawingObjectsLocked=t.configuration.isDrawingObjectsLocked,this.isStayDrawingMode=t.configuration.isStayDrawingMode,this.isShowNews=t.configuration.modules.isShowNews,this.isShowEvents=t.configuration.modules.isShowEvents,this.isShowDrawingObjects=!0,this.isMagnetMode=!1,this.isPipsShow=t.configuration.isPipsShow,this.cursorType="arrow",this.getDataOtherChartTimeOut=null,this.zoomData={},this.zoomSteps=[],this.newsData={currentFrom:null,currentTo:null,news:[]},this.eventsData={apiFrom:null,apiTo:null,currentFrom:null,currentTo:null,events:[]},this.typeData=t.configuration.typeData,this.signalsData={},this.isShowAllSignals=!1,this.isShowSignalsBody=!1,this.isShowPriceLineOfLastBar=t.configuration.modules.chartElements.isShowPriceLineOfLastBar,this.closedOption=null,this.currentTabId=null}return n()(ChartData,[{key:"defaultParams",get:function get(){return this.defParams}}]),ChartData}();p.prototype.setDefaultParams=function(){this.id!==p.defaultParams.pair.ID&&(this.data={ask:[],bid:[],mid:[]}),this.id=this.defaultParams.pair.ID,this.period=this.defaultParams.period,this.chartType=this.defaultParams.chartType,this.pair=Object(d.b)(this.defaultParams.pair),this.colors=Object(d.b)(p.colors),this.options=Object(d.b)(p.options),this.indicators=[],this.currentValue=this.defaultParams.currentValue,this.state="default",this.drawingObjects=[],this.scaleParams={minB:"0.00000",maxB:"0.00000",deltaY:0,minV:0,maxV:0},this.candleWidth=6,this.zoomView=1,this.typeData=this.defaultParams.typeData,this.currentOptions=this.defaultParams.currentOptions},p.prototype.setDefaultParamsOnUpdate=function(){return{timeMode:this.defaultParams.timeMode,currentValue:this.defaultParams.currentValue,typeData:this.defaultParams.typeData,currentOptions:this.defaultParams.currentOptions}},p.prototype.init=function(){this.techChart.connector.addListener(this),this.techChart.connector&&this.techChart.connector.client&&this.techChart.connector.client.connected&&this.techChart&&this.techChart.connector.updateSubscription()},p.prototype.onConnectorMessage=function(t,a,e){e&&e.callBack?e.callBack(t,a,e):a.onMessage(t,a)},p.prototype.onMessage=function(t,a){t.rates?a.processRates(t,a):a.processSignals(t,a)},p.prototype.onConnect=function(){this.isWaitForData=!1,this.getFirstData(),this.techChart.configuration.modules.signals&&this.setSignalsInterval()},p.prototype.getMiddlePrice=function(t){return((parseFloat(t.ask)+parseFloat(t.bid))/2).toFixed(this.precission)},p.prototype.processRates=function(t,a){if(t.rates)for(var e=0;e<t.rates.length;e++)if(t.rates[e].security===a.pair.Name){var i={};i.ask=t.rates[e].ask,i.bid=t.rates[e].bid,i.mid=this.getMiddlePrice(t.rates[e]),this.currentValue.ask===i.ask&&this.currentValue.bid===i.bid||(this.chart?this.chart.drawCurrent(i):this.updateCurrentData(i));break}if(this.chart&&t.investarenaTime&&a.data[1]&&parseInt(t.rates[0].timestamp)-parseInt(a.data[1].date)>this.getCurrentTimeStepByServerPeriod(a.period)&&this.chart.updateChart(Object.assign({},a.data[0]),this,{}),this.chart&&t.bars&&a.data&&a.data.bid.length&&t.bars.length&&t.bars[0].name===a.pair.Name)if(t.bars[0].prevBar.bid.date>=a.data.bid[0].date){var s={bid:a.data.bid[0],ask:a.data.ask[0],mid:a.data.mid[0]};this.chart.updateChart(Object.assign({},s),this,{});var r=this.chart.clearInfo();this.chart.drawCrosshair(r,r.canvas.height,!1),this.chart.activeSignal&&this.chart.redrawActiveSignal()}else this.chart.getCurrentDataComplete(this.chart,[t.bars[0].currentBar,t.bars[0].prevBar]);if(t.mdata){if(t.mdata.args.id!==this.pair.ID||t.mdata.args.period!==this.getServerPeriod())return;"update"===t.mdata.cmd&&this.data&&this.data.bid&&this.data.bid.length&&t.mdata.args.bar.bid.date>=this.data.bid[0].date&&this.addDataOnUpdate(Object.assign({},t.mdata.args.bar))}},p.prototype.getFirstData=function(){if(this.techChart.connector&&this.techChart.connector.client&&this.techChart.connector.client.connected&&this.techChart&&!this.isWaitForData){var t={pair:this.pair,period:this.period,startSeconds:this.startDateSeconds,numb:this.numb+this.fallBack,listener:this,callBack:this.getFirstDataComplete,cmd:"getFirstData",fromServer:!0,typeData:this.typeData};this.getDataOtherChart(t)||(this.isWaitForData=!0,this.techChart.connector.getBars(t),this.techChart.configuration.modules.signals&&(this.techChart.connector.getAutoChartistSignals(),"ConnectorWidgets"===this.techChart.connector.constructor.name&&this.techChart.connector.getAutoChartistSignalsList()))}},p.prototype.getDataOtherChart=function(t){for(var a=t.listener,e=0;e<a.techChart.charts.length;e++)if(a.techChart.charts[e].chartData.pair.ID===a.pair.ID&&a.techChart.charts[e].chartData.period===a.period){if(a.techChart.charts[e].chartData.isWaitForData)return clearTimeout(a.getDataOtherChartTimeOut),a.getDataOtherChartTimeOut=setTimeout(function(){a.getDataOtherChart(t),a=null},500),!0;if(this.techChart.charts[e].chartData.data.bid.length>this.data.bid.length){var i=this.createResultFromOtherChartData(this.techChart.charts[e].chartData);return t.fromServer=!1,this.onConnectorMessage(i,this,t),!0}}return!1},p.prototype.createResultFromOtherChartData=function(t){var a=JSON.parse(JSON.stringify(t.data)),e={};return e.bars=a,e.precission=t.precission,e.currentValue={},e.currentValue.ask=t.currentValue.ask,e.currentValue.bid=t.currentValue.bid,e.currentValue.mid=t.currentValue.mid,e.quotation=t.quotationName,e.session=t.session,e},p.prototype.getFirstDataComplete=function(t,a,e){var i=t.bars;a.isWaitForData=!1,i&&0!==i.bid.length&&(a.precission=t.precission,a.data=i,0===parseFloat(a.currentValue.bid)&&(a.currentValue.ask=a.data.ask[0].close,a.currentValue.bid=a.data.bid[0].close,a.currentValue.mid=a.data.mid[0].close),a.startDateSeconds=a.data.bid[0].date,a.setHasData(a,i,e.numb),a.updateChartDataOnComplete(t,a),a.chart&&a.chart.init())},p.prototype.getDataOnUpdate=function(t,a){var e={pair:t.pair,period:t.period,startSeconds:t.startDateSeconds,numb:1,callBack:a,cmd:"getDataOnUpdate"};this.techChart.connector.getBars(e)},p.prototype.getExtraData=function(t,a,e,i){if(!this.isWaitForData){var s=this,r={pair:s.pair,period:s.period,startSeconds:a,numb:e>0?e+s.fallBack:e-s.fallBack,callBack:i,listener:s,cmd:"getDataFromSeconds"};this.getDataOtherChart(r)?s=null:this.techChart.connector.getBars(r)}},p.prototype.getExtraDataOnInitComplete=function(t,a,e){if(t){var i=t.bars;i&&0!==i.bid.length&&(a.setHasData(a,i,e.numb),a.precission=t.precission,a.addBarsToEnd(a,i),a.updateChartDataOnComplete(t,a),a.chart.init())}},p.prototype.getFallBackDataOnMoveToRightComplete=function(t,a,e){if(a.isWaitForData=!1,t){var i=t.bars;i&&0!==i.length&&(a.setHasData(a,i,e.numb),a.precission=t.precission,a.addBarsToEnd(a,i),a.updateChartDataOnComplete(t,a),a.chart.getFallBackDataOnMoveToRightComplete(a.chart,i))}},p.prototype.getExtraDataOnMoveToRightComplete=function(t,a,e){if(a.newsDataMoving=1,a.isWaitForData=!1,t){var i=t.bars;i&&0!==i.length&&(a.setHasData(a,i,e.numb),a.precission=t.precission,a.addBarsToEnd(a,i),a.updateChartDataOnComplete(t,a),a.chart.getDataOnMoveToRightComplete(a.chart,i))}},p.prototype.getFallBackDataOnMoveToLeftComplete=function(t,a,e){a.isWaitForData=!1;var i=[];if(t){if(i=t.bars,a.setHasData(a,i,e.numb),!i||0===i.length)return;a.precission=t.precission,a.addBarsToStart(a,i),a.updateChartDataOnComplete(t,a)}a.chart.getFallBackDataOnMoveToLeftComplete(a.chart,i)},p.prototype.getExtraDataOnMoveToLeftComplete=function(t,a,e){if(this.newsDataMoving=-1,a.isWaitForData=!1,!t){var i=t.bars;i&&0!==i.length&&(a.setHasData(a,i,e.numb),a.precission=t.precission,a.addBarsToStart(a,i),a.updateChartDataOnComplete(t,a),a.chart.getDataOnMoveToLeftComplete(a.chart,i))}},p.prototype.addBarsToEnd=function(t,a){for(var e=0;e<a.bid.length;e++)t.data.bid&&0!==t.data.bid.length||(t.data={bid:[],ask:[],mid:[]},t.data.bid.push(a.bid[e]),t.data.ask.push(a.ask[e]),t.data.mid.push(a.mid[e])),a.bid[e].date<t.data.bid[t.data.bid.length-1].date&&(t.data.bid.push(a.bid[e]),t.data.ask.push(a.ask[e]),t.data.mid.push(a.mid[e]))},p.prototype.addBarsToStart=function(t,a){for(var e=a.bid.length-1;e>=0;e--)t.data.bid&&0!==t.data.bid.length||(t.data={bid:[],ask:[],mid:[]},t.data.bid.unshift(a.bid[e]),t.data.ask.unshift(a.ask[e]),t.data.mid.unshift(a.mid[e])),a.bid[e].date>t.data.bid[t.data.bid.length-1].date&&(t.data.bid.unshift(a.bid[e]),t.data.ask.unshift(a.ask[e]),t.data.mid.unshift(a.mid[e]))},p.prototype.updateChartDataOnComplete=function(t,a){t.quotation&&(a.quotationName=t.quotation),t.session&&(a.session=t.session),this.updateIndicatorsData()},p.prototype.setHasData=function(t,a,e){e>0?t.hasPrevData=a.bid.length>=e:t.hasNextData=a.bid.length>=Math.abs(e)},p.prototype.processData=function(t){for(var a=[],e=0;e<t.length;e++)if(!(t[e-1]&&t[e]&&t[e].T>=t[e-1].T)){var i=parseFloat(t[e].LB).toFixed(this.precission),s=parseFloat(t[e].HB).toFixed(this.precission),r=parseFloat(t[e].OB).toFixed(this.precission),n=parseFloat(t[e].CB).toFixed(this.precission),o=t[e].T,h={lowBid:i,highBid:s,openBid:r,closeBid:n,lowAsk:parseFloat(t[e].LA).toFixed(this.precission),highAsk:parseFloat(t[e].HA).toFixed(this.precission),openAsk:parseFloat(t[e].OA).toFixed(this.precission),closeAsk:parseFloat(t[e].CA).toFixed(this.precission),date:o};a.push(h)}return a},p.prototype.addDataOnUpdate=function(t){var a=this.data;if(a.bid[0]||a.bid[0].isCurrentData){a.ask[0]=t.ask,a.bid[0]=t.bid,a.mid[0]=t.mid;var e={};e.bid=this.createCurrentDataItem(a.bid[0],this.currentValue.bid),e.ask=this.createCurrentDataItem(a.ask[0],this.currentValue.ask),e.mid=this.createCurrentDataItem(a.mid[0],this.currentValue.mid),a.bid.unshift(e.bid),a.ask.unshift(e.ask),a.mid.unshift(e.mid),this.startDateSeconds=e.bid.date,this.chart&&(this.chart.updateChart(null,this,{}),this.chart.getStepedCursorParamsX(this.chart.crosshair.params.x,this.chart.showData[0],this.chart.showData[this.chart.showData.length-1],this.chart.showData[1]))}},p.prototype.updateCurrentData=function(t){if(t.bid=t.bid.replace(",","."),t.ask=t.ask.replace(",","."),t.mid=t.mid.replace(",","."),this.currentValue=t,this.data&&this.data.bid&&0!==this.data.bid.length){if(this.data.bid[0].isCurrentData)this.updateBarHighLow(t,this.data,this.typeData,0);else{var a=this.createCurrentDataItem(this.data.bid[0],t.bid);this.data.bid.unshift(a),a=this.createCurrentDataItem(this.data.ask[0],t.ask),this.data.ask.unshift(a),a=this.createCurrentDataItem(this.data.mid[0],t.mid),this.data.mid.unshift(a)}this.startDateSeconds=this.data.bid[0].date}},p.prototype.updateBarHighLow=function(t,a,e,i){var s=parseFloat(t[e]);s>parseFloat(a[e][i].high)?a[e][i].high=t[e]:s<parseFloat(a[e][i].low)&&(a[e][i].low=t[e]),a[e][i].close=t[e]},p.prototype.createCurrentDataItem=function(t,a){var e=parseFloat(t.close),i=parseFloat(a),s=e<i?t.close:a,r=e>i?t.close:a;return{open:t.close,close:a,low:s,high:r,date:t.date+this.getCurrentTimeStep(),isCurrentData:!0}},p.prototype.processRates_WebApp=function(t){var a=this.data,e=this.chart;if(this.currentValue.ask=t.ask.close,this.currentValue.bid=t.bid.close,this.currentValue.mid=t.mid.close,a.ask[0].close=t.ask.close,a.ask[0].open=t.ask.open,a.ask[0].low=t.ask.low,a.ask[0].high=t.ask.high,a.bid[0].close=t.bid.close,a.bid[0].open=t.bid.open,a.bid[0].low=t.bid.low,a.bid[0].high=t.bid.high,a.mid[0].close=t.mid.close,a.mid[0].open=t.mid.open,a.mid[0].low=t.mid.low,a.mid[0].high=t.mid.high,e){var i={ask:t.ask.close,bid:t.bid.close,mid:t.mid.close};if(e.isDrawCurrentShowData(this,e.showData)){if(e.updateCurrentData(i),this.options.Chart.autoScale&&(parseFloat(i[this.typeData])>this.scaleParams.maxV||parseFloat(i[this.typeData])<this.scaleParams.minV)){var s=e.getScaleParams(e.selectedData,e.h,this.precission);if(isNaN(parseFloat(s.minB))&&isNaN(parseFloat(s.maxB))&&isNaN(parseFloat(s.deltaY)))return;this.options.Chart.scaleSeriesOnly||e.resizeShowDataByTrendIndicators(),(s.minB<this.scaleParams.minB||s.maxB>this.scaleParams.maxB)&&(this.scaleParams=s,e.resizeShowDataValuesY(e.showData,e.h,this.scaleParams),e.draw(e.showData,e.h),e.valueAxis=e.getValueAxis(this.scaleParams.minB,this.scaleParams.maxB,e.valueAxisCount,e.w,e.h,this.options.Chart.scalesFontSize,this.precission,e.offY),e.getOscillatorChartsAxis(),e.clearGrid(),e.drawValueAxis(e.valueAxis),e.drawOscillatorChartsAxis(),e.drawTimeAxis(e.timeAxis),e.drawChartBorder())}var r=e.canvasRateNormalContext,n=e.canvasRatePixelatedContext;o.a.clearRect(null,r,0,0,r.canvas.width,r.canvas.height),o.a.clearRect(null,n,0,0,n.canvas.width,n.canvas.height),e.drawCurrentShowData(i,t),this.updateCurrentIndicatorsData(),e.redrawOscillators();var h,c=e.constructor.name;switch(c){case"BarChart":case"HollowChart":case"CandleChart":h=this.colors[c].candleBear;break;case"LineChart":case"AreaChart":h=this.colors[c].priceLine}e.drawCurrentLabel(i,h,!0,!1,this.colors[c])}else e.redrawCurrentPriceLine(this.currentValue)}},p.prototype.getIndicatorIndex=function(t,a){for(var e=0;e<t.length;e++)if(t[e].id===a.id)return e;return-1},p.prototype.clearIndicatorsData=function(){for(var t=0;t<this.indicators.length;t++)this.indicators[t].data={},this.indicators[t].showData=[]},p.prototype.updateIndicatorsData=function(){for(var t=0;t<this.indicators.length;t++)if(this.indicators[t].createData(this.data[this.typeData]),this.indicators[t].createShowData(),"oscillator"===this.indicators[t].type){if(!(Object.keys(this.indicators[t].data).length>1))return;this.chart.getOscillatorsScaleParams()}this.chart&&this.chart.draw(this.chart.showData,this.chart.h)},p.prototype.updateCurrentIndicatorsData=function(){for(var t=0;t<this.indicators.length;t++)this.indicators[t].createCurrentValue(this.data[this.typeData]),this.indicators[t].createShowData()},p.prototype.getOscillatorChartsPrecission=function(){for(var t=0,a=0;a<this.indicators.length;a++)"oscillator"===this.indicators[a].type&&t<this.indicators[a].oscillatorPrecission&&(t=this.indicators[a].oscillatorPrecission);return t},p.prototype.getCurrentTimeStep=function(){switch(this.period.toString()){case"1":return 60;case"5":return 300;case"15":return 900;case"30":return 1800;case"60":return 3600;case"Hour4":return 14400;case"Hour8":return 28800;case"Day":return 86400;case"Week":return 604800;case"Month":return 24*this.getDaysInMonth((new Date).getMonth(),(new Date).getFullYear())*60*60;default:return 60}},p.prototype.getServerPeriod=function(){return p.convertValueToServerPeriod(this.period.toString())},p.prototype.getDaysInMonth=function(t,a){return new Date(a,t,0).getDate()},p.prototype.waitForData=function(t,a){!function run(){t.isWaitForData?(clearTimeout(t.waitForDataTimer),t.waitForDataTimer=setTimeout(run,1)):(clearTimeout(t.waitForDataTimer),a(t))}()},p.cloneCircle=function(t){for(var a=[],e=0;e<t.length;e++)a.push(t[e].convertToDTOCircle());return a},p.convertDrawingObjects=function(t,a){for(var e=[],i=0;i<t.length;i++){var s=LibDrawing.createDrawingObjectByType(t[i].type,[a,t[i]]);for(var r in t[i])s[r]=t[i][r];s.state="normal",e.push(s)}return e},p.convertValueToPeriod=function(t){switch(t){case"1":return"1";case"5":return"5";case"15":return"15";case"30":return"30";case"60":return"60";case"Hour4":return"Hour4";case"Hour8":return"Hour8";case"Day":return"Day";case"Week":return"Week";case"Month":return"Month";case"Minute":return"1";case"Minute5":return"5";case"Minute15":return"15";case"Minute30":return"30";case"Hour":default:return"60"}},p.convertValueToServerPeriod=function(t){switch(t){case"1":return"Minute";case"5":return"Minute5";case"15":return"Minute15";case"30":return"Minute30";case"60":return"Hour";case"Hour4":return"Hour4";case"Hour8":return"Hour8";case"Day":return"Day";case"Week":return"Week";case"Month":return"Month";case"Minute":return"Minute";case"Minute5":return"Minute5";case"Minute15":return"Minute15";case"Minute30":return"Minute30";case"Hour":return"Hour";default:return"Minute"}},p.prototype.getCurrentTimeStepByServerPeriod=function(){switch(this.period.toString()){case"1":return 60;case"5":return 300;case"15":return 900;case"30":return 1800;case"60":return 3600;case"Minute":return 60;case"Minute5":return 300;case"Minute15":return 900;case"Minute30":return 1800;case"Hour":return 3600;case"Hour4":return 14400;case"Hour8":return 28800;case"Day":return 86400;case"Week":return 604800;case"Month":return 24*this.getDaysInMonth((new Date).getMonth(),(new Date).getFullYear())*60*60;default:return 60}},p.uniqueElementsByFieldName=function(t,a){for(var e=[],i=[],s=0;s<t.length;s++)e.indexOf(t[s][a])>-1||(e.push(t[s][a]),i.push(t[s]));return e=null,i},p.getNamePeriod=function(t){var a=t;for(var e in this.techChart.periods())this.techChart.periods()[e].value===t&&(a=this.techChart.translation[this.techChart.periods()[e].key]);return a},p.convertDataToMs=function(t){return new Date(t).getTime()/1e3},p.prototype.formatFloat=function(t){if(0==t)return 0;if(t&&isFinite(t)){var a="";t<0&&(a="-",t=-t);var e=""+t,i=e.indexOf(".");if(-1===i&&(i=e.length),i<=3)return a+e;for(var s="",r=0,n=i%3;n<i;n+=3)0!=n&&(s+=e.slice(r,n)+",",r=n);return a+(s+e.slice(r))}},p.prototype.formatPayout=function(t,a,e){var i=parseFloat(t);return a=a||1e8,e=e||0,i>=1e10||i<=-1e10?(i/=1e6,t=this.formatFloat(i.toFixed(e))+"M"):i>=a||i<=-1*a?(i/=1e3,t=this.formatFloat(i.toFixed(e))+"K"):t=this.formatFloat(i.toFixed(e)),t},p.prototype.convertToDTO=function(){var t={};t.id=this.id,t.chartType=this.chartType,t.cursorType=this.cursorType,t.period=this.period,t.timeMode=this.timeMode,t.source=this.source,t.options=Object(d.b)(this.options),t.colors=Object(d.b)(this.colors),t.pair=Object(d.b)(this.pair),t.candleWidth=this.candleWidth,t.scaleParams=Object(d.b)(this.scaleParams),t.startX=this.startX,t.startY=this.startY,t.isDrawingObjectsLocked=this.isDrawingObjectsLocked,t.connectorOptions=this.connectorOptions,t.indicators=this.convertIndicatorsToDTO(),t.drawingObjects=this.convertDrawingObjectsToDTO(),t.zoomData=Object(d.b)(this.zoomData),t.zoomSteps=Object(d.b)(this.zoomSteps),t.isShowDrawingObjects=this.isShowDrawingObjects,t.isStayDrawingMode=this.isStayDrawingMode,t.isMagnetMode=this.isMagnetMode,t.isPipsShow=this.isPipsShow,t.state="drawingRoulete"===t.state?"default":this.state,t.startDateSeconds=this.startDateSeconds,t.h=this.h,t.top=this.top,t.typeData=this.typeData;var a=this.parentRect,e={bottom:a.bottom,height:a.height,left:a.left,right:a.right,top:a.top,width:a.width};return t.parentRect=Object(d.b)(e),t.isShowSignalsBody=this.isShowSignalsBody,t.isShowAllSignals=this.isShowAllSignals,t.signalsData=Object(d.b)(this.signalsData),t.newsData=Object(d.b)(this.newsData),t.precission=this.precission,t.isExpired=this.isExpired,t.currentTabId=this.currentTabId,t.payout=Object(d.b)(this.payout),t.closedOption=Object(d.b)(this.closedOption),t},p.prototype.convertDrawingObjectsToDTO=function(){for(var t=[],a=0;a<this.drawingObjects.length;a++)t.push(this.drawingObjects[a].convertToDTO());return t},p.prototype.convertIndicatorsToDTO=function(){for(var t=[],a=0;a<this.indicators.length;a++)t.push(this.indicators[a].convertToDTO());return t},p.prototype.convertFromDTO=function(t){this.id=t.id,this.chartType=t.chartType,this.cursorType=t.cursorType,this.period=t.period,this.timeMode=t.timeMode,this.source=t.source,this.options=Object(d.b)(t.options),this.colors=Object(d.b)(t.colors),this.pair=Object(d.b)(t.pair),this.data={ask:[],bid:[],mid:[]},this.candleWidth=t.candleWidth,this.scaleParams=Object(d.b)(t.scaleParams),this.startX=t.startX,this.startY=t.startY,this.isDrawingObjectsLocked=t.isDrawingObjectsLocked,this.currentValue={bid:"0.00000",ask:"0.00000",mid:"0.00000"},this.connectorOptions=t.connectorOptions,this.indicators=this.convertIndicatorsFromDTO(t.indicators),this.drawingObjects=[],this.drawingObjects=this.convertDrawingObjectsFromDTO(t.drawingObjects),this.zoomData=Object(d.b)(t.zoomData),this.zoomSteps=Object(d.b)(t.zoomSteps),this.isShowDrawingObjects=t.isShowDrawingObjects,this.isStayDrawingMode=t.isStayDrawingMode,this.isMagnetMode=t.isMagnetMode,this.isPipsShow=t.isPipsShow,this.state=t.state,this.startDateSeconds=t.startDateSeconds,this.h=t.h,this.top=t.top,this.parentRect=Object(d.b)(t.parentRect),this.typeData=t.typeData,this.isShowSignalsBody=t.isShowSignalsBody,this.isShowAllSignals=t.isShowAllSignals,this.signalsData=Object(d.b)(t.signalsData),this.newsData=Object(d.b)(t.newsData),this.precission=t.precission,this.currentTabId=t.currentTabId,this.payout=Object(d.b)(t.payout),this.isExpired=!!t.isExpired&&t.isExpired,this.closedOption=t.closedOption?t.closedOption:null,this.isFreeze=!!t.isFreeze&&t.isFreeze},p.prototype.convertIndicatorsFromDTO=function(t){this.indicators=[];for(var a=[],e=0;e<t.length;e++)a.push(h.a.convertFromDTO(this,t[e]));return a},p.prototype.convertDrawingObjectsFromDTO=function(t){for(var a=[],e=0;e<t.length;e++)a.push(c.a.convertFromDTO(this,t[e]));return a},p.prototype.setSignalsInterval=function(){var t=this;this.getSignalsInterval=setInterval(function(){t.getSignals()},12e4)},p.prototype.getSignals=function(){this.techChart.connector.getAutoChartistSignals(),"ConnectorWidgets"===this.techChart.connector.constructor.name&&this.techChart.connector.getAutoChartistSignalsList()},p.prototype.processSignals=function(t,a){a.updateData(t,a)},p.prototype.updateData=function(t,a){var e=!1,i=Object.keys(t);if(0===Object.keys(a.signalsData).length&&i.length)a.signalsData=t,e=!0;else{for(var s=0;s<i.length;s++)a.signalsData[i[s]]?t[i[s]].isVisible=a.signalsData[i[s]].isVisible:e=!0;a.signalsData=t}!a.chart||!e&&a.chart.signalsPanel||a.chart.updateSignals()},p.prototype.getNews=function(t,a){if(!this.isShowNews||isNaN(t)||isNaN(a))return!1;var e=!1;if(null===this.newsData.currentFrom)this.newsData.currentFrom=t,this.newsData.currentTo=a,this.getNewsData(this.newsData.currentFrom,this.newsData.currentTo),e=!0;else{var i=this.newsData.currentFrom-t,s=a-this.newsData.currentTo;i>0?(this.getNewsData(t,this.newsData.currentFrom),this.newsData.currentFrom=t,e=!0):s>0&&(this.getNewsData(this.newsData.currentTo,a),this.newsData.currentTo=a,e=!0)}return e},p.prototype.getNewsData=function(t,a){var e={listener:this,callBack:this.getNewsDataComplete,interval:{from:t,to:a},cmd:"getNewsData"};this.techChart.connector.getNews(e)},p.prototype.getNewsDataComplete=function(t,a){t.length&&(a.updateNews(t),a.chart.updateNewsBubbles())},p.prototype.updateNews=function(t){var a=this.newsData.news.concat(t),e=p.uniqueElementsByFieldName(a,"ID");this.newsData.news=e.sort(function(t,a){var e=a.PublishDate-t.PublishDate;return 0===e?t.ID-a.ID:e})},p.prototype.getEvents=function(t,a){if(!this.isShowEvents||isNaN(t)||isNaN(a))return!1;if(!this.techChart.configuration.quotationCountries)return!1;var e=!1;if(null===this.eventsData.currentFrom)this.eventsData.currentFrom=t,this.eventsData.currentTo=a,this.eventsData.apiFrom=this.techChart.connector.convertUnixToEventsAPIDate(this.eventsData.currentFrom),this.eventsData.apiTo=this.techChart.connector.convertUnixToEventsAPIDate(this.eventsData.currentTo),this.getEventsData(this.eventsData.currentFrom,this.eventsData.currentTo),e=!0;else{var i=this.eventsData.currentFrom-t,s=a-this.eventsData.currentTo;if(i>0){var r=this.techChart.connector.convertUnixToEventsAPIDate(t);this.eventsData.apiFrom!==r&&(this.eventsData.apiFrom=r,this.getEventsData(t,this.eventsData.currentFrom),this.eventsData.currentFrom=t,e=!0)}if(s>0){var n=this.techChart.connector.convertUnixToEventsAPIDate(a);this.eventsData.apiTo!==n&&(this.eventsData.apiTo=n,this.getEventsData(this.eventsData.currentTo,a),this.eventsData.currentTo=a,e=!0)}}return e},p.prototype.getEventsData=function(t,a){var e={listener:this,callBack:this.getEventsDataComplete,interval:{from:t,to:a},lang:this.techChart.configuration.lang,cmd:"getEventsData",countries:this.techChart.configuration.quotationCountries[this.pair.Name]};this.techChart.connector.getEvents(e)},p.prototype.getEventsDataComplete=function(t,a){t.length&&(a.updateEvents(t),a.chart.updateEventsBubbles())},p.prototype.updateEvents=function(t){var a=this.eventsData.events.concat(t),e=p.uniqueElementsByFieldName(a,"IdEcoCalendarDate");this.eventsData.events=e.sort(function(t,a){return l.a.getDateEventsBubble(a)-l.a.getDateEventsBubble(t)})}},"./src/scripts/utils/utils.js":function(t,a,e){"use strict";function isObject(t){return t&&"object"===h()(t)&&!Array.isArray(t)}function cloneObject(t){if(t&&"object"===h()(t))return JSON.parse(JSON.stringify(t))}function mergeObject(){return function mergeDeep(t){for(var a=arguments.length,e=new Array(a>1?a-1:0),i=1;i<a;i++)e[i-1]=arguments[i];if(!e.length)return t;var s=e.shift();if(isObject(t)&&isObject(s))for(var r in s)isObject(s[r])?(t[r]||Object.assign(t,n()({},r,{})),mergeDeep(t[r],s[r])):Object.assign(t,n()({},r,s[r]));return mergeDeep.apply(void 0,[t].concat(e))}(cloneObject(arguments[0]),arguments[1])}function isActiveElements(t){var a=!1;return Object.keys(t).forEach(function(e){t[e]&&(a=!0)}),a}function checkConfigModules(t){return t.modules.isSideBarCreate&&(t.modules.isSideBarCreate=isActiveElements(t.modules.sideBarButtons)),t.modules.isHeaderCreate&&(t.modules.isHeaderCreate=isActiveElements(t.modules.headerButtons)),t}function filterDropdown(t,a){return t.reduce(function(t,e){return s()({},t,n()({},e,a[e]))},{})}e.d(a,"b",function(){return cloneObject}),e.d(a,"d",function(){return mergeObject}),e.d(a,"a",function(){return checkConfigModules}),e.d(a,"c",function(){return filterDropdown});var i=e("./node_modules/@babel/runtime/helpers/objectSpread.js"),s=e.n(i),r=e("./node_modules/@babel/runtime/helpers/defineProperty.js"),n=e.n(r),o=e("./node_modules/@babel/runtime/helpers/typeof.js"),h=e.n(o)},"./src/styles/common.less":function(){},2:function(t,a,e){t.exports=e("./src/scripts/TechnicalChart/TechnicalChartConstructor.js")}});